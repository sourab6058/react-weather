function Fj(e,t){for(var r=0;r<t.length;r++){const i=t[r];if(typeof i!="string"&&!Array.isArray(i)){for(const c in i)if(c!=="default"&&!(c in e)){const u=Object.getOwnPropertyDescriptor(i,c);u&&Object.defineProperty(e,c,u.get?u:{enumerable:!0,get:()=>i[c]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))i(c);new MutationObserver(c=>{for(const u of c)if(u.type==="childList")for(const p of u.addedNodes)p.tagName==="LINK"&&p.rel==="modulepreload"&&i(p)}).observe(document,{childList:!0,subtree:!0});function r(c){const u={};return c.integrity&&(u.integrity=c.integrity),c.referrerPolicy&&(u.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?u.credentials="include":c.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function i(c){if(c.ep)return;c.ep=!0;const u=r(c);fetch(c.href,u)}})();var qm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function vn(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var qL={exports:{}},Vx={},WL={exports:{}},jr={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dy=Symbol.for("react.element"),Nj=Symbol.for("react.portal"),jj=Symbol.for("react.fragment"),Uj=Symbol.for("react.strict_mode"),Vj=Symbol.for("react.profiler"),Gj=Symbol.for("react.provider"),qj=Symbol.for("react.context"),Wj=Symbol.for("react.forward_ref"),Hj=Symbol.for("react.suspense"),Zj=Symbol.for("react.memo"),Xj=Symbol.for("react.lazy"),sI=Symbol.iterator;function Kj(e){return e===null||typeof e!="object"?null:(e=sI&&e[sI]||e["@@iterator"],typeof e=="function"?e:null)}var HL={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ZL=Object.assign,XL={};function $d(e,t,r){this.props=e,this.context=t,this.refs=XL,this.updater=r||HL}$d.prototype.isReactComponent={};$d.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};$d.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function KL(){}KL.prototype=$d.prototype;function dT(e,t,r){this.props=e,this.context=t,this.refs=XL,this.updater=r||HL}var pT=dT.prototype=new KL;pT.constructor=dT;ZL(pT,$d.prototype);pT.isPureReactComponent=!0;var lI=Array.isArray,YL=Object.prototype.hasOwnProperty,mT={current:null},JL={key:!0,ref:!0,__self:!0,__source:!0};function QL(e,t,r){var i,c={},u=null,p=null;if(t!=null)for(i in t.ref!==void 0&&(p=t.ref),t.key!==void 0&&(u=""+t.key),t)YL.call(t,i)&&!JL.hasOwnProperty(i)&&(c[i]=t[i]);var o=arguments.length-2;if(o===1)c.children=r;else if(1<o){for(var v=Array(o),w=0;w<o;w++)v[w]=arguments[w+2];c.children=v}if(e&&e.defaultProps)for(i in o=e.defaultProps,o)c[i]===void 0&&(c[i]=o[i]);return{$$typeof:dy,type:e,key:u,ref:p,props:c,_owner:mT.current}}function Yj(e,t){return{$$typeof:dy,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function gT(e){return typeof e=="object"&&e!==null&&e.$$typeof===dy}function Jj(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(r){return t[r]})}var cI=/\/+/g;function Sw(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Jj(""+e.key):t.toString(36)}function Jv(e,t,r,i,c){var u=typeof e;(u==="undefined"||u==="boolean")&&(e=null);var p=!1;if(e===null)p=!0;else switch(u){case"string":case"number":p=!0;break;case"object":switch(e.$$typeof){case dy:case Nj:p=!0}}if(p)return p=e,c=c(p),e=i===""?"."+Sw(p,0):i,lI(c)?(r="",e!=null&&(r=e.replace(cI,"$&/")+"/"),Jv(c,t,r,"",function(w){return w})):c!=null&&(gT(c)&&(c=Yj(c,r+(!c.key||p&&p.key===c.key?"":(""+c.key).replace(cI,"$&/")+"/")+e)),t.push(c)),1;if(p=0,i=i===""?".":i+":",lI(e))for(var o=0;o<e.length;o++){u=e[o];var v=i+Sw(u,o);p+=Jv(u,t,r,v,c)}else if(v=Kj(e),typeof v=="function")for(e=v.call(e),o=0;!(u=e.next()).done;)u=u.value,v=i+Sw(u,o++),p+=Jv(u,t,r,v,c);else if(u==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return p}function bv(e,t,r){if(e==null)return e;var i=[],c=0;return Jv(e,i,"","",function(u){return t.call(r,u,c++)}),i}function Qj(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(r){(e._status===0||e._status===-1)&&(e._status=1,e._result=r)},function(r){(e._status===0||e._status===-1)&&(e._status=2,e._result=r)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var wo={current:null},Qv={transition:null},e6={ReactCurrentDispatcher:wo,ReactCurrentBatchConfig:Qv,ReactCurrentOwner:mT};jr.Children={map:bv,forEach:function(e,t,r){bv(e,function(){t.apply(this,arguments)},r)},count:function(e){var t=0;return bv(e,function(){t++}),t},toArray:function(e){return bv(e,function(t){return t})||[]},only:function(e){if(!gT(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};jr.Component=$d;jr.Fragment=jj;jr.Profiler=Vj;jr.PureComponent=dT;jr.StrictMode=Uj;jr.Suspense=Hj;jr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=e6;jr.cloneElement=function(e,t,r){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=ZL({},e.props),c=e.key,u=e.ref,p=e._owner;if(t!=null){if(t.ref!==void 0&&(u=t.ref,p=mT.current),t.key!==void 0&&(c=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(v in t)YL.call(t,v)&&!JL.hasOwnProperty(v)&&(i[v]=t[v]===void 0&&o!==void 0?o[v]:t[v])}var v=arguments.length-2;if(v===1)i.children=r;else if(1<v){o=Array(v);for(var w=0;w<v;w++)o[w]=arguments[w+2];i.children=o}return{$$typeof:dy,type:e.type,key:c,ref:u,props:i,_owner:p}};jr.createContext=function(e){return e={$$typeof:qj,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:Gj,_context:e},e.Consumer=e};jr.createElement=QL;jr.createFactory=function(e){var t=QL.bind(null,e);return t.type=e,t};jr.createRef=function(){return{current:null}};jr.forwardRef=function(e){return{$$typeof:Wj,render:e}};jr.isValidElement=gT;jr.lazy=function(e){return{$$typeof:Xj,_payload:{_status:-1,_result:e},_init:Qj}};jr.memo=function(e,t){return{$$typeof:Zj,type:e,compare:t===void 0?null:t}};jr.startTransition=function(e){var t=Qv.transition;Qv.transition={};try{e()}finally{Qv.transition=t}};jr.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};jr.useCallback=function(e,t){return wo.current.useCallback(e,t)};jr.useContext=function(e){return wo.current.useContext(e)};jr.useDebugValue=function(){};jr.useDeferredValue=function(e){return wo.current.useDeferredValue(e)};jr.useEffect=function(e,t){return wo.current.useEffect(e,t)};jr.useId=function(){return wo.current.useId()};jr.useImperativeHandle=function(e,t,r){return wo.current.useImperativeHandle(e,t,r)};jr.useInsertionEffect=function(e,t){return wo.current.useInsertionEffect(e,t)};jr.useLayoutEffect=function(e,t){return wo.current.useLayoutEffect(e,t)};jr.useMemo=function(e,t){return wo.current.useMemo(e,t)};jr.useReducer=function(e,t,r){return wo.current.useReducer(e,t,r)};jr.useRef=function(e){return wo.current.useRef(e)};jr.useState=function(e){return wo.current.useState(e)};jr.useSyncExternalStore=function(e,t,r){return wo.current.useSyncExternalStore(e,t,r)};jr.useTransition=function(){return wo.current.useTransition()};jr.version="18.2.0";WL.exports=jr;var Ke=WL.exports;const Ze=vn(Ke),uI=Fj({__proto__:null,default:Ze},[Ke]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var t6=Ke,r6=Symbol.for("react.element"),n6=Symbol.for("react.fragment"),i6=Object.prototype.hasOwnProperty,o6=t6.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a6={key:!0,ref:!0,__self:!0,__source:!0};function e3(e,t,r){var i,c={},u=null,p=null;r!==void 0&&(u=""+r),t.key!==void 0&&(u=""+t.key),t.ref!==void 0&&(p=t.ref);for(i in t)i6.call(t,i)&&!a6.hasOwnProperty(i)&&(c[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)c[i]===void 0&&(c[i]=t[i]);return{$$typeof:r6,type:e,key:u,ref:p,props:c,_owner:o6.current}}Vx.Fragment=n6;Vx.jsx=e3;Vx.jsxs=e3;qL.exports=Vx;var ze=qL.exports,F2={},t3={exports:{}},ia={},r3={exports:{}},n3={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(He,nt){var gt=He.length;He.push(nt);e:for(;0<gt;){var xt=gt-1>>>1,zt=He[xt];if(0<c(zt,nt))He[xt]=nt,He[gt]=zt,gt=xt;else break e}}function r(He){return He.length===0?null:He[0]}function i(He){if(He.length===0)return null;var nt=He[0],gt=He.pop();if(gt!==nt){He[0]=gt;e:for(var xt=0,zt=He.length,Vt=zt>>>1;xt<Vt;){var Zt=2*(xt+1)-1,hr=He[Zt],Tr=Zt+1,Rr=He[Tr];if(0>c(hr,gt))Tr<zt&&0>c(Rr,hr)?(He[xt]=Rr,He[Tr]=gt,xt=Tr):(He[xt]=hr,He[Zt]=gt,xt=Zt);else if(Tr<zt&&0>c(Rr,gt))He[xt]=Rr,He[Tr]=gt,xt=Tr;else break e}}return nt}function c(He,nt){var gt=He.sortIndex-nt.sortIndex;return gt!==0?gt:He.id-nt.id}if(typeof performance=="object"&&typeof performance.now=="function"){var u=performance;e.unstable_now=function(){return u.now()}}else{var p=Date,o=p.now();e.unstable_now=function(){return p.now()-o}}var v=[],w=[],A=1,T=null,P=3,$=!1,L=!1,k=!1,N=typeof setTimeout=="function"?setTimeout:null,R=typeof clearTimeout=="function"?clearTimeout:null,j=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(He){for(var nt=r(w);nt!==null;){if(nt.callback===null)i(w);else if(nt.startTime<=He)i(w),nt.sortIndex=nt.expirationTime,t(v,nt);else break;nt=r(w)}}function G(He){if(k=!1,D(He),!L)if(r(v)!==null)L=!0,bt(W);else{var nt=r(w);nt!==null&&kt(G,nt.startTime-He)}}function W(He,nt){L=!1,k&&(k=!1,R(de),de=-1),$=!0;var gt=P;try{for(D(nt),T=r(v);T!==null&&(!(T.expirationTime>nt)||He&&!Ce());){var xt=T.callback;if(typeof xt=="function"){T.callback=null,P=T.priorityLevel;var zt=xt(T.expirationTime<=nt);nt=e.unstable_now(),typeof zt=="function"?T.callback=zt:T===r(v)&&i(v),D(nt)}else i(v);T=r(v)}if(T!==null)var Vt=!0;else{var Zt=r(w);Zt!==null&&kt(G,Zt.startTime-nt),Vt=!1}return Vt}finally{T=null,P=gt,$=!1}}var Y=!1,ee=null,de=-1,xe=5,Me=-1;function Ce(){return!(e.unstable_now()-Me<xe)}function qe(){if(ee!==null){var He=e.unstable_now();Me=He;var nt=!0;try{nt=ee(!0,He)}finally{nt?Ue():(Y=!1,ee=null)}}else Y=!1}var Ue;if(typeof j=="function")Ue=function(){j(qe)};else if(typeof MessageChannel<"u"){var ut=new MessageChannel,Be=ut.port2;ut.port1.onmessage=qe,Ue=function(){Be.postMessage(null)}}else Ue=function(){N(qe,0)};function bt(He){ee=He,Y||(Y=!0,Ue())}function kt(He,nt){de=N(function(){He(e.unstable_now())},nt)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(He){He.callback=null},e.unstable_continueExecution=function(){L||$||(L=!0,bt(W))},e.unstable_forceFrameRate=function(He){0>He||125<He?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):xe=0<He?Math.floor(1e3/He):5},e.unstable_getCurrentPriorityLevel=function(){return P},e.unstable_getFirstCallbackNode=function(){return r(v)},e.unstable_next=function(He){switch(P){case 1:case 2:case 3:var nt=3;break;default:nt=P}var gt=P;P=nt;try{return He()}finally{P=gt}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(He,nt){switch(He){case 1:case 2:case 3:case 4:case 5:break;default:He=3}var gt=P;P=He;try{return nt()}finally{P=gt}},e.unstable_scheduleCallback=function(He,nt,gt){var xt=e.unstable_now();switch(typeof gt=="object"&&gt!==null?(gt=gt.delay,gt=typeof gt=="number"&&0<gt?xt+gt:xt):gt=xt,He){case 1:var zt=-1;break;case 2:zt=250;break;case 5:zt=1073741823;break;case 4:zt=1e4;break;default:zt=5e3}return zt=gt+zt,He={id:A++,callback:nt,priorityLevel:He,startTime:gt,expirationTime:zt,sortIndex:-1},gt>xt?(He.sortIndex=gt,t(w,He),r(v)===null&&He===r(w)&&(k?(R(de),de=-1):k=!0,kt(G,gt-xt))):(He.sortIndex=zt,t(v,He),L||$||(L=!0,bt(W))),He},e.unstable_shouldYield=Ce,e.unstable_wrapCallback=function(He){var nt=P;return function(){var gt=P;P=nt;try{return He.apply(this,arguments)}finally{P=gt}}}})(n3);r3.exports=n3;var s6=r3.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i3=Ke,ra=s6;function Tt(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var o3=new Set,yg={};function hh(e,t){id(e,t),id(e+"Capture",t)}function id(e,t){for(yg[e]=t,e=0;e<t.length;e++)o3.add(t[e])}var El=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),N2=Object.prototype.hasOwnProperty,l6=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,hI={},fI={};function c6(e){return N2.call(fI,e)?!0:N2.call(hI,e)?!1:l6.test(e)?fI[e]=!0:(hI[e]=!0,!1)}function u6(e,t,r,i){if(r!==null&&r.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return i?!1:r!==null?!r.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function h6(e,t,r,i){if(t===null||typeof t>"u"||u6(e,t,r,i))return!0;if(i)return!1;if(r!==null)switch(r.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function So(e,t,r,i,c,u,p){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=i,this.attributeNamespace=c,this.mustUseProperty=r,this.propertyName=e,this.type=t,this.sanitizeURL=u,this.removeEmptyString=p}var Ki={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ki[e]=new So(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ki[t]=new So(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ki[e]=new So(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ki[e]=new So(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ki[e]=new So(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ki[e]=new So(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ki[e]=new So(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ki[e]=new So(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ki[e]=new So(e,5,!1,e.toLowerCase(),null,!1,!1)});var yT=/[\-:]([a-z])/g;function _T(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(yT,_T);Ki[t]=new So(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(yT,_T);Ki[t]=new So(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(yT,_T);Ki[t]=new So(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ki[e]=new So(e,1,!1,e.toLowerCase(),null,!1,!1)});Ki.xlinkHref=new So("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ki[e]=new So(e,1,!1,e.toLowerCase(),null,!0,!0)});function vT(e,t,r,i){var c=Ki.hasOwnProperty(t)?Ki[t]:null;(c!==null?c.type!==0:i||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(h6(t,r,c,i)&&(r=null),i||c===null?c6(t)&&(r===null?e.removeAttribute(t):e.setAttribute(t,""+r)):c.mustUseProperty?e[c.propertyName]=r===null?c.type===3?!1:"":r:(t=c.attributeName,i=c.attributeNamespace,r===null?e.removeAttribute(t):(c=c.type,r=c===3||c===4&&r===!0?"":""+r,i?e.setAttributeNS(i,t,r):e.setAttribute(t,r))))}var Ol=i3.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,wv=Symbol.for("react.element"),Pf=Symbol.for("react.portal"),If=Symbol.for("react.fragment"),xT=Symbol.for("react.strict_mode"),j2=Symbol.for("react.profiler"),a3=Symbol.for("react.provider"),s3=Symbol.for("react.context"),bT=Symbol.for("react.forward_ref"),U2=Symbol.for("react.suspense"),V2=Symbol.for("react.suspense_list"),wT=Symbol.for("react.memo"),vc=Symbol.for("react.lazy"),l3=Symbol.for("react.offscreen"),dI=Symbol.iterator;function wm(e){return e===null||typeof e!="object"?null:(e=dI&&e[dI]||e["@@iterator"],typeof e=="function"?e:null)}var Xn=Object.assign,Ew;function Wm(e){if(Ew===void 0)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);Ew=t&&t[1]||""}return`
`+Ew+e}var Tw=!1;function Aw(e,t){if(!e||Tw)return"";Tw=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(w){var i=w}Reflect.construct(e,[],t)}else{try{t.call()}catch(w){i=w}e.call(t.prototype)}else{try{throw Error()}catch(w){i=w}e()}}catch(w){if(w&&i&&typeof w.stack=="string"){for(var c=w.stack.split(`
`),u=i.stack.split(`
`),p=c.length-1,o=u.length-1;1<=p&&0<=o&&c[p]!==u[o];)o--;for(;1<=p&&0<=o;p--,o--)if(c[p]!==u[o]){if(p!==1||o!==1)do if(p--,o--,0>o||c[p]!==u[o]){var v=`
`+c[p].replace(" at new "," at ");return e.displayName&&v.includes("<anonymous>")&&(v=v.replace("<anonymous>",e.displayName)),v}while(1<=p&&0<=o);break}}}finally{Tw=!1,Error.prepareStackTrace=r}return(e=e?e.displayName||e.name:"")?Wm(e):""}function f6(e){switch(e.tag){case 5:return Wm(e.type);case 16:return Wm("Lazy");case 13:return Wm("Suspense");case 19:return Wm("SuspenseList");case 0:case 2:case 15:return e=Aw(e.type,!1),e;case 11:return e=Aw(e.type.render,!1),e;case 1:return e=Aw(e.type,!0),e;default:return""}}function G2(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case If:return"Fragment";case Pf:return"Portal";case j2:return"Profiler";case xT:return"StrictMode";case U2:return"Suspense";case V2:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case s3:return(e.displayName||"Context")+".Consumer";case a3:return(e._context.displayName||"Context")+".Provider";case bT:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case wT:return t=e.displayName||null,t!==null?t:G2(e.type)||"Memo";case vc:t=e._payload,e=e._init;try{return G2(e(t))}catch{}}return null}function d6(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return G2(t);case 8:return t===xT?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Bc(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function c3(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function p6(e){var t=c3(e)?"checked":"value",r=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),i=""+e[t];if(!e.hasOwnProperty(t)&&typeof r<"u"&&typeof r.get=="function"&&typeof r.set=="function"){var c=r.get,u=r.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return c.call(this)},set:function(p){i=""+p,u.call(this,p)}}),Object.defineProperty(e,t,{enumerable:r.enumerable}),{getValue:function(){return i},setValue:function(p){i=""+p},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Sv(e){e._valueTracker||(e._valueTracker=p6(e))}function u3(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),i="";return e&&(i=c3(e)?e.checked?"true":"false":e.value),e=i,e!==r?(t.setValue(e),!0):!1}function _0(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function q2(e,t){var r=t.checked;return Xn({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:r??e._wrapperState.initialChecked})}function pI(e,t){var r=t.defaultValue==null?"":t.defaultValue,i=t.checked!=null?t.checked:t.defaultChecked;r=Bc(t.value!=null?t.value:r),e._wrapperState={initialChecked:i,initialValue:r,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function h3(e,t){t=t.checked,t!=null&&vT(e,"checked",t,!1)}function W2(e,t){h3(e,t);var r=Bc(t.value),i=t.type;if(r!=null)i==="number"?(r===0&&e.value===""||e.value!=r)&&(e.value=""+r):e.value!==""+r&&(e.value=""+r);else if(i==="submit"||i==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?H2(e,t.type,r):t.hasOwnProperty("defaultValue")&&H2(e,t.type,Bc(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function mI(e,t,r){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var i=t.type;if(!(i!=="submit"&&i!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,r||t===e.value||(e.value=t),e.defaultValue=t}r=e.name,r!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,r!==""&&(e.name=r)}function H2(e,t,r){(t!=="number"||_0(e.ownerDocument)!==e)&&(r==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+r&&(e.defaultValue=""+r))}var Hm=Array.isArray;function Wf(e,t,r,i){if(e=e.options,t){t={};for(var c=0;c<r.length;c++)t["$"+r[c]]=!0;for(r=0;r<e.length;r++)c=t.hasOwnProperty("$"+e[r].value),e[r].selected!==c&&(e[r].selected=c),c&&i&&(e[r].defaultSelected=!0)}else{for(r=""+Bc(r),t=null,c=0;c<e.length;c++){if(e[c].value===r){e[c].selected=!0,i&&(e[c].defaultSelected=!0);return}t!==null||e[c].disabled||(t=e[c])}t!==null&&(t.selected=!0)}}function Z2(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Tt(91));return Xn({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function gI(e,t){var r=t.value;if(r==null){if(r=t.children,t=t.defaultValue,r!=null){if(t!=null)throw Error(Tt(92));if(Hm(r)){if(1<r.length)throw Error(Tt(93));r=r[0]}t=r}t==null&&(t=""),r=t}e._wrapperState={initialValue:Bc(r)}}function f3(e,t){var r=Bc(t.value),i=Bc(t.defaultValue);r!=null&&(r=""+r,r!==e.value&&(e.value=r),t.defaultValue==null&&e.defaultValue!==r&&(e.defaultValue=r)),i!=null&&(e.defaultValue=""+i)}function yI(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function d3(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function X2(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?d3(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Ev,p3=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,r,i,c){MSApp.execUnsafeLocalFunction(function(){return e(t,r,i,c)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Ev=Ev||document.createElement("div"),Ev.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Ev.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function _g(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&r.nodeType===3){r.nodeValue=t;return}}e.textContent=t}var Qm={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},m6=["Webkit","ms","Moz","O"];Object.keys(Qm).forEach(function(e){m6.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Qm[t]=Qm[e]})});function m3(e,t,r){return t==null||typeof t=="boolean"||t===""?"":r||typeof t!="number"||t===0||Qm.hasOwnProperty(e)&&Qm[e]?(""+t).trim():t+"px"}function g3(e,t){e=e.style;for(var r in t)if(t.hasOwnProperty(r)){var i=r.indexOf("--")===0,c=m3(r,t[r],i);r==="float"&&(r="cssFloat"),i?e.setProperty(r,c):e[r]=c}}var g6=Xn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function K2(e,t){if(t){if(g6[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Tt(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Tt(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Tt(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Tt(62))}}function Y2(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var J2=null;function ST(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Q2=null,Hf=null,Zf=null;function _I(e){if(e=gy(e)){if(typeof Q2!="function")throw Error(Tt(280));var t=e.stateNode;t&&(t=Zx(t),Q2(e.stateNode,e.type,t))}}function y3(e){Hf?Zf?Zf.push(e):Zf=[e]:Hf=e}function _3(){if(Hf){var e=Hf,t=Zf;if(Zf=Hf=null,_I(e),t)for(e=0;e<t.length;e++)_I(t[e])}}function v3(e,t){return e(t)}function x3(){}var Mw=!1;function b3(e,t,r){if(Mw)return e(t,r);Mw=!0;try{return v3(e,t,r)}finally{Mw=!1,(Hf!==null||Zf!==null)&&(x3(),_3())}}function vg(e,t){var r=e.stateNode;if(r===null)return null;var i=Zx(r);if(i===null)return null;r=i[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(e=e.type,i=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!i;break e;default:e=!1}if(e)return null;if(r&&typeof r!="function")throw Error(Tt(231,t,typeof r));return r}var eS=!1;if(El)try{var Sm={};Object.defineProperty(Sm,"passive",{get:function(){eS=!0}}),window.addEventListener("test",Sm,Sm),window.removeEventListener("test",Sm,Sm)}catch{eS=!1}function y6(e,t,r,i,c,u,p,o,v){var w=Array.prototype.slice.call(arguments,3);try{t.apply(r,w)}catch(A){this.onError(A)}}var eg=!1,v0=null,x0=!1,tS=null,_6={onError:function(e){eg=!0,v0=e}};function v6(e,t,r,i,c,u,p,o,v){eg=!1,v0=null,y6.apply(_6,arguments)}function x6(e,t,r,i,c,u,p,o,v){if(v6.apply(this,arguments),eg){if(eg){var w=v0;eg=!1,v0=null}else throw Error(Tt(198));x0||(x0=!0,tS=w)}}function fh(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(r=t.return),e=t.return;while(e)}return t.tag===3?r:null}function w3(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function vI(e){if(fh(e)!==e)throw Error(Tt(188))}function b6(e){var t=e.alternate;if(!t){if(t=fh(e),t===null)throw Error(Tt(188));return t!==e?null:e}for(var r=e,i=t;;){var c=r.return;if(c===null)break;var u=c.alternate;if(u===null){if(i=c.return,i!==null){r=i;continue}break}if(c.child===u.child){for(u=c.child;u;){if(u===r)return vI(c),e;if(u===i)return vI(c),t;u=u.sibling}throw Error(Tt(188))}if(r.return!==i.return)r=c,i=u;else{for(var p=!1,o=c.child;o;){if(o===r){p=!0,r=c,i=u;break}if(o===i){p=!0,i=c,r=u;break}o=o.sibling}if(!p){for(o=u.child;o;){if(o===r){p=!0,r=u,i=c;break}if(o===i){p=!0,i=u,r=c;break}o=o.sibling}if(!p)throw Error(Tt(189))}}if(r.alternate!==i)throw Error(Tt(190))}if(r.tag!==3)throw Error(Tt(188));return r.stateNode.current===r?e:t}function S3(e){return e=b6(e),e!==null?E3(e):null}function E3(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=E3(e);if(t!==null)return t;e=e.sibling}return null}var T3=ra.unstable_scheduleCallback,xI=ra.unstable_cancelCallback,w6=ra.unstable_shouldYield,S6=ra.unstable_requestPaint,ni=ra.unstable_now,E6=ra.unstable_getCurrentPriorityLevel,ET=ra.unstable_ImmediatePriority,A3=ra.unstable_UserBlockingPriority,b0=ra.unstable_NormalPriority,T6=ra.unstable_LowPriority,M3=ra.unstable_IdlePriority,Gx=null,zs=null;function A6(e){if(zs&&typeof zs.onCommitFiberRoot=="function")try{zs.onCommitFiberRoot(Gx,e,void 0,(e.current.flags&128)===128)}catch{}}var ns=Math.clz32?Math.clz32:P6,M6=Math.log,C6=Math.LN2;function P6(e){return e>>>=0,e===0?32:31-(M6(e)/C6|0)|0}var Tv=64,Av=4194304;function Zm(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function w0(e,t){var r=e.pendingLanes;if(r===0)return 0;var i=0,c=e.suspendedLanes,u=e.pingedLanes,p=r&268435455;if(p!==0){var o=p&~c;o!==0?i=Zm(o):(u&=p,u!==0&&(i=Zm(u)))}else p=r&~c,p!==0?i=Zm(p):u!==0&&(i=Zm(u));if(i===0)return 0;if(t!==0&&t!==i&&!(t&c)&&(c=i&-i,u=t&-t,c>=u||c===16&&(u&4194240)!==0))return t;if(i&4&&(i|=r&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=i;0<t;)r=31-ns(t),c=1<<r,i|=e[r],t&=~c;return i}function I6(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function k6(e,t){for(var r=e.suspendedLanes,i=e.pingedLanes,c=e.expirationTimes,u=e.pendingLanes;0<u;){var p=31-ns(u),o=1<<p,v=c[p];v===-1?(!(o&r)||o&i)&&(c[p]=I6(o,t)):v<=t&&(e.expiredLanes|=o),u&=~o}}function rS(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function C3(){var e=Tv;return Tv<<=1,!(Tv&4194240)&&(Tv=64),e}function Cw(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function py(e,t,r){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-ns(t),e[t]=r}function O6(e,t){var r=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var i=e.eventTimes;for(e=e.expirationTimes;0<r;){var c=31-ns(r),u=1<<c;t[c]=0,i[c]=-1,e[c]=-1,r&=~u}}function TT(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var i=31-ns(r),c=1<<i;c&t|e[i]&t&&(e[i]|=t),r&=~c}}var _n=0;function P3(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var I3,AT,k3,O3,D3,nS=!1,Mv=[],Mc=null,Cc=null,Pc=null,xg=new Map,bg=new Map,wc=[],D6="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function bI(e,t){switch(e){case"focusin":case"focusout":Mc=null;break;case"dragenter":case"dragleave":Cc=null;break;case"mouseover":case"mouseout":Pc=null;break;case"pointerover":case"pointerout":xg.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":bg.delete(t.pointerId)}}function Em(e,t,r,i,c,u){return e===null||e.nativeEvent!==u?(e={blockedOn:t,domEventName:r,eventSystemFlags:i,nativeEvent:u,targetContainers:[c]},t!==null&&(t=gy(t),t!==null&&AT(t)),e):(e.eventSystemFlags|=i,t=e.targetContainers,c!==null&&t.indexOf(c)===-1&&t.push(c),e)}function R6(e,t,r,i,c){switch(t){case"focusin":return Mc=Em(Mc,e,t,r,i,c),!0;case"dragenter":return Cc=Em(Cc,e,t,r,i,c),!0;case"mouseover":return Pc=Em(Pc,e,t,r,i,c),!0;case"pointerover":var u=c.pointerId;return xg.set(u,Em(xg.get(u)||null,e,t,r,i,c)),!0;case"gotpointercapture":return u=c.pointerId,bg.set(u,Em(bg.get(u)||null,e,t,r,i,c)),!0}return!1}function R3(e){var t=Wu(e.target);if(t!==null){var r=fh(t);if(r!==null){if(t=r.tag,t===13){if(t=w3(r),t!==null){e.blockedOn=t,D3(e.priority,function(){k3(r)});return}}else if(t===3&&r.stateNode.current.memoizedState.isDehydrated){e.blockedOn=r.tag===3?r.stateNode.containerInfo:null;return}}}e.blockedOn=null}function e0(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var r=iS(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(r===null){r=e.nativeEvent;var i=new r.constructor(r.type,r);J2=i,r.target.dispatchEvent(i),J2=null}else return t=gy(r),t!==null&&AT(t),e.blockedOn=r,!1;t.shift()}return!0}function wI(e,t,r){e0(e)&&r.delete(t)}function L6(){nS=!1,Mc!==null&&e0(Mc)&&(Mc=null),Cc!==null&&e0(Cc)&&(Cc=null),Pc!==null&&e0(Pc)&&(Pc=null),xg.forEach(wI),bg.forEach(wI)}function Tm(e,t){e.blockedOn===t&&(e.blockedOn=null,nS||(nS=!0,ra.unstable_scheduleCallback(ra.unstable_NormalPriority,L6)))}function wg(e){function t(c){return Tm(c,e)}if(0<Mv.length){Tm(Mv[0],e);for(var r=1;r<Mv.length;r++){var i=Mv[r];i.blockedOn===e&&(i.blockedOn=null)}}for(Mc!==null&&Tm(Mc,e),Cc!==null&&Tm(Cc,e),Pc!==null&&Tm(Pc,e),xg.forEach(t),bg.forEach(t),r=0;r<wc.length;r++)i=wc[r],i.blockedOn===e&&(i.blockedOn=null);for(;0<wc.length&&(r=wc[0],r.blockedOn===null);)R3(r),r.blockedOn===null&&wc.shift()}var Xf=Ol.ReactCurrentBatchConfig,S0=!0;function z6(e,t,r,i){var c=_n,u=Xf.transition;Xf.transition=null;try{_n=1,MT(e,t,r,i)}finally{_n=c,Xf.transition=u}}function B6(e,t,r,i){var c=_n,u=Xf.transition;Xf.transition=null;try{_n=4,MT(e,t,r,i)}finally{_n=c,Xf.transition=u}}function MT(e,t,r,i){if(S0){var c=iS(e,t,r,i);if(c===null)$w(e,t,i,E0,r),bI(e,i);else if(R6(c,e,t,r,i))i.stopPropagation();else if(bI(e,i),t&4&&-1<D6.indexOf(e)){for(;c!==null;){var u=gy(c);if(u!==null&&I3(u),u=iS(e,t,r,i),u===null&&$w(e,t,i,E0,r),u===c)break;c=u}c!==null&&i.stopPropagation()}else $w(e,t,i,null,r)}}var E0=null;function iS(e,t,r,i){if(E0=null,e=ST(i),e=Wu(e),e!==null)if(t=fh(e),t===null)e=null;else if(r=t.tag,r===13){if(e=w3(t),e!==null)return e;e=null}else if(r===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return E0=e,null}function L3(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(E6()){case ET:return 1;case A3:return 4;case b0:case T6:return 16;case M3:return 536870912;default:return 16}default:return 16}}var Ec=null,CT=null,t0=null;function z3(){if(t0)return t0;var e,t=CT,r=t.length,i,c="value"in Ec?Ec.value:Ec.textContent,u=c.length;for(e=0;e<r&&t[e]===c[e];e++);var p=r-e;for(i=1;i<=p&&t[r-i]===c[u-i];i++);return t0=c.slice(e,1<i?1-i:void 0)}function r0(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Cv(){return!0}function SI(){return!1}function oa(e){function t(r,i,c,u,p){this._reactName=r,this._targetInst=c,this.type=i,this.nativeEvent=u,this.target=p,this.currentTarget=null;for(var o in e)e.hasOwnProperty(o)&&(r=e[o],this[o]=r?r(u):u[o]);return this.isDefaultPrevented=(u.defaultPrevented!=null?u.defaultPrevented:u.returnValue===!1)?Cv:SI,this.isPropagationStopped=SI,this}return Xn(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var r=this.nativeEvent;r&&(r.preventDefault?r.preventDefault():typeof r.returnValue!="unknown"&&(r.returnValue=!1),this.isDefaultPrevented=Cv)},stopPropagation:function(){var r=this.nativeEvent;r&&(r.stopPropagation?r.stopPropagation():typeof r.cancelBubble!="unknown"&&(r.cancelBubble=!0),this.isPropagationStopped=Cv)},persist:function(){},isPersistent:Cv}),t}var Fd={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},PT=oa(Fd),my=Xn({},Fd,{view:0,detail:0}),$6=oa(my),Pw,Iw,Am,qx=Xn({},my,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:IT,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Am&&(Am&&e.type==="mousemove"?(Pw=e.screenX-Am.screenX,Iw=e.screenY-Am.screenY):Iw=Pw=0,Am=e),Pw)},movementY:function(e){return"movementY"in e?e.movementY:Iw}}),EI=oa(qx),F6=Xn({},qx,{dataTransfer:0}),N6=oa(F6),j6=Xn({},my,{relatedTarget:0}),kw=oa(j6),U6=Xn({},Fd,{animationName:0,elapsedTime:0,pseudoElement:0}),V6=oa(U6),G6=Xn({},Fd,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),q6=oa(G6),W6=Xn({},Fd,{data:0}),TI=oa(W6),H6={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Z6={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},X6={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function K6(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=X6[e])?!!t[e]:!1}function IT(){return K6}var Y6=Xn({},my,{key:function(e){if(e.key){var t=H6[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=r0(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?Z6[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:IT,charCode:function(e){return e.type==="keypress"?r0(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?r0(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),J6=oa(Y6),Q6=Xn({},qx,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),AI=oa(Q6),eU=Xn({},my,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:IT}),tU=oa(eU),rU=Xn({},Fd,{propertyName:0,elapsedTime:0,pseudoElement:0}),nU=oa(rU),iU=Xn({},qx,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),oU=oa(iU),aU=[9,13,27,32],kT=El&&"CompositionEvent"in window,tg=null;El&&"documentMode"in document&&(tg=document.documentMode);var sU=El&&"TextEvent"in window&&!tg,B3=El&&(!kT||tg&&8<tg&&11>=tg),MI=String.fromCharCode(32),CI=!1;function $3(e,t){switch(e){case"keyup":return aU.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function F3(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var kf=!1;function lU(e,t){switch(e){case"compositionend":return F3(t);case"keypress":return t.which!==32?null:(CI=!0,MI);case"textInput":return e=t.data,e===MI&&CI?null:e;default:return null}}function cU(e,t){if(kf)return e==="compositionend"||!kT&&$3(e,t)?(e=z3(),t0=CT=Ec=null,kf=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return B3&&t.locale!=="ko"?null:t.data;default:return null}}var uU={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function PI(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!uU[e.type]:t==="textarea"}function N3(e,t,r,i){y3(i),t=T0(t,"onChange"),0<t.length&&(r=new PT("onChange","change",null,r,i),e.push({event:r,listeners:t}))}var rg=null,Sg=null;function hU(e){Y3(e,0)}function Wx(e){var t=Rf(e);if(u3(t))return e}function fU(e,t){if(e==="change")return t}var j3=!1;if(El){var Ow;if(El){var Dw="oninput"in document;if(!Dw){var II=document.createElement("div");II.setAttribute("oninput","return;"),Dw=typeof II.oninput=="function"}Ow=Dw}else Ow=!1;j3=Ow&&(!document.documentMode||9<document.documentMode)}function kI(){rg&&(rg.detachEvent("onpropertychange",U3),Sg=rg=null)}function U3(e){if(e.propertyName==="value"&&Wx(Sg)){var t=[];N3(t,Sg,e,ST(e)),b3(hU,t)}}function dU(e,t,r){e==="focusin"?(kI(),rg=t,Sg=r,rg.attachEvent("onpropertychange",U3)):e==="focusout"&&kI()}function pU(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Wx(Sg)}function mU(e,t){if(e==="click")return Wx(t)}function gU(e,t){if(e==="input"||e==="change")return Wx(t)}function yU(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var os=typeof Object.is=="function"?Object.is:yU;function Eg(e,t){if(os(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var r=Object.keys(e),i=Object.keys(t);if(r.length!==i.length)return!1;for(i=0;i<r.length;i++){var c=r[i];if(!N2.call(t,c)||!os(e[c],t[c]))return!1}return!0}function OI(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function DI(e,t){var r=OI(e);e=0;for(var i;r;){if(r.nodeType===3){if(i=e+r.textContent.length,e<=t&&i>=t)return{node:r,offset:t-e};e=i}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=OI(r)}}function V3(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?V3(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function G3(){for(var e=window,t=_0();t instanceof e.HTMLIFrameElement;){try{var r=typeof t.contentWindow.location.href=="string"}catch{r=!1}if(r)e=t.contentWindow;else break;t=_0(e.document)}return t}function OT(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function _U(e){var t=G3(),r=e.focusedElem,i=e.selectionRange;if(t!==r&&r&&r.ownerDocument&&V3(r.ownerDocument.documentElement,r)){if(i!==null&&OT(r)){if(t=i.start,e=i.end,e===void 0&&(e=t),"selectionStart"in r)r.selectionStart=t,r.selectionEnd=Math.min(e,r.value.length);else if(e=(t=r.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var c=r.textContent.length,u=Math.min(i.start,c);i=i.end===void 0?u:Math.min(i.end,c),!e.extend&&u>i&&(c=i,i=u,u=c),c=DI(r,u);var p=DI(r,i);c&&p&&(e.rangeCount!==1||e.anchorNode!==c.node||e.anchorOffset!==c.offset||e.focusNode!==p.node||e.focusOffset!==p.offset)&&(t=t.createRange(),t.setStart(c.node,c.offset),e.removeAllRanges(),u>i?(e.addRange(t),e.extend(p.node,p.offset)):(t.setEnd(p.node,p.offset),e.addRange(t)))}}for(t=[],e=r;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof r.focus=="function"&&r.focus(),r=0;r<t.length;r++)e=t[r],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var vU=El&&"documentMode"in document&&11>=document.documentMode,Of=null,oS=null,ng=null,aS=!1;function RI(e,t,r){var i=r.window===r?r.document:r.nodeType===9?r:r.ownerDocument;aS||Of==null||Of!==_0(i)||(i=Of,"selectionStart"in i&&OT(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),ng&&Eg(ng,i)||(ng=i,i=T0(oS,"onSelect"),0<i.length&&(t=new PT("onSelect","select",null,t,r),e.push({event:t,listeners:i}),t.target=Of)))}function Pv(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var Df={animationend:Pv("Animation","AnimationEnd"),animationiteration:Pv("Animation","AnimationIteration"),animationstart:Pv("Animation","AnimationStart"),transitionend:Pv("Transition","TransitionEnd")},Rw={},q3={};El&&(q3=document.createElement("div").style,"AnimationEvent"in window||(delete Df.animationend.animation,delete Df.animationiteration.animation,delete Df.animationstart.animation),"TransitionEvent"in window||delete Df.transitionend.transition);function Hx(e){if(Rw[e])return Rw[e];if(!Df[e])return e;var t=Df[e],r;for(r in t)if(t.hasOwnProperty(r)&&r in q3)return Rw[e]=t[r];return e}var W3=Hx("animationend"),H3=Hx("animationiteration"),Z3=Hx("animationstart"),X3=Hx("transitionend"),K3=new Map,LI="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nc(e,t){K3.set(e,t),hh(t,[e])}for(var Lw=0;Lw<LI.length;Lw++){var zw=LI[Lw],xU=zw.toLowerCase(),bU=zw[0].toUpperCase()+zw.slice(1);Nc(xU,"on"+bU)}Nc(W3,"onAnimationEnd");Nc(H3,"onAnimationIteration");Nc(Z3,"onAnimationStart");Nc("dblclick","onDoubleClick");Nc("focusin","onFocus");Nc("focusout","onBlur");Nc(X3,"onTransitionEnd");id("onMouseEnter",["mouseout","mouseover"]);id("onMouseLeave",["mouseout","mouseover"]);id("onPointerEnter",["pointerout","pointerover"]);id("onPointerLeave",["pointerout","pointerover"]);hh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));hh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));hh("onBeforeInput",["compositionend","keypress","textInput","paste"]);hh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));hh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));hh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xm="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wU=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xm));function zI(e,t,r){var i=e.type||"unknown-event";e.currentTarget=r,x6(i,t,void 0,e),e.currentTarget=null}function Y3(e,t){t=(t&4)!==0;for(var r=0;r<e.length;r++){var i=e[r],c=i.event;i=i.listeners;e:{var u=void 0;if(t)for(var p=i.length-1;0<=p;p--){var o=i[p],v=o.instance,w=o.currentTarget;if(o=o.listener,v!==u&&c.isPropagationStopped())break e;zI(c,o,w),u=v}else for(p=0;p<i.length;p++){if(o=i[p],v=o.instance,w=o.currentTarget,o=o.listener,v!==u&&c.isPropagationStopped())break e;zI(c,o,w),u=v}}}if(x0)throw e=tS,x0=!1,tS=null,e}function kn(e,t){var r=t[hS];r===void 0&&(r=t[hS]=new Set);var i=e+"__bubble";r.has(i)||(J3(t,e,2,!1),r.add(i))}function Bw(e,t,r){var i=0;t&&(i|=4),J3(r,e,i,t)}var Iv="_reactListening"+Math.random().toString(36).slice(2);function Tg(e){if(!e[Iv]){e[Iv]=!0,o3.forEach(function(r){r!=="selectionchange"&&(wU.has(r)||Bw(r,!1,e),Bw(r,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Iv]||(t[Iv]=!0,Bw("selectionchange",!1,t))}}function J3(e,t,r,i){switch(L3(t)){case 1:var c=z6;break;case 4:c=B6;break;default:c=MT}r=c.bind(null,t,r,e),c=void 0,!eS||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(c=!0),i?c!==void 0?e.addEventListener(t,r,{capture:!0,passive:c}):e.addEventListener(t,r,!0):c!==void 0?e.addEventListener(t,r,{passive:c}):e.addEventListener(t,r,!1)}function $w(e,t,r,i,c){var u=i;if(!(t&1)&&!(t&2)&&i!==null)e:for(;;){if(i===null)return;var p=i.tag;if(p===3||p===4){var o=i.stateNode.containerInfo;if(o===c||o.nodeType===8&&o.parentNode===c)break;if(p===4)for(p=i.return;p!==null;){var v=p.tag;if((v===3||v===4)&&(v=p.stateNode.containerInfo,v===c||v.nodeType===8&&v.parentNode===c))return;p=p.return}for(;o!==null;){if(p=Wu(o),p===null)return;if(v=p.tag,v===5||v===6){i=u=p;continue e}o=o.parentNode}}i=i.return}b3(function(){var w=u,A=ST(r),T=[];e:{var P=K3.get(e);if(P!==void 0){var $=PT,L=e;switch(e){case"keypress":if(r0(r)===0)break e;case"keydown":case"keyup":$=J6;break;case"focusin":L="focus",$=kw;break;case"focusout":L="blur",$=kw;break;case"beforeblur":case"afterblur":$=kw;break;case"click":if(r.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":$=EI;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":$=N6;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":$=tU;break;case W3:case H3:case Z3:$=V6;break;case X3:$=nU;break;case"scroll":$=$6;break;case"wheel":$=oU;break;case"copy":case"cut":case"paste":$=q6;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":$=AI}var k=(t&4)!==0,N=!k&&e==="scroll",R=k?P!==null?P+"Capture":null:P;k=[];for(var j=w,D;j!==null;){D=j;var G=D.stateNode;if(D.tag===5&&G!==null&&(D=G,R!==null&&(G=vg(j,R),G!=null&&k.push(Ag(j,G,D)))),N)break;j=j.return}0<k.length&&(P=new $(P,L,null,r,A),T.push({event:P,listeners:k}))}}if(!(t&7)){e:{if(P=e==="mouseover"||e==="pointerover",$=e==="mouseout"||e==="pointerout",P&&r!==J2&&(L=r.relatedTarget||r.fromElement)&&(Wu(L)||L[Tl]))break e;if(($||P)&&(P=A.window===A?A:(P=A.ownerDocument)?P.defaultView||P.parentWindow:window,$?(L=r.relatedTarget||r.toElement,$=w,L=L?Wu(L):null,L!==null&&(N=fh(L),L!==N||L.tag!==5&&L.tag!==6)&&(L=null)):($=null,L=w),$!==L)){if(k=EI,G="onMouseLeave",R="onMouseEnter",j="mouse",(e==="pointerout"||e==="pointerover")&&(k=AI,G="onPointerLeave",R="onPointerEnter",j="pointer"),N=$==null?P:Rf($),D=L==null?P:Rf(L),P=new k(G,j+"leave",$,r,A),P.target=N,P.relatedTarget=D,G=null,Wu(A)===w&&(k=new k(R,j+"enter",L,r,A),k.target=D,k.relatedTarget=N,G=k),N=G,$&&L)t:{for(k=$,R=L,j=0,D=k;D;D=_f(D))j++;for(D=0,G=R;G;G=_f(G))D++;for(;0<j-D;)k=_f(k),j--;for(;0<D-j;)R=_f(R),D--;for(;j--;){if(k===R||R!==null&&k===R.alternate)break t;k=_f(k),R=_f(R)}k=null}else k=null;$!==null&&BI(T,P,$,k,!1),L!==null&&N!==null&&BI(T,N,L,k,!0)}}e:{if(P=w?Rf(w):window,$=P.nodeName&&P.nodeName.toLowerCase(),$==="select"||$==="input"&&P.type==="file")var W=fU;else if(PI(P))if(j3)W=gU;else{W=pU;var Y=dU}else($=P.nodeName)&&$.toLowerCase()==="input"&&(P.type==="checkbox"||P.type==="radio")&&(W=mU);if(W&&(W=W(e,w))){N3(T,W,r,A);break e}Y&&Y(e,P,w),e==="focusout"&&(Y=P._wrapperState)&&Y.controlled&&P.type==="number"&&H2(P,"number",P.value)}switch(Y=w?Rf(w):window,e){case"focusin":(PI(Y)||Y.contentEditable==="true")&&(Of=Y,oS=w,ng=null);break;case"focusout":ng=oS=Of=null;break;case"mousedown":aS=!0;break;case"contextmenu":case"mouseup":case"dragend":aS=!1,RI(T,r,A);break;case"selectionchange":if(vU)break;case"keydown":case"keyup":RI(T,r,A)}var ee;if(kT)e:{switch(e){case"compositionstart":var de="onCompositionStart";break e;case"compositionend":de="onCompositionEnd";break e;case"compositionupdate":de="onCompositionUpdate";break e}de=void 0}else kf?$3(e,r)&&(de="onCompositionEnd"):e==="keydown"&&r.keyCode===229&&(de="onCompositionStart");de&&(B3&&r.locale!=="ko"&&(kf||de!=="onCompositionStart"?de==="onCompositionEnd"&&kf&&(ee=z3()):(Ec=A,CT="value"in Ec?Ec.value:Ec.textContent,kf=!0)),Y=T0(w,de),0<Y.length&&(de=new TI(de,e,null,r,A),T.push({event:de,listeners:Y}),ee?de.data=ee:(ee=F3(r),ee!==null&&(de.data=ee)))),(ee=sU?lU(e,r):cU(e,r))&&(w=T0(w,"onBeforeInput"),0<w.length&&(A=new TI("onBeforeInput","beforeinput",null,r,A),T.push({event:A,listeners:w}),A.data=ee))}Y3(T,t)})}function Ag(e,t,r){return{instance:e,listener:t,currentTarget:r}}function T0(e,t){for(var r=t+"Capture",i=[];e!==null;){var c=e,u=c.stateNode;c.tag===5&&u!==null&&(c=u,u=vg(e,r),u!=null&&i.unshift(Ag(e,u,c)),u=vg(e,t),u!=null&&i.push(Ag(e,u,c))),e=e.return}return i}function _f(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function BI(e,t,r,i,c){for(var u=t._reactName,p=[];r!==null&&r!==i;){var o=r,v=o.alternate,w=o.stateNode;if(v!==null&&v===i)break;o.tag===5&&w!==null&&(o=w,c?(v=vg(r,u),v!=null&&p.unshift(Ag(r,v,o))):c||(v=vg(r,u),v!=null&&p.push(Ag(r,v,o)))),r=r.return}p.length!==0&&e.push({event:t,listeners:p})}var SU=/\r\n?/g,EU=/\u0000|\uFFFD/g;function $I(e){return(typeof e=="string"?e:""+e).replace(SU,`
`).replace(EU,"")}function kv(e,t,r){if(t=$I(t),$I(e)!==t&&r)throw Error(Tt(425))}function A0(){}var sS=null,lS=null;function cS(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var uS=typeof setTimeout=="function"?setTimeout:void 0,TU=typeof clearTimeout=="function"?clearTimeout:void 0,FI=typeof Promise=="function"?Promise:void 0,AU=typeof queueMicrotask=="function"?queueMicrotask:typeof FI<"u"?function(e){return FI.resolve(null).then(e).catch(MU)}:uS;function MU(e){setTimeout(function(){throw e})}function Fw(e,t){var r=t,i=0;do{var c=r.nextSibling;if(e.removeChild(r),c&&c.nodeType===8)if(r=c.data,r==="/$"){if(i===0){e.removeChild(c),wg(t);return}i--}else r!=="$"&&r!=="$?"&&r!=="$!"||i++;r=c}while(r);wg(t)}function Ic(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function NI(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="$"||r==="$!"||r==="$?"){if(t===0)return e;t--}else r==="/$"&&t++}e=e.previousSibling}return null}var Nd=Math.random().toString(36).slice(2),Os="__reactFiber$"+Nd,Mg="__reactProps$"+Nd,Tl="__reactContainer$"+Nd,hS="__reactEvents$"+Nd,CU="__reactListeners$"+Nd,PU="__reactHandles$"+Nd;function Wu(e){var t=e[Os];if(t)return t;for(var r=e.parentNode;r;){if(t=r[Tl]||r[Os]){if(r=t.alternate,t.child!==null||r!==null&&r.child!==null)for(e=NI(e);e!==null;){if(r=e[Os])return r;e=NI(e)}return t}e=r,r=e.parentNode}return null}function gy(e){return e=e[Os]||e[Tl],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Rf(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Tt(33))}function Zx(e){return e[Mg]||null}var fS=[],Lf=-1;function jc(e){return{current:e}}function Rn(e){0>Lf||(e.current=fS[Lf],fS[Lf]=null,Lf--)}function An(e,t){Lf++,fS[Lf]=e.current,e.current=t}var $c={},fo=jc($c),Bo=jc(!1),ih=$c;function od(e,t){var r=e.type.contextTypes;if(!r)return $c;var i=e.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===t)return i.__reactInternalMemoizedMaskedChildContext;var c={},u;for(u in r)c[u]=t[u];return i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=c),c}function $o(e){return e=e.childContextTypes,e!=null}function M0(){Rn(Bo),Rn(fo)}function jI(e,t,r){if(fo.current!==$c)throw Error(Tt(168));An(fo,t),An(Bo,r)}function Q3(e,t,r){var i=e.stateNode;if(t=t.childContextTypes,typeof i.getChildContext!="function")return r;i=i.getChildContext();for(var c in i)if(!(c in t))throw Error(Tt(108,d6(e)||"Unknown",c));return Xn({},r,i)}function C0(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||$c,ih=fo.current,An(fo,e),An(Bo,Bo.current),!0}function UI(e,t,r){var i=e.stateNode;if(!i)throw Error(Tt(169));r?(e=Q3(e,t,ih),i.__reactInternalMemoizedMergedChildContext=e,Rn(Bo),Rn(fo),An(fo,e)):Rn(Bo),An(Bo,r)}var hl=null,Xx=!1,Nw=!1;function ez(e){hl===null?hl=[e]:hl.push(e)}function IU(e){Xx=!0,ez(e)}function Uc(){if(!Nw&&hl!==null){Nw=!0;var e=0,t=_n;try{var r=hl;for(_n=1;e<r.length;e++){var i=r[e];do i=i(!0);while(i!==null)}hl=null,Xx=!1}catch(c){throw hl!==null&&(hl=hl.slice(e+1)),T3(ET,Uc),c}finally{_n=t,Nw=!1}}return null}var zf=[],Bf=0,P0=null,I0=0,xa=[],ba=0,oh=null,fl=1,dl="";function Nu(e,t){zf[Bf++]=I0,zf[Bf++]=P0,P0=e,I0=t}function tz(e,t,r){xa[ba++]=fl,xa[ba++]=dl,xa[ba++]=oh,oh=e;var i=fl;e=dl;var c=32-ns(i)-1;i&=~(1<<c),r+=1;var u=32-ns(t)+c;if(30<u){var p=c-c%5;u=(i&(1<<p)-1).toString(32),i>>=p,c-=p,fl=1<<32-ns(t)+c|r<<c|i,dl=u+e}else fl=1<<u|r<<c|i,dl=e}function DT(e){e.return!==null&&(Nu(e,1),tz(e,1,0))}function RT(e){for(;e===P0;)P0=zf[--Bf],zf[Bf]=null,I0=zf[--Bf],zf[Bf]=null;for(;e===oh;)oh=xa[--ba],xa[ba]=null,dl=xa[--ba],xa[ba]=null,fl=xa[--ba],xa[ba]=null}var ea=null,Qo=null,Nn=!1,es=null;function rz(e,t){var r=wa(5,null,null,0);r.elementType="DELETED",r.stateNode=t,r.return=e,t=e.deletions,t===null?(e.deletions=[r],e.flags|=16):t.push(r)}function VI(e,t){switch(e.tag){case 5:var r=e.type;return t=t.nodeType!==1||r.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,ea=e,Qo=Ic(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,ea=e,Qo=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(r=oh!==null?{id:fl,overflow:dl}:null,e.memoizedState={dehydrated:t,treeContext:r,retryLane:1073741824},r=wa(18,null,null,0),r.stateNode=t,r.return=e,e.child=r,ea=e,Qo=null,!0):!1;default:return!1}}function dS(e){return(e.mode&1)!==0&&(e.flags&128)===0}function pS(e){if(Nn){var t=Qo;if(t){var r=t;if(!VI(e,t)){if(dS(e))throw Error(Tt(418));t=Ic(r.nextSibling);var i=ea;t&&VI(e,t)?rz(i,r):(e.flags=e.flags&-4097|2,Nn=!1,ea=e)}}else{if(dS(e))throw Error(Tt(418));e.flags=e.flags&-4097|2,Nn=!1,ea=e}}}function GI(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;ea=e}function Ov(e){if(e!==ea)return!1;if(!Nn)return GI(e),Nn=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!cS(e.type,e.memoizedProps)),t&&(t=Qo)){if(dS(e))throw nz(),Error(Tt(418));for(;t;)rz(e,t),t=Ic(t.nextSibling)}if(GI(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Tt(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var r=e.data;if(r==="/$"){if(t===0){Qo=Ic(e.nextSibling);break e}t--}else r!=="$"&&r!=="$!"&&r!=="$?"||t++}e=e.nextSibling}Qo=null}}else Qo=ea?Ic(e.stateNode.nextSibling):null;return!0}function nz(){for(var e=Qo;e;)e=Ic(e.nextSibling)}function ad(){Qo=ea=null,Nn=!1}function LT(e){es===null?es=[e]:es.push(e)}var kU=Ol.ReactCurrentBatchConfig;function Ka(e,t){if(e&&e.defaultProps){t=Xn({},t),e=e.defaultProps;for(var r in e)t[r]===void 0&&(t[r]=e[r]);return t}return t}var k0=jc(null),O0=null,$f=null,zT=null;function BT(){zT=$f=O0=null}function $T(e){var t=k0.current;Rn(k0),e._currentValue=t}function mS(e,t,r){for(;e!==null;){var i=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,i!==null&&(i.childLanes|=t)):i!==null&&(i.childLanes&t)!==t&&(i.childLanes|=t),e===r)break;e=e.return}}function Kf(e,t){O0=e,zT=$f=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Lo=!0),e.firstContext=null)}function Pa(e){var t=e._currentValue;if(zT!==e)if(e={context:e,memoizedValue:t,next:null},$f===null){if(O0===null)throw Error(Tt(308));$f=e,O0.dependencies={lanes:0,firstContext:e}}else $f=$f.next=e;return t}var Hu=null;function FT(e){Hu===null?Hu=[e]:Hu.push(e)}function iz(e,t,r,i){var c=t.interleaved;return c===null?(r.next=r,FT(t)):(r.next=c.next,c.next=r),t.interleaved=r,Al(e,i)}function Al(e,t){e.lanes|=t;var r=e.alternate;for(r!==null&&(r.lanes|=t),r=e,e=e.return;e!==null;)e.childLanes|=t,r=e.alternate,r!==null&&(r.childLanes|=t),r=e,e=e.return;return r.tag===3?r.stateNode:null}var xc=!1;function NT(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function oz(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function yl(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function kc(e,t,r){var i=e.updateQueue;if(i===null)return null;if(i=i.shared,Yr&2){var c=i.pending;return c===null?t.next=t:(t.next=c.next,c.next=t),i.pending=t,Al(e,r)}return c=i.interleaved,c===null?(t.next=t,FT(i)):(t.next=c.next,c.next=t),i.interleaved=t,Al(e,r)}function n0(e,t,r){if(t=t.updateQueue,t!==null&&(t=t.shared,(r&4194240)!==0)){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,TT(e,r)}}function qI(e,t){var r=e.updateQueue,i=e.alternate;if(i!==null&&(i=i.updateQueue,r===i)){var c=null,u=null;if(r=r.firstBaseUpdate,r!==null){do{var p={eventTime:r.eventTime,lane:r.lane,tag:r.tag,payload:r.payload,callback:r.callback,next:null};u===null?c=u=p:u=u.next=p,r=r.next}while(r!==null);u===null?c=u=t:u=u.next=t}else c=u=t;r={baseState:i.baseState,firstBaseUpdate:c,lastBaseUpdate:u,shared:i.shared,effects:i.effects},e.updateQueue=r;return}e=r.lastBaseUpdate,e===null?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}function D0(e,t,r,i){var c=e.updateQueue;xc=!1;var u=c.firstBaseUpdate,p=c.lastBaseUpdate,o=c.shared.pending;if(o!==null){c.shared.pending=null;var v=o,w=v.next;v.next=null,p===null?u=w:p.next=w,p=v;var A=e.alternate;A!==null&&(A=A.updateQueue,o=A.lastBaseUpdate,o!==p&&(o===null?A.firstBaseUpdate=w:o.next=w,A.lastBaseUpdate=v))}if(u!==null){var T=c.baseState;p=0,A=w=v=null,o=u;do{var P=o.lane,$=o.eventTime;if((i&P)===P){A!==null&&(A=A.next={eventTime:$,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var L=e,k=o;switch(P=t,$=r,k.tag){case 1:if(L=k.payload,typeof L=="function"){T=L.call($,T,P);break e}T=L;break e;case 3:L.flags=L.flags&-65537|128;case 0:if(L=k.payload,P=typeof L=="function"?L.call($,T,P):L,P==null)break e;T=Xn({},T,P);break e;case 2:xc=!0}}o.callback!==null&&o.lane!==0&&(e.flags|=64,P=c.effects,P===null?c.effects=[o]:P.push(o))}else $={eventTime:$,lane:P,tag:o.tag,payload:o.payload,callback:o.callback,next:null},A===null?(w=A=$,v=T):A=A.next=$,p|=P;if(o=o.next,o===null){if(o=c.shared.pending,o===null)break;P=o,o=P.next,P.next=null,c.lastBaseUpdate=P,c.shared.pending=null}}while(1);if(A===null&&(v=T),c.baseState=v,c.firstBaseUpdate=w,c.lastBaseUpdate=A,t=c.shared.interleaved,t!==null){c=t;do p|=c.lane,c=c.next;while(c!==t)}else u===null&&(c.shared.lanes=0);sh|=p,e.lanes=p,e.memoizedState=T}}function WI(e,t,r){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var i=e[t],c=i.callback;if(c!==null){if(i.callback=null,i=r,typeof c!="function")throw Error(Tt(191,c));c.call(i)}}}var az=new i3.Component().refs;function gS(e,t,r,i){t=e.memoizedState,r=r(i,t),r=r==null?t:Xn({},t,r),e.memoizedState=r,e.lanes===0&&(e.updateQueue.baseState=r)}var Kx={isMounted:function(e){return(e=e._reactInternals)?fh(e)===e:!1},enqueueSetState:function(e,t,r){e=e._reactInternals;var i=bo(),c=Dc(e),u=yl(i,c);u.payload=t,r!=null&&(u.callback=r),t=kc(e,u,c),t!==null&&(is(t,e,c,i),n0(t,e,c))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var i=bo(),c=Dc(e),u=yl(i,c);u.tag=1,u.payload=t,r!=null&&(u.callback=r),t=kc(e,u,c),t!==null&&(is(t,e,c,i),n0(t,e,c))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=bo(),i=Dc(e),c=yl(r,i);c.tag=2,t!=null&&(c.callback=t),t=kc(e,c,i),t!==null&&(is(t,e,i,r),n0(t,e,i))}};function HI(e,t,r,i,c,u,p){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(i,u,p):t.prototype&&t.prototype.isPureReactComponent?!Eg(r,i)||!Eg(c,u):!0}function sz(e,t,r){var i=!1,c=$c,u=t.contextType;return typeof u=="object"&&u!==null?u=Pa(u):(c=$o(t)?ih:fo.current,i=t.contextTypes,u=(i=i!=null)?od(e,c):$c),t=new t(r,u),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Kx,e.stateNode=t,t._reactInternals=e,i&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=c,e.__reactInternalMemoizedMaskedChildContext=u),t}function ZI(e,t,r,i){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(r,i),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(r,i),t.state!==e&&Kx.enqueueReplaceState(t,t.state,null)}function yS(e,t,r,i){var c=e.stateNode;c.props=r,c.state=e.memoizedState,c.refs=az,NT(e);var u=t.contextType;typeof u=="object"&&u!==null?c.context=Pa(u):(u=$o(t)?ih:fo.current,c.context=od(e,u)),c.state=e.memoizedState,u=t.getDerivedStateFromProps,typeof u=="function"&&(gS(e,t,u,r),c.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof c.getSnapshotBeforeUpdate=="function"||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(t=c.state,typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount(),t!==c.state&&Kx.enqueueReplaceState(c,c.state,null),D0(e,r,c,i),c.state=e.memoizedState),typeof c.componentDidMount=="function"&&(e.flags|=4194308)}function Mm(e,t,r){if(e=r.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(r._owner){if(r=r._owner,r){if(r.tag!==1)throw Error(Tt(309));var i=r.stateNode}if(!i)throw Error(Tt(147,e));var c=i,u=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===u?t.ref:(t=function(p){var o=c.refs;o===az&&(o=c.refs={}),p===null?delete o[u]:o[u]=p},t._stringRef=u,t)}if(typeof e!="string")throw Error(Tt(284));if(!r._owner)throw Error(Tt(290,e))}return e}function Dv(e,t){throw e=Object.prototype.toString.call(t),Error(Tt(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function XI(e){var t=e._init;return t(e._payload)}function lz(e){function t(R,j){if(e){var D=R.deletions;D===null?(R.deletions=[j],R.flags|=16):D.push(j)}}function r(R,j){if(!e)return null;for(;j!==null;)t(R,j),j=j.sibling;return null}function i(R,j){for(R=new Map;j!==null;)j.key!==null?R.set(j.key,j):R.set(j.index,j),j=j.sibling;return R}function c(R,j){return R=Rc(R,j),R.index=0,R.sibling=null,R}function u(R,j,D){return R.index=D,e?(D=R.alternate,D!==null?(D=D.index,D<j?(R.flags|=2,j):D):(R.flags|=2,j)):(R.flags|=1048576,j)}function p(R){return e&&R.alternate===null&&(R.flags|=2),R}function o(R,j,D,G){return j===null||j.tag!==6?(j=Hw(D,R.mode,G),j.return=R,j):(j=c(j,D),j.return=R,j)}function v(R,j,D,G){var W=D.type;return W===If?A(R,j,D.props.children,G,D.key):j!==null&&(j.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===vc&&XI(W)===j.type)?(G=c(j,D.props),G.ref=Mm(R,j,D),G.return=R,G):(G=c0(D.type,D.key,D.props,null,R.mode,G),G.ref=Mm(R,j,D),G.return=R,G)}function w(R,j,D,G){return j===null||j.tag!==4||j.stateNode.containerInfo!==D.containerInfo||j.stateNode.implementation!==D.implementation?(j=Zw(D,R.mode,G),j.return=R,j):(j=c(j,D.children||[]),j.return=R,j)}function A(R,j,D,G,W){return j===null||j.tag!==7?(j=Qu(D,R.mode,G,W),j.return=R,j):(j=c(j,D),j.return=R,j)}function T(R,j,D){if(typeof j=="string"&&j!==""||typeof j=="number")return j=Hw(""+j,R.mode,D),j.return=R,j;if(typeof j=="object"&&j!==null){switch(j.$$typeof){case wv:return D=c0(j.type,j.key,j.props,null,R.mode,D),D.ref=Mm(R,null,j),D.return=R,D;case Pf:return j=Zw(j,R.mode,D),j.return=R,j;case vc:var G=j._init;return T(R,G(j._payload),D)}if(Hm(j)||wm(j))return j=Qu(j,R.mode,D,null),j.return=R,j;Dv(R,j)}return null}function P(R,j,D,G){var W=j!==null?j.key:null;if(typeof D=="string"&&D!==""||typeof D=="number")return W!==null?null:o(R,j,""+D,G);if(typeof D=="object"&&D!==null){switch(D.$$typeof){case wv:return D.key===W?v(R,j,D,G):null;case Pf:return D.key===W?w(R,j,D,G):null;case vc:return W=D._init,P(R,j,W(D._payload),G)}if(Hm(D)||wm(D))return W!==null?null:A(R,j,D,G,null);Dv(R,D)}return null}function $(R,j,D,G,W){if(typeof G=="string"&&G!==""||typeof G=="number")return R=R.get(D)||null,o(j,R,""+G,W);if(typeof G=="object"&&G!==null){switch(G.$$typeof){case wv:return R=R.get(G.key===null?D:G.key)||null,v(j,R,G,W);case Pf:return R=R.get(G.key===null?D:G.key)||null,w(j,R,G,W);case vc:var Y=G._init;return $(R,j,D,Y(G._payload),W)}if(Hm(G)||wm(G))return R=R.get(D)||null,A(j,R,G,W,null);Dv(j,G)}return null}function L(R,j,D,G){for(var W=null,Y=null,ee=j,de=j=0,xe=null;ee!==null&&de<D.length;de++){ee.index>de?(xe=ee,ee=null):xe=ee.sibling;var Me=P(R,ee,D[de],G);if(Me===null){ee===null&&(ee=xe);break}e&&ee&&Me.alternate===null&&t(R,ee),j=u(Me,j,de),Y===null?W=Me:Y.sibling=Me,Y=Me,ee=xe}if(de===D.length)return r(R,ee),Nn&&Nu(R,de),W;if(ee===null){for(;de<D.length;de++)ee=T(R,D[de],G),ee!==null&&(j=u(ee,j,de),Y===null?W=ee:Y.sibling=ee,Y=ee);return Nn&&Nu(R,de),W}for(ee=i(R,ee);de<D.length;de++)xe=$(ee,R,de,D[de],G),xe!==null&&(e&&xe.alternate!==null&&ee.delete(xe.key===null?de:xe.key),j=u(xe,j,de),Y===null?W=xe:Y.sibling=xe,Y=xe);return e&&ee.forEach(function(Ce){return t(R,Ce)}),Nn&&Nu(R,de),W}function k(R,j,D,G){var W=wm(D);if(typeof W!="function")throw Error(Tt(150));if(D=W.call(D),D==null)throw Error(Tt(151));for(var Y=W=null,ee=j,de=j=0,xe=null,Me=D.next();ee!==null&&!Me.done;de++,Me=D.next()){ee.index>de?(xe=ee,ee=null):xe=ee.sibling;var Ce=P(R,ee,Me.value,G);if(Ce===null){ee===null&&(ee=xe);break}e&&ee&&Ce.alternate===null&&t(R,ee),j=u(Ce,j,de),Y===null?W=Ce:Y.sibling=Ce,Y=Ce,ee=xe}if(Me.done)return r(R,ee),Nn&&Nu(R,de),W;if(ee===null){for(;!Me.done;de++,Me=D.next())Me=T(R,Me.value,G),Me!==null&&(j=u(Me,j,de),Y===null?W=Me:Y.sibling=Me,Y=Me);return Nn&&Nu(R,de),W}for(ee=i(R,ee);!Me.done;de++,Me=D.next())Me=$(ee,R,de,Me.value,G),Me!==null&&(e&&Me.alternate!==null&&ee.delete(Me.key===null?de:Me.key),j=u(Me,j,de),Y===null?W=Me:Y.sibling=Me,Y=Me);return e&&ee.forEach(function(qe){return t(R,qe)}),Nn&&Nu(R,de),W}function N(R,j,D,G){if(typeof D=="object"&&D!==null&&D.type===If&&D.key===null&&(D=D.props.children),typeof D=="object"&&D!==null){switch(D.$$typeof){case wv:e:{for(var W=D.key,Y=j;Y!==null;){if(Y.key===W){if(W=D.type,W===If){if(Y.tag===7){r(R,Y.sibling),j=c(Y,D.props.children),j.return=R,R=j;break e}}else if(Y.elementType===W||typeof W=="object"&&W!==null&&W.$$typeof===vc&&XI(W)===Y.type){r(R,Y.sibling),j=c(Y,D.props),j.ref=Mm(R,Y,D),j.return=R,R=j;break e}r(R,Y);break}else t(R,Y);Y=Y.sibling}D.type===If?(j=Qu(D.props.children,R.mode,G,D.key),j.return=R,R=j):(G=c0(D.type,D.key,D.props,null,R.mode,G),G.ref=Mm(R,j,D),G.return=R,R=G)}return p(R);case Pf:e:{for(Y=D.key;j!==null;){if(j.key===Y)if(j.tag===4&&j.stateNode.containerInfo===D.containerInfo&&j.stateNode.implementation===D.implementation){r(R,j.sibling),j=c(j,D.children||[]),j.return=R,R=j;break e}else{r(R,j);break}else t(R,j);j=j.sibling}j=Zw(D,R.mode,G),j.return=R,R=j}return p(R);case vc:return Y=D._init,N(R,j,Y(D._payload),G)}if(Hm(D))return L(R,j,D,G);if(wm(D))return k(R,j,D,G);Dv(R,D)}return typeof D=="string"&&D!==""||typeof D=="number"?(D=""+D,j!==null&&j.tag===6?(r(R,j.sibling),j=c(j,D),j.return=R,R=j):(r(R,j),j=Hw(D,R.mode,G),j.return=R,R=j),p(R)):r(R,j)}return N}var sd=lz(!0),cz=lz(!1),yy={},Bs=jc(yy),Cg=jc(yy),Pg=jc(yy);function Zu(e){if(e===yy)throw Error(Tt(174));return e}function jT(e,t){switch(An(Pg,t),An(Cg,e),An(Bs,yy),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:X2(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=X2(t,e)}Rn(Bs),An(Bs,t)}function ld(){Rn(Bs),Rn(Cg),Rn(Pg)}function uz(e){Zu(Pg.current);var t=Zu(Bs.current),r=X2(t,e.type);t!==r&&(An(Cg,e),An(Bs,r))}function UT(e){Cg.current===e&&(Rn(Bs),Rn(Cg))}var Hn=jc(0);function R0(e){for(var t=e;t!==null;){if(t.tag===13){var r=t.memoizedState;if(r!==null&&(r=r.dehydrated,r===null||r.data==="$?"||r.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var jw=[];function VT(){for(var e=0;e<jw.length;e++)jw[e]._workInProgressVersionPrimary=null;jw.length=0}var i0=Ol.ReactCurrentDispatcher,Uw=Ol.ReactCurrentBatchConfig,ah=0,Zn=null,xi=null,zi=null,L0=!1,ig=!1,Ig=0,OU=0;function ao(){throw Error(Tt(321))}function GT(e,t){if(t===null)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!os(e[r],t[r]))return!1;return!0}function qT(e,t,r,i,c,u){if(ah=u,Zn=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,i0.current=e===null||e.memoizedState===null?zU:BU,e=r(i,c),ig){u=0;do{if(ig=!1,Ig=0,25<=u)throw Error(Tt(301));u+=1,zi=xi=null,t.updateQueue=null,i0.current=$U,e=r(i,c)}while(ig)}if(i0.current=z0,t=xi!==null&&xi.next!==null,ah=0,zi=xi=Zn=null,L0=!1,t)throw Error(Tt(300));return e}function WT(){var e=Ig!==0;return Ig=0,e}function Cs(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zi===null?Zn.memoizedState=zi=e:zi=zi.next=e,zi}function Ia(){if(xi===null){var e=Zn.alternate;e=e!==null?e.memoizedState:null}else e=xi.next;var t=zi===null?Zn.memoizedState:zi.next;if(t!==null)zi=t,xi=e;else{if(e===null)throw Error(Tt(310));xi=e,e={memoizedState:xi.memoizedState,baseState:xi.baseState,baseQueue:xi.baseQueue,queue:xi.queue,next:null},zi===null?Zn.memoizedState=zi=e:zi=zi.next=e}return zi}function kg(e,t){return typeof t=="function"?t(e):t}function Vw(e){var t=Ia(),r=t.queue;if(r===null)throw Error(Tt(311));r.lastRenderedReducer=e;var i=xi,c=i.baseQueue,u=r.pending;if(u!==null){if(c!==null){var p=c.next;c.next=u.next,u.next=p}i.baseQueue=c=u,r.pending=null}if(c!==null){u=c.next,i=i.baseState;var o=p=null,v=null,w=u;do{var A=w.lane;if((ah&A)===A)v!==null&&(v=v.next={lane:0,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null}),i=w.hasEagerState?w.eagerState:e(i,w.action);else{var T={lane:A,action:w.action,hasEagerState:w.hasEagerState,eagerState:w.eagerState,next:null};v===null?(o=v=T,p=i):v=v.next=T,Zn.lanes|=A,sh|=A}w=w.next}while(w!==null&&w!==u);v===null?p=i:v.next=o,os(i,t.memoizedState)||(Lo=!0),t.memoizedState=i,t.baseState=p,t.baseQueue=v,r.lastRenderedState=i}if(e=r.interleaved,e!==null){c=e;do u=c.lane,Zn.lanes|=u,sh|=u,c=c.next;while(c!==e)}else c===null&&(r.lanes=0);return[t.memoizedState,r.dispatch]}function Gw(e){var t=Ia(),r=t.queue;if(r===null)throw Error(Tt(311));r.lastRenderedReducer=e;var i=r.dispatch,c=r.pending,u=t.memoizedState;if(c!==null){r.pending=null;var p=c=c.next;do u=e(u,p.action),p=p.next;while(p!==c);os(u,t.memoizedState)||(Lo=!0),t.memoizedState=u,t.baseQueue===null&&(t.baseState=u),r.lastRenderedState=u}return[u,i]}function hz(){}function fz(e,t){var r=Zn,i=Ia(),c=t(),u=!os(i.memoizedState,c);if(u&&(i.memoizedState=c,Lo=!0),i=i.queue,HT(mz.bind(null,r,i,e),[e]),i.getSnapshot!==t||u||zi!==null&&zi.memoizedState.tag&1){if(r.flags|=2048,Og(9,pz.bind(null,r,i,c,t),void 0,null),Bi===null)throw Error(Tt(349));ah&30||dz(r,t,c)}return c}function dz(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},t=Zn.updateQueue,t===null?(t={lastEffect:null,stores:null},Zn.updateQueue=t,t.stores=[e]):(r=t.stores,r===null?t.stores=[e]:r.push(e))}function pz(e,t,r,i){t.value=r,t.getSnapshot=i,gz(t)&&yz(e)}function mz(e,t,r){return r(function(){gz(t)&&yz(e)})}function gz(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!os(e,r)}catch{return!0}}function yz(e){var t=Al(e,1);t!==null&&is(t,e,1,-1)}function KI(e){var t=Cs();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:kg,lastRenderedState:e},t.queue=e,e=e.dispatch=LU.bind(null,Zn,e),[t.memoizedState,e]}function Og(e,t,r,i){return e={tag:e,create:t,destroy:r,deps:i,next:null},t=Zn.updateQueue,t===null?(t={lastEffect:null,stores:null},Zn.updateQueue=t,t.lastEffect=e.next=e):(r=t.lastEffect,r===null?t.lastEffect=e.next=e:(i=r.next,r.next=e,e.next=i,t.lastEffect=e)),e}function _z(){return Ia().memoizedState}function o0(e,t,r,i){var c=Cs();Zn.flags|=e,c.memoizedState=Og(1|t,r,void 0,i===void 0?null:i)}function Yx(e,t,r,i){var c=Ia();i=i===void 0?null:i;var u=void 0;if(xi!==null){var p=xi.memoizedState;if(u=p.destroy,i!==null&&GT(i,p.deps)){c.memoizedState=Og(t,r,u,i);return}}Zn.flags|=e,c.memoizedState=Og(1|t,r,u,i)}function YI(e,t){return o0(8390656,8,e,t)}function HT(e,t){return Yx(2048,8,e,t)}function vz(e,t){return Yx(4,2,e,t)}function xz(e,t){return Yx(4,4,e,t)}function bz(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function wz(e,t,r){return r=r!=null?r.concat([e]):null,Yx(4,4,bz.bind(null,t,e),r)}function ZT(){}function Sz(e,t){var r=Ia();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&GT(t,i[1])?i[0]:(r.memoizedState=[e,t],e)}function Ez(e,t){var r=Ia();t=t===void 0?null:t;var i=r.memoizedState;return i!==null&&t!==null&&GT(t,i[1])?i[0]:(e=e(),r.memoizedState=[e,t],e)}function Tz(e,t,r){return ah&21?(os(r,t)||(r=C3(),Zn.lanes|=r,sh|=r,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Lo=!0),e.memoizedState=r)}function DU(e,t){var r=_n;_n=r!==0&&4>r?r:4,e(!0);var i=Uw.transition;Uw.transition={};try{e(!1),t()}finally{_n=r,Uw.transition=i}}function Az(){return Ia().memoizedState}function RU(e,t,r){var i=Dc(e);if(r={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null},Mz(e))Cz(t,r);else if(r=iz(e,t,r,i),r!==null){var c=bo();is(r,e,i,c),Pz(r,t,i)}}function LU(e,t,r){var i=Dc(e),c={lane:i,action:r,hasEagerState:!1,eagerState:null,next:null};if(Mz(e))Cz(t,c);else{var u=e.alternate;if(e.lanes===0&&(u===null||u.lanes===0)&&(u=t.lastRenderedReducer,u!==null))try{var p=t.lastRenderedState,o=u(p,r);if(c.hasEagerState=!0,c.eagerState=o,os(o,p)){var v=t.interleaved;v===null?(c.next=c,FT(t)):(c.next=v.next,v.next=c),t.interleaved=c;return}}catch{}finally{}r=iz(e,t,c,i),r!==null&&(c=bo(),is(r,e,i,c),Pz(r,t,i))}}function Mz(e){var t=e.alternate;return e===Zn||t!==null&&t===Zn}function Cz(e,t){ig=L0=!0;var r=e.pending;r===null?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function Pz(e,t,r){if(r&4194240){var i=t.lanes;i&=e.pendingLanes,r|=i,t.lanes=r,TT(e,r)}}var z0={readContext:Pa,useCallback:ao,useContext:ao,useEffect:ao,useImperativeHandle:ao,useInsertionEffect:ao,useLayoutEffect:ao,useMemo:ao,useReducer:ao,useRef:ao,useState:ao,useDebugValue:ao,useDeferredValue:ao,useTransition:ao,useMutableSource:ao,useSyncExternalStore:ao,useId:ao,unstable_isNewReconciler:!1},zU={readContext:Pa,useCallback:function(e,t){return Cs().memoizedState=[e,t===void 0?null:t],e},useContext:Pa,useEffect:YI,useImperativeHandle:function(e,t,r){return r=r!=null?r.concat([e]):null,o0(4194308,4,bz.bind(null,t,e),r)},useLayoutEffect:function(e,t){return o0(4194308,4,e,t)},useInsertionEffect:function(e,t){return o0(4,2,e,t)},useMemo:function(e,t){var r=Cs();return t=t===void 0?null:t,e=e(),r.memoizedState=[e,t],e},useReducer:function(e,t,r){var i=Cs();return t=r!==void 0?r(t):t,i.memoizedState=i.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},i.queue=e,e=e.dispatch=RU.bind(null,Zn,e),[i.memoizedState,e]},useRef:function(e){var t=Cs();return e={current:e},t.memoizedState=e},useState:KI,useDebugValue:ZT,useDeferredValue:function(e){return Cs().memoizedState=e},useTransition:function(){var e=KI(!1),t=e[0];return e=DU.bind(null,e[1]),Cs().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,r){var i=Zn,c=Cs();if(Nn){if(r===void 0)throw Error(Tt(407));r=r()}else{if(r=t(),Bi===null)throw Error(Tt(349));ah&30||dz(i,t,r)}c.memoizedState=r;var u={value:r,getSnapshot:t};return c.queue=u,YI(mz.bind(null,i,u,e),[e]),i.flags|=2048,Og(9,pz.bind(null,i,u,r,t),void 0,null),r},useId:function(){var e=Cs(),t=Bi.identifierPrefix;if(Nn){var r=dl,i=fl;r=(i&~(1<<32-ns(i)-1)).toString(32)+r,t=":"+t+"R"+r,r=Ig++,0<r&&(t+="H"+r.toString(32)),t+=":"}else r=OU++,t=":"+t+"r"+r.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},BU={readContext:Pa,useCallback:Sz,useContext:Pa,useEffect:HT,useImperativeHandle:wz,useInsertionEffect:vz,useLayoutEffect:xz,useMemo:Ez,useReducer:Vw,useRef:_z,useState:function(){return Vw(kg)},useDebugValue:ZT,useDeferredValue:function(e){var t=Ia();return Tz(t,xi.memoizedState,e)},useTransition:function(){var e=Vw(kg)[0],t=Ia().memoizedState;return[e,t]},useMutableSource:hz,useSyncExternalStore:fz,useId:Az,unstable_isNewReconciler:!1},$U={readContext:Pa,useCallback:Sz,useContext:Pa,useEffect:HT,useImperativeHandle:wz,useInsertionEffect:vz,useLayoutEffect:xz,useMemo:Ez,useReducer:Gw,useRef:_z,useState:function(){return Gw(kg)},useDebugValue:ZT,useDeferredValue:function(e){var t=Ia();return xi===null?t.memoizedState=e:Tz(t,xi.memoizedState,e)},useTransition:function(){var e=Gw(kg)[0],t=Ia().memoizedState;return[e,t]},useMutableSource:hz,useSyncExternalStore:fz,useId:Az,unstable_isNewReconciler:!1};function cd(e,t){try{var r="",i=t;do r+=f6(i),i=i.return;while(i);var c=r}catch(u){c=`
Error generating stack: `+u.message+`
`+u.stack}return{value:e,source:t,stack:c,digest:null}}function qw(e,t,r){return{value:e,source:null,stack:r??null,digest:t??null}}function _S(e,t){try{console.error(t.value)}catch(r){setTimeout(function(){throw r})}}var FU=typeof WeakMap=="function"?WeakMap:Map;function Iz(e,t,r){r=yl(-1,r),r.tag=3,r.payload={element:null};var i=t.value;return r.callback=function(){$0||($0=!0,CS=i),_S(e,t)},r}function kz(e,t,r){r=yl(-1,r),r.tag=3;var i=e.type.getDerivedStateFromError;if(typeof i=="function"){var c=t.value;r.payload=function(){return i(c)},r.callback=function(){_S(e,t)}}var u=e.stateNode;return u!==null&&typeof u.componentDidCatch=="function"&&(r.callback=function(){_S(e,t),typeof i!="function"&&(Oc===null?Oc=new Set([this]):Oc.add(this));var p=t.stack;this.componentDidCatch(t.value,{componentStack:p!==null?p:""})}),r}function JI(e,t,r){var i=e.pingCache;if(i===null){i=e.pingCache=new FU;var c=new Set;i.set(t,c)}else c=i.get(t),c===void 0&&(c=new Set,i.set(t,c));c.has(r)||(c.add(r),e=QU.bind(null,e,t,r),t.then(e,e))}function QI(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function ek(e,t,r,i,c){return e.mode&1?(e.flags|=65536,e.lanes=c,e):(e===t?e.flags|=65536:(e.flags|=128,r.flags|=131072,r.flags&=-52805,r.tag===1&&(r.alternate===null?r.tag=17:(t=yl(-1,1),t.tag=2,kc(r,t,1))),r.lanes|=1),e)}var NU=Ol.ReactCurrentOwner,Lo=!1;function _o(e,t,r,i){t.child=e===null?cz(t,null,r,i):sd(t,e.child,r,i)}function tk(e,t,r,i,c){r=r.render;var u=t.ref;return Kf(t,c),i=qT(e,t,r,i,u,c),r=WT(),e!==null&&!Lo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Ml(e,t,c)):(Nn&&r&&DT(t),t.flags|=1,_o(e,t,i,c),t.child)}function rk(e,t,r,i,c){if(e===null){var u=r.type;return typeof u=="function"&&!rA(u)&&u.defaultProps===void 0&&r.compare===null&&r.defaultProps===void 0?(t.tag=15,t.type=u,Oz(e,t,u,i,c)):(e=c0(r.type,null,i,t,t.mode,c),e.ref=t.ref,e.return=t,t.child=e)}if(u=e.child,!(e.lanes&c)){var p=u.memoizedProps;if(r=r.compare,r=r!==null?r:Eg,r(p,i)&&e.ref===t.ref)return Ml(e,t,c)}return t.flags|=1,e=Rc(u,i),e.ref=t.ref,e.return=t,t.child=e}function Oz(e,t,r,i,c){if(e!==null){var u=e.memoizedProps;if(Eg(u,i)&&e.ref===t.ref)if(Lo=!1,t.pendingProps=i=u,(e.lanes&c)!==0)e.flags&131072&&(Lo=!0);else return t.lanes=e.lanes,Ml(e,t,c)}return vS(e,t,r,i,c)}function Dz(e,t,r){var i=t.pendingProps,c=i.children,u=e!==null?e.memoizedState:null;if(i.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},An(Nf,Ko),Ko|=r;else{if(!(r&1073741824))return e=u!==null?u.baseLanes|r:r,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,An(Nf,Ko),Ko|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=u!==null?u.baseLanes:r,An(Nf,Ko),Ko|=i}else u!==null?(i=u.baseLanes|r,t.memoizedState=null):i=r,An(Nf,Ko),Ko|=i;return _o(e,t,c,r),t.child}function Rz(e,t){var r=t.ref;(e===null&&r!==null||e!==null&&e.ref!==r)&&(t.flags|=512,t.flags|=2097152)}function vS(e,t,r,i,c){var u=$o(r)?ih:fo.current;return u=od(t,u),Kf(t,c),r=qT(e,t,r,i,u,c),i=WT(),e!==null&&!Lo?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~c,Ml(e,t,c)):(Nn&&i&&DT(t),t.flags|=1,_o(e,t,r,c),t.child)}function nk(e,t,r,i,c){if($o(r)){var u=!0;C0(t)}else u=!1;if(Kf(t,c),t.stateNode===null)a0(e,t),sz(t,r,i),yS(t,r,i,c),i=!0;else if(e===null){var p=t.stateNode,o=t.memoizedProps;p.props=o;var v=p.context,w=r.contextType;typeof w=="object"&&w!==null?w=Pa(w):(w=$o(r)?ih:fo.current,w=od(t,w));var A=r.getDerivedStateFromProps,T=typeof A=="function"||typeof p.getSnapshotBeforeUpdate=="function";T||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(o!==i||v!==w)&&ZI(t,p,i,w),xc=!1;var P=t.memoizedState;p.state=P,D0(t,i,p,c),v=t.memoizedState,o!==i||P!==v||Bo.current||xc?(typeof A=="function"&&(gS(t,r,A,i),v=t.memoizedState),(o=xc||HI(t,r,o,i,P,v,w))?(T||typeof p.UNSAFE_componentWillMount!="function"&&typeof p.componentWillMount!="function"||(typeof p.componentWillMount=="function"&&p.componentWillMount(),typeof p.UNSAFE_componentWillMount=="function"&&p.UNSAFE_componentWillMount()),typeof p.componentDidMount=="function"&&(t.flags|=4194308)):(typeof p.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=i,t.memoizedState=v),p.props=i,p.state=v,p.context=w,i=o):(typeof p.componentDidMount=="function"&&(t.flags|=4194308),i=!1)}else{p=t.stateNode,oz(e,t),o=t.memoizedProps,w=t.type===t.elementType?o:Ka(t.type,o),p.props=w,T=t.pendingProps,P=p.context,v=r.contextType,typeof v=="object"&&v!==null?v=Pa(v):(v=$o(r)?ih:fo.current,v=od(t,v));var $=r.getDerivedStateFromProps;(A=typeof $=="function"||typeof p.getSnapshotBeforeUpdate=="function")||typeof p.UNSAFE_componentWillReceiveProps!="function"&&typeof p.componentWillReceiveProps!="function"||(o!==T||P!==v)&&ZI(t,p,i,v),xc=!1,P=t.memoizedState,p.state=P,D0(t,i,p,c);var L=t.memoizedState;o!==T||P!==L||Bo.current||xc?(typeof $=="function"&&(gS(t,r,$,i),L=t.memoizedState),(w=xc||HI(t,r,w,i,P,L,v)||!1)?(A||typeof p.UNSAFE_componentWillUpdate!="function"&&typeof p.componentWillUpdate!="function"||(typeof p.componentWillUpdate=="function"&&p.componentWillUpdate(i,L,v),typeof p.UNSAFE_componentWillUpdate=="function"&&p.UNSAFE_componentWillUpdate(i,L,v)),typeof p.componentDidUpdate=="function"&&(t.flags|=4),typeof p.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof p.componentDidUpdate!="function"||o===e.memoizedProps&&P===e.memoizedState||(t.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&P===e.memoizedState||(t.flags|=1024),t.memoizedProps=i,t.memoizedState=L),p.props=i,p.state=L,p.context=v,i=w):(typeof p.componentDidUpdate!="function"||o===e.memoizedProps&&P===e.memoizedState||(t.flags|=4),typeof p.getSnapshotBeforeUpdate!="function"||o===e.memoizedProps&&P===e.memoizedState||(t.flags|=1024),i=!1)}return xS(e,t,r,i,u,c)}function xS(e,t,r,i,c,u){Rz(e,t);var p=(t.flags&128)!==0;if(!i&&!p)return c&&UI(t,r,!1),Ml(e,t,u);i=t.stateNode,NU.current=t;var o=p&&typeof r.getDerivedStateFromError!="function"?null:i.render();return t.flags|=1,e!==null&&p?(t.child=sd(t,e.child,null,u),t.child=sd(t,null,o,u)):_o(e,t,o,u),t.memoizedState=i.state,c&&UI(t,r,!0),t.child}function Lz(e){var t=e.stateNode;t.pendingContext?jI(e,t.pendingContext,t.pendingContext!==t.context):t.context&&jI(e,t.context,!1),jT(e,t.containerInfo)}function ik(e,t,r,i,c){return ad(),LT(c),t.flags|=256,_o(e,t,r,i),t.child}var bS={dehydrated:null,treeContext:null,retryLane:0};function wS(e){return{baseLanes:e,cachePool:null,transitions:null}}function zz(e,t,r){var i=t.pendingProps,c=Hn.current,u=!1,p=(t.flags&128)!==0,o;if((o=p)||(o=e!==null&&e.memoizedState===null?!1:(c&2)!==0),o?(u=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(c|=1),An(Hn,c&1),e===null)return pS(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(p=i.children,e=i.fallback,u?(i=t.mode,u=t.child,p={mode:"hidden",children:p},!(i&1)&&u!==null?(u.childLanes=0,u.pendingProps=p):u=e1(p,i,0,null),e=Qu(e,i,r,null),u.return=t,e.return=t,u.sibling=e,t.child=u,t.child.memoizedState=wS(r),t.memoizedState=bS,e):XT(t,p));if(c=e.memoizedState,c!==null&&(o=c.dehydrated,o!==null))return jU(e,t,p,i,o,c,r);if(u){u=i.fallback,p=t.mode,c=e.child,o=c.sibling;var v={mode:"hidden",children:i.children};return!(p&1)&&t.child!==c?(i=t.child,i.childLanes=0,i.pendingProps=v,t.deletions=null):(i=Rc(c,v),i.subtreeFlags=c.subtreeFlags&14680064),o!==null?u=Rc(o,u):(u=Qu(u,p,r,null),u.flags|=2),u.return=t,i.return=t,i.sibling=u,t.child=i,i=u,u=t.child,p=e.child.memoizedState,p=p===null?wS(r):{baseLanes:p.baseLanes|r,cachePool:null,transitions:p.transitions},u.memoizedState=p,u.childLanes=e.childLanes&~r,t.memoizedState=bS,i}return u=e.child,e=u.sibling,i=Rc(u,{mode:"visible",children:i.children}),!(t.mode&1)&&(i.lanes=r),i.return=t,i.sibling=null,e!==null&&(r=t.deletions,r===null?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=i,t.memoizedState=null,i}function XT(e,t){return t=e1({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Rv(e,t,r,i){return i!==null&&LT(i),sd(t,e.child,null,r),e=XT(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function jU(e,t,r,i,c,u,p){if(r)return t.flags&256?(t.flags&=-257,i=qw(Error(Tt(422))),Rv(e,t,p,i)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(u=i.fallback,c=t.mode,i=e1({mode:"visible",children:i.children},c,0,null),u=Qu(u,c,p,null),u.flags|=2,i.return=t,u.return=t,i.sibling=u,t.child=i,t.mode&1&&sd(t,e.child,null,p),t.child.memoizedState=wS(p),t.memoizedState=bS,u);if(!(t.mode&1))return Rv(e,t,p,null);if(c.data==="$!"){if(i=c.nextSibling&&c.nextSibling.dataset,i)var o=i.dgst;return i=o,u=Error(Tt(419)),i=qw(u,i,void 0),Rv(e,t,p,i)}if(o=(p&e.childLanes)!==0,Lo||o){if(i=Bi,i!==null){switch(p&-p){case 4:c=2;break;case 16:c=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:c=32;break;case 536870912:c=268435456;break;default:c=0}c=c&(i.suspendedLanes|p)?0:c,c!==0&&c!==u.retryLane&&(u.retryLane=c,Al(e,c),is(i,e,c,-1))}return tA(),i=qw(Error(Tt(421))),Rv(e,t,p,i)}return c.data==="$?"?(t.flags|=128,t.child=e.child,t=e8.bind(null,e),c._reactRetry=t,null):(e=u.treeContext,Qo=Ic(c.nextSibling),ea=t,Nn=!0,es=null,e!==null&&(xa[ba++]=fl,xa[ba++]=dl,xa[ba++]=oh,fl=e.id,dl=e.overflow,oh=t),t=XT(t,i.children),t.flags|=4096,t)}function ok(e,t,r){e.lanes|=t;var i=e.alternate;i!==null&&(i.lanes|=t),mS(e.return,t,r)}function Ww(e,t,r,i,c){var u=e.memoizedState;u===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:i,tail:r,tailMode:c}:(u.isBackwards=t,u.rendering=null,u.renderingStartTime=0,u.last=i,u.tail=r,u.tailMode=c)}function Bz(e,t,r){var i=t.pendingProps,c=i.revealOrder,u=i.tail;if(_o(e,t,i.children,r),i=Hn.current,i&2)i=i&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&ok(e,r,t);else if(e.tag===19)ok(e,r,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}i&=1}if(An(Hn,i),!(t.mode&1))t.memoizedState=null;else switch(c){case"forwards":for(r=t.child,c=null;r!==null;)e=r.alternate,e!==null&&R0(e)===null&&(c=r),r=r.sibling;r=c,r===null?(c=t.child,t.child=null):(c=r.sibling,r.sibling=null),Ww(t,!1,c,r,u);break;case"backwards":for(r=null,c=t.child,t.child=null;c!==null;){if(e=c.alternate,e!==null&&R0(e)===null){t.child=c;break}e=c.sibling,c.sibling=r,r=c,c=e}Ww(t,!0,r,null,u);break;case"together":Ww(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function a0(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Ml(e,t,r){if(e!==null&&(t.dependencies=e.dependencies),sh|=t.lanes,!(r&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Tt(153));if(t.child!==null){for(e=t.child,r=Rc(e,e.pendingProps),t.child=r,r.return=t;e.sibling!==null;)e=e.sibling,r=r.sibling=Rc(e,e.pendingProps),r.return=t;r.sibling=null}return t.child}function UU(e,t,r){switch(t.tag){case 3:Lz(t),ad();break;case 5:uz(t);break;case 1:$o(t.type)&&C0(t);break;case 4:jT(t,t.stateNode.containerInfo);break;case 10:var i=t.type._context,c=t.memoizedProps.value;An(k0,i._currentValue),i._currentValue=c;break;case 13:if(i=t.memoizedState,i!==null)return i.dehydrated!==null?(An(Hn,Hn.current&1),t.flags|=128,null):r&t.child.childLanes?zz(e,t,r):(An(Hn,Hn.current&1),e=Ml(e,t,r),e!==null?e.sibling:null);An(Hn,Hn.current&1);break;case 19:if(i=(r&t.childLanes)!==0,e.flags&128){if(i)return Bz(e,t,r);t.flags|=128}if(c=t.memoizedState,c!==null&&(c.rendering=null,c.tail=null,c.lastEffect=null),An(Hn,Hn.current),i)break;return null;case 22:case 23:return t.lanes=0,Dz(e,t,r)}return Ml(e,t,r)}var $z,SS,Fz,Nz;$z=function(e,t){for(var r=t.child;r!==null;){if(r.tag===5||r.tag===6)e.appendChild(r.stateNode);else if(r.tag!==4&&r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return;r=r.return}r.sibling.return=r.return,r=r.sibling}};SS=function(){};Fz=function(e,t,r,i){var c=e.memoizedProps;if(c!==i){e=t.stateNode,Zu(Bs.current);var u=null;switch(r){case"input":c=q2(e,c),i=q2(e,i),u=[];break;case"select":c=Xn({},c,{value:void 0}),i=Xn({},i,{value:void 0}),u=[];break;case"textarea":c=Z2(e,c),i=Z2(e,i),u=[];break;default:typeof c.onClick!="function"&&typeof i.onClick=="function"&&(e.onclick=A0)}K2(r,i);var p;r=null;for(w in c)if(!i.hasOwnProperty(w)&&c.hasOwnProperty(w)&&c[w]!=null)if(w==="style"){var o=c[w];for(p in o)o.hasOwnProperty(p)&&(r||(r={}),r[p]="")}else w!=="dangerouslySetInnerHTML"&&w!=="children"&&w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&w!=="autoFocus"&&(yg.hasOwnProperty(w)?u||(u=[]):(u=u||[]).push(w,null));for(w in i){var v=i[w];if(o=c!=null?c[w]:void 0,i.hasOwnProperty(w)&&v!==o&&(v!=null||o!=null))if(w==="style")if(o){for(p in o)!o.hasOwnProperty(p)||v&&v.hasOwnProperty(p)||(r||(r={}),r[p]="");for(p in v)v.hasOwnProperty(p)&&o[p]!==v[p]&&(r||(r={}),r[p]=v[p])}else r||(u||(u=[]),u.push(w,r)),r=v;else w==="dangerouslySetInnerHTML"?(v=v?v.__html:void 0,o=o?o.__html:void 0,v!=null&&o!==v&&(u=u||[]).push(w,v)):w==="children"?typeof v!="string"&&typeof v!="number"||(u=u||[]).push(w,""+v):w!=="suppressContentEditableWarning"&&w!=="suppressHydrationWarning"&&(yg.hasOwnProperty(w)?(v!=null&&w==="onScroll"&&kn("scroll",e),u||o===v||(u=[])):(u=u||[]).push(w,v))}r&&(u=u||[]).push("style",r);var w=u;(t.updateQueue=w)&&(t.flags|=4)}};Nz=function(e,t,r,i){r!==i&&(t.flags|=4)};function Cm(e,t){if(!Nn)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;t!==null;)t.alternate!==null&&(r=t),t=t.sibling;r===null?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:i.sibling=null}}function so(e){var t=e.alternate!==null&&e.alternate.child===e.child,r=0,i=0;if(t)for(var c=e.child;c!==null;)r|=c.lanes|c.childLanes,i|=c.subtreeFlags&14680064,i|=c.flags&14680064,c.return=e,c=c.sibling;else for(c=e.child;c!==null;)r|=c.lanes|c.childLanes,i|=c.subtreeFlags,i|=c.flags,c.return=e,c=c.sibling;return e.subtreeFlags|=i,e.childLanes=r,t}function VU(e,t,r){var i=t.pendingProps;switch(RT(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return so(t),null;case 1:return $o(t.type)&&M0(),so(t),null;case 3:return i=t.stateNode,ld(),Rn(Bo),Rn(fo),VT(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(e===null||e.child===null)&&(Ov(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,es!==null&&(kS(es),es=null))),SS(e,t),so(t),null;case 5:UT(t);var c=Zu(Pg.current);if(r=t.type,e!==null&&t.stateNode!=null)Fz(e,t,r,i,c),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!i){if(t.stateNode===null)throw Error(Tt(166));return so(t),null}if(e=Zu(Bs.current),Ov(t)){i=t.stateNode,r=t.type;var u=t.memoizedProps;switch(i[Os]=t,i[Mg]=u,e=(t.mode&1)!==0,r){case"dialog":kn("cancel",i),kn("close",i);break;case"iframe":case"object":case"embed":kn("load",i);break;case"video":case"audio":for(c=0;c<Xm.length;c++)kn(Xm[c],i);break;case"source":kn("error",i);break;case"img":case"image":case"link":kn("error",i),kn("load",i);break;case"details":kn("toggle",i);break;case"input":pI(i,u),kn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!u.multiple},kn("invalid",i);break;case"textarea":gI(i,u),kn("invalid",i)}K2(r,u),c=null;for(var p in u)if(u.hasOwnProperty(p)){var o=u[p];p==="children"?typeof o=="string"?i.textContent!==o&&(u.suppressHydrationWarning!==!0&&kv(i.textContent,o,e),c=["children",o]):typeof o=="number"&&i.textContent!==""+o&&(u.suppressHydrationWarning!==!0&&kv(i.textContent,o,e),c=["children",""+o]):yg.hasOwnProperty(p)&&o!=null&&p==="onScroll"&&kn("scroll",i)}switch(r){case"input":Sv(i),mI(i,u,!0);break;case"textarea":Sv(i),yI(i);break;case"select":case"option":break;default:typeof u.onClick=="function"&&(i.onclick=A0)}i=c,t.updateQueue=i,i!==null&&(t.flags|=4)}else{p=c.nodeType===9?c:c.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=d3(r)),e==="http://www.w3.org/1999/xhtml"?r==="script"?(e=p.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof i.is=="string"?e=p.createElement(r,{is:i.is}):(e=p.createElement(r),r==="select"&&(p=e,i.multiple?p.multiple=!0:i.size&&(p.size=i.size))):e=p.createElementNS(e,r),e[Os]=t,e[Mg]=i,$z(e,t,!1,!1),t.stateNode=e;e:{switch(p=Y2(r,i),r){case"dialog":kn("cancel",e),kn("close",e),c=i;break;case"iframe":case"object":case"embed":kn("load",e),c=i;break;case"video":case"audio":for(c=0;c<Xm.length;c++)kn(Xm[c],e);c=i;break;case"source":kn("error",e),c=i;break;case"img":case"image":case"link":kn("error",e),kn("load",e),c=i;break;case"details":kn("toggle",e),c=i;break;case"input":pI(e,i),c=q2(e,i),kn("invalid",e);break;case"option":c=i;break;case"select":e._wrapperState={wasMultiple:!!i.multiple},c=Xn({},i,{value:void 0}),kn("invalid",e);break;case"textarea":gI(e,i),c=Z2(e,i),kn("invalid",e);break;default:c=i}K2(r,c),o=c;for(u in o)if(o.hasOwnProperty(u)){var v=o[u];u==="style"?g3(e,v):u==="dangerouslySetInnerHTML"?(v=v?v.__html:void 0,v!=null&&p3(e,v)):u==="children"?typeof v=="string"?(r!=="textarea"||v!=="")&&_g(e,v):typeof v=="number"&&_g(e,""+v):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(yg.hasOwnProperty(u)?v!=null&&u==="onScroll"&&kn("scroll",e):v!=null&&vT(e,u,v,p))}switch(r){case"input":Sv(e),mI(e,i,!1);break;case"textarea":Sv(e),yI(e);break;case"option":i.value!=null&&e.setAttribute("value",""+Bc(i.value));break;case"select":e.multiple=!!i.multiple,u=i.value,u!=null?Wf(e,!!i.multiple,u,!1):i.defaultValue!=null&&Wf(e,!!i.multiple,i.defaultValue,!0);break;default:typeof c.onClick=="function"&&(e.onclick=A0)}switch(r){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return so(t),null;case 6:if(e&&t.stateNode!=null)Nz(e,t,e.memoizedProps,i);else{if(typeof i!="string"&&t.stateNode===null)throw Error(Tt(166));if(r=Zu(Pg.current),Zu(Bs.current),Ov(t)){if(i=t.stateNode,r=t.memoizedProps,i[Os]=t,(u=i.nodeValue!==r)&&(e=ea,e!==null))switch(e.tag){case 3:kv(i.nodeValue,r,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&kv(i.nodeValue,r,(e.mode&1)!==0)}u&&(t.flags|=4)}else i=(r.nodeType===9?r:r.ownerDocument).createTextNode(i),i[Os]=t,t.stateNode=i}return so(t),null;case 13:if(Rn(Hn),i=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(Nn&&Qo!==null&&t.mode&1&&!(t.flags&128))nz(),ad(),t.flags|=98560,u=!1;else if(u=Ov(t),i!==null&&i.dehydrated!==null){if(e===null){if(!u)throw Error(Tt(318));if(u=t.memoizedState,u=u!==null?u.dehydrated:null,!u)throw Error(Tt(317));u[Os]=t}else ad(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;so(t),u=!1}else es!==null&&(kS(es),es=null),u=!0;if(!u)return t.flags&65536?t:null}return t.flags&128?(t.lanes=r,t):(i=i!==null,i!==(e!==null&&e.memoizedState!==null)&&i&&(t.child.flags|=8192,t.mode&1&&(e===null||Hn.current&1?bi===0&&(bi=3):tA())),t.updateQueue!==null&&(t.flags|=4),so(t),null);case 4:return ld(),SS(e,t),e===null&&Tg(t.stateNode.containerInfo),so(t),null;case 10:return $T(t.type._context),so(t),null;case 17:return $o(t.type)&&M0(),so(t),null;case 19:if(Rn(Hn),u=t.memoizedState,u===null)return so(t),null;if(i=(t.flags&128)!==0,p=u.rendering,p===null)if(i)Cm(u,!1);else{if(bi!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(p=R0(e),p!==null){for(t.flags|=128,Cm(u,!1),i=p.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),t.subtreeFlags=0,i=r,r=t.child;r!==null;)u=r,e=i,u.flags&=14680066,p=u.alternate,p===null?(u.childLanes=0,u.lanes=e,u.child=null,u.subtreeFlags=0,u.memoizedProps=null,u.memoizedState=null,u.updateQueue=null,u.dependencies=null,u.stateNode=null):(u.childLanes=p.childLanes,u.lanes=p.lanes,u.child=p.child,u.subtreeFlags=0,u.deletions=null,u.memoizedProps=p.memoizedProps,u.memoizedState=p.memoizedState,u.updateQueue=p.updateQueue,u.type=p.type,e=p.dependencies,u.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),r=r.sibling;return An(Hn,Hn.current&1|2),t.child}e=e.sibling}u.tail!==null&&ni()>ud&&(t.flags|=128,i=!0,Cm(u,!1),t.lanes=4194304)}else{if(!i)if(e=R0(p),e!==null){if(t.flags|=128,i=!0,r=e.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),Cm(u,!0),u.tail===null&&u.tailMode==="hidden"&&!p.alternate&&!Nn)return so(t),null}else 2*ni()-u.renderingStartTime>ud&&r!==1073741824&&(t.flags|=128,i=!0,Cm(u,!1),t.lanes=4194304);u.isBackwards?(p.sibling=t.child,t.child=p):(r=u.last,r!==null?r.sibling=p:t.child=p,u.last=p)}return u.tail!==null?(t=u.tail,u.rendering=t,u.tail=t.sibling,u.renderingStartTime=ni(),t.sibling=null,r=Hn.current,An(Hn,i?r&1|2:r&1),t):(so(t),null);case 22:case 23:return eA(),i=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==i&&(t.flags|=8192),i&&t.mode&1?Ko&1073741824&&(so(t),t.subtreeFlags&6&&(t.flags|=8192)):so(t),null;case 24:return null;case 25:return null}throw Error(Tt(156,t.tag))}function GU(e,t){switch(RT(t),t.tag){case 1:return $o(t.type)&&M0(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return ld(),Rn(Bo),Rn(fo),VT(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return UT(t),null;case 13:if(Rn(Hn),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Tt(340));ad()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return Rn(Hn),null;case 4:return ld(),null;case 10:return $T(t.type._context),null;case 22:case 23:return eA(),null;case 24:return null;default:return null}}var Lv=!1,ho=!1,qU=typeof WeakSet=="function"?WeakSet:Set,Wt=null;function Ff(e,t){var r=e.ref;if(r!==null)if(typeof r=="function")try{r(null)}catch(i){ti(e,t,i)}else r.current=null}function ES(e,t,r){try{r()}catch(i){ti(e,t,i)}}var ak=!1;function WU(e,t){if(sS=S0,e=G3(),OT(e)){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{r=(r=e.ownerDocument)&&r.defaultView||window;var i=r.getSelection&&r.getSelection();if(i&&i.rangeCount!==0){r=i.anchorNode;var c=i.anchorOffset,u=i.focusNode;i=i.focusOffset;try{r.nodeType,u.nodeType}catch{r=null;break e}var p=0,o=-1,v=-1,w=0,A=0,T=e,P=null;t:for(;;){for(var $;T!==r||c!==0&&T.nodeType!==3||(o=p+c),T!==u||i!==0&&T.nodeType!==3||(v=p+i),T.nodeType===3&&(p+=T.nodeValue.length),($=T.firstChild)!==null;)P=T,T=$;for(;;){if(T===e)break t;if(P===r&&++w===c&&(o=p),P===u&&++A===i&&(v=p),($=T.nextSibling)!==null)break;T=P,P=T.parentNode}T=$}r=o===-1||v===-1?null:{start:o,end:v}}else r=null}r=r||{start:0,end:0}}else r=null;for(lS={focusedElem:e,selectionRange:r},S0=!1,Wt=t;Wt!==null;)if(t=Wt,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Wt=e;else for(;Wt!==null;){t=Wt;try{var L=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(L!==null){var k=L.memoizedProps,N=L.memoizedState,R=t.stateNode,j=R.getSnapshotBeforeUpdate(t.elementType===t.type?k:Ka(t.type,k),N);R.__reactInternalSnapshotBeforeUpdate=j}break;case 3:var D=t.stateNode.containerInfo;D.nodeType===1?D.textContent="":D.nodeType===9&&D.documentElement&&D.removeChild(D.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Tt(163))}}catch(G){ti(t,t.return,G)}if(e=t.sibling,e!==null){e.return=t.return,Wt=e;break}Wt=t.return}return L=ak,ak=!1,L}function og(e,t,r){var i=t.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var c=i=i.next;do{if((c.tag&e)===e){var u=c.destroy;c.destroy=void 0,u!==void 0&&ES(t,r,u)}c=c.next}while(c!==i)}}function Jx(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var r=t=t.next;do{if((r.tag&e)===e){var i=r.create;r.destroy=i()}r=r.next}while(r!==t)}}function TS(e){var t=e.ref;if(t!==null){var r=e.stateNode;switch(e.tag){case 5:e=r;break;default:e=r}typeof t=="function"?t(e):t.current=e}}function jz(e){var t=e.alternate;t!==null&&(e.alternate=null,jz(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Os],delete t[Mg],delete t[hS],delete t[CU],delete t[PU])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function Uz(e){return e.tag===5||e.tag===3||e.tag===4}function sk(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||Uz(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function AS(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.nodeType===8?r.parentNode.insertBefore(e,t):r.insertBefore(e,t):(r.nodeType===8?(t=r.parentNode,t.insertBefore(e,r)):(t=r,t.appendChild(e)),r=r._reactRootContainer,r!=null||t.onclick!==null||(t.onclick=A0));else if(i!==4&&(e=e.child,e!==null))for(AS(e,t,r),e=e.sibling;e!==null;)AS(e,t,r),e=e.sibling}function MS(e,t,r){var i=e.tag;if(i===5||i===6)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(i!==4&&(e=e.child,e!==null))for(MS(e,t,r),e=e.sibling;e!==null;)MS(e,t,r),e=e.sibling}var Gi=null,Ja=!1;function pc(e,t,r){for(r=r.child;r!==null;)Vz(e,t,r),r=r.sibling}function Vz(e,t,r){if(zs&&typeof zs.onCommitFiberUnmount=="function")try{zs.onCommitFiberUnmount(Gx,r)}catch{}switch(r.tag){case 5:ho||Ff(r,t);case 6:var i=Gi,c=Ja;Gi=null,pc(e,t,r),Gi=i,Ja=c,Gi!==null&&(Ja?(e=Gi,r=r.stateNode,e.nodeType===8?e.parentNode.removeChild(r):e.removeChild(r)):Gi.removeChild(r.stateNode));break;case 18:Gi!==null&&(Ja?(e=Gi,r=r.stateNode,e.nodeType===8?Fw(e.parentNode,r):e.nodeType===1&&Fw(e,r),wg(e)):Fw(Gi,r.stateNode));break;case 4:i=Gi,c=Ja,Gi=r.stateNode.containerInfo,Ja=!0,pc(e,t,r),Gi=i,Ja=c;break;case 0:case 11:case 14:case 15:if(!ho&&(i=r.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){c=i=i.next;do{var u=c,p=u.destroy;u=u.tag,p!==void 0&&(u&2||u&4)&&ES(r,t,p),c=c.next}while(c!==i)}pc(e,t,r);break;case 1:if(!ho&&(Ff(r,t),i=r.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=r.memoizedProps,i.state=r.memoizedState,i.componentWillUnmount()}catch(o){ti(r,t,o)}pc(e,t,r);break;case 21:pc(e,t,r);break;case 22:r.mode&1?(ho=(i=ho)||r.memoizedState!==null,pc(e,t,r),ho=i):pc(e,t,r);break;default:pc(e,t,r)}}function lk(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var r=e.stateNode;r===null&&(r=e.stateNode=new qU),t.forEach(function(i){var c=t8.bind(null,e,i);r.has(i)||(r.add(i),i.then(c,c))})}}function Za(e,t){var r=t.deletions;if(r!==null)for(var i=0;i<r.length;i++){var c=r[i];try{var u=e,p=t,o=p;e:for(;o!==null;){switch(o.tag){case 5:Gi=o.stateNode,Ja=!1;break e;case 3:Gi=o.stateNode.containerInfo,Ja=!0;break e;case 4:Gi=o.stateNode.containerInfo,Ja=!0;break e}o=o.return}if(Gi===null)throw Error(Tt(160));Vz(u,p,c),Gi=null,Ja=!1;var v=c.alternate;v!==null&&(v.return=null),c.return=null}catch(w){ti(c,t,w)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Gz(t,e),t=t.sibling}function Gz(e,t){var r=e.alternate,i=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(Za(t,e),As(e),i&4){try{og(3,e,e.return),Jx(3,e)}catch(k){ti(e,e.return,k)}try{og(5,e,e.return)}catch(k){ti(e,e.return,k)}}break;case 1:Za(t,e),As(e),i&512&&r!==null&&Ff(r,r.return);break;case 5:if(Za(t,e),As(e),i&512&&r!==null&&Ff(r,r.return),e.flags&32){var c=e.stateNode;try{_g(c,"")}catch(k){ti(e,e.return,k)}}if(i&4&&(c=e.stateNode,c!=null)){var u=e.memoizedProps,p=r!==null?r.memoizedProps:u,o=e.type,v=e.updateQueue;if(e.updateQueue=null,v!==null)try{o==="input"&&u.type==="radio"&&u.name!=null&&h3(c,u),Y2(o,p);var w=Y2(o,u);for(p=0;p<v.length;p+=2){var A=v[p],T=v[p+1];A==="style"?g3(c,T):A==="dangerouslySetInnerHTML"?p3(c,T):A==="children"?_g(c,T):vT(c,A,T,w)}switch(o){case"input":W2(c,u);break;case"textarea":f3(c,u);break;case"select":var P=c._wrapperState.wasMultiple;c._wrapperState.wasMultiple=!!u.multiple;var $=u.value;$!=null?Wf(c,!!u.multiple,$,!1):P!==!!u.multiple&&(u.defaultValue!=null?Wf(c,!!u.multiple,u.defaultValue,!0):Wf(c,!!u.multiple,u.multiple?[]:"",!1))}c[Mg]=u}catch(k){ti(e,e.return,k)}}break;case 6:if(Za(t,e),As(e),i&4){if(e.stateNode===null)throw Error(Tt(162));c=e.stateNode,u=e.memoizedProps;try{c.nodeValue=u}catch(k){ti(e,e.return,k)}}break;case 3:if(Za(t,e),As(e),i&4&&r!==null&&r.memoizedState.isDehydrated)try{wg(t.containerInfo)}catch(k){ti(e,e.return,k)}break;case 4:Za(t,e),As(e);break;case 13:Za(t,e),As(e),c=e.child,c.flags&8192&&(u=c.memoizedState!==null,c.stateNode.isHidden=u,!u||c.alternate!==null&&c.alternate.memoizedState!==null||(JT=ni())),i&4&&lk(e);break;case 22:if(A=r!==null&&r.memoizedState!==null,e.mode&1?(ho=(w=ho)||A,Za(t,e),ho=w):Za(t,e),As(e),i&8192){if(w=e.memoizedState!==null,(e.stateNode.isHidden=w)&&!A&&e.mode&1)for(Wt=e,A=e.child;A!==null;){for(T=Wt=A;Wt!==null;){switch(P=Wt,$=P.child,P.tag){case 0:case 11:case 14:case 15:og(4,P,P.return);break;case 1:Ff(P,P.return);var L=P.stateNode;if(typeof L.componentWillUnmount=="function"){i=P,r=P.return;try{t=i,L.props=t.memoizedProps,L.state=t.memoizedState,L.componentWillUnmount()}catch(k){ti(i,r,k)}}break;case 5:Ff(P,P.return);break;case 22:if(P.memoizedState!==null){uk(T);continue}}$!==null?($.return=P,Wt=$):uk(T)}A=A.sibling}e:for(A=null,T=e;;){if(T.tag===5){if(A===null){A=T;try{c=T.stateNode,w?(u=c.style,typeof u.setProperty=="function"?u.setProperty("display","none","important"):u.display="none"):(o=T.stateNode,v=T.memoizedProps.style,p=v!=null&&v.hasOwnProperty("display")?v.display:null,o.style.display=m3("display",p))}catch(k){ti(e,e.return,k)}}}else if(T.tag===6){if(A===null)try{T.stateNode.nodeValue=w?"":T.memoizedProps}catch(k){ti(e,e.return,k)}}else if((T.tag!==22&&T.tag!==23||T.memoizedState===null||T===e)&&T.child!==null){T.child.return=T,T=T.child;continue}if(T===e)break e;for(;T.sibling===null;){if(T.return===null||T.return===e)break e;A===T&&(A=null),T=T.return}A===T&&(A=null),T.sibling.return=T.return,T=T.sibling}}break;case 19:Za(t,e),As(e),i&4&&lk(e);break;case 21:break;default:Za(t,e),As(e)}}function As(e){var t=e.flags;if(t&2){try{e:{for(var r=e.return;r!==null;){if(Uz(r)){var i=r;break e}r=r.return}throw Error(Tt(160))}switch(i.tag){case 5:var c=i.stateNode;i.flags&32&&(_g(c,""),i.flags&=-33);var u=sk(e);MS(e,u,c);break;case 3:case 4:var p=i.stateNode.containerInfo,o=sk(e);AS(e,o,p);break;default:throw Error(Tt(161))}}catch(v){ti(e,e.return,v)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function HU(e,t,r){Wt=e,qz(e)}function qz(e,t,r){for(var i=(e.mode&1)!==0;Wt!==null;){var c=Wt,u=c.child;if(c.tag===22&&i){var p=c.memoizedState!==null||Lv;if(!p){var o=c.alternate,v=o!==null&&o.memoizedState!==null||ho;o=Lv;var w=ho;if(Lv=p,(ho=v)&&!w)for(Wt=c;Wt!==null;)p=Wt,v=p.child,p.tag===22&&p.memoizedState!==null?hk(c):v!==null?(v.return=p,Wt=v):hk(c);for(;u!==null;)Wt=u,qz(u),u=u.sibling;Wt=c,Lv=o,ho=w}ck(e)}else c.subtreeFlags&8772&&u!==null?(u.return=c,Wt=u):ck(e)}}function ck(e){for(;Wt!==null;){var t=Wt;if(t.flags&8772){var r=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:ho||Jx(5,t);break;case 1:var i=t.stateNode;if(t.flags&4&&!ho)if(r===null)i.componentDidMount();else{var c=t.elementType===t.type?r.memoizedProps:Ka(t.type,r.memoizedProps);i.componentDidUpdate(c,r.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var u=t.updateQueue;u!==null&&WI(t,u,i);break;case 3:var p=t.updateQueue;if(p!==null){if(r=null,t.child!==null)switch(t.child.tag){case 5:r=t.child.stateNode;break;case 1:r=t.child.stateNode}WI(t,p,r)}break;case 5:var o=t.stateNode;if(r===null&&t.flags&4){r=o;var v=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":v.autoFocus&&r.focus();break;case"img":v.src&&(r.src=v.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var w=t.alternate;if(w!==null){var A=w.memoizedState;if(A!==null){var T=A.dehydrated;T!==null&&wg(T)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Tt(163))}ho||t.flags&512&&TS(t)}catch(P){ti(t,t.return,P)}}if(t===e){Wt=null;break}if(r=t.sibling,r!==null){r.return=t.return,Wt=r;break}Wt=t.return}}function uk(e){for(;Wt!==null;){var t=Wt;if(t===e){Wt=null;break}var r=t.sibling;if(r!==null){r.return=t.return,Wt=r;break}Wt=t.return}}function hk(e){for(;Wt!==null;){var t=Wt;try{switch(t.tag){case 0:case 11:case 15:var r=t.return;try{Jx(4,t)}catch(v){ti(t,r,v)}break;case 1:var i=t.stateNode;if(typeof i.componentDidMount=="function"){var c=t.return;try{i.componentDidMount()}catch(v){ti(t,c,v)}}var u=t.return;try{TS(t)}catch(v){ti(t,u,v)}break;case 5:var p=t.return;try{TS(t)}catch(v){ti(t,p,v)}}}catch(v){ti(t,t.return,v)}if(t===e){Wt=null;break}var o=t.sibling;if(o!==null){o.return=t.return,Wt=o;break}Wt=t.return}}var ZU=Math.ceil,B0=Ol.ReactCurrentDispatcher,KT=Ol.ReactCurrentOwner,Ta=Ol.ReactCurrentBatchConfig,Yr=0,Bi=null,ci=null,Xi=0,Ko=0,Nf=jc(0),bi=0,Dg=null,sh=0,Qx=0,YT=0,ag=null,Do=null,JT=0,ud=1/0,cl=null,$0=!1,CS=null,Oc=null,zv=!1,Tc=null,F0=0,sg=0,PS=null,s0=-1,l0=0;function bo(){return Yr&6?ni():s0!==-1?s0:s0=ni()}function Dc(e){return e.mode&1?Yr&2&&Xi!==0?Xi&-Xi:kU.transition!==null?(l0===0&&(l0=C3()),l0):(e=_n,e!==0||(e=window.event,e=e===void 0?16:L3(e.type)),e):1}function is(e,t,r,i){if(50<sg)throw sg=0,PS=null,Error(Tt(185));py(e,r,i),(!(Yr&2)||e!==Bi)&&(e===Bi&&(!(Yr&2)&&(Qx|=r),bi===4&&Sc(e,Xi)),Fo(e,i),r===1&&Yr===0&&!(t.mode&1)&&(ud=ni()+500,Xx&&Uc()))}function Fo(e,t){var r=e.callbackNode;k6(e,t);var i=w0(e,e===Bi?Xi:0);if(i===0)r!==null&&xI(r),e.callbackNode=null,e.callbackPriority=0;else if(t=i&-i,e.callbackPriority!==t){if(r!=null&&xI(r),t===1)e.tag===0?IU(fk.bind(null,e)):ez(fk.bind(null,e)),AU(function(){!(Yr&6)&&Uc()}),r=null;else{switch(P3(i)){case 1:r=ET;break;case 4:r=A3;break;case 16:r=b0;break;case 536870912:r=M3;break;default:r=b0}r=Qz(r,Wz.bind(null,e))}e.callbackPriority=t,e.callbackNode=r}}function Wz(e,t){if(s0=-1,l0=0,Yr&6)throw Error(Tt(327));var r=e.callbackNode;if(Yf()&&e.callbackNode!==r)return null;var i=w0(e,e===Bi?Xi:0);if(i===0)return null;if(i&30||i&e.expiredLanes||t)t=N0(e,i);else{t=i;var c=Yr;Yr|=2;var u=Zz();(Bi!==e||Xi!==t)&&(cl=null,ud=ni()+500,Ju(e,t));do try{YU();break}catch(o){Hz(e,o)}while(1);BT(),B0.current=u,Yr=c,ci!==null?t=0:(Bi=null,Xi=0,t=bi)}if(t!==0){if(t===2&&(c=rS(e),c!==0&&(i=c,t=IS(e,c))),t===1)throw r=Dg,Ju(e,0),Sc(e,i),Fo(e,ni()),r;if(t===6)Sc(e,i);else{if(c=e.current.alternate,!(i&30)&&!XU(c)&&(t=N0(e,i),t===2&&(u=rS(e),u!==0&&(i=u,t=IS(e,u))),t===1))throw r=Dg,Ju(e,0),Sc(e,i),Fo(e,ni()),r;switch(e.finishedWork=c,e.finishedLanes=i,t){case 0:case 1:throw Error(Tt(345));case 2:ju(e,Do,cl);break;case 3:if(Sc(e,i),(i&130023424)===i&&(t=JT+500-ni(),10<t)){if(w0(e,0)!==0)break;if(c=e.suspendedLanes,(c&i)!==i){bo(),e.pingedLanes|=e.suspendedLanes&c;break}e.timeoutHandle=uS(ju.bind(null,e,Do,cl),t);break}ju(e,Do,cl);break;case 4:if(Sc(e,i),(i&4194240)===i)break;for(t=e.eventTimes,c=-1;0<i;){var p=31-ns(i);u=1<<p,p=t[p],p>c&&(c=p),i&=~u}if(i=c,i=ni()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*ZU(i/1960))-i,10<i){e.timeoutHandle=uS(ju.bind(null,e,Do,cl),i);break}ju(e,Do,cl);break;case 5:ju(e,Do,cl);break;default:throw Error(Tt(329))}}}return Fo(e,ni()),e.callbackNode===r?Wz.bind(null,e):null}function IS(e,t){var r=ag;return e.current.memoizedState.isDehydrated&&(Ju(e,t).flags|=256),e=N0(e,t),e!==2&&(t=Do,Do=r,t!==null&&kS(t)),e}function kS(e){Do===null?Do=e:Do.push.apply(Do,e)}function XU(e){for(var t=e;;){if(t.flags&16384){var r=t.updateQueue;if(r!==null&&(r=r.stores,r!==null))for(var i=0;i<r.length;i++){var c=r[i],u=c.getSnapshot;c=c.value;try{if(!os(u(),c))return!1}catch{return!1}}}if(r=t.child,t.subtreeFlags&16384&&r!==null)r.return=t,t=r;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Sc(e,t){for(t&=~YT,t&=~Qx,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var r=31-ns(t),i=1<<r;e[r]=-1,t&=~i}}function fk(e){if(Yr&6)throw Error(Tt(327));Yf();var t=w0(e,0);if(!(t&1))return Fo(e,ni()),null;var r=N0(e,t);if(e.tag!==0&&r===2){var i=rS(e);i!==0&&(t=i,r=IS(e,i))}if(r===1)throw r=Dg,Ju(e,0),Sc(e,t),Fo(e,ni()),r;if(r===6)throw Error(Tt(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,ju(e,Do,cl),Fo(e,ni()),null}function QT(e,t){var r=Yr;Yr|=1;try{return e(t)}finally{Yr=r,Yr===0&&(ud=ni()+500,Xx&&Uc())}}function lh(e){Tc!==null&&Tc.tag===0&&!(Yr&6)&&Yf();var t=Yr;Yr|=1;var r=Ta.transition,i=_n;try{if(Ta.transition=null,_n=1,e)return e()}finally{_n=i,Ta.transition=r,Yr=t,!(Yr&6)&&Uc()}}function eA(){Ko=Nf.current,Rn(Nf)}function Ju(e,t){e.finishedWork=null,e.finishedLanes=0;var r=e.timeoutHandle;if(r!==-1&&(e.timeoutHandle=-1,TU(r)),ci!==null)for(r=ci.return;r!==null;){var i=r;switch(RT(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&M0();break;case 3:ld(),Rn(Bo),Rn(fo),VT();break;case 5:UT(i);break;case 4:ld();break;case 13:Rn(Hn);break;case 19:Rn(Hn);break;case 10:$T(i.type._context);break;case 22:case 23:eA()}r=r.return}if(Bi=e,ci=e=Rc(e.current,null),Xi=Ko=t,bi=0,Dg=null,YT=Qx=sh=0,Do=ag=null,Hu!==null){for(t=0;t<Hu.length;t++)if(r=Hu[t],i=r.interleaved,i!==null){r.interleaved=null;var c=i.next,u=r.pending;if(u!==null){var p=u.next;u.next=c,i.next=p}r.pending=i}Hu=null}return e}function Hz(e,t){do{var r=ci;try{if(BT(),i0.current=z0,L0){for(var i=Zn.memoizedState;i!==null;){var c=i.queue;c!==null&&(c.pending=null),i=i.next}L0=!1}if(ah=0,zi=xi=Zn=null,ig=!1,Ig=0,KT.current=null,r===null||r.return===null){bi=1,Dg=t,ci=null;break}e:{var u=e,p=r.return,o=r,v=t;if(t=Xi,o.flags|=32768,v!==null&&typeof v=="object"&&typeof v.then=="function"){var w=v,A=o,T=A.tag;if(!(A.mode&1)&&(T===0||T===11||T===15)){var P=A.alternate;P?(A.updateQueue=P.updateQueue,A.memoizedState=P.memoizedState,A.lanes=P.lanes):(A.updateQueue=null,A.memoizedState=null)}var $=QI(p);if($!==null){$.flags&=-257,ek($,p,o,u,t),$.mode&1&&JI(u,w,t),t=$,v=w;var L=t.updateQueue;if(L===null){var k=new Set;k.add(v),t.updateQueue=k}else L.add(v);break e}else{if(!(t&1)){JI(u,w,t),tA();break e}v=Error(Tt(426))}}else if(Nn&&o.mode&1){var N=QI(p);if(N!==null){!(N.flags&65536)&&(N.flags|=256),ek(N,p,o,u,t),LT(cd(v,o));break e}}u=v=cd(v,o),bi!==4&&(bi=2),ag===null?ag=[u]:ag.push(u),u=p;do{switch(u.tag){case 3:u.flags|=65536,t&=-t,u.lanes|=t;var R=Iz(u,v,t);qI(u,R);break e;case 1:o=v;var j=u.type,D=u.stateNode;if(!(u.flags&128)&&(typeof j.getDerivedStateFromError=="function"||D!==null&&typeof D.componentDidCatch=="function"&&(Oc===null||!Oc.has(D)))){u.flags|=65536,t&=-t,u.lanes|=t;var G=kz(u,o,t);qI(u,G);break e}}u=u.return}while(u!==null)}Kz(r)}catch(W){t=W,ci===r&&r!==null&&(ci=r=r.return);continue}break}while(1)}function Zz(){var e=B0.current;return B0.current=z0,e===null?z0:e}function tA(){(bi===0||bi===3||bi===2)&&(bi=4),Bi===null||!(sh&268435455)&&!(Qx&268435455)||Sc(Bi,Xi)}function N0(e,t){var r=Yr;Yr|=2;var i=Zz();(Bi!==e||Xi!==t)&&(cl=null,Ju(e,t));do try{KU();break}catch(c){Hz(e,c)}while(1);if(BT(),Yr=r,B0.current=i,ci!==null)throw Error(Tt(261));return Bi=null,Xi=0,bi}function KU(){for(;ci!==null;)Xz(ci)}function YU(){for(;ci!==null&&!w6();)Xz(ci)}function Xz(e){var t=Jz(e.alternate,e,Ko);e.memoizedProps=e.pendingProps,t===null?Kz(e):ci=t,KT.current=null}function Kz(e){var t=e;do{var r=t.alternate;if(e=t.return,t.flags&32768){if(r=GU(r,t),r!==null){r.flags&=32767,ci=r;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{bi=6,ci=null;return}}else if(r=VU(r,t,Ko),r!==null){ci=r;return}if(t=t.sibling,t!==null){ci=t;return}ci=t=e}while(t!==null);bi===0&&(bi=5)}function ju(e,t,r){var i=_n,c=Ta.transition;try{Ta.transition=null,_n=1,JU(e,t,r,i)}finally{Ta.transition=c,_n=i}return null}function JU(e,t,r,i){do Yf();while(Tc!==null);if(Yr&6)throw Error(Tt(327));r=e.finishedWork;var c=e.finishedLanes;if(r===null)return null;if(e.finishedWork=null,e.finishedLanes=0,r===e.current)throw Error(Tt(177));e.callbackNode=null,e.callbackPriority=0;var u=r.lanes|r.childLanes;if(O6(e,u),e===Bi&&(ci=Bi=null,Xi=0),!(r.subtreeFlags&2064)&&!(r.flags&2064)||zv||(zv=!0,Qz(b0,function(){return Yf(),null})),u=(r.flags&15990)!==0,r.subtreeFlags&15990||u){u=Ta.transition,Ta.transition=null;var p=_n;_n=1;var o=Yr;Yr|=4,KT.current=null,WU(e,r),Gz(r,e),_U(lS),S0=!!sS,lS=sS=null,e.current=r,HU(r),S6(),Yr=o,_n=p,Ta.transition=u}else e.current=r;if(zv&&(zv=!1,Tc=e,F0=c),u=e.pendingLanes,u===0&&(Oc=null),A6(r.stateNode),Fo(e,ni()),t!==null)for(i=e.onRecoverableError,r=0;r<t.length;r++)c=t[r],i(c.value,{componentStack:c.stack,digest:c.digest});if($0)throw $0=!1,e=CS,CS=null,e;return F0&1&&e.tag!==0&&Yf(),u=e.pendingLanes,u&1?e===PS?sg++:(sg=0,PS=e):sg=0,Uc(),null}function Yf(){if(Tc!==null){var e=P3(F0),t=Ta.transition,r=_n;try{if(Ta.transition=null,_n=16>e?16:e,Tc===null)var i=!1;else{if(e=Tc,Tc=null,F0=0,Yr&6)throw Error(Tt(331));var c=Yr;for(Yr|=4,Wt=e.current;Wt!==null;){var u=Wt,p=u.child;if(Wt.flags&16){var o=u.deletions;if(o!==null){for(var v=0;v<o.length;v++){var w=o[v];for(Wt=w;Wt!==null;){var A=Wt;switch(A.tag){case 0:case 11:case 15:og(8,A,u)}var T=A.child;if(T!==null)T.return=A,Wt=T;else for(;Wt!==null;){A=Wt;var P=A.sibling,$=A.return;if(jz(A),A===w){Wt=null;break}if(P!==null){P.return=$,Wt=P;break}Wt=$}}}var L=u.alternate;if(L!==null){var k=L.child;if(k!==null){L.child=null;do{var N=k.sibling;k.sibling=null,k=N}while(k!==null)}}Wt=u}}if(u.subtreeFlags&2064&&p!==null)p.return=u,Wt=p;else e:for(;Wt!==null;){if(u=Wt,u.flags&2048)switch(u.tag){case 0:case 11:case 15:og(9,u,u.return)}var R=u.sibling;if(R!==null){R.return=u.return,Wt=R;break e}Wt=u.return}}var j=e.current;for(Wt=j;Wt!==null;){p=Wt;var D=p.child;if(p.subtreeFlags&2064&&D!==null)D.return=p,Wt=D;else e:for(p=j;Wt!==null;){if(o=Wt,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Jx(9,o)}}catch(W){ti(o,o.return,W)}if(o===p){Wt=null;break e}var G=o.sibling;if(G!==null){G.return=o.return,Wt=G;break e}Wt=o.return}}if(Yr=c,Uc(),zs&&typeof zs.onPostCommitFiberRoot=="function")try{zs.onPostCommitFiberRoot(Gx,e)}catch{}i=!0}return i}finally{_n=r,Ta.transition=t}}return!1}function dk(e,t,r){t=cd(r,t),t=Iz(e,t,1),e=kc(e,t,1),t=bo(),e!==null&&(py(e,1,t),Fo(e,t))}function ti(e,t,r){if(e.tag===3)dk(e,e,r);else for(;t!==null;){if(t.tag===3){dk(t,e,r);break}else if(t.tag===1){var i=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Oc===null||!Oc.has(i))){e=cd(r,e),e=kz(t,e,1),t=kc(t,e,1),e=bo(),t!==null&&(py(t,1,e),Fo(t,e));break}}t=t.return}}function QU(e,t,r){var i=e.pingCache;i!==null&&i.delete(t),t=bo(),e.pingedLanes|=e.suspendedLanes&r,Bi===e&&(Xi&r)===r&&(bi===4||bi===3&&(Xi&130023424)===Xi&&500>ni()-JT?Ju(e,0):YT|=r),Fo(e,t)}function Yz(e,t){t===0&&(e.mode&1?(t=Av,Av<<=1,!(Av&130023424)&&(Av=4194304)):t=1);var r=bo();e=Al(e,t),e!==null&&(py(e,t,r),Fo(e,r))}function e8(e){var t=e.memoizedState,r=0;t!==null&&(r=t.retryLane),Yz(e,r)}function t8(e,t){var r=0;switch(e.tag){case 13:var i=e.stateNode,c=e.memoizedState;c!==null&&(r=c.retryLane);break;case 19:i=e.stateNode;break;default:throw Error(Tt(314))}i!==null&&i.delete(t),Yz(e,r)}var Jz;Jz=function(e,t,r){if(e!==null)if(e.memoizedProps!==t.pendingProps||Bo.current)Lo=!0;else{if(!(e.lanes&r)&&!(t.flags&128))return Lo=!1,UU(e,t,r);Lo=!!(e.flags&131072)}else Lo=!1,Nn&&t.flags&1048576&&tz(t,I0,t.index);switch(t.lanes=0,t.tag){case 2:var i=t.type;a0(e,t),e=t.pendingProps;var c=od(t,fo.current);Kf(t,r),c=qT(null,t,i,e,c,r);var u=WT();return t.flags|=1,typeof c=="object"&&c!==null&&typeof c.render=="function"&&c.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,$o(i)?(u=!0,C0(t)):u=!1,t.memoizedState=c.state!==null&&c.state!==void 0?c.state:null,NT(t),c.updater=Kx,t.stateNode=c,c._reactInternals=t,yS(t,i,e,r),t=xS(null,t,i,!0,u,r)):(t.tag=0,Nn&&u&&DT(t),_o(null,t,c,r),t=t.child),t;case 16:i=t.elementType;e:{switch(a0(e,t),e=t.pendingProps,c=i._init,i=c(i._payload),t.type=i,c=t.tag=n8(i),e=Ka(i,e),c){case 0:t=vS(null,t,i,e,r);break e;case 1:t=nk(null,t,i,e,r);break e;case 11:t=tk(null,t,i,e,r);break e;case 14:t=rk(null,t,i,Ka(i.type,e),r);break e}throw Error(Tt(306,i,""))}return t;case 0:return i=t.type,c=t.pendingProps,c=t.elementType===i?c:Ka(i,c),vS(e,t,i,c,r);case 1:return i=t.type,c=t.pendingProps,c=t.elementType===i?c:Ka(i,c),nk(e,t,i,c,r);case 3:e:{if(Lz(t),e===null)throw Error(Tt(387));i=t.pendingProps,u=t.memoizedState,c=u.element,oz(e,t),D0(t,i,null,r);var p=t.memoizedState;if(i=p.element,u.isDehydrated)if(u={element:i,isDehydrated:!1,cache:p.cache,pendingSuspenseBoundaries:p.pendingSuspenseBoundaries,transitions:p.transitions},t.updateQueue.baseState=u,t.memoizedState=u,t.flags&256){c=cd(Error(Tt(423)),t),t=ik(e,t,i,r,c);break e}else if(i!==c){c=cd(Error(Tt(424)),t),t=ik(e,t,i,r,c);break e}else for(Qo=Ic(t.stateNode.containerInfo.firstChild),ea=t,Nn=!0,es=null,r=cz(t,null,i,r),t.child=r;r;)r.flags=r.flags&-3|4096,r=r.sibling;else{if(ad(),i===c){t=Ml(e,t,r);break e}_o(e,t,i,r)}t=t.child}return t;case 5:return uz(t),e===null&&pS(t),i=t.type,c=t.pendingProps,u=e!==null?e.memoizedProps:null,p=c.children,cS(i,c)?p=null:u!==null&&cS(i,u)&&(t.flags|=32),Rz(e,t),_o(e,t,p,r),t.child;case 6:return e===null&&pS(t),null;case 13:return zz(e,t,r);case 4:return jT(t,t.stateNode.containerInfo),i=t.pendingProps,e===null?t.child=sd(t,null,i,r):_o(e,t,i,r),t.child;case 11:return i=t.type,c=t.pendingProps,c=t.elementType===i?c:Ka(i,c),tk(e,t,i,c,r);case 7:return _o(e,t,t.pendingProps,r),t.child;case 8:return _o(e,t,t.pendingProps.children,r),t.child;case 12:return _o(e,t,t.pendingProps.children,r),t.child;case 10:e:{if(i=t.type._context,c=t.pendingProps,u=t.memoizedProps,p=c.value,An(k0,i._currentValue),i._currentValue=p,u!==null)if(os(u.value,p)){if(u.children===c.children&&!Bo.current){t=Ml(e,t,r);break e}}else for(u=t.child,u!==null&&(u.return=t);u!==null;){var o=u.dependencies;if(o!==null){p=u.child;for(var v=o.firstContext;v!==null;){if(v.context===i){if(u.tag===1){v=yl(-1,r&-r),v.tag=2;var w=u.updateQueue;if(w!==null){w=w.shared;var A=w.pending;A===null?v.next=v:(v.next=A.next,A.next=v),w.pending=v}}u.lanes|=r,v=u.alternate,v!==null&&(v.lanes|=r),mS(u.return,r,t),o.lanes|=r;break}v=v.next}}else if(u.tag===10)p=u.type===t.type?null:u.child;else if(u.tag===18){if(p=u.return,p===null)throw Error(Tt(341));p.lanes|=r,o=p.alternate,o!==null&&(o.lanes|=r),mS(p,r,t),p=u.sibling}else p=u.child;if(p!==null)p.return=u;else for(p=u;p!==null;){if(p===t){p=null;break}if(u=p.sibling,u!==null){u.return=p.return,p=u;break}p=p.return}u=p}_o(e,t,c.children,r),t=t.child}return t;case 9:return c=t.type,i=t.pendingProps.children,Kf(t,r),c=Pa(c),i=i(c),t.flags|=1,_o(e,t,i,r),t.child;case 14:return i=t.type,c=Ka(i,t.pendingProps),c=Ka(i.type,c),rk(e,t,i,c,r);case 15:return Oz(e,t,t.type,t.pendingProps,r);case 17:return i=t.type,c=t.pendingProps,c=t.elementType===i?c:Ka(i,c),a0(e,t),t.tag=1,$o(i)?(e=!0,C0(t)):e=!1,Kf(t,r),sz(t,i,c),yS(t,i,c,r),xS(null,t,i,!0,e,r);case 19:return Bz(e,t,r);case 22:return Dz(e,t,r)}throw Error(Tt(156,t.tag))};function Qz(e,t){return T3(e,t)}function r8(e,t,r,i){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wa(e,t,r,i){return new r8(e,t,r,i)}function rA(e){return e=e.prototype,!(!e||!e.isReactComponent)}function n8(e){if(typeof e=="function")return rA(e)?1:0;if(e!=null){if(e=e.$$typeof,e===bT)return 11;if(e===wT)return 14}return 2}function Rc(e,t){var r=e.alternate;return r===null?(r=wa(e.tag,t,e.key,e.mode),r.elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=e.flags&14680064,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r}function c0(e,t,r,i,c,u){var p=2;if(i=e,typeof e=="function")rA(e)&&(p=1);else if(typeof e=="string")p=5;else e:switch(e){case If:return Qu(r.children,c,u,t);case xT:p=8,c|=8;break;case j2:return e=wa(12,r,t,c|2),e.elementType=j2,e.lanes=u,e;case U2:return e=wa(13,r,t,c),e.elementType=U2,e.lanes=u,e;case V2:return e=wa(19,r,t,c),e.elementType=V2,e.lanes=u,e;case l3:return e1(r,c,u,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case a3:p=10;break e;case s3:p=9;break e;case bT:p=11;break e;case wT:p=14;break e;case vc:p=16,i=null;break e}throw Error(Tt(130,e==null?e:typeof e,""))}return t=wa(p,r,t,c),t.elementType=e,t.type=i,t.lanes=u,t}function Qu(e,t,r,i){return e=wa(7,e,i,t),e.lanes=r,e}function e1(e,t,r,i){return e=wa(22,e,i,t),e.elementType=l3,e.lanes=r,e.stateNode={isHidden:!1},e}function Hw(e,t,r){return e=wa(6,e,null,t),e.lanes=r,e}function Zw(e,t,r){return t=wa(4,e.children!==null?e.children:[],e.key,t),t.lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function i8(e,t,r,i,c){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Cw(0),this.expirationTimes=Cw(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Cw(0),this.identifierPrefix=i,this.onRecoverableError=c,this.mutableSourceEagerHydrationData=null}function nA(e,t,r,i,c,u,p,o,v){return e=new i8(e,t,r,o,v),t===1?(t=1,u===!0&&(t|=8)):t=0,u=wa(3,null,null,t),e.current=u,u.stateNode=e,u.memoizedState={element:i,isDehydrated:r,cache:null,transitions:null,pendingSuspenseBoundaries:null},NT(u),e}function o8(e,t,r){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Pf,key:i==null?null:""+i,children:e,containerInfo:t,implementation:r}}function e5(e){if(!e)return $c;e=e._reactInternals;e:{if(fh(e)!==e||e.tag!==1)throw Error(Tt(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if($o(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Tt(171))}if(e.tag===1){var r=e.type;if($o(r))return Q3(e,r,t)}return t}function t5(e,t,r,i,c,u,p,o,v){return e=nA(r,i,!0,e,c,u,p,o,v),e.context=e5(null),r=e.current,i=bo(),c=Dc(r),u=yl(i,c),u.callback=t??null,kc(r,u,c),e.current.lanes=c,py(e,c,i),Fo(e,i),e}function t1(e,t,r,i){var c=t.current,u=bo(),p=Dc(c);return r=e5(r),t.context===null?t.context=r:t.pendingContext=r,t=yl(u,p),t.payload={element:e},i=i===void 0?null:i,i!==null&&(t.callback=i),e=kc(c,t,p),e!==null&&(is(e,c,p,u),n0(e,c,p)),p}function j0(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function pk(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var r=e.retryLane;e.retryLane=r!==0&&r<t?r:t}}function iA(e,t){pk(e,t),(e=e.alternate)&&pk(e,t)}function a8(){return null}var r5=typeof reportError=="function"?reportError:function(e){console.error(e)};function oA(e){this._internalRoot=e}r1.prototype.render=oA.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Tt(409));t1(e,t,null,null)};r1.prototype.unmount=oA.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;lh(function(){t1(null,e,null,null)}),t[Tl]=null}};function r1(e){this._internalRoot=e}r1.prototype.unstable_scheduleHydration=function(e){if(e){var t=O3();e={blockedOn:null,target:e,priority:t};for(var r=0;r<wc.length&&t!==0&&t<wc[r].priority;r++);wc.splice(r,0,e),r===0&&R3(e)}};function aA(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function n1(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function mk(){}function s8(e,t,r,i,c){if(c){if(typeof i=="function"){var u=i;i=function(){var w=j0(p);u.call(w)}}var p=t5(t,i,e,0,null,!1,!1,"",mk);return e._reactRootContainer=p,e[Tl]=p.current,Tg(e.nodeType===8?e.parentNode:e),lh(),p}for(;c=e.lastChild;)e.removeChild(c);if(typeof i=="function"){var o=i;i=function(){var w=j0(v);o.call(w)}}var v=nA(e,0,!1,null,null,!1,!1,"",mk);return e._reactRootContainer=v,e[Tl]=v.current,Tg(e.nodeType===8?e.parentNode:e),lh(function(){t1(t,v,r,i)}),v}function i1(e,t,r,i,c){var u=r._reactRootContainer;if(u){var p=u;if(typeof c=="function"){var o=c;c=function(){var v=j0(p);o.call(v)}}t1(t,p,e,c)}else p=s8(r,t,e,c,i);return j0(p)}I3=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var r=Zm(t.pendingLanes);r!==0&&(TT(t,r|1),Fo(t,ni()),!(Yr&6)&&(ud=ni()+500,Uc()))}break;case 13:lh(function(){var i=Al(e,1);if(i!==null){var c=bo();is(i,e,1,c)}}),iA(e,1)}};AT=function(e){if(e.tag===13){var t=Al(e,134217728);if(t!==null){var r=bo();is(t,e,134217728,r)}iA(e,134217728)}};k3=function(e){if(e.tag===13){var t=Dc(e),r=Al(e,t);if(r!==null){var i=bo();is(r,e,t,i)}iA(e,t)}};O3=function(){return _n};D3=function(e,t){var r=_n;try{return _n=e,t()}finally{_n=r}};Q2=function(e,t,r){switch(t){case"input":if(W2(e,r),t=r.name,r.type==="radio"&&t!=null){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<r.length;t++){var i=r[t];if(i!==e&&i.form===e.form){var c=Zx(i);if(!c)throw Error(Tt(90));u3(i),W2(i,c)}}}break;case"textarea":f3(e,r);break;case"select":t=r.value,t!=null&&Wf(e,!!r.multiple,t,!1)}};v3=QT;x3=lh;var l8={usingClientEntryPoint:!1,Events:[gy,Rf,Zx,y3,_3,QT]},Pm={findFiberByHostInstance:Wu,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},c8={bundleType:Pm.bundleType,version:Pm.version,rendererPackageName:Pm.rendererPackageName,rendererConfig:Pm.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ol.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=S3(e),e===null?null:e.stateNode},findFiberByHostInstance:Pm.findFiberByHostInstance||a8,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Bv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Bv.isDisabled&&Bv.supportsFiber)try{Gx=Bv.inject(c8),zs=Bv}catch{}}ia.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=l8;ia.createPortal=function(e,t){var r=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!aA(t))throw Error(Tt(200));return o8(e,t,null,r)};ia.createRoot=function(e,t){if(!aA(e))throw Error(Tt(299));var r=!1,i="",c=r5;return t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(i=t.identifierPrefix),t.onRecoverableError!==void 0&&(c=t.onRecoverableError)),t=nA(e,1,!1,null,null,r,!1,i,c),e[Tl]=t.current,Tg(e.nodeType===8?e.parentNode:e),new oA(t)};ia.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Tt(188)):(e=Object.keys(e).join(","),Error(Tt(268,e)));return e=S3(t),e=e===null?null:e.stateNode,e};ia.flushSync=function(e){return lh(e)};ia.hydrate=function(e,t,r){if(!n1(t))throw Error(Tt(200));return i1(null,e,t,!0,r)};ia.hydrateRoot=function(e,t,r){if(!aA(e))throw Error(Tt(405));var i=r!=null&&r.hydratedSources||null,c=!1,u="",p=r5;if(r!=null&&(r.unstable_strictMode===!0&&(c=!0),r.identifierPrefix!==void 0&&(u=r.identifierPrefix),r.onRecoverableError!==void 0&&(p=r.onRecoverableError)),t=t5(t,null,e,1,r??null,c,!1,u,p),e[Tl]=t.current,Tg(e),i)for(e=0;e<i.length;e++)r=i[e],c=r._getVersion,c=c(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,c]:t.mutableSourceEagerHydrationData.push(r,c);return new r1(t)};ia.render=function(e,t,r){if(!n1(t))throw Error(Tt(200));return i1(null,e,t,!1,r)};ia.unmountComponentAtNode=function(e){if(!n1(e))throw Error(Tt(40));return e._reactRootContainer?(lh(function(){i1(null,null,e,!1,function(){e._reactRootContainer=null,e[Tl]=null})}),!0):!1};ia.unstable_batchedUpdates=QT;ia.unstable_renderSubtreeIntoContainer=function(e,t,r,i){if(!n1(r))throw Error(Tt(200));if(e==null||e._reactInternals===void 0)throw Error(Tt(38));return i1(e,t,r,!1,i)};ia.version="18.2.0-next-9e3b772b8-20220608";function n5(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n5)}catch(e){console.error(e)}}n5(),t3.exports=ia;var u8=t3.exports,gk=u8;F2.createRoot=gk.createRoot,F2.hydrateRoot=gk.hydrateRoot;/**
 * @remix-run/router v1.6.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cn(){return cn=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},cn.apply(this,arguments)}var si;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(si||(si={}));const yk="popstate";function h8(e){e===void 0&&(e={});function t(i,c){let{pathname:u,search:p,hash:o}=i.location;return Rg("",{pathname:u,search:p,hash:o},c.state&&c.state.usr||null,c.state&&c.state.key||"default")}function r(i,c){return typeof c=="string"?c:_y(c)}return d8(t,r,null,e)}function Xr(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function hd(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function f8(){return Math.random().toString(36).substr(2,8)}function _k(e,t){return{usr:e.state,key:e.key,idx:t}}function Rg(e,t,r,i){return r===void 0&&(r=null),cn({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Dl(t):t,{state:r,key:t&&t.key||i||f8()})}function _y(e){let{pathname:t="/",search:r="",hash:i=""}=e;return r&&r!=="?"&&(t+=r.charAt(0)==="?"?r:"?"+r),i&&i!=="#"&&(t+=i.charAt(0)==="#"?i:"#"+i),t}function Dl(e){let t={};if(e){let r=e.indexOf("#");r>=0&&(t.hash=e.substr(r),e=e.substr(0,r));let i=e.indexOf("?");i>=0&&(t.search=e.substr(i),e=e.substr(0,i)),e&&(t.pathname=e)}return t}function d8(e,t,r,i){i===void 0&&(i={});let{window:c=document.defaultView,v5Compat:u=!1}=i,p=c.history,o=si.Pop,v=null,w=A();w==null&&(w=0,p.replaceState(cn({},p.state,{idx:w}),""));function A(){return(p.state||{idx:null}).idx}function T(){o=si.Pop;let N=A(),R=N==null?null:N-w;w=N,v&&v({action:o,location:k.location,delta:R})}function P(N,R){o=si.Push;let j=Rg(k.location,N,R);r&&r(j,N),w=A()+1;let D=_k(j,w),G=k.createHref(j);try{p.pushState(D,"",G)}catch{c.location.assign(G)}u&&v&&v({action:o,location:k.location,delta:1})}function $(N,R){o=si.Replace;let j=Rg(k.location,N,R);r&&r(j,N),w=A();let D=_k(j,w),G=k.createHref(j);p.replaceState(D,"",G),u&&v&&v({action:o,location:k.location,delta:0})}function L(N){let R=c.location.origin!=="null"?c.location.origin:c.location.href,j=typeof N=="string"?N:_y(N);return Xr(R,"No window.location.(origin|href) available to create URL for href: "+j),new URL(j,R)}let k={get action(){return o},get location(){return e(c,p)},listen(N){if(v)throw new Error("A history only accepts one active listener");return c.addEventListener(yk,T),v=N,()=>{c.removeEventListener(yk,T),v=null}},createHref(N){return t(c,N)},createURL:L,encodeLocation(N){let R=L(N);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:P,replace:$,go(N){return p.go(N)}};return k}var vi;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(vi||(vi={}));const p8=new Set(["lazy","caseSensitive","path","id","index","children"]);function m8(e){return e.index===!0}function i5(e,t,r,i){return r===void 0&&(r=[]),i===void 0&&(i={}),e.map((c,u)=>{let p=[...r,u],o=typeof c.id=="string"?c.id:p.join("-");if(Xr(c.index!==!0||!c.children,"Cannot specify children on an index route"),Xr(!i[o],'Found a route id collision on id "'+o+`".  Route id's must be globally unique within Data Router usages`),m8(c)){let v=cn({},c,t(c),{id:o});return i[o]=v,v}else{let v=cn({},c,t(c),{id:o,children:void 0});return i[o]=v,c.children&&(v.children=i5(c.children,t,p,i)),v}})}function jf(e,t,r){r===void 0&&(r="/");let i=typeof t=="string"?Dl(t):t,c=vy(i.pathname||"/",r);if(c==null)return null;let u=o5(e);g8(u);let p=null;for(let o=0;p==null&&o<u.length;++o)p=T8(u[o],C8(c));return p}function o5(e,t,r,i){t===void 0&&(t=[]),r===void 0&&(r=[]),i===void 0&&(i="");let c=(u,p,o)=>{let v={relativePath:o===void 0?u.path||"":o,caseSensitive:u.caseSensitive===!0,childrenIndex:p,route:u};v.relativePath.startsWith("/")&&(Xr(v.relativePath.startsWith(i),'Absolute route path "'+v.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),v.relativePath=v.relativePath.slice(i.length));let w=eh([i,v.relativePath]),A=r.concat(v);u.children&&u.children.length>0&&(Xr(u.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+w+'".')),o5(u.children,t,A,w)),!(u.path==null&&!u.index)&&t.push({path:w,score:S8(w,u.index),routesMeta:A})};return e.forEach((u,p)=>{var o;if(u.path===""||!((o=u.path)!=null&&o.includes("?")))c(u,p);else for(let v of a5(u.path))c(u,p,v)}),t}function a5(e){let t=e.split("/");if(t.length===0)return[];let[r,...i]=t,c=r.endsWith("?"),u=r.replace(/\?$/,"");if(i.length===0)return c?[u,""]:[u];let p=a5(i.join("/")),o=[];return o.push(...p.map(v=>v===""?u:[u,v].join("/"))),c&&o.push(...p),o.map(v=>e.startsWith("/")&&v===""?"/":v)}function g8(e){e.sort((t,r)=>t.score!==r.score?r.score-t.score:E8(t.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}const y8=/^:\w+$/,_8=3,v8=2,x8=1,b8=10,w8=-2,vk=e=>e==="*";function S8(e,t){let r=e.split("/"),i=r.length;return r.some(vk)&&(i+=w8),t&&(i+=v8),r.filter(c=>!vk(c)).reduce((c,u)=>c+(y8.test(u)?_8:u===""?x8:b8),i)}function E8(e,t){return e.length===t.length&&e.slice(0,-1).every((i,c)=>i===t[c])?e[e.length-1]-t[t.length-1]:0}function T8(e,t){let{routesMeta:r}=e,i={},c="/",u=[];for(let p=0;p<r.length;++p){let o=r[p],v=p===r.length-1,w=c==="/"?t:t.slice(c.length)||"/",A=A8({path:o.relativePath,caseSensitive:o.caseSensitive,end:v},w);if(!A)return null;Object.assign(i,A.params);let T=o.route;u.push({params:i,pathname:eh([c,A.pathname]),pathnameBase:D8(eh([c,A.pathnameBase])),route:T}),A.pathnameBase!=="/"&&(c=eh([c,A.pathnameBase]))}return u}function A8(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[r,i]=M8(e.path,e.caseSensitive,e.end),c=t.match(r);if(!c)return null;let u=c[0],p=u.replace(/(.)\/+$/,"$1"),o=c.slice(1);return{params:i.reduce((w,A,T)=>{if(A==="*"){let P=o[T]||"";p=u.slice(0,u.length-P.length).replace(/(.)\/+$/,"$1")}return w[A]=P8(o[T]||"",A),w},{}),pathname:u,pathnameBase:p,pattern:e}}function M8(e,t,r){t===void 0&&(t=!1),r===void 0&&(r=!0),hd(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let i=[],c="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(p,o)=>(i.push(o),"/([^\\/]+)"));return e.endsWith("*")?(i.push("*"),c+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?c+="\\/*$":e!==""&&e!=="/"&&(c+="(?:(?=\\/|$))"),[new RegExp(c,t?void 0:"i"),i]}function C8(e){try{return decodeURI(e)}catch(t){return hd(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function P8(e,t){try{return decodeURIComponent(e)}catch(r){return hd(!1,'The value for the URL param "'+t+'" will not be decoded because'+(' the string "'+e+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+r+").")),e}}function vy(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,i=e.charAt(r);return i&&i!=="/"?null:e.slice(r)||"/"}function I8(e,t){t===void 0&&(t="/");let{pathname:r,search:i="",hash:c=""}=typeof e=="string"?Dl(e):e;return{pathname:r?r.startsWith("/")?r:k8(r,t):t,search:R8(i),hash:L8(c)}}function k8(e,t){let r=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(c=>{c===".."?r.length>1&&r.pop():c!=="."&&r.push(c)}),r.length>1?r.join("/"):"/"}function Xw(e,t,r,i){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+r+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function s5(e){return e.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function O8(e,t,r,i){i===void 0&&(i=!1);let c;typeof e=="string"?c=Dl(e):(c=cn({},e),Xr(!c.pathname||!c.pathname.includes("?"),Xw("?","pathname","search",c)),Xr(!c.pathname||!c.pathname.includes("#"),Xw("#","pathname","hash",c)),Xr(!c.search||!c.search.includes("#"),Xw("#","search","hash",c)));let u=e===""||c.pathname==="",p=u?"/":c.pathname,o;if(i||p==null)o=r;else{let T=t.length-1;if(p.startsWith("..")){let P=p.split("/");for(;P[0]==="..";)P.shift(),T-=1;c.pathname=P.join("/")}o=T>=0?t[T]:"/"}let v=I8(c,o),w=p&&p!=="/"&&p.endsWith("/"),A=(u||p===".")&&r.endsWith("/");return!v.pathname.endsWith("/")&&(w||A)&&(v.pathname+="/"),v}const eh=e=>e.join("/").replace(/\/\/+/g,"/"),D8=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),R8=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,L8=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class sA{constructor(t,r,i,c){c===void 0&&(c=!1),this.status=t,this.statusText=r||"",this.internal=c,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}}function l5(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const c5=["post","put","patch","delete"],z8=new Set(c5),B8=["get",...c5],$8=new Set(B8),F8=new Set([301,302,303,307,308]),N8=new Set([307,308]),Kw={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},j8={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},xk={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},u5=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,h5=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",U8=!h5,V8=e=>({hasErrorBoundary:!!e.hasErrorBoundary});function G8(e){Xr(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let t;if(e.mapRouteProperties)t=e.mapRouteProperties;else if(e.detectErrorBoundary){let Je=e.detectErrorBoundary;t=et=>({hasErrorBoundary:Je(et)})}else t=V8;let r={},i=i5(e.routes,t,void 0,r),c,u=e.basename||"/",p=cn({v7_normalizeFormMethod:!1,v7_prependBasename:!1},e.future),o=null,v=new Set,w=null,A=null,T=null,P=e.hydrationData!=null,$=jf(i,e.history.location,u),L=null;if($==null){let Je=Ya(404,{pathname:e.history.location.pathname}),{matches:et,route:vt}=Mk(i);$=et,L={[vt.id]:Je}}let k=!$.some(Je=>Je.route.lazy)&&(!$.some(Je=>Je.route.loader)||e.hydrationData!=null),N,R={historyAction:e.history.action,location:e.history.location,matches:$,initialized:k,navigation:Kw,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||L,fetchers:new Map,blockers:new Map},j=si.Pop,D=!1,G,W=!1,Y=!1,ee=[],de=[],xe=new Map,Me=0,Ce=-1,qe=new Map,Ue=new Set,ut=new Map,Be=new Map,bt=new Map,kt=!1;function He(){return o=e.history.listen(Je=>{let{action:et,location:vt,delta:$t}=Je;if(kt){kt=!1;return}hd(bt.size===0||$t!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let jt=jo({currentLocation:R.location,nextLocation:vt,historyAction:et});if(jt&&$t!=null){kt=!0,e.history.go($t*-1),ii(jt,{state:"blocked",location:vt,proceed(){ii(jt,{state:"proceeding",proceed:void 0,reset:void 0,location:vt}),e.history.go($t)},reset(){Ln(jt),xt({blockers:new Map(N.state.blockers)})}});return}return hr(et,vt)}),R.initialized||hr(si.Pop,R.location),N}function nt(){o&&o(),v.clear(),G&&G.abort(),R.fetchers.forEach((Je,et)=>Lr(et)),R.blockers.forEach((Je,et)=>Ln(et))}function gt(Je){return v.add(Je),()=>v.delete(Je)}function xt(Je){R=cn({},R,Je),v.forEach(et=>et(R))}function zt(Je,et){var vt,$t;let jt=R.actionData!=null&&R.navigation.formMethod!=null&&ul(R.navigation.formMethod)&&R.navigation.state==="loading"&&((vt=Je.state)==null?void 0:vt._isRedirect)!==!0,sr;et.actionData?Object.keys(et.actionData).length>0?sr=et.actionData:sr=null:jt?sr=R.actionData:sr=null;let fr=et.loaderData?Ak(R.loaderData,et.loaderData,et.matches||[],et.errors):R.loaderData;for(let[Xt]of bt)Ln(Xt);let nr=D===!0||R.navigation.formMethod!=null&&ul(R.navigation.formMethod)&&(($t=Je.state)==null?void 0:$t._isRedirect)!==!0;c&&(i=c,c=void 0),xt(cn({},et,{actionData:sr,loaderData:fr,historyAction:j,location:Je,initialized:!0,navigation:Kw,revalidation:"idle",restoreScrollPosition:Da(Je,et.matches||R.matches),preventScrollReset:nr,blockers:new Map(R.blockers)})),W||j===si.Pop||(j===si.Push?e.history.push(Je,Je.state):j===si.Replace&&e.history.replace(Je,Je.state)),j=si.Pop,D=!1,W=!1,Y=!1,ee=[],de=[]}async function Vt(Je,et){if(typeof Je=="number"){e.history.go(Je);return}let vt=OS(R.location,R.matches,u,p.v7_prependBasename,Je,et==null?void 0:et.fromRouteId,et==null?void 0:et.relative),{path:$t,submission:jt,error:sr}=bk(p.v7_normalizeFormMethod,!1,vt,et),fr=R.location,nr=Rg(R.location,$t,et&&et.state);nr=cn({},nr,e.history.encodeLocation(nr));let Xt=et&&et.replace!=null?et.replace:void 0,Cr=si.Push;Xt===!0?Cr=si.Replace:Xt===!1||jt!=null&&ul(jt.formMethod)&&jt.formAction===R.location.pathname+R.location.search&&(Cr=si.Replace);let kr=et&&"preventScrollReset"in et?et.preventScrollReset===!0:void 0,un=jo({currentLocation:fr,nextLocation:nr,historyAction:Cr});if(un){ii(un,{state:"blocked",location:nr,proceed(){ii(un,{state:"proceeding",proceed:void 0,reset:void 0,location:nr}),Vt(Je,et)},reset(){Ln(un),xt({blockers:new Map(R.blockers)})}});return}return await hr(Cr,nr,{submission:jt,pendingError:sr,preventScrollReset:kr,replace:et&&et.replace})}function Zt(){if(Ot(),xt({revalidation:"loading"}),R.navigation.state!=="submitting"){if(R.navigation.state==="idle"){hr(R.historyAction,R.location,{startUninterruptedRevalidation:!0});return}hr(j||R.historyAction,R.navigation.location,{overrideNavigation:R.navigation})}}async function hr(Je,et,vt){G&&G.abort(),G=null,j=Je,W=(vt&&vt.startUninterruptedRevalidation)===!0,sa(R.location,R.matches),D=(vt&&vt.preventScrollReset)===!0;let $t=c||i,jt=vt&&vt.overrideNavigation,sr=jf($t,et,u);if(!sr){let bn=Ya(404,{pathname:et.pathname}),{matches:Cn,route:fi}=Mk($t);mo(),zt(et,{matches:Cn,loaderData:{},errors:{[fi.id]:bn}});return}if(X8(R.location,et)&&!(vt&&vt.submission&&ul(vt.submission.formMethod))){zt(et,{matches:sr});return}G=new AbortController;let fr=km(e.history,et,G.signal,vt&&vt.submission),nr,Xt;if(vt&&vt.pendingError)Xt={[Uf(sr).route.id]:vt.pendingError};else if(vt&&vt.submission&&ul(vt.submission.formMethod)){let bn=await Tr(fr,et,vt.submission,sr,{replace:vt.replace});if(bn.shortCircuited)return;nr=bn.pendingActionData,Xt=bn.pendingActionError,jt=cn({state:"loading",location:et},vt.submission),fr=new Request(fr.url,{signal:fr.signal})}let{shortCircuited:Cr,loaderData:kr,errors:un}=await Rr(fr,et,sr,jt,vt&&vt.submission,vt&&vt.fetcherSubmission,vt&&vt.replace,nr,Xt);Cr||(G=null,zt(et,cn({matches:sr},nr?{actionData:nr}:{},{loaderData:kr,errors:un})))}async function Tr(Je,et,vt,$t,jt){Ot();let sr=cn({state:"submitting",location:et},vt);xt({navigation:sr});let fr,nr=DS($t,et);if(!nr.route.action&&!nr.route.lazy)fr={type:vi.error,error:Ya(405,{method:Je.method,pathname:et.pathname,routeId:nr.route.id})};else if(fr=await Im("action",Je,nr,$t,r,t,u),Je.signal.aborted)return{shortCircuited:!0};if(Jf(fr)){let Xt;return jt&&jt.replace!=null?Xt=jt.replace:Xt=fr.location===R.location.pathname+R.location.search,await Qe(R,fr,{submission:vt,replace:Xt}),{shortCircuited:!0}}if(lg(fr)){let Xt=Uf($t,nr.route.id);return(jt&&jt.replace)!==!0&&(j=si.Push),{pendingActionData:{},pendingActionError:{[Xt.route.id]:fr.error}}}if(Xu(fr))throw Ya(400,{type:"defer-action"});return{pendingActionData:{[nr.route.id]:fr.data}}}async function Rr(Je,et,vt,$t,jt,sr,fr,nr,Xt){let Cr=$t;Cr||(Cr=cn({state:"loading",location:et,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},jt));let kr=jt||sr?jt||sr:Cr.formMethod&&Cr.formAction&&Cr.formData&&Cr.formEncType?{formMethod:Cr.formMethod,formAction:Cr.formAction,formData:Cr.formData,formEncType:Cr.formEncType}:void 0,un=c||i,[bn,Cn]=wk(e.history,R,vt,kr,et,Y,ee,de,ut,un,u,nr,Xt);if(mo(ie=>!(vt&&vt.some(pe=>pe.route.id===ie))||bn&&bn.some(pe=>pe.route.id===ie)),bn.length===0&&Cn.length===0){let ie=Yi();return zt(et,cn({matches:vt,loaderData:{},errors:Xt||null},nr?{actionData:nr}:{},ie?{fetchers:new Map(R.fetchers)}:{})),{shortCircuited:!0}}if(!W){Cn.forEach(pe=>{let Se=R.fetchers.get(pe.key),Ie={state:"loading",data:Se&&Se.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};R.fetchers.set(pe.key,Ie)});let ie=nr||R.actionData;xt(cn({navigation:Cr},ie?Object.keys(ie).length===0?{actionData:null}:{actionData:ie}:{},Cn.length>0?{fetchers:new Map(R.fetchers)}:{}))}Ce=++Me,Cn.forEach(ie=>{ie.controller&&xe.set(ie.key,ie.controller)});let fi=()=>Cn.forEach(ie=>mn(ie.key));G&&G.signal.addEventListener("abort",fi);let{results:To,loaderResults:Uo,fetcherResults:oi}=await lr(R.matches,vt,bn,Cn,Je);if(Je.signal.aborted)return{shortCircuited:!0};G&&G.signal.removeEventListener("abort",fi),Cn.forEach(ie=>xe.delete(ie.key));let di=Ck(To);if(di)return await Qe(R,di,{replace:fr}),{shortCircuited:!0};let{loaderData:Ra,errors:Vo}=Tk(R,vt,bn,Uo,Xt,Cn,oi,Be);Be.forEach((ie,pe)=>{ie.subscribe(Se=>{(Se||ie.done)&&Be.delete(pe)})});let ce=Yi(),X=Ti(Ce),J=ce||X||Cn.length>0;return cn({loaderData:Ra,errors:Vo},J?{fetchers:new Map(R.fetchers)}:{})}function ir(Je){return R.fetchers.get(Je)||j8}function _t(Je,et,vt,$t){if(U8)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");xe.has(Je)&&mn(Je);let jt=c||i,sr=OS(R.location,R.matches,u,p.v7_prependBasename,vt,et,$t==null?void 0:$t.relative),fr=jf(jt,sr,u);if(!fr){Sr(Je,et,Ya(404,{pathname:sr}));return}let{path:nr,submission:Xt}=bk(p.v7_normalizeFormMethod,!0,sr,$t),Cr=DS(fr,nr);if(D=($t&&$t.preventScrollReset)===!0,Xt&&ul(Xt.formMethod)){Mt(Je,et,nr,Cr,fr,Xt);return}ut.set(Je,{routeId:et,path:nr}),or(Je,et,nr,Cr,fr,Xt)}async function Mt(Je,et,vt,$t,jt,sr){if(Ot(),ut.delete(Je),!$t.route.action&&!$t.route.lazy){let Ae=Ya(405,{method:sr.formMethod,pathname:vt,routeId:et});Sr(Je,et,Ae);return}let fr=R.fetchers.get(Je),nr=cn({state:"submitting"},sr,{data:fr&&fr.data," _hasFetcherDoneAnything ":!0});R.fetchers.set(Je,nr),xt({fetchers:new Map(R.fetchers)});let Xt=new AbortController,Cr=km(e.history,vt,Xt.signal,sr);xe.set(Je,Xt);let kr=await Im("action",Cr,$t,jt,r,t,u);if(Cr.signal.aborted){xe.get(Je)===Xt&&xe.delete(Je);return}if(Jf(kr)){xe.delete(Je),Ue.add(Je);let Ae=cn({state:"loading"},sr,{data:void 0," _hasFetcherDoneAnything ":!0});return R.fetchers.set(Je,Ae),xt({fetchers:new Map(R.fetchers)}),Qe(R,kr,{submission:sr,isFetchActionRedirect:!0})}if(lg(kr)){Sr(Je,et,kr.error);return}if(Xu(kr))throw Ya(400,{type:"defer-action"});let un=R.navigation.location||R.location,bn=km(e.history,un,Xt.signal),Cn=c||i,fi=R.navigation.state!=="idle"?jf(Cn,R.navigation.location,u):R.matches;Xr(fi,"Didn't find any matches after fetcher action");let To=++Me;qe.set(Je,To);let Uo=cn({state:"loading",data:kr.data},sr,{" _hasFetcherDoneAnything ":!0});R.fetchers.set(Je,Uo);let[oi,di]=wk(e.history,R,fi,sr,un,Y,ee,de,ut,Cn,u,{[$t.route.id]:kr.data},void 0);di.filter(Ae=>Ae.key!==Je).forEach(Ae=>{let Te=Ae.key,De=R.fetchers.get(Te),at={state:"loading",data:De&&De.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};R.fetchers.set(Te,at),Ae.controller&&xe.set(Te,Ae.controller)}),xt({fetchers:new Map(R.fetchers)});let Ra=()=>di.forEach(Ae=>mn(Ae.key));Xt.signal.addEventListener("abort",Ra);let{results:Vo,loaderResults:ce,fetcherResults:X}=await lr(R.matches,fi,oi,di,bn);if(Xt.signal.aborted)return;Xt.signal.removeEventListener("abort",Ra),qe.delete(Je),xe.delete(Je),di.forEach(Ae=>xe.delete(Ae.key));let J=Ck(Vo);if(J)return Qe(R,J);let{loaderData:ie,errors:pe}=Tk(R,R.matches,oi,ce,void 0,di,X,Be),Se={state:"idle",data:kr.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};R.fetchers.set(Je,Se);let Ie=Ti(To);R.navigation.state==="loading"&&To>Ce?(Xr(j,"Expected pending action"),G&&G.abort(),zt(R.navigation.location,{matches:fi,loaderData:ie,errors:pe,fetchers:new Map(R.fetchers)})):(xt(cn({errors:pe,loaderData:Ak(R.loaderData,ie,fi,pe)},Ie?{fetchers:new Map(R.fetchers)}:{})),Y=!1)}async function or(Je,et,vt,$t,jt,sr){let fr=R.fetchers.get(Je),nr=cn({state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},sr,{data:fr&&fr.data," _hasFetcherDoneAnything ":!0});R.fetchers.set(Je,nr),xt({fetchers:new Map(R.fetchers)});let Xt=new AbortController,Cr=km(e.history,vt,Xt.signal);xe.set(Je,Xt);let kr=await Im("loader",Cr,$t,jt,r,t,u);if(Xu(kr)&&(kr=await m5(kr,Cr.signal,!0)||kr),xe.get(Je)===Xt&&xe.delete(Je),Cr.signal.aborted)return;if(Jf(kr)){Ue.add(Je),await Qe(R,kr);return}if(lg(kr)){let bn=Uf(R.matches,et);R.fetchers.delete(Je),xt({fetchers:new Map(R.fetchers),errors:{[bn.route.id]:kr.error}});return}Xr(!Xu(kr),"Unhandled fetcher deferred data");let un={state:"idle",data:kr.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};R.fetchers.set(Je,un),xt({fetchers:new Map(R.fetchers)})}async function Qe(Je,et,vt){var $t;let{submission:jt,replace:sr,isFetchActionRedirect:fr}=vt===void 0?{}:vt;et.revalidate&&(Y=!0);let nr=Rg(Je.location,et.location,cn({_isRedirect:!0},fr?{_isFetchActionRedirect:!0}:{}));if(Xr(nr,"Expected a location on the redirect navigation"),u5.test(et.location)&&h5&&typeof(($t=window)==null?void 0:$t.location)<"u"){let Cn=e.history.createURL(et.location),fi=vy(Cn.pathname,u)==null;if(window.location.origin!==Cn.origin||fi){sr?window.location.replace(et.location):window.location.assign(et.location);return}}G=null;let Xt=sr===!0?si.Replace:si.Push,{formMethod:Cr,formAction:kr,formEncType:un,formData:bn}=Je.navigation;!jt&&Cr&&kr&&bn&&un&&(jt={formMethod:Cr,formAction:kr,formEncType:un,formData:bn}),N8.has(et.status)&&jt&&ul(jt.formMethod)?await hr(Xt,nr,{submission:cn({},jt,{formAction:et.location}),preventScrollReset:D}):fr?await hr(Xt,nr,{overrideNavigation:{state:"loading",location:nr,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0},fetcherSubmission:jt,preventScrollReset:D}):await hr(Xt,nr,{overrideNavigation:{state:"loading",location:nr,formMethod:jt?jt.formMethod:void 0,formAction:jt?jt.formAction:void 0,formEncType:jt?jt.formEncType:void 0,formData:jt?jt.formData:void 0},preventScrollReset:D})}async function lr(Je,et,vt,$t,jt){let sr=await Promise.all([...vt.map(Xt=>Im("loader",jt,Xt,et,r,t,u)),...$t.map(Xt=>Xt.matches&&Xt.match&&Xt.controller?Im("loader",km(e.history,Xt.path,Xt.controller.signal),Xt.match,Xt.matches,r,t,u):{type:vi.error,error:Ya(404,{pathname:Xt.path})})]),fr=sr.slice(0,vt.length),nr=sr.slice(vt.length);return await Promise.all([Pk(Je,vt,fr,fr.map(()=>jt.signal),!1,R.loaderData),Pk(Je,$t.map(Xt=>Xt.match),nr,$t.map(Xt=>Xt.controller?Xt.controller.signal:null),!0)]),{results:sr,loaderResults:fr,fetcherResults:nr}}function Ot(){Y=!0,ee.push(...mo()),ut.forEach((Je,et)=>{xe.has(et)&&(de.push(et),mn(et))})}function Sr(Je,et,vt){let $t=Uf(R.matches,et);Lr(Je),xt({errors:{[$t.route.id]:vt},fetchers:new Map(R.fetchers)})}function Lr(Je){xe.has(Je)&&mn(Je),ut.delete(Je),qe.delete(Je),Ue.delete(Je),R.fetchers.delete(Je)}function mn(Je){let et=xe.get(Je);Xr(et,"Expected fetch controller: "+Je),et.abort(),xe.delete(Je)}function Kn(Je){for(let et of Je){let $t={state:"idle",data:ir(et).data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};R.fetchers.set(et,$t)}}function Yi(){let Je=[],et=!1;for(let vt of Ue){let $t=R.fetchers.get(vt);Xr($t,"Expected fetcher: "+vt),$t.state==="loading"&&(Ue.delete(vt),Je.push(vt),et=!0)}return Kn(Je),et}function Ti(Je){let et=[];for(let[vt,$t]of qe)if($t<Je){let jt=R.fetchers.get(vt);Xr(jt,"Expected fetcher: "+vt),jt.state==="loading"&&(mn(vt),qe.delete(vt),et.push(vt))}return Kn(et),et.length>0}function po(Je,et){let vt=R.blockers.get(Je)||xk;return bt.get(Je)!==et&&bt.set(Je,et),vt}function Ln(Je){R.blockers.delete(Je),bt.delete(Je)}function ii(Je,et){let vt=R.blockers.get(Je)||xk;Xr(vt.state==="unblocked"&&et.state==="blocked"||vt.state==="blocked"&&et.state==="blocked"||vt.state==="blocked"&&et.state==="proceeding"||vt.state==="blocked"&&et.state==="unblocked"||vt.state==="proceeding"&&et.state==="unblocked","Invalid blocker state transition: "+vt.state+" -> "+et.state),R.blockers.set(Je,et),xt({blockers:new Map(R.blockers)})}function jo(Je){let{currentLocation:et,nextLocation:vt,historyAction:$t}=Je;if(bt.size===0)return;bt.size>1&&hd(!1,"A router only supports one blocker at a time");let jt=Array.from(bt.entries()),[sr,fr]=jt[jt.length-1],nr=R.blockers.get(sr);if(!(nr&&nr.state==="proceeding")&&fr({currentLocation:et,nextLocation:vt,historyAction:$t}))return sr}function mo(Je){let et=[];return Be.forEach((vt,$t)=>{(!Je||Je($t))&&(vt.cancel(),et.push($t),Be.delete($t))}),et}function qs(Je,et,vt){if(w=Je,T=et,A=vt||($t=>$t.key),!P&&R.navigation===Kw){P=!0;let $t=Da(R.location,R.matches);$t!=null&&xt({restoreScrollPosition:$t})}return()=>{w=null,T=null,A=null}}function sa(Je,et){if(w&&A&&T){let vt=et.map(jt=>Ik(jt,R.loaderData)),$t=A(Je,vt)||Je.key;w[$t]=T()}}function Da(Je,et){if(w&&A&&T){let vt=et.map(sr=>Ik(sr,R.loaderData)),$t=A(Je,vt)||Je.key,jt=w[$t];if(typeof jt=="number")return jt}return null}function ss(Je){c=Je}return N={get basename(){return u},get state(){return R},get routes(){return i},initialize:He,subscribe:gt,enableScrollRestoration:qs,navigate:Vt,fetch:_t,revalidate:Zt,createHref:Je=>e.history.createHref(Je),encodeLocation:Je=>e.history.encodeLocation(Je),getFetcher:ir,deleteFetcher:Lr,dispose:nt,getBlocker:po,deleteBlocker:Ln,_internalFetchControllers:xe,_internalActiveDeferreds:Be,_internalSetRoutes:ss},N}function q8(e){return e!=null&&"formData"in e}function OS(e,t,r,i,c,u,p){let o,v;if(u!=null&&p!=="path"){o=[];for(let A of t)if(o.push(A),A.route.id===u){v=A;break}}else o=t,v=t[t.length-1];let w=O8(c||".",s5(o).map(A=>A.pathnameBase),vy(e.pathname,r)||e.pathname,p==="path");return c==null&&(w.search=e.search,w.hash=e.hash),(c==null||c===""||c===".")&&v&&v.route.index&&!lA(w.search)&&(w.search=w.search?w.search.replace(/^\?/,"?index&"):"?index"),i&&r!=="/"&&(w.pathname=w.pathname==="/"?r:eh([r,w.pathname])),_y(w)}function bk(e,t,r,i){if(!i||!q8(i))return{path:r};if(i.formMethod&&!J8(i.formMethod))return{path:r,error:Ya(405,{method:i.formMethod})};let c;if(i.formData){let o=i.formMethod||"get";if(c={formMethod:e?o.toUpperCase():o.toLowerCase(),formAction:p5(r),formEncType:i&&i.formEncType||"application/x-www-form-urlencoded",formData:i.formData},ul(c.formMethod))return{path:r,submission:c}}let u=Dl(r),p=d5(i.formData);return t&&u.search&&lA(u.search)&&p.append("index",""),u.search="?"+p,{path:_y(u),submission:c}}function W8(e,t){let r=e;if(t){let i=e.findIndex(c=>c.route.id===t);i>=0&&(r=e.slice(0,i))}return r}function wk(e,t,r,i,c,u,p,o,v,w,A,T,P){let $=P?Object.values(P)[0]:T?Object.values(T)[0]:void 0,L=e.createURL(t.location),k=e.createURL(c),N=P?Object.keys(P)[0]:void 0,j=W8(r,N).filter((G,W)=>{if(G.route.lazy)return!0;if(G.route.loader==null)return!1;if(H8(t.loaderData,t.matches[W],G)||p.some(de=>de===G.route.id))return!0;let Y=t.matches[W],ee=G;return Sk(G,cn({currentUrl:L,currentParams:Y.params,nextUrl:k,nextParams:ee.params},i,{actionResult:$,defaultShouldRevalidate:u||L.pathname+L.search===k.pathname+k.search||L.search!==k.search||f5(Y,ee)}))}),D=[];return v.forEach((G,W)=>{if(!r.some(xe=>xe.route.id===G.routeId))return;let Y=jf(w,G.path,A);if(!Y){D.push({key:W,routeId:G.routeId,path:G.path,matches:null,match:null,controller:null});return}let ee=DS(Y,G.path);if(o.includes(W)){D.push({key:W,routeId:G.routeId,path:G.path,matches:Y,match:ee,controller:new AbortController});return}Sk(ee,cn({currentUrl:L,currentParams:t.matches[t.matches.length-1].params,nextUrl:k,nextParams:r[r.length-1].params},i,{actionResult:$,defaultShouldRevalidate:u}))&&D.push({key:W,routeId:G.routeId,path:G.path,matches:Y,match:ee,controller:new AbortController})}),[j,D]}function H8(e,t,r){let i=!t||r.route.id!==t.route.id,c=e[r.route.id]===void 0;return i||c}function f5(e,t){let r=e.route.path;return e.pathname!==t.pathname||r!=null&&r.endsWith("*")&&e.params["*"]!==t.params["*"]}function Sk(e,t){if(e.route.shouldRevalidate){let r=e.route.shouldRevalidate(t);if(typeof r=="boolean")return r}return t.defaultShouldRevalidate}async function Ek(e,t,r){if(!e.lazy)return;let i=await e.lazy();if(!e.lazy)return;let c=r[e.id];Xr(c,"No route found in manifest");let u={};for(let p in i){let v=c[p]!==void 0&&p!=="hasErrorBoundary";hd(!v,'Route "'+c.id+'" has a static property "'+p+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+p+'" will be ignored.')),!v&&!p8.has(p)&&(u[p]=i[p])}Object.assign(c,u),Object.assign(c,cn({},t(c),{lazy:void 0}))}async function Im(e,t,r,i,c,u,p,o,v,w){o===void 0&&(o=!1),v===void 0&&(v=!1);let A,T,P,$=N=>{let R,j=new Promise((D,G)=>R=G);return P=()=>R(),t.signal.addEventListener("abort",P),Promise.race([N({request:t,params:r.params,context:w}),j])};try{let N=r.route[e];if(r.route.lazy)if(N)T=(await Promise.all([$(N),Ek(r.route,u,c)]))[0];else if(await Ek(r.route,u,c),N=r.route[e],N)T=await $(N);else if(e==="action"){let R=new URL(t.url),j=R.pathname+R.search;throw Ya(405,{method:t.method,pathname:j,routeId:r.route.id})}else return{type:vi.data,data:void 0};else if(N)T=await $(N);else{let R=new URL(t.url),j=R.pathname+R.search;throw Ya(404,{pathname:j})}Xr(T!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+r.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(N){A=vi.error,T=N}finally{P&&t.signal.removeEventListener("abort",P)}if(Y8(T)){let N=T.status;if(F8.has(N)){let D=T.headers.get("Location");if(Xr(D,"Redirects returned/thrown from loaders/actions must have a Location header"),!u5.test(D))D=OS(new URL(t.url),i.slice(0,i.indexOf(r)+1),p,!0,D);else if(!o){let G=new URL(t.url),W=D.startsWith("//")?new URL(G.protocol+D):new URL(D),Y=vy(W.pathname,p)!=null;W.origin===G.origin&&Y&&(D=W.pathname+W.search+W.hash)}if(o)throw T.headers.set("Location",D),T;return{type:vi.redirect,status:N,location:D,revalidate:T.headers.get("X-Remix-Revalidate")!==null}}if(v)throw{type:A||vi.data,response:T};let R,j=T.headers.get("Content-Type");return j&&/\bapplication\/json\b/.test(j)?R=await T.json():R=await T.text(),A===vi.error?{type:A,error:new sA(N,T.statusText,R),headers:T.headers}:{type:vi.data,data:R,statusCode:T.status,headers:T.headers}}if(A===vi.error)return{type:A,error:T};if(K8(T)){var L,k;return{type:vi.deferred,deferredData:T,statusCode:(L=T.init)==null?void 0:L.status,headers:((k=T.init)==null?void 0:k.headers)&&new Headers(T.init.headers)}}return{type:vi.data,data:T}}function km(e,t,r,i){let c=e.createURL(p5(t)).toString(),u={signal:r};if(i&&ul(i.formMethod)){let{formMethod:p,formEncType:o,formData:v}=i;u.method=p.toUpperCase(),u.body=o==="application/x-www-form-urlencoded"?d5(v):v}return new Request(c,u)}function d5(e){let t=new URLSearchParams;for(let[r,i]of e.entries())t.append(r,i instanceof File?i.name:i);return t}function Z8(e,t,r,i,c){let u={},p=null,o,v=!1,w={};return r.forEach((A,T)=>{let P=t[T].route.id;if(Xr(!Jf(A),"Cannot handle redirect results in processLoaderData"),lg(A)){let $=Uf(e,P),L=A.error;i&&(L=Object.values(i)[0],i=void 0),p=p||{},p[$.route.id]==null&&(p[$.route.id]=L),u[P]=void 0,v||(v=!0,o=l5(A.error)?A.error.status:500),A.headers&&(w[P]=A.headers)}else Xu(A)?(c.set(P,A.deferredData),u[P]=A.deferredData.data):u[P]=A.data,A.statusCode!=null&&A.statusCode!==200&&!v&&(o=A.statusCode),A.headers&&(w[P]=A.headers)}),i&&(p=i,u[Object.keys(i)[0]]=void 0),{loaderData:u,errors:p,statusCode:o||200,loaderHeaders:w}}function Tk(e,t,r,i,c,u,p,o){let{loaderData:v,errors:w}=Z8(t,r,i,c,o);for(let A=0;A<u.length;A++){let{key:T,match:P,controller:$}=u[A];Xr(p!==void 0&&p[A]!==void 0,"Did not find corresponding fetcher result");let L=p[A];if(!($&&$.signal.aborted))if(lg(L)){let k=Uf(e.matches,P==null?void 0:P.route.id);w&&w[k.route.id]||(w=cn({},w,{[k.route.id]:L.error})),e.fetchers.delete(T)}else if(Jf(L))Xr(!1,"Unhandled fetcher revalidation redirect");else if(Xu(L))Xr(!1,"Unhandled fetcher deferred data");else{let k={state:"idle",data:L.data,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0," _hasFetcherDoneAnything ":!0};e.fetchers.set(T,k)}}return{loaderData:v,errors:w}}function Ak(e,t,r,i){let c=cn({},t);for(let u of r){let p=u.route.id;if(t.hasOwnProperty(p)?t[p]!==void 0&&(c[p]=t[p]):e[p]!==void 0&&u.route.loader&&(c[p]=e[p]),i&&i.hasOwnProperty(p))break}return c}function Uf(e,t){return(t?e.slice(0,e.findIndex(i=>i.route.id===t)+1):[...e]).reverse().find(i=>i.route.hasErrorBoundary===!0)||e[0]}function Mk(e){let t=e.find(r=>r.index||!r.path||r.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function Ya(e,t){let{pathname:r,routeId:i,method:c,type:u}=t===void 0?{}:t,p="Unknown Server Error",o="Unknown @remix-run/router error";return e===400?(p="Bad Request",c&&r&&i?o="You made a "+c+' request to "'+r+'" but '+('did not provide a `loader` for route "'+i+'", ')+"so there is no way to handle the request.":u==="defer-action"&&(o="defer() is not supported in actions")):e===403?(p="Forbidden",o='Route "'+i+'" does not match URL "'+r+'"'):e===404?(p="Not Found",o='No route matches URL "'+r+'"'):e===405&&(p="Method Not Allowed",c&&r&&i?o="You made a "+c.toUpperCase()+' request to "'+r+'" but '+('did not provide an `action` for route "'+i+'", ')+"so there is no way to handle the request.":c&&(o='Invalid request method "'+c.toUpperCase()+'"')),new sA(e||500,p,new Error(o),!0)}function Ck(e){for(let t=e.length-1;t>=0;t--){let r=e[t];if(Jf(r))return r}}function p5(e){let t=typeof e=="string"?Dl(e):e;return _y(cn({},t,{hash:""}))}function X8(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function Xu(e){return e.type===vi.deferred}function lg(e){return e.type===vi.error}function Jf(e){return(e&&e.type)===vi.redirect}function K8(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function Y8(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function J8(e){return $8.has(e.toLowerCase())}function ul(e){return z8.has(e.toLowerCase())}async function Pk(e,t,r,i,c,u){for(let p=0;p<r.length;p++){let o=r[p],v=t[p];if(!v)continue;let w=e.find(T=>T.route.id===v.route.id),A=w!=null&&!f5(w,v)&&(u&&u[v.route.id])!==void 0;if(Xu(o)&&(c||A)){let T=i[p];Xr(T,"Expected an AbortSignal for revalidating fetcher deferred result"),await m5(o,T,c).then(P=>{P&&(r[p]=P||r[p])})}}}async function m5(e,t,r){if(r===void 0&&(r=!1),!await e.deferredData.resolveData(t)){if(r)try{return{type:vi.data,data:e.deferredData.unwrappedData}}catch(c){return{type:vi.error,error:c}}return{type:vi.data,data:e.deferredData.data}}}function lA(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function Ik(e,t){let{route:r,pathname:i,params:c}=e;return{id:r.id,pathname:i,params:c,data:t[r.id],handle:r.handle}}function DS(e,t){let r=typeof t=="string"?Dl(t).search:t.search;if(e[e.length-1].route.index&&lA(r||""))return e[e.length-1];let i=s5(e);return i[i.length-1]}/**
 * React Router v6.11.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function RS(){return RS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},RS.apply(this,arguments)}const g5=Ke.createContext(null),y5=Ke.createContext(null),_5=Ke.createContext(null),o1=Ke.createContext(null),a1=Ke.createContext({outlet:null,matches:[],isDataRoute:!1}),v5=Ke.createContext(null);function cA(){return Ke.useContext(o1)!=null}function Q8(){return cA()||Xr(!1),Ke.useContext(o1).location}function eV(e,t,r){cA()||Xr(!1);let{navigator:i}=Ke.useContext(_5),{matches:c}=Ke.useContext(a1),u=c[c.length-1],p=u?u.params:{};u&&u.pathname;let o=u?u.pathnameBase:"/";u&&u.route;let v=Q8(),w;if(t){var A;let k=typeof t=="string"?Dl(t):t;o==="/"||(A=k.pathname)!=null&&A.startsWith(o)||Xr(!1),w=k}else w=v;let T=w.pathname||"/",P=o==="/"?T:T.slice(o.length)||"/",$=jf(e,{pathname:P}),L=oV($&&$.map(k=>Object.assign({},k,{params:Object.assign({},p,k.params),pathname:eh([o,i.encodeLocation?i.encodeLocation(k.pathname).pathname:k.pathname]),pathnameBase:k.pathnameBase==="/"?o:eh([o,i.encodeLocation?i.encodeLocation(k.pathnameBase).pathname:k.pathnameBase])})),c,r);return t&&L?Ke.createElement(o1.Provider,{value:{location:RS({pathname:"/",search:"",hash:"",state:null,key:"default"},w),navigationType:si.Pop}},L):L}function tV(){let e=cV(),t=l5(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,c={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},u=null;return Ke.createElement(Ke.Fragment,null,Ke.createElement("h2",null,"Unexpected Application Error!"),Ke.createElement("h3",{style:{fontStyle:"italic"}},t),r?Ke.createElement("pre",{style:c},r):null,u)}const rV=Ke.createElement(tV,null);class nV extends Ke.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,r){return r.location!==t.location||r.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error||r.error,location:r.location,revalidation:t.revalidation||r.revalidation}}componentDidCatch(t,r){console.error("React Router caught the following error during render",t,r)}render(){return this.state.error?Ke.createElement(a1.Provider,{value:this.props.routeContext},Ke.createElement(v5.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function iV(e){let{routeContext:t,match:r,children:i}=e,c=Ke.useContext(g5);return c&&c.static&&c.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(c.staticContext._deepestRenderedBoundaryId=r.route.id),Ke.createElement(a1.Provider,{value:t},i)}function oV(e,t,r){var i;if(t===void 0&&(t=[]),r===void 0&&(r=null),e==null){var c;if((c=r)!=null&&c.errors)e=r.matches;else return null}let u=e,p=(i=r)==null?void 0:i.errors;if(p!=null){let o=u.findIndex(v=>v.route.id&&(p==null?void 0:p[v.route.id]));o>=0||Xr(!1),u=u.slice(0,Math.min(u.length,o+1))}return u.reduceRight((o,v,w)=>{let A=v.route.id?p==null?void 0:p[v.route.id]:null,T=null;r&&(T=v.route.errorElement||rV);let P=t.concat(u.slice(0,w+1)),$=()=>{let L;return A?L=T:v.route.Component?L=Ke.createElement(v.route.Component,null):v.route.element?L=v.route.element:L=o,Ke.createElement(iV,{match:v,routeContext:{outlet:o,matches:P,isDataRoute:r!=null},children:L})};return r&&(v.route.ErrorBoundary||v.route.errorElement||w===0)?Ke.createElement(nV,{location:r.location,revalidation:r.revalidation,component:T,error:A,children:$(),routeContext:{outlet:null,matches:P,isDataRoute:!0}}):$()},null)}var kk;(function(e){e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate"})(kk||(kk={}));var U0;(function(e){e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId"})(U0||(U0={}));function aV(e){let t=Ke.useContext(y5);return t||Xr(!1),t}function sV(e){let t=Ke.useContext(a1);return t||Xr(!1),t}function lV(e){let t=sV(),r=t.matches[t.matches.length-1];return r.route.id||Xr(!1),r.route.id}function cV(){var e;let t=Ke.useContext(v5),r=aV(U0.UseRouteError),i=lV(U0.UseRouteError);return t||((e=r.errors)==null?void 0:e[i])}function uV(e){let{fallbackElement:t,router:r}=e,[i,c]=Ke.useState(r.state);Ke.useLayoutEffect(()=>r.subscribe(c),[r,c]);let u=Ke.useMemo(()=>({createHref:r.createHref,encodeLocation:r.encodeLocation,go:v=>r.navigate(v),push:(v,w,A)=>r.navigate(v,{state:w,preventScrollReset:A==null?void 0:A.preventScrollReset}),replace:(v,w,A)=>r.navigate(v,{replace:!0,state:w,preventScrollReset:A==null?void 0:A.preventScrollReset})}),[r]),p=r.basename||"/",o=Ke.useMemo(()=>({router:r,navigator:u,static:!1,basename:p}),[r,u,p]);return Ke.createElement(Ke.Fragment,null,Ke.createElement(g5.Provider,{value:o},Ke.createElement(y5.Provider,{value:i},Ke.createElement(fV,{basename:r.basename,location:r.state.location,navigationType:r.state.historyAction,navigator:u},r.state.initialized?Ke.createElement(hV,{routes:r.routes,state:i}):t))),null)}function hV(e){let{routes:t,state:r}=e;return eV(t,void 0,r)}function fV(e){let{basename:t="/",children:r=null,location:i,navigationType:c=si.Pop,navigator:u,static:p=!1}=e;cA()&&Xr(!1);let o=t.replace(/^\/*/,"/"),v=Ke.useMemo(()=>({basename:o,navigator:u,static:p}),[o,u,p]);typeof i=="string"&&(i=Dl(i));let{pathname:w="/",search:A="",hash:T="",state:P=null,key:$="default"}=i,L=Ke.useMemo(()=>{let k=vy(w,o);return k==null?null:{location:{pathname:k,search:A,hash:T,state:P,key:$},navigationType:c}},[o,w,A,T,P,$,c]);return L==null?null:Ke.createElement(_5.Provider,{value:v},Ke.createElement(o1.Provider,{children:r,value:L}))}var Ok;(function(e){e[e.pending=0]="pending",e[e.success=1]="success",e[e.error=2]="error"})(Ok||(Ok={}));new Promise(()=>{});function dV(e){let t={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(t,{element:Ke.createElement(e.Component),Component:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:Ke.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}/**
 * React Router DOM v6.11.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function V0(){return V0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},V0.apply(this,arguments)}function pV(e,t){return G8({basename:t==null?void 0:t.basename,future:V0({},t==null?void 0:t.future,{v7_prependBasename:!0}),history:h8({window:t==null?void 0:t.window}),hydrationData:(t==null?void 0:t.hydrationData)||mV(),routes:e,mapRouteProperties:dV}).initialize()}function mV(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=V0({},t,{errors:gV(t.errors)})),t}function gV(e){if(!e)return null;let t=Object.entries(e),r={};for(let[i,c]of t)if(c&&c.__type==="RouteErrorResponse")r[i]=new sA(c.status,c.statusText,c.data,c.internal===!0);else if(c&&c.__type==="Error"){let u=new Error(c.message);u.stack="",r[i]=u}else r[i]=c;return r}var Dk;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmitImpl="useSubmitImpl",e.UseFetcher="useFetcher"})(Dk||(Dk={}));var Rk;(function(e){e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(Rk||(Rk={}));function Nr(){return Nr=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Nr.apply(this,arguments)}function Cf(e){return e!==null&&typeof e=="object"&&e.constructor===Object}function x5(e){if(!Cf(e))return e;const t={};return Object.keys(e).forEach(r=>{t[r]=x5(e[r])}),t}function _l(e,t,r={clone:!0}){const i=r.clone?Nr({},e):e;return Cf(e)&&Cf(t)&&Object.keys(t).forEach(c=>{c!=="__proto__"&&(Cf(t[c])&&c in e&&Cf(e[c])?i[c]=_l(e[c],t[c],r):r.clone?i[c]=Cf(t[c])?x5(t[c]):t[c]:i[c]=t[c])}),i}var b5={exports:{}},yV="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",_V=yV,vV=_V;function w5(){}function S5(){}S5.resetWarningCache=w5;var xV=function(){function e(i,c,u,p,o,v){if(v!==vV){var w=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw w.name="Invariant Violation",w}}e.isRequired=e;function t(){return e}var r={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:S5,resetWarningCache:w5};return r.PropTypes=r,r};b5.exports=xV();var bV=b5.exports;const Mr=vn(bV);function fd(e){let t="https://mui.com/production-error/?code="+e;for(let r=1;r<arguments.length;r+=1)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified MUI error #"+e+"; visit "+t+" for the full message."}function vl(e){if(typeof e!="string")throw new Error(fd(7));return e.charAt(0).toUpperCase()+e.slice(1)}function E5(e,t){const r=Nr({},t);return Object.keys(e).forEach(i=>{if(i.toString().match(/^(components|slots)$/))r[i]=Nr({},e[i],r[i]);else if(i.toString().match(/^(componentsProps|slotProps)$/)){const c=e[i]||{},u=t[i];r[i]={},!u||!Object.keys(u)?r[i]=c:!c||!Object.keys(c)?r[i]=u:(r[i]=Nr({},u),Object.keys(c).forEach(p=>{r[i][p]=E5(c[p],u[p])}))}else r[i]===void 0&&(r[i]=e[i])}),r}function wV(e,t,r=void 0){const i={};return Object.keys(e).forEach(c=>{i[c]=e[c].reduce((u,p)=>{if(p){const o=t(p);o!==""&&u.push(o),r&&r[p]&&u.push(r[p])}return u},[]).join(" ")}),i}const Lk=e=>e,SV=()=>{let e=Lk;return{configure(t){e=t},generate(t){return e(t)},reset(){e=Lk}}},EV=SV(),TV=EV,AV={active:"active",checked:"checked",completed:"completed",disabled:"disabled",readOnly:"readOnly",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",required:"required",selected:"selected"};function T5(e,t,r="Mui"){const i=AV[t];return i?`${r}-${i}`:`${TV.generate(e)}-${t}`}function MV(e,t,r="Mui"){const i={};return t.forEach(c=>{i[c]=T5(e,c,r)}),i}function Rl(e,t){if(e==null)return{};var r={},i=Object.keys(e),c,u;for(u=0;u<i.length;u++)c=i[u],!(t.indexOf(c)>=0)&&(r[c]=e[c]);return r}function A5(e){var t,r,i="";if(typeof e=="string"||typeof e=="number")i+=e;else if(typeof e=="object")if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(r=A5(e[t]))&&(i&&(i+=" "),i+=r);else for(t in e)e[t]&&(i&&(i+=" "),i+=t);return i}function CV(){for(var e,t,r=0,i="";r<arguments.length;)(e=arguments[r++])&&(t=A5(e))&&(i&&(i+=" "),i+=t);return i}function M5(e){var t=Object.create(null);return function(r){return t[r]===void 0&&(t[r]=e(r)),t[r]}}var PV=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|download|draggable|encType|enterKeyHint|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,IV=M5(function(e){return PV.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91});function kV(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function OV(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var DV=function(){function e(r){var i=this;this._insertTag=function(c){var u;i.tags.length===0?i.insertionPoint?u=i.insertionPoint.nextSibling:i.prepend?u=i.container.firstChild:u=i.before:u=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(c,u),i.tags.push(c)},this.isSpeedy=r.speedy===void 0?!0:r.speedy,this.tags=[],this.ctr=0,this.nonce=r.nonce,this.key=r.key,this.container=r.container,this.prepend=r.prepend,this.insertionPoint=r.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(i){i.forEach(this._insertTag)},t.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(OV(this));var c=this.tags[this.tags.length-1];if(this.isSpeedy){var u=kV(c);try{u.insertRule(i,u.cssRules.length)}catch{}}else c.appendChild(document.createTextNode(i));this.ctr++},t.flush=function(){this.tags.forEach(function(i){return i.parentNode&&i.parentNode.removeChild(i)}),this.tags=[],this.ctr=0},e}(),lo="-ms-",G0="-moz-",sn="-webkit-",C5="comm",uA="rule",hA="decl",RV="@import",P5="@keyframes",LV="@layer",zV=Math.abs,s1=String.fromCharCode,BV=Object.assign;function $V(e,t){return qi(e,0)^45?(((t<<2^qi(e,0))<<2^qi(e,1))<<2^qi(e,2))<<2^qi(e,3):0}function I5(e){return e.trim()}function FV(e,t){return(e=t.exec(e))?e[0]:e}function ln(e,t,r){return e.replace(t,r)}function LS(e,t){return e.indexOf(t)}function qi(e,t){return e.charCodeAt(t)|0}function Lg(e,t,r){return e.slice(t,r)}function Ps(e){return e.length}function fA(e){return e.length}function $v(e,t){return t.push(e),e}function NV(e,t){return e.map(t).join("")}var l1=1,dd=1,k5=0,No=0,li=0,jd="";function c1(e,t,r,i,c,u,p){return{value:e,root:t,parent:r,type:i,props:c,children:u,line:l1,column:dd,length:p,return:""}}function Om(e,t){return BV(c1("",null,null,"",null,null,0),e,{length:-e.length},t)}function jV(){return li}function UV(){return li=No>0?qi(jd,--No):0,dd--,li===10&&(dd=1,l1--),li}function ta(){return li=No<k5?qi(jd,No++):0,dd++,li===10&&(dd=1,l1++),li}function $s(){return qi(jd,No)}function u0(){return No}function xy(e,t){return Lg(jd,e,t)}function zg(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function O5(e){return l1=dd=1,k5=Ps(jd=e),No=0,[]}function D5(e){return jd="",e}function h0(e){return I5(xy(No-1,zS(e===91?e+2:e===40?e+1:e)))}function VV(e){for(;(li=$s())&&li<33;)ta();return zg(e)>2||zg(li)>3?"":" "}function GV(e,t){for(;--t&&ta()&&!(li<48||li>102||li>57&&li<65||li>70&&li<97););return xy(e,u0()+(t<6&&$s()==32&&ta()==32))}function zS(e){for(;ta();)switch(li){case e:return No;case 34:case 39:e!==34&&e!==39&&zS(li);break;case 40:e===41&&zS(e);break;case 92:ta();break}return No}function qV(e,t){for(;ta()&&e+li!==47+10;)if(e+li===42+42&&$s()===47)break;return"/*"+xy(t,No-1)+"*"+s1(e===47?e:ta())}function WV(e){for(;!zg($s());)ta();return xy(e,No)}function HV(e){return D5(f0("",null,null,null,[""],e=O5(e),0,[0],e))}function f0(e,t,r,i,c,u,p,o,v){for(var w=0,A=0,T=p,P=0,$=0,L=0,k=1,N=1,R=1,j=0,D="",G=c,W=u,Y=i,ee=D;N;)switch(L=j,j=ta()){case 40:if(L!=108&&qi(ee,T-1)==58){LS(ee+=ln(h0(j),"&","&\f"),"&\f")!=-1&&(R=-1);break}case 34:case 39:case 91:ee+=h0(j);break;case 9:case 10:case 13:case 32:ee+=VV(L);break;case 92:ee+=GV(u0()-1,7);continue;case 47:switch($s()){case 42:case 47:$v(ZV(qV(ta(),u0()),t,r),v);break;default:ee+="/"}break;case 123*k:o[w++]=Ps(ee)*R;case 125*k:case 59:case 0:switch(j){case 0:case 125:N=0;case 59+A:R==-1&&(ee=ln(ee,/\f/g,"")),$>0&&Ps(ee)-T&&$v($>32?Bk(ee+";",i,r,T-1):Bk(ln(ee," ","")+";",i,r,T-2),v);break;case 59:ee+=";";default:if($v(Y=zk(ee,t,r,w,A,c,o,D,G=[],W=[],T),u),j===123)if(A===0)f0(ee,t,Y,Y,G,u,T,o,W);else switch(P===99&&qi(ee,3)===110?100:P){case 100:case 108:case 109:case 115:f0(e,Y,Y,i&&$v(zk(e,Y,Y,0,0,c,o,D,c,G=[],T),W),c,W,T,o,i?G:W);break;default:f0(ee,Y,Y,Y,[""],W,0,o,W)}}w=A=$=0,k=R=1,D=ee="",T=p;break;case 58:T=1+Ps(ee),$=L;default:if(k<1){if(j==123)--k;else if(j==125&&k++==0&&UV()==125)continue}switch(ee+=s1(j),j*k){case 38:R=A>0?1:(ee+="\f",-1);break;case 44:o[w++]=(Ps(ee)-1)*R,R=1;break;case 64:$s()===45&&(ee+=h0(ta())),P=$s(),A=T=Ps(D=ee+=WV(u0())),j++;break;case 45:L===45&&Ps(ee)==2&&(k=0)}}return u}function zk(e,t,r,i,c,u,p,o,v,w,A){for(var T=c-1,P=c===0?u:[""],$=fA(P),L=0,k=0,N=0;L<i;++L)for(var R=0,j=Lg(e,T+1,T=zV(k=p[L])),D=e;R<$;++R)(D=I5(k>0?P[R]+" "+j:ln(j,/&\f/g,P[R])))&&(v[N++]=D);return c1(e,t,r,c===0?uA:o,v,w,A)}function ZV(e,t,r){return c1(e,t,r,C5,s1(jV()),Lg(e,2,-2),0)}function Bk(e,t,r,i){return c1(e,t,r,hA,Lg(e,0,i),Lg(e,i+1,-1),i)}function Qf(e,t){for(var r="",i=fA(e),c=0;c<i;c++)r+=t(e[c],c,e,t)||"";return r}function XV(e,t,r,i){switch(e.type){case LV:if(e.children.length)break;case RV:case hA:return e.return=e.return||e.value;case C5:return"";case P5:return e.return=e.value+"{"+Qf(e.children,i)+"}";case uA:e.value=e.props.join(",")}return Ps(r=Qf(e.children,i))?e.return=e.value+"{"+r+"}":""}function KV(e){var t=fA(e);return function(r,i,c,u){for(var p="",o=0;o<t;o++)p+=e[o](r,i,c,u)||"";return p}}function YV(e){return function(t){t.root||(t=t.return)&&e(t)}}var JV=function(t,r,i){for(var c=0,u=0;c=u,u=$s(),c===38&&u===12&&(r[i]=1),!zg(u);)ta();return xy(t,No)},QV=function(t,r){var i=-1,c=44;do switch(zg(c)){case 0:c===38&&$s()===12&&(r[i]=1),t[i]+=JV(No-1,r,i);break;case 2:t[i]+=h0(c);break;case 4:if(c===44){t[++i]=$s()===58?"&\f":"",r[i]=t[i].length;break}default:t[i]+=s1(c)}while(c=ta());return t},eG=function(t,r){return D5(QV(O5(t),r))},$k=new WeakMap,tG=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var r=t.value,i=t.parent,c=t.column===i.column&&t.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(t.props.length===1&&r.charCodeAt(0)!==58&&!$k.get(i))&&!c){$k.set(t,!0);for(var u=[],p=eG(r,u),o=i.props,v=0,w=0;v<p.length;v++)for(var A=0;A<o.length;A++,w++)t.props[w]=u[v]?p[v].replace(/&\f/g,o[A]):o[A]+" "+p[v]}}},rG=function(t){if(t.type==="decl"){var r=t.value;r.charCodeAt(0)===108&&r.charCodeAt(2)===98&&(t.return="",t.value="")}};function R5(e,t){switch($V(e,t)){case 5103:return sn+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return sn+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return sn+e+G0+e+lo+e+e;case 6828:case 4268:return sn+e+lo+e+e;case 6165:return sn+e+lo+"flex-"+e+e;case 5187:return sn+e+ln(e,/(\w+).+(:[^]+)/,sn+"box-$1$2"+lo+"flex-$1$2")+e;case 5443:return sn+e+lo+"flex-item-"+ln(e,/flex-|-self/,"")+e;case 4675:return sn+e+lo+"flex-line-pack"+ln(e,/align-content|flex-|-self/,"")+e;case 5548:return sn+e+lo+ln(e,"shrink","negative")+e;case 5292:return sn+e+lo+ln(e,"basis","preferred-size")+e;case 6060:return sn+"box-"+ln(e,"-grow","")+sn+e+lo+ln(e,"grow","positive")+e;case 4554:return sn+ln(e,/([^-])(transform)/g,"$1"+sn+"$2")+e;case 6187:return ln(ln(ln(e,/(zoom-|grab)/,sn+"$1"),/(image-set)/,sn+"$1"),e,"")+e;case 5495:case 3959:return ln(e,/(image-set\([^]*)/,sn+"$1$`$1");case 4968:return ln(ln(e,/(.+:)(flex-)?(.*)/,sn+"box-pack:$3"+lo+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+sn+e+e;case 4095:case 3583:case 4068:case 2532:return ln(e,/(.+)-inline(.+)/,sn+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(Ps(e)-1-t>6)switch(qi(e,t+1)){case 109:if(qi(e,t+4)!==45)break;case 102:return ln(e,/(.+:)(.+)-([^]+)/,"$1"+sn+"$2-$3$1"+G0+(qi(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~LS(e,"stretch")?R5(ln(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(qi(e,t+1)!==115)break;case 6444:switch(qi(e,Ps(e)-3-(~LS(e,"!important")&&10))){case 107:return ln(e,":",":"+sn)+e;case 101:return ln(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+sn+(qi(e,14)===45?"inline-":"")+"box$3$1"+sn+"$2$3$1"+lo+"$2box$3")+e}break;case 5936:switch(qi(e,t+11)){case 114:return sn+e+lo+ln(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return sn+e+lo+ln(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return sn+e+lo+ln(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return sn+e+lo+e+e}return e}var nG=function(t,r,i,c){if(t.length>-1&&!t.return)switch(t.type){case hA:t.return=R5(t.value,t.length);break;case P5:return Qf([Om(t,{value:ln(t.value,"@","@"+sn)})],c);case uA:if(t.length)return NV(t.props,function(u){switch(FV(u,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Qf([Om(t,{props:[ln(u,/:(read-\w+)/,":"+G0+"$1")]})],c);case"::placeholder":return Qf([Om(t,{props:[ln(u,/:(plac\w+)/,":"+sn+"input-$1")]}),Om(t,{props:[ln(u,/:(plac\w+)/,":"+G0+"$1")]}),Om(t,{props:[ln(u,/:(plac\w+)/,lo+"input-$1")]})],c)}return""})}},iG=[nG],oG=function(t){var r=t.key;if(r==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(k){var N=k.getAttribute("data-emotion");N.indexOf(" ")!==-1&&(document.head.appendChild(k),k.setAttribute("data-s",""))})}var c=t.stylisPlugins||iG,u={},p,o=[];p=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+r+' "]'),function(k){for(var N=k.getAttribute("data-emotion").split(" "),R=1;R<N.length;R++)u[N[R]]=!0;o.push(k)});var v,w=[tG,rG];{var A,T=[XV,YV(function(k){A.insert(k)})],P=KV(w.concat(c,T)),$=function(N){return Qf(HV(N),P)};v=function(N,R,j,D){A=j,$(N?N+"{"+R.styles+"}":R.styles),D&&(L.inserted[R.name]=!0)}}var L={key:r,sheet:new DV({key:r,container:p,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:u,registered:{},insert:v};return L.sheet.hydrate(o),L},L5={exports:{}},xn={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $i=typeof Symbol=="function"&&Symbol.for,dA=$i?Symbol.for("react.element"):60103,pA=$i?Symbol.for("react.portal"):60106,u1=$i?Symbol.for("react.fragment"):60107,h1=$i?Symbol.for("react.strict_mode"):60108,f1=$i?Symbol.for("react.profiler"):60114,d1=$i?Symbol.for("react.provider"):60109,p1=$i?Symbol.for("react.context"):60110,mA=$i?Symbol.for("react.async_mode"):60111,m1=$i?Symbol.for("react.concurrent_mode"):60111,g1=$i?Symbol.for("react.forward_ref"):60112,y1=$i?Symbol.for("react.suspense"):60113,aG=$i?Symbol.for("react.suspense_list"):60120,_1=$i?Symbol.for("react.memo"):60115,v1=$i?Symbol.for("react.lazy"):60116,sG=$i?Symbol.for("react.block"):60121,lG=$i?Symbol.for("react.fundamental"):60117,cG=$i?Symbol.for("react.responder"):60118,uG=$i?Symbol.for("react.scope"):60119;function aa(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case dA:switch(e=e.type,e){case mA:case m1:case u1:case f1:case h1:case y1:return e;default:switch(e=e&&e.$$typeof,e){case p1:case g1:case v1:case _1:case d1:return e;default:return t}}case pA:return t}}}function z5(e){return aa(e)===m1}xn.AsyncMode=mA;xn.ConcurrentMode=m1;xn.ContextConsumer=p1;xn.ContextProvider=d1;xn.Element=dA;xn.ForwardRef=g1;xn.Fragment=u1;xn.Lazy=v1;xn.Memo=_1;xn.Portal=pA;xn.Profiler=f1;xn.StrictMode=h1;xn.Suspense=y1;xn.isAsyncMode=function(e){return z5(e)||aa(e)===mA};xn.isConcurrentMode=z5;xn.isContextConsumer=function(e){return aa(e)===p1};xn.isContextProvider=function(e){return aa(e)===d1};xn.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===dA};xn.isForwardRef=function(e){return aa(e)===g1};xn.isFragment=function(e){return aa(e)===u1};xn.isLazy=function(e){return aa(e)===v1};xn.isMemo=function(e){return aa(e)===_1};xn.isPortal=function(e){return aa(e)===pA};xn.isProfiler=function(e){return aa(e)===f1};xn.isStrictMode=function(e){return aa(e)===h1};xn.isSuspense=function(e){return aa(e)===y1};xn.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===u1||e===m1||e===f1||e===h1||e===y1||e===aG||typeof e=="object"&&e!==null&&(e.$$typeof===v1||e.$$typeof===_1||e.$$typeof===d1||e.$$typeof===p1||e.$$typeof===g1||e.$$typeof===lG||e.$$typeof===cG||e.$$typeof===uG||e.$$typeof===sG)};xn.typeOf=aa;L5.exports=xn;var hG=L5.exports,fG=!0;function dG(e,t,r){var i="";return r.split(" ").forEach(function(c){e[c]!==void 0?t.push(e[c]+";"):i+=c+" "}),i}var B5=function(t,r,i){var c=t.key+"-"+r.name;(i===!1||fG===!1)&&t.registered[c]===void 0&&(t.registered[c]=r.styles)},pG=function(t,r,i){B5(t,r,i);var c=t.key+"-"+r.name;if(t.inserted[r.name]===void 0){var u=r;do t.insert(r===u?"."+c:"",u,t.sheet,!0),u=u.next;while(u!==void 0)}};function mG(e){for(var t=0,r,i=0,c=e.length;c>=4;++i,c-=4)r=e.charCodeAt(i)&255|(e.charCodeAt(++i)&255)<<8|(e.charCodeAt(++i)&255)<<16|(e.charCodeAt(++i)&255)<<24,r=(r&65535)*1540483477+((r>>>16)*59797<<16),r^=r>>>24,t=(r&65535)*1540483477+((r>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(c){case 3:t^=(e.charCodeAt(i+2)&255)<<16;case 2:t^=(e.charCodeAt(i+1)&255)<<8;case 1:t^=e.charCodeAt(i)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var gG={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},yG=/[A-Z]|^ms/g,_G=/_EMO_([^_]+?)_([^]*?)_EMO_/g,$5=function(t){return t.charCodeAt(1)===45},Fk=function(t){return t!=null&&typeof t!="boolean"},Yw=M5(function(e){return $5(e)?e:e.replace(yG,"-$&").toLowerCase()}),Nk=function(t,r){switch(t){case"animation":case"animationName":if(typeof r=="string")return r.replace(_G,function(i,c,u){return Is={name:c,styles:u,next:Is},c})}return gG[t]!==1&&!$5(t)&&typeof r=="number"&&r!==0?r+"px":r};function Bg(e,t,r){if(r==null)return"";if(r.__emotion_styles!==void 0)return r;switch(typeof r){case"boolean":return"";case"object":{if(r.anim===1)return Is={name:r.name,styles:r.styles,next:Is},r.name;if(r.styles!==void 0){var i=r.next;if(i!==void 0)for(;i!==void 0;)Is={name:i.name,styles:i.styles,next:Is},i=i.next;var c=r.styles+";";return c}return vG(e,t,r)}case"function":{if(e!==void 0){var u=Is,p=r(e);return Is=u,Bg(e,t,p)}break}}if(t==null)return r;var o=t[r];return o!==void 0?o:r}function vG(e,t,r){var i="";if(Array.isArray(r))for(var c=0;c<r.length;c++)i+=Bg(e,t,r[c])+";";else for(var u in r){var p=r[u];if(typeof p!="object")t!=null&&t[p]!==void 0?i+=u+"{"+t[p]+"}":Fk(p)&&(i+=Yw(u)+":"+Nk(u,p)+";");else if(Array.isArray(p)&&typeof p[0]=="string"&&(t==null||t[p[0]]===void 0))for(var o=0;o<p.length;o++)Fk(p[o])&&(i+=Yw(u)+":"+Nk(u,p[o])+";");else{var v=Bg(e,t,p);switch(u){case"animation":case"animationName":{i+=Yw(u)+":"+v+";";break}default:i+=u+"{"+v+"}"}}}return i}var jk=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Is,xG=function(t,r,i){if(t.length===1&&typeof t[0]=="object"&&t[0]!==null&&t[0].styles!==void 0)return t[0];var c=!0,u="";Is=void 0;var p=t[0];p==null||p.raw===void 0?(c=!1,u+=Bg(i,r,p)):u+=p[0];for(var o=1;o<t.length;o++)u+=Bg(i,r,t[o]),c&&(u+=p[o]);jk.lastIndex=0;for(var v="",w;(w=jk.exec(u))!==null;)v+="-"+w[1];var A=mG(u)+v;return{name:A,styles:u,next:Is}},bG=function(t){return t()},wG=uI["useInsertionEffect"]?uI["useInsertionEffect"]:!1,SG=wG||bG,F5=Ke.createContext(typeof HTMLElement<"u"?oG({key:"css"}):null);F5.Provider;var EG=function(t){return Ke.forwardRef(function(r,i){var c=Ke.useContext(F5);return t(r,c,i)})},N5=Ke.createContext({}),TG=IV,AG=function(t){return t!=="theme"},Uk=function(t){return typeof t=="string"&&t.charCodeAt(0)>96?TG:AG},Vk=function(t,r,i){var c;if(r){var u=r.shouldForwardProp;c=t.__emotion_forwardProp&&u?function(p){return t.__emotion_forwardProp(p)&&u(p)}:u}return typeof c!="function"&&i&&(c=t.__emotion_forwardProp),c},MG=function(t){var r=t.cache,i=t.serialized,c=t.isStringTag;return B5(r,i,c),SG(function(){return pG(r,i,c)}),null},CG=function e(t,r){var i=t.__emotion_real===t,c=i&&t.__emotion_base||t,u,p;r!==void 0&&(u=r.label,p=r.target);var o=Vk(t,r,i),v=o||Uk(c),w=!v("as");return function(){var A=arguments,T=i&&t.__emotion_styles!==void 0?t.__emotion_styles.slice(0):[];if(u!==void 0&&T.push("label:"+u+";"),A[0]==null||A[0].raw===void 0)T.push.apply(T,A);else{T.push(A[0][0]);for(var P=A.length,$=1;$<P;$++)T.push(A[$],A[0][$])}var L=EG(function(k,N,R){var j=w&&k.as||c,D="",G=[],W=k;if(k.theme==null){W={};for(var Y in k)W[Y]=k[Y];W.theme=Ke.useContext(N5)}typeof k.className=="string"?D=dG(N.registered,G,k.className):k.className!=null&&(D=k.className+" ");var ee=xG(T.concat(G),N.registered,W);D+=N.key+"-"+ee.name,p!==void 0&&(D+=" "+p);var de=w&&o===void 0?Uk(j):v,xe={};for(var Me in k)w&&Me==="as"||de(Me)&&(xe[Me]=k[Me]);return xe.className=D,xe.ref=R,Ke.createElement(Ke.Fragment,null,Ke.createElement(MG,{cache:N,serialized:ee,isStringTag:typeof j=="string"}),Ke.createElement(j,xe))});return L.displayName=u!==void 0?u:"Styled("+(typeof c=="string"?c:c.displayName||c.name||"Component")+")",L.defaultProps=t.defaultProps,L.__emotion_real=L,L.__emotion_base=c,L.__emotion_styles=T,L.__emotion_forwardProp=o,Object.defineProperty(L,"toString",{value:function(){return"."+p}}),L.withComponent=function(k,N){return e(k,Nr({},r,N,{shouldForwardProp:Vk(L,N,!0)})).apply(void 0,T)},L}},PG=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],BS=CG.bind();PG.forEach(function(e){BS[e]=BS(e)});/**
 * @mui/styled-engine v5.12.3
 *
 * @license MIT
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */function IG(e,t){return BS(e,t)}const kG=(e,t)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=t(e.__emotion_styles))},OG=["values","unit","step"],DG=e=>{const t=Object.keys(e).map(r=>({key:r,val:e[r]}))||[];return t.sort((r,i)=>r.val-i.val),t.reduce((r,i)=>Nr({},r,{[i.key]:i.val}),{})};function RG(e){const{values:t={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:r="px",step:i=5}=e,c=Rl(e,OG),u=DG(t),p=Object.keys(u);function o(P){return`@media (min-width:${typeof t[P]=="number"?t[P]:P}${r})`}function v(P){return`@media (max-width:${(typeof t[P]=="number"?t[P]:P)-i/100}${r})`}function w(P,$){const L=p.indexOf($);return`@media (min-width:${typeof t[P]=="number"?t[P]:P}${r}) and (max-width:${(L!==-1&&typeof t[p[L]]=="number"?t[p[L]]:$)-i/100}${r})`}function A(P){return p.indexOf(P)+1<p.length?w(P,p[p.indexOf(P)+1]):o(P)}function T(P){const $=p.indexOf(P);return $===0?o(p[1]):$===p.length-1?v(p[$]):w(P,p[p.indexOf(P)+1]).replace("@media","@media not all and")}return Nr({keys:p,values:u,up:o,down:v,between:w,only:A,not:T,unit:r},c)}const LG={borderRadius:4},zG=LG;function cg(e,t){return t?_l(e,t,{clone:!1}):e}const gA={xs:0,sm:600,md:900,lg:1200,xl:1536},Gk={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${gA[e]}px)`};function Cl(e,t,r){const i=e.theme||{};if(Array.isArray(t)){const u=i.breakpoints||Gk;return t.reduce((p,o,v)=>(p[u.up(u.keys[v])]=r(t[v]),p),{})}if(typeof t=="object"){const u=i.breakpoints||Gk;return Object.keys(t).reduce((p,o)=>{if(Object.keys(u.values||gA).indexOf(o)!==-1){const v=u.up(o);p[v]=r(t[o],o)}else{const v=o;p[v]=t[v]}return p},{})}return r(t)}function BG(e={}){var t;return((t=e.keys)==null?void 0:t.reduce((i,c)=>{const u=e.up(c);return i[u]={},i},{}))||{}}function $G(e,t){return e.reduce((r,i)=>{const c=r[i];return(!c||Object.keys(c).length===0)&&delete r[i],r},t)}function x1(e,t,r=!0){if(!t||typeof t!="string")return null;if(e&&e.vars&&r){const i=`vars.${t}`.split(".").reduce((c,u)=>c&&c[u]?c[u]:null,e);if(i!=null)return i}return t.split(".").reduce((i,c)=>i&&i[c]!=null?i[c]:null,e)}function q0(e,t,r,i=r){let c;return typeof e=="function"?c=e(r):Array.isArray(e)?c=e[r]||i:c=x1(e,r)||i,t&&(c=t(c,i,e)),c}function pn(e){const{prop:t,cssProperty:r=e.prop,themeKey:i,transform:c}=e,u=p=>{if(p[t]==null)return null;const o=p[t],v=p.theme,w=x1(v,i)||{};return Cl(p,o,T=>{let P=q0(w,c,T);return T===P&&typeof T=="string"&&(P=q0(w,c,`${t}${T==="default"?"":vl(T)}`,T)),r===!1?P:{[r]:P}})};return u.propTypes={},u.filterProps=[t],u}function FG(e){const t={};return r=>(t[r]===void 0&&(t[r]=e(r)),t[r])}const NG={m:"margin",p:"padding"},jG={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},qk={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},UG=FG(e=>{if(e.length>2)if(qk[e])e=qk[e];else return[e];const[t,r]=e.split(""),i=NG[t],c=jG[r]||"";return Array.isArray(c)?c.map(u=>i+u):[i+c]}),yA=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],_A=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[...yA,..._A];function by(e,t,r,i){var c;const u=(c=x1(e,t,!1))!=null?c:r;return typeof u=="number"?p=>typeof p=="string"?p:u*p:Array.isArray(u)?p=>typeof p=="string"?p:u[p]:typeof u=="function"?u:()=>{}}function j5(e){return by(e,"spacing",8)}function wy(e,t){if(typeof t=="string"||t==null)return t;const r=Math.abs(t),i=e(r);return t>=0?i:typeof i=="number"?-i:`-${i}`}function VG(e,t){return r=>e.reduce((i,c)=>(i[c]=wy(t,r),i),{})}function GG(e,t,r,i){if(t.indexOf(r)===-1)return null;const c=UG(r),u=VG(c,i),p=e[r];return Cl(e,p,u)}function U5(e,t){const r=j5(e.theme);return Object.keys(e).map(i=>GG(e,t,i,r)).reduce(cg,{})}function Qn(e){return U5(e,yA)}Qn.propTypes={};Qn.filterProps=yA;function ei(e){return U5(e,_A)}ei.propTypes={};ei.filterProps=_A;function qG(e=8){if(e.mui)return e;const t=j5({spacing:e}),r=(...i)=>(i.length===0?[1]:i).map(u=>{const p=t(u);return typeof p=="number"?`${p}px`:p}).join(" ");return r.mui=!0,r}function b1(...e){const t=e.reduce((i,c)=>(c.filterProps.forEach(u=>{i[u]=c}),i),{}),r=i=>Object.keys(i).reduce((c,u)=>t[u]?cg(c,t[u](i)):c,{});return r.propTypes={},r.filterProps=e.reduce((i,c)=>i.concat(c.filterProps),[]),r}function Ds(e){return typeof e!="number"?e:`${e}px solid`}const WG=pn({prop:"border",themeKey:"borders",transform:Ds}),HG=pn({prop:"borderTop",themeKey:"borders",transform:Ds}),ZG=pn({prop:"borderRight",themeKey:"borders",transform:Ds}),XG=pn({prop:"borderBottom",themeKey:"borders",transform:Ds}),KG=pn({prop:"borderLeft",themeKey:"borders",transform:Ds}),YG=pn({prop:"borderColor",themeKey:"palette"}),JG=pn({prop:"borderTopColor",themeKey:"palette"}),QG=pn({prop:"borderRightColor",themeKey:"palette"}),e9=pn({prop:"borderBottomColor",themeKey:"palette"}),t9=pn({prop:"borderLeftColor",themeKey:"palette"}),w1=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const t=by(e.theme,"shape.borderRadius",4),r=i=>({borderRadius:wy(t,i)});return Cl(e,e.borderRadius,r)}return null};w1.propTypes={};w1.filterProps=["borderRadius"];b1(WG,HG,ZG,XG,KG,YG,JG,QG,e9,t9,w1);const S1=e=>{if(e.gap!==void 0&&e.gap!==null){const t=by(e.theme,"spacing",8),r=i=>({gap:wy(t,i)});return Cl(e,e.gap,r)}return null};S1.propTypes={};S1.filterProps=["gap"];const E1=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const t=by(e.theme,"spacing",8),r=i=>({columnGap:wy(t,i)});return Cl(e,e.columnGap,r)}return null};E1.propTypes={};E1.filterProps=["columnGap"];const T1=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const t=by(e.theme,"spacing",8),r=i=>({rowGap:wy(t,i)});return Cl(e,e.rowGap,r)}return null};T1.propTypes={};T1.filterProps=["rowGap"];const r9=pn({prop:"gridColumn"}),n9=pn({prop:"gridRow"}),i9=pn({prop:"gridAutoFlow"}),o9=pn({prop:"gridAutoColumns"}),a9=pn({prop:"gridAutoRows"}),s9=pn({prop:"gridTemplateColumns"}),l9=pn({prop:"gridTemplateRows"}),c9=pn({prop:"gridTemplateAreas"}),u9=pn({prop:"gridArea"});b1(S1,E1,T1,r9,n9,i9,o9,a9,s9,l9,c9,u9);function ed(e,t){return t==="grey"?t:e}const h9=pn({prop:"color",themeKey:"palette",transform:ed}),f9=pn({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:ed}),d9=pn({prop:"backgroundColor",themeKey:"palette",transform:ed});b1(h9,f9,d9);function Yo(e){return e<=1&&e!==0?`${e*100}%`:e}const p9=pn({prop:"width",transform:Yo}),vA=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const t=r=>{var i,c,u;return{maxWidth:((i=e.theme)==null||(c=i.breakpoints)==null||(u=c.values)==null?void 0:u[r])||gA[r]||Yo(r)}};return Cl(e,e.maxWidth,t)}return null};vA.filterProps=["maxWidth"];const m9=pn({prop:"minWidth",transform:Yo}),g9=pn({prop:"height",transform:Yo}),y9=pn({prop:"maxHeight",transform:Yo}),_9=pn({prop:"minHeight",transform:Yo});pn({prop:"size",cssProperty:"width",transform:Yo});pn({prop:"size",cssProperty:"height",transform:Yo});const v9=pn({prop:"boxSizing"});b1(p9,vA,m9,g9,y9,_9,v9);const x9={border:{themeKey:"borders",transform:Ds},borderTop:{themeKey:"borders",transform:Ds},borderRight:{themeKey:"borders",transform:Ds},borderBottom:{themeKey:"borders",transform:Ds},borderLeft:{themeKey:"borders",transform:Ds},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:w1},color:{themeKey:"palette",transform:ed},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:ed},backgroundColor:{themeKey:"palette",transform:ed},p:{style:ei},pt:{style:ei},pr:{style:ei},pb:{style:ei},pl:{style:ei},px:{style:ei},py:{style:ei},padding:{style:ei},paddingTop:{style:ei},paddingRight:{style:ei},paddingBottom:{style:ei},paddingLeft:{style:ei},paddingX:{style:ei},paddingY:{style:ei},paddingInline:{style:ei},paddingInlineStart:{style:ei},paddingInlineEnd:{style:ei},paddingBlock:{style:ei},paddingBlockStart:{style:ei},paddingBlockEnd:{style:ei},m:{style:Qn},mt:{style:Qn},mr:{style:Qn},mb:{style:Qn},ml:{style:Qn},mx:{style:Qn},my:{style:Qn},margin:{style:Qn},marginTop:{style:Qn},marginRight:{style:Qn},marginBottom:{style:Qn},marginLeft:{style:Qn},marginX:{style:Qn},marginY:{style:Qn},marginInline:{style:Qn},marginInlineStart:{style:Qn},marginInlineEnd:{style:Qn},marginBlock:{style:Qn},marginBlockStart:{style:Qn},marginBlockEnd:{style:Qn},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:S1},rowGap:{style:T1},columnGap:{style:E1},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:Yo},maxWidth:{style:vA},minWidth:{transform:Yo},height:{transform:Yo},maxHeight:{transform:Yo},minHeight:{transform:Yo},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}},xA=x9;function b9(...e){const t=e.reduce((i,c)=>i.concat(Object.keys(c)),[]),r=new Set(t);return e.every(i=>r.size===Object.keys(i).length)}function w9(e,t){return typeof e=="function"?e(t):e}function S9(){function e(r,i,c,u){const p={[r]:i,theme:c},o=u[r];if(!o)return{[r]:i};const{cssProperty:v=r,themeKey:w,transform:A,style:T}=o;if(i==null)return null;if(w==="typography"&&i==="inherit")return{[r]:i};const P=x1(c,w)||{};return T?T(p):Cl(p,i,L=>{let k=q0(P,A,L);return L===k&&typeof L=="string"&&(k=q0(P,A,`${r}${L==="default"?"":vl(L)}`,L)),v===!1?k:{[v]:k}})}function t(r){var i;const{sx:c,theme:u={}}=r||{};if(!c)return null;const p=(i=u.unstable_sxConfig)!=null?i:xA;function o(v){let w=v;if(typeof v=="function")w=v(u);else if(typeof v!="object")return v;if(!w)return null;const A=BG(u.breakpoints),T=Object.keys(A);let P=A;return Object.keys(w).forEach($=>{const L=w9(w[$],u);if(L!=null)if(typeof L=="object")if(p[$])P=cg(P,e($,L,u,p));else{const k=Cl({theme:u},L,N=>({[$]:N}));b9(k,L)?P[$]=t({sx:L,theme:u}):P=cg(P,k)}else P=cg(P,e($,L,u,p))}),$G(T,P)}return Array.isArray(c)?c.map(o):o(c)}return t}const V5=S9();V5.filterProps=["sx"];const bA=V5,E9=["breakpoints","palette","spacing","shape"];function wA(e={},...t){const{breakpoints:r={},palette:i={},spacing:c,shape:u={}}=e,p=Rl(e,E9),o=RG(r),v=qG(c);let w=_l({breakpoints:o,direction:"ltr",components:{},palette:Nr({mode:"light"},i),spacing:v,shape:Nr({},zG,u)},p);return w=t.reduce((A,T)=>_l(A,T),w),w.unstable_sxConfig=Nr({},xA,p==null?void 0:p.unstable_sxConfig),w.unstable_sx=function(T){return bA({sx:T,theme:this})},w}function T9(e){return Object.keys(e).length===0}function A9(e=null){const t=Ke.useContext(N5);return!t||T9(t)?e:t}const M9=wA();function C9(e=M9){return A9(e)}const P9=["variant"];function Wk(e){return e.length===0}function G5(e){const{variant:t}=e,r=Rl(e,P9);let i=t||"";return Object.keys(r).sort().forEach(c=>{c==="color"?i+=Wk(i)?e[c]:vl(e[c]):i+=`${Wk(i)?c:vl(c)}${vl(e[c].toString())}`}),i}const I9=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function k9(e){return Object.keys(e).length===0}function O9(e){return typeof e=="string"&&e.charCodeAt(0)>96}const D9=(e,t)=>t.components&&t.components[e]&&t.components[e].styleOverrides?t.components[e].styleOverrides:null,R9=(e,t)=>{let r=[];t&&t.components&&t.components[e]&&t.components[e].variants&&(r=t.components[e].variants);const i={};return r.forEach(c=>{const u=G5(c.props);i[u]=c.style}),i},L9=(e,t,r,i)=>{var c,u;const{ownerState:p={}}=e,o=[],v=r==null||(c=r.components)==null||(u=c[i])==null?void 0:u.variants;return v&&v.forEach(w=>{let A=!0;Object.keys(w.props).forEach(T=>{p[T]!==w.props[T]&&e[T]!==w.props[T]&&(A=!1)}),A&&o.push(t[G5(w.props)])}),o};function d0(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const z9=wA();function Dm({defaultTheme:e,theme:t,themeId:r}){return k9(t)?e:t[r]||t}function B9(e={}){const{themeId:t,defaultTheme:r=z9,rootShouldForwardProp:i=d0,slotShouldForwardProp:c=d0}=e,u=p=>bA(Nr({},p,{theme:Dm(Nr({},p,{defaultTheme:r,themeId:t}))}));return u.__mui_systemSx=!0,(p,o={})=>{kG(p,G=>G.filter(W=>!(W!=null&&W.__mui_systemSx)));const{name:v,slot:w,skipVariantsResolver:A,skipSx:T,overridesResolver:P}=o,$=Rl(o,I9),L=A!==void 0?A:w&&w!=="Root"||!1,k=T||!1;let N,R=d0;w==="Root"?R=i:w?R=c:O9(p)&&(R=void 0);const j=IG(p,Nr({shouldForwardProp:R,label:N},$)),D=(G,...W)=>{const Y=W?W.map(Me=>typeof Me=="function"&&Me.__emotion_real!==Me?Ce=>Me(Nr({},Ce,{theme:Dm(Nr({},Ce,{defaultTheme:r,themeId:t}))})):Me):[];let ee=G;v&&P&&Y.push(Me=>{const Ce=Dm(Nr({},Me,{defaultTheme:r,themeId:t})),qe=D9(v,Ce);if(qe){const Ue={};return Object.entries(qe).forEach(([ut,Be])=>{Ue[ut]=typeof Be=="function"?Be(Nr({},Me,{theme:Ce})):Be}),P(Me,Ue)}return null}),v&&!L&&Y.push(Me=>{const Ce=Dm(Nr({},Me,{defaultTheme:r,themeId:t}));return L9(Me,R9(v,Ce),Ce,v)}),k||Y.push(u);const de=Y.length-W.length;if(Array.isArray(G)&&de>0){const Me=new Array(de).fill("");ee=[...G,...Me],ee.raw=[...G.raw,...Me]}else typeof G=="function"&&G.__emotion_real!==G&&(ee=Me=>G(Nr({},Me,{theme:Dm(Nr({},Me,{defaultTheme:r,themeId:t}))})));const xe=j(ee,...Y);return p.muiName&&(xe.muiName=p.muiName),xe};return j.withConfig&&(D.withConfig=j.withConfig),D}}function $9(e){const{theme:t,name:r,props:i}=e;return!t||!t.components||!t.components[r]||!t.components[r].defaultProps?i:E5(t.components[r].defaultProps,i)}function F9({props:e,name:t,defaultTheme:r,themeId:i}){let c=C9(r);return i&&(c=c[i]||c),$9({theme:c,name:t,props:e})}function q5(e,t=0,r=1){return Math.min(Math.max(t,e),r)}function N9(e){e=e.slice(1);const t=new RegExp(`.{1,${e.length>=6?2:1}}`,"g");let r=e.match(t);return r&&r[0].length===1&&(r=r.map(i=>i+i)),r?`rgb${r.length===4?"a":""}(${r.map((i,c)=>c<3?parseInt(i,16):Math.round(parseInt(i,16)/255*1e3)/1e3).join(", ")})`:""}function pd(e){if(e.type)return e;if(e.charAt(0)==="#")return pd(N9(e));const t=e.indexOf("("),r=e.substring(0,t);if(["rgb","rgba","hsl","hsla","color"].indexOf(r)===-1)throw new Error(fd(9,e));let i=e.substring(t+1,e.length-1),c;if(r==="color"){if(i=i.split(" "),c=i.shift(),i.length===4&&i[3].charAt(0)==="/"&&(i[3]=i[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(c)===-1)throw new Error(fd(10,c))}else i=i.split(",");return i=i.map(u=>parseFloat(u)),{type:r,values:i,colorSpace:c}}function SA(e){const{type:t,colorSpace:r}=e;let{values:i}=e;return t.indexOf("rgb")!==-1?i=i.map((c,u)=>u<3?parseInt(c,10):c):t.indexOf("hsl")!==-1&&(i[1]=`${i[1]}%`,i[2]=`${i[2]}%`),t.indexOf("color")!==-1?i=`${r} ${i.join(" ")}`:i=`${i.join(", ")}`,`${t}(${i})`}function j9(e){e=pd(e);const{values:t}=e,r=t[0],i=t[1]/100,c=t[2]/100,u=i*Math.min(c,1-c),p=(w,A=(w+r/30)%12)=>c-u*Math.max(Math.min(A-3,9-A,1),-1);let o="rgb";const v=[Math.round(p(0)*255),Math.round(p(8)*255),Math.round(p(4)*255)];return e.type==="hsla"&&(o+="a",v.push(t[3])),SA({type:o,values:v})}function Hk(e){e=pd(e);let t=e.type==="hsl"||e.type==="hsla"?pd(j9(e)).values:e.values;return t=t.map(r=>(e.type!=="color"&&(r/=255),r<=.03928?r/12.92:((r+.055)/1.055)**2.4)),Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}function U9(e,t){const r=Hk(e),i=Hk(t);return(Math.max(r,i)+.05)/(Math.min(r,i)+.05)}function V9(e,t){if(e=pd(e),t=q5(t),e.type.indexOf("hsl")!==-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")!==-1||e.type.indexOf("color")!==-1)for(let r=0;r<3;r+=1)e.values[r]*=1-t;return SA(e)}function G9(e,t){if(e=pd(e),t=q5(t),e.type.indexOf("hsl")!==-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")!==-1)for(let r=0;r<3;r+=1)e.values[r]+=(255-e.values[r])*t;else if(e.type.indexOf("color")!==-1)for(let r=0;r<3;r+=1)e.values[r]+=(1-e.values[r])*t;return SA(e)}function q9(e,t){return Nr({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},t)}const W9={black:"#000",white:"#fff"},$g=W9,H9={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},Z9=H9,X9={50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff"},vf=X9,K9={50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000"},xf=K9,Y9={50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00"},Rm=Y9,J9={50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff"},bf=J9,Q9={50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea"},wf=Q9,e7={50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853"},Sf=e7,t7=["mode","contrastThreshold","tonalOffset"],Zk={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:$g.white,default:$g.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},Jw={text:{primary:$g.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:$g.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function Xk(e,t,r,i){const c=i.light||i,u=i.dark||i*1.5;e[t]||(e.hasOwnProperty(r)?e[t]=e[r]:t==="light"?e.light=G9(e.main,c):t==="dark"&&(e.dark=V9(e.main,u)))}function r7(e="light"){return e==="dark"?{main:bf[200],light:bf[50],dark:bf[400]}:{main:bf[700],light:bf[400],dark:bf[800]}}function n7(e="light"){return e==="dark"?{main:vf[200],light:vf[50],dark:vf[400]}:{main:vf[500],light:vf[300],dark:vf[700]}}function i7(e="light"){return e==="dark"?{main:xf[500],light:xf[300],dark:xf[700]}:{main:xf[700],light:xf[400],dark:xf[800]}}function o7(e="light"){return e==="dark"?{main:wf[400],light:wf[300],dark:wf[700]}:{main:wf[700],light:wf[500],dark:wf[900]}}function a7(e="light"){return e==="dark"?{main:Sf[400],light:Sf[300],dark:Sf[700]}:{main:Sf[800],light:Sf[500],dark:Sf[900]}}function s7(e="light"){return e==="dark"?{main:Rm[400],light:Rm[300],dark:Rm[700]}:{main:"#ed6c02",light:Rm[500],dark:Rm[900]}}function l7(e){const{mode:t="light",contrastThreshold:r=3,tonalOffset:i=.2}=e,c=Rl(e,t7),u=e.primary||r7(t),p=e.secondary||n7(t),o=e.error||i7(t),v=e.info||o7(t),w=e.success||a7(t),A=e.warning||s7(t);function T(k){return U9(k,Jw.text.primary)>=r?Jw.text.primary:Zk.text.primary}const P=({color:k,name:N,mainShade:R=500,lightShade:j=300,darkShade:D=700})=>{if(k=Nr({},k),!k.main&&k[R]&&(k.main=k[R]),!k.hasOwnProperty("main"))throw new Error(fd(11,N?` (${N})`:"",R));if(typeof k.main!="string")throw new Error(fd(12,N?` (${N})`:"",JSON.stringify(k.main)));return Xk(k,"light",j,i),Xk(k,"dark",D,i),k.contrastText||(k.contrastText=T(k.main)),k},$={dark:Jw,light:Zk};return _l(Nr({common:Nr({},$g),mode:t,primary:P({color:u,name:"primary"}),secondary:P({color:p,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:P({color:o,name:"error"}),warning:P({color:A,name:"warning"}),info:P({color:v,name:"info"}),success:P({color:w,name:"success"}),grey:Z9,contrastThreshold:r,getContrastText:T,augmentColor:P,tonalOffset:i},$[t]),c)}const c7=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function u7(e){return Math.round(e*1e5)/1e5}const Kk={textTransform:"uppercase"},Yk='"Roboto", "Helvetica", "Arial", sans-serif';function h7(e,t){const r=typeof t=="function"?t(e):t,{fontFamily:i=Yk,fontSize:c=14,fontWeightLight:u=300,fontWeightRegular:p=400,fontWeightMedium:o=500,fontWeightBold:v=700,htmlFontSize:w=16,allVariants:A,pxToRem:T}=r,P=Rl(r,c7),$=c/14,L=T||(R=>`${R/w*$}rem`),k=(R,j,D,G,W)=>Nr({fontFamily:i,fontWeight:R,fontSize:L(j),lineHeight:D},i===Yk?{letterSpacing:`${u7(G/j)}em`}:{},W,A),N={h1:k(u,96,1.167,-1.5),h2:k(u,60,1.2,-.5),h3:k(p,48,1.167,0),h4:k(p,34,1.235,.25),h5:k(p,24,1.334,0),h6:k(o,20,1.6,.15),subtitle1:k(p,16,1.75,.15),subtitle2:k(o,14,1.57,.1),body1:k(p,16,1.5,.15),body2:k(p,14,1.43,.15),button:k(o,14,1.75,.4,Kk),caption:k(p,12,1.66,.4),overline:k(p,12,2.66,1,Kk),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return _l(Nr({htmlFontSize:w,pxToRem:L,fontFamily:i,fontSize:c,fontWeightLight:u,fontWeightRegular:p,fontWeightMedium:o,fontWeightBold:v},N),P,{clone:!1})}const f7=.2,d7=.14,p7=.12;function Fn(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${f7})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${d7})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${p7})`].join(",")}const m7=["none",Fn(0,2,1,-1,0,1,1,0,0,1,3,0),Fn(0,3,1,-2,0,2,2,0,0,1,5,0),Fn(0,3,3,-2,0,3,4,0,0,1,8,0),Fn(0,2,4,-1,0,4,5,0,0,1,10,0),Fn(0,3,5,-1,0,5,8,0,0,1,14,0),Fn(0,3,5,-1,0,6,10,0,0,1,18,0),Fn(0,4,5,-2,0,7,10,1,0,2,16,1),Fn(0,5,5,-3,0,8,10,1,0,3,14,2),Fn(0,5,6,-3,0,9,12,1,0,3,16,2),Fn(0,6,6,-3,0,10,14,1,0,4,18,3),Fn(0,6,7,-4,0,11,15,1,0,4,20,3),Fn(0,7,8,-4,0,12,17,2,0,5,22,4),Fn(0,7,8,-4,0,13,19,2,0,5,24,4),Fn(0,7,9,-4,0,14,21,2,0,5,26,4),Fn(0,8,9,-5,0,15,22,2,0,6,28,5),Fn(0,8,10,-5,0,16,24,2,0,6,30,5),Fn(0,8,11,-5,0,17,26,2,0,6,32,5),Fn(0,9,11,-5,0,18,28,2,0,7,34,6),Fn(0,9,12,-6,0,19,29,2,0,7,36,6),Fn(0,10,13,-6,0,20,31,3,0,8,38,7),Fn(0,10,13,-6,0,21,33,3,0,8,40,7),Fn(0,10,14,-6,0,22,35,3,0,8,42,7),Fn(0,11,14,-7,0,23,36,3,0,9,44,8),Fn(0,11,15,-7,0,24,38,3,0,9,46,8)],g7=m7,y7=["duration","easing","delay"],_7={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},v7={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function Jk(e){return`${Math.round(e)}ms`}function x7(e){if(!e)return 0;const t=e/36;return Math.round((4+15*t**.25+t/5)*10)}function b7(e){const t=Nr({},_7,e.easing),r=Nr({},v7,e.duration);return Nr({getAutoHeightDuration:x7,create:(c=["all"],u={})=>{const{duration:p=r.standard,easing:o=t.easeInOut,delay:v=0}=u;return Rl(u,y7),(Array.isArray(c)?c:[c]).map(w=>`${w} ${typeof p=="string"?p:Jk(p)} ${o} ${typeof v=="string"?v:Jk(v)}`).join(",")}},e,{easing:t,duration:r})}const w7={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},S7=w7,E7=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function T7(e={},...t){const{mixins:r={},palette:i={},transitions:c={},typography:u={}}=e,p=Rl(e,E7);if(e.vars)throw new Error(fd(18));const o=l7(i),v=wA(e);let w=_l(v,{mixins:q9(v.breakpoints,r),palette:o,shadows:g7.slice(),typography:h7(o,u),transitions:b7(c),zIndex:Nr({},S7)});return w=_l(w,p),w=t.reduce((A,T)=>_l(A,T),w),w.unstable_sxConfig=Nr({},xA,p==null?void 0:p.unstable_sxConfig),w.unstable_sx=function(T){return bA({sx:T,theme:this})},w}const A7=T7(),W5=A7,H5="$$material";function M7({props:e,name:t}){return F9({props:e,name:t,defaultTheme:W5,themeId:H5})}const C7=e=>d0(e)&&e!=="classes",P7=B9({themeId:H5,defaultTheme:W5,rootShouldForwardProp:C7}),I7=P7;function k7(e){return T5("MuiSvgIcon",e)}MV("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const O7=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],D7=e=>{const{color:t,fontSize:r,classes:i}=e,c={root:["root",t!=="inherit"&&`color${vl(t)}`,`fontSize${vl(r)}`]};return wV(c,k7,i)},R7=I7("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:r}=e;return[t.root,r.color!=="inherit"&&t[`color${vl(r.color)}`],t[`fontSize${vl(r.fontSize)}`]]}})(({theme:e,ownerState:t})=>{var r,i,c,u,p,o,v,w,A,T,P,$,L,k,N,R,j;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:"currentColor",flexShrink:0,transition:(r=e.transitions)==null||(i=r.create)==null?void 0:i.call(r,"fill",{duration:(c=e.transitions)==null||(u=c.duration)==null?void 0:u.shorter}),fontSize:{inherit:"inherit",small:((p=e.typography)==null||(o=p.pxToRem)==null?void 0:o.call(p,20))||"1.25rem",medium:((v=e.typography)==null||(w=v.pxToRem)==null?void 0:w.call(v,24))||"1.5rem",large:((A=e.typography)==null||(T=A.pxToRem)==null?void 0:T.call(A,35))||"2.1875rem"}[t.fontSize],color:(P=($=(e.vars||e).palette)==null||(L=$[t.color])==null?void 0:L.main)!=null?P:{action:(k=(e.vars||e).palette)==null||(N=k.action)==null?void 0:N.active,disabled:(R=(e.vars||e).palette)==null||(j=R.action)==null?void 0:j.disabled,inherit:void 0}[t.color]}}),Z5=Ke.forwardRef(function(t,r){const i=M7({props:t,name:"MuiSvgIcon"}),{children:c,className:u,color:p="inherit",component:o="svg",fontSize:v="medium",htmlColor:w,inheritViewBox:A=!1,titleAccess:T,viewBox:P="0 0 24 24"}=i,$=Rl(i,O7),L=Nr({},i,{color:p,component:o,fontSize:v,instanceFontSize:t.fontSize,inheritViewBox:A,viewBox:P}),k={};A||(k.viewBox=P);const N=D7(L);return ze.jsxs(R7,Nr({as:o,className:CV(N.root,u),focusable:"false",color:w,"aria-hidden":T?void 0:!0,role:T?"img":void 0,ref:r},k,$,{ownerState:L,children:[c,T?ze.jsx("title",{children:T}):null]}))});Z5.muiName="SvgIcon";const Qk=Z5;function Us(e,t){function r(i,c){return ze.jsx(Qk,Nr({"data-testid":`${t}Icon`,ref:c},i,{children:e}))}return r.muiName=Qk.muiName,Ke.memo(Ke.forwardRef(r))}const L7=Us(ze.jsx("path",{d:"m19 9 1.25-2.75L23 5l-2.75-1.25L19 1l-1.25 2.75L15 5l2.75 1.25L19 9zm-7.5.5L9 4 6.5 9.5 1 12l5.5 2.5L9 20l2.5-5.5L17 12l-5.5-2.5zM19 15l-1.25 2.75L15 19l2.75 1.25L19 23l1.25-2.75L23 19l-2.75-1.25L19 15z"}),"AutoAwesome"),z7=Us(ze.jsx("path",{d:"M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9 9-4.03 9-9c0-.46-.04-.92-.1-1.36-.98 1.37-2.58 2.26-4.4 2.26-2.98 0-5.4-2.42-5.4-5.4 0-1.81.89-3.42 2.26-4.4-.44-.06-.9-.1-1.36-.1z"}),"DarkMode"),B7=Us(ze.jsx("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete"),$7=Us(ze.jsx("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54L12 21.35z"}),"Favorite"),F7=Us(ze.jsx("path",{d:"M16.5 3c-1.74 0-3.41.81-4.5 2.09C10.91 3.81 9.24 3 7.5 3 4.42 3 2 5.42 2 8.5c0 3.78 3.4 6.86 8.55 11.54L12 21.35l1.45-1.32C18.6 15.36 22 12.28 22 8.5 22 5.42 19.58 3 16.5 3zm-4.4 15.55-.1.1-.1-.1C7.14 14.24 4 11.39 4 8.5 4 6.5 5.5 5 7.5 5c1.54 0 3.04.99 3.57 2.36h1.87C13.46 5.99 14.96 5 16.5 5c2 0 3.5 1.5 3.5 3.5 0 2.89-3.14 5.74-7.9 10.05z"}),"FavoriteBorder"),N7=Us(ze.jsx("path",{d:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5zM2 13h2c.55 0 1-.45 1-1s-.45-1-1-1H2c-.55 0-1 .45-1 1s.45 1 1 1zm18 0h2c.55 0 1-.45 1-1s-.45-1-1-1h-2c-.55 0-1 .45-1 1s.45 1 1 1zM11 2v2c0 .55.45 1 1 1s1-.45 1-1V2c0-.55-.45-1-1-1s-1 .45-1 1zm0 18v2c0 .55.45 1 1 1s1-.45 1-1v-2c0-.55-.45-1-1-1s-1 .45-1 1zM5.99 4.58c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0s.39-1.03 0-1.41L5.99 4.58zm12.37 12.37c-.39-.39-1.03-.39-1.41 0-.39.39-.39 1.03 0 1.41l1.06 1.06c.39.39 1.03.39 1.41 0 .39-.39.39-1.03 0-1.41l-1.06-1.06zm1.06-10.96c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06zM7.05 18.36c.39-.39.39-1.03 0-1.41-.39-.39-1.03-.39-1.41 0l-1.06 1.06c-.39.39-.39 1.03 0 1.41s1.03.39 1.41 0l1.06-1.06z"}),"LightMode"),j7=Us(ze.jsx("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"}),"LocationOn"),U7=Us(ze.jsx("path",{d:"M12 22c1.1 0 2-.9 2-2h-4c0 1.1.89 2 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"}),"Notifications"),V7=Us(ze.jsx("path",{d:"M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"}),"Search"),G7=Us(ze.jsx("path",{d:"M3 17v-2c0-1.1.9-2 2-2h14c1.1 0 2 .9 2 2v2c0 1.1-.9 2-2 2H5c-1.1 0-2-.9-2-2zM3 7v2c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2z"}),"ViewStream");const q7="/react-weather/assets/dp-5c892079.jpg";function W7({handleCitySearch:e,citiesOptions:t,theme:r,setTheme:i,setCity:c,city:u,saveCity:p,savedCities:o}){const[v,w]=Ke.useState(!1),A=Ke.useRef(document.documentElement),T=Ke.useRef(null),P=Ke.useRef(null);let $=!0;Ke.useEffect(()=>{r==="dark"?(T.current.style.left="0%",A.current.style.setProperty("--bg","#101014"),A.current.style.setProperty("--cardBg"," #393839"),A.current.style.setProperty("--activeTextColor","#ffffff"),A.current.style.setProperty("--fadedTextColor","#b0b0b0"),A.current.style.setProperty("--ltBlue","#D5E8F7")):(T.current.style.left="50%",A.current.style.setProperty("--bg","white"),A.current.style.setProperty("--cardBg"," #bfbfbf"),A.current.style.setProperty("--activeTextColor","#292828"),A.current.style.setProperty("--fadedTextColor","#8a8888"),A.current.style.setProperty("--ltBlue","#072842")),w(!0),setTimeout(()=>{w(!1)},1e3)},[r]);function L(N){const R=P.current.value.trim();R!==""&&$&&(e(R),$=!1,setTimeout(()=>{$=!0},1002))}function k(N){c(N),localStorage.setItem("location",JSON.stringify(N))}return ze.jsx("nav",{children:ze.jsxs("ul",{className:"nav-grid",children:[ze.jsxs("div",{className:"nav-grid-1",children:[ze.jsxs("div",{className:"nav-grp",children:[ze.jsx("li",{children:ze.jsx("a",{children:ze.jsx("div",{className:"roundObj",children:ze.jsx(G7,{})})})}),ze.jsx("li",{children:ze.jsx("a",{children:ze.jsx("div",{className:"roundObj",children:ze.jsx(U7,{})})})}),ze.jsx("li",{children:ze.jsxs("div",{className:"loc-nav",children:[ze.jsx(j7,{fontSize:"12px"})," ",ze.jsxs("div",{className:"loc-div",children:[ze.jsx("b",{children:ze.jsxs("span",{children:[u?u.city:"City",", "]})}),ze.jsx("span",{className:"faded-text",children:u&&u?u.country.length<20?u.country:u.countryCode:"Country"}),ze.jsx("span",{className:"like-button",onClick:()=>p(u,o),children:o.find(N=>N.city===u.city&&N.country===u.country)?ze.jsx($7,{style:{color:"var(--likePink)"}}):ze.jsx(F7,{})})]})]})})]}),ze.jsx("div",{className:"nav-grp",children:ze.jsx("li",{children:ze.jsxs("div",{className:"search-grp",children:[ze.jsxs("div",{className:"nav-outer",children:[ze.jsx("label",{style:{display:"flex",alignItems:"center",justifyContent:"center"},htmlFor:"city-input",children:ze.jsx(V7,{})}),ze.jsx("input",{className:"nav-input",id:"city-input",ref:P,onKeyDown:L})]}),t&&ze.jsx("div",{className:"cities-options",children:t.length>0?ze.jsx(ze.Fragment,{children:t.map(N=>ze.jsx(ze.Fragment,{children:ze.jsxs("div",{className:"city-option",onClick:()=>k(N),children:[ze.jsx("span",{children:N.city}),","," ",ze.jsx("span",{children:N.country})]})}))}):"Empty"})]})})})]}),ze.jsx("div",{className:"nav-grid-2",children:ze.jsxs("div",{className:"nav-grp",children:[ze.jsx("li",{children:ze.jsxs("div",{className:"theme-toggle",onClick:()=>i(r==="dark"?"light":"dark"),children:[ze.jsx("div",{className:"theme-toggle__before",ref:T}),ze.jsxs("div",{className:"theme-icons",children:[ze.jsx("div",{className:`dark theme-icon ${v&&r==="dark"?"animate":""}`,children:ze.jsx(z7,{style:{color:r==="dark"?"var(--bg)":"inherit"}})}),ze.jsx("div",{className:`light theme-icon ${v&&r==="light"?"animate":""}`,children:ze.jsx(N7,{style:{color:r==="dark"?"var(--activeTextColor)":"var(--bg)"}})})]})]})}),ze.jsx("li",{children:ze.jsx("img",{src:q7,className:"dp"})})]})})]})})}const eO="/react-weather/assets/sun-rain-316473b0.png",tO="/react-weather/assets/rain-a7177ed5.png",rO="/react-weather/assets/snow-a3e969cf.png",mc="/react-weather/assets/sun-cloud-bb180038.png",nO="/react-weather/assets/sun-e9baa83c.png",iO="/react-weather/assets/thunderstorm-14207aa8.png",ug=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],W0={"01d":nO,"02d":mc,"03d":mc,"04d":mc,"09d":tO,"10d":eO,"11d":iO,"13d":rO,"50d":mc,"01n":nO,"02n":mc,"03n":mc,"04n":mc,"09n":tO,"10n":eO,"11n":iO,"13n":rO,"50n":mc};function H7({weatherData:e}){const[t,r]=Ke.useState("forecast"),i=Ke.useRef(null),[c,u]=Ke.useState(ug[new Date().getDay()]),[p,o]=Ke.useState([]),[v,w]=Ke.useState(H0(new Date));return Ke.useEffect(()=>{console.log(e);try{const A=[];for(const T of e.list)A.findIndex($=>$.date.split(" ")[0]===T.dt_txt.split(" ")[0])===-1&&A.push({date:T.dt_txt,...T.main,wind:T.wind,icon:T.weather[0].icon,sunrise:new Date(e.city.sunrise).getTime(),sunset:new Date(e.city.sunset).getTime()});console.log(A),o(A)}catch(A){console.error("Weather Data Does Not Exists",A)}},[e]),Ke.useEffect(()=>{t==="forecast"?i.current.style.left="0%":i.current.style.left="50%"},[t]),Ke.useEffect(()=>{const A=setInterval(()=>{w(H0(new Date))},6e4);return()=>{clearInterval(A)}},[]),ze.jsxs("div",{className:"card weekly-forecast",children:[ze.jsxs("div",{className:"header",children:[ze.jsxs("div",{className:"day-titles",children:[ze.jsx("span",{style:{cursor:"pointer",borderBottom:"1px solid var(--activeTextColor)"},onClick:()=>u(ug[new Date().getDay()]),children:"Today"}),ze.jsx("span",{style:{cursor:"pointer",borderBottom:"1px solid var(--activeTextColor)"},onClick:()=>u(ug[new Date().getDay()<6?new Date().getDay()+1:0]),children:"Tomorrow"}),ze.jsx("b",{children:ze.jsx("span",{children:"Next 5 Days"})})]}),ze.jsxs("div",{className:"forecast-toggle",onClick:()=>r(t==="forecast"?"air":"forecast"),children:[ze.jsx("div",{className:"forecast-toggle__before",ref:i}),ze.jsxs("div",{className:"fc-options",children:[ze.jsx("span",{style:{color:t==="forecast"?"var(--bg)":"inherit"},children:"Forecast"}),ze.jsx("span",{style:{color:t==="air"?"var(--bg)":"inherit"},children:"Air Quality"})]})]})]}),ze.jsx("div",{className:"weekdays",children:p.length>0?p.map((A,T)=>ze.jsx(Z7,{dt:A,activeDay:c,setActiveDay:u,timeStr:v},T)):ze.jsxs("div",{className:"loading-skele",children:[ze.jsx("div",{className:"loader-inner"}),ze.jsx("h1",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%, -50%)"},children:"Loading..."})]})})]})}function H0(e){let t=e.getHours(),r=e.getMinutes();const i=t>=12?"PM":"AM";return t=t%12||12,r=r<10?`0${r}`:r,`${t}:${r} ${i}`}function Z7({dt:e,activeDay:t,setActiveDay:r,timeStr:i}){const c=new Date(e.date).getDay(),u=ug[c];return ze.jsx("div",{className:u===t?"day-body active-day":"day-body",onClick:()=>r(u),children:u===t?ze.jsxs("div",{className:"expanded-content",children:[ze.jsxs("div",{className:"more-content-title",children:[ze.jsx("span",{children:u}),ze.jsx("span",{children:u===ug[new Date().getDay()]?i:"12:00 AM"})]}),ze.jsxs("div",{className:"expanded-content-grid",children:[ze.jsxs("div",{className:"expanded-temp temp",children:[Math.round(e.temp-273.15),ze.jsx("sup",{children:ze.jsx("span",{style:{fontSize:"1rem"},children:"°C"})})]}),ze.jsx("div",{className:"img-container1",children:ze.jsx("img",{src:W0[e.icon],className:"weather-img-expanded"})}),ze.jsx("div",{className:"info-1",children:ze.jsxs("ul",{children:[ze.jsxs("li",{children:[ze.jsx("span",{children:"Real Feel: "}),ze.jsxs("span",{children:[Math.round(e.feels_like-273.15),ze.jsx("sup",{children:ze.jsx("span",{children:"°c"})})]})]}),ze.jsxs("li",{children:[ze.jsx("span",{children:"Wind: "}),ze.jsxs("span",{children:[e.wind.speed,"km/h"]})]}),ze.jsxs("li",{children:[ze.jsx("span",{children:"Pressure: "}),ze.jsxs("span",{children:[e.pressure,"MB"]})]}),ze.jsxs("li",{children:[ze.jsx("span",{children:"Humidity: "}),ze.jsxs("span",{children:[e.humidity,"%"]})]})]})}),ze.jsx("div",{className:"info-2",children:ze.jsxs("ul",{children:[ze.jsxs("li",{children:[ze.jsx("span",{children:"Sun Rise: "}),ze.jsx("span",{children:H0(new Date(e.sunrise))})]}),ze.jsxs("li",{children:[ze.jsx("span",{children:"Sun Set: "}),ze.jsx("span",{children:H0(new Date(e.sunset))})]})]})})]})]}):ze.jsxs("div",{className:"collapsed-content",children:[ze.jsx("div",{className:"day-title",children:u.substr(0,3)}),ze.jsx("div",{className:"divider"}),ze.jsx("div",{className:"img-container2",children:ze.jsx("img",{src:W0[e.icon],className:"weather-img"})}),ze.jsxs("div",{className:"temp",children:[Math.round(e.temp-273.15),ze.jsx("sup",{children:ze.jsx("span",{style:{fontSize:"1rem"},children:"°C"})})]})]})},u)}var X5={exports:{}};(function(e,t){(function(r,i){e.exports=i()})(qm,function(){var r,i,c;function u(o,v){if(!r)r=v;else if(!i)i=v;else{var w="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+r+")(sharedChunk); ("+i+")(sharedChunk); self.onerror = null;",A={};r(A),c=v(A),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(c.workerUrl=window.URL.createObjectURL(new Blob([w],{type:"text/javascript"})))}}u(["exports"],function(o){var v=typeof self<"u"?self:{},w="2.14.1";let A;const T={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){if(A==null){const a=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;try{A={}.API_URL_REGEX!=null?new RegExp({}.API_URL_REGEX):a}catch{A=a}}return A},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!T.API_URL)return null;try{const a=new URL(T.API_URL);return a.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":a.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},P={supported:!1,testSupport:function(a){!k&&L&&(N?R(a):$=a)}};let $,L,k=!1,N=!1;function R(a){const n=a.createTexture();a.bindTexture(a.TEXTURE_2D,n);try{if(a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,L),a.isContextLost())return;P.supported=!0}catch{}a.deleteTexture(n),k=!0}v.document&&(L=v.document.createElement("img"),L.onload=function(){$&&R($),$=null,N=!0},L.onerror=function(){k=!0,$=null},L.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const j="01";var D=G;function G(a,n,s,h){this.cx=3*a,this.bx=3*(s-a)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*n,this.by=3*(h-n)-this.cy,this.ay=1-this.cy-this.by,this.p1x=a,this.p1y=n,this.p2x=s,this.p2y=h}G.prototype={sampleCurveX:function(a){return((this.ax*a+this.bx)*a+this.cx)*a},sampleCurveY:function(a){return((this.ay*a+this.by)*a+this.cy)*a},sampleCurveDerivativeX:function(a){return(3*this.ax*a+2*this.bx)*a+this.cx},solveCurveX:function(a,n){if(n===void 0&&(n=1e-6),a<0)return 0;if(a>1)return 1;for(var s=a,h=0;h<8;h++){var d=this.sampleCurveX(s)-a;if(Math.abs(d)<n)return s;var g=this.sampleCurveDerivativeX(s);if(Math.abs(g)<1e-6)break;s-=d/g}var _=0,b=1;for(s=a,h=0;h<20&&(d=this.sampleCurveX(s),!(Math.abs(d-a)<n));h++)a>d?_=s:b=s,s=.5*(b-_)+_;return s},solve:function(a,n){return this.sampleCurveY(this.solveCurveX(a,n))}};var W=Y;function Y(a,n){this.x=a,this.y=n}Y.prototype={clone:function(){return new Y(this.x,this.y)},add:function(a){return this.clone()._add(a)},sub:function(a){return this.clone()._sub(a)},multByPoint:function(a){return this.clone()._multByPoint(a)},divByPoint:function(a){return this.clone()._divByPoint(a)},mult:function(a){return this.clone()._mult(a)},div:function(a){return this.clone()._div(a)},rotate:function(a){return this.clone()._rotate(a)},rotateAround:function(a,n){return this.clone()._rotateAround(a,n)},matMult:function(a){return this.clone()._matMult(a)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(a){return this.x===a.x&&this.y===a.y},dist:function(a){return Math.sqrt(this.distSqr(a))},distSqr:function(a){var n=a.x-this.x,s=a.y-this.y;return n*n+s*s},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(a){return Math.atan2(this.y-a.y,this.x-a.x)},angleWith:function(a){return this.angleWithSep(a.x,a.y)},angleWithSep:function(a,n){return Math.atan2(this.x*n-this.y*a,this.x*a+this.y*n)},_matMult:function(a){var n=a[2]*this.x+a[3]*this.y;return this.x=a[0]*this.x+a[1]*this.y,this.y=n,this},_add:function(a){return this.x+=a.x,this.y+=a.y,this},_sub:function(a){return this.x-=a.x,this.y-=a.y,this},_mult:function(a){return this.x*=a,this.y*=a,this},_div:function(a){return this.x/=a,this.y/=a,this},_multByPoint:function(a){return this.x*=a.x,this.y*=a.y,this},_divByPoint:function(a){return this.x/=a.x,this.y/=a.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var a=this.y;return this.y=this.x,this.x=-a,this},_rotate:function(a){var n=Math.cos(a),s=Math.sin(a),h=s*this.x+n*this.y;return this.x=n*this.x-s*this.y,this.y=h,this},_rotateAround:function(a,n){var s=Math.cos(a),h=Math.sin(a),d=n.y+h*(this.x-n.x)+s*(this.y-n.y);return this.x=n.x+s*(this.x-n.x)-h*(this.y-n.y),this.y=d,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},Y.convert=function(a){return a instanceof Y?a:Array.isArray(a)?new Y(a[0],a[1]):a};const ee=Math.PI/180,de=180/Math.PI;function xe(a){return a*ee}function Me(a){return a*de}const Ce=[[0,0],[1,0],[1,1],[0,1]];function qe(a){if(a<=0)return 0;if(a>=1)return 1;const n=a*a,s=n*a;return 4*(a<.5?s:3*(a-n)+s-.75)}function Ue(a,n,s,h){const d=new D(a,n,s,h);return function(g){return d.solve(g)}}const ut=Ue(.25,.1,.25,1);function Be(a,n,s){return Math.min(s,Math.max(n,a))}function bt(a,n,s){return(s=Be((s-a)/(n-a),0,1))*s*(3-2*s)}function kt(a,n,s){const h=s-n,d=((a-n)%h+h)%h+n;return d===n?s:d}function He(a,n,s){if(!a.length)return s(null,[]);let h=a.length;const d=new Array(a.length);let g=null;a.forEach((_,b)=>{n(_,(E,M)=>{E&&(g=E),d[b]=M,--h==0&&s(g,d)})})}function nt(a){const n=[];for(const s in a)n.push(a[s]);return n}function gt(a,...n){for(const s of n)for(const h in s)a[h]=s[h];return a}let xt=1;function zt(){return xt++}function Vt(){return function a(n){return n?(n^Math.random()*(16>>n/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,a)}()}function Zt(a){return a<=1?1:Math.pow(2,Math.ceil(Math.log(a)/Math.LN2))}function hr(a){return!!a&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(a)}function Tr(a,n){a.forEach(s=>{n[s]&&(n[s]=n[s].bind(n))})}function Rr(a,n){return a.indexOf(n,a.length-n.length)!==-1}function ir(a,n,s){const h={};for(const d in a)h[d]=n.call(s||this,a[d],d,a);return h}function _t(a,n,s){const h={};for(const d in a)n.call(s||this,a[d],d,a)&&(h[d]=a[d]);return h}function Mt(a){return Array.isArray(a)?a.map(Mt):typeof a=="object"&&a?ir(a,Mt):a}const or={};function Qe(a){or[a]||(typeof console<"u"&&console.warn(a),or[a]=!0)}function lr(a,n,s){return(s.y-a.y)*(n.x-a.x)>(n.y-a.y)*(s.x-a.x)}function Ot(a){let n=0;for(let s,h,d=0,g=a.length,_=g-1;d<g;_=d++)s=a[d],h=a[_],n+=(h.x-s.x)*(s.y+h.y);return n}function Sr(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function Lr(a){const n={};if(a.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(s,h,d,g)=>{const _=d||g;return n[h]=!_||_.toLowerCase(),""}),n["max-age"]){const s=parseInt(n["max-age"],10);isNaN(s)?delete n["max-age"]:n["max-age"]=s}return n}let mn=null;function Kn(a){if(mn==null){const n=a.navigator?a.navigator.userAgent:null;mn=!!a.safari||!(!n||!(/\b(iPad|iPhone|iPod)\b/.test(n)||n.match("Safari")&&!n.match("Chrome")))}return mn}function Yi(a){try{const n=v[a];return n.setItem("_mapbox_test_",1),n.removeItem("_mapbox_test_"),!0}catch{return!1}}function Ti(a,n){return[a[4*n],a[4*n+1],a[4*n+2],a[4*n+3]]}const po="mapbox-tiles";let Ln,ii,jo=500,mo=50;function qs(){try{return v.caches}catch{}}function sa(){qs()&&!Ln&&(Ln=v.caches.open(po))}function Da(a){const n=a.indexOf("?");if(n<0)return a;const s=function(d){const g=d.indexOf("?");return g>0?d.slice(g+1).split("&"):[]}(a),h=s.filter(d=>{const g=d.split("=");return g[0]==="language"||g[0]==="worldview"});return h.length?`${a.slice(0,n)}?${h.join("&")}`:a.slice(0,n)}let ss=1/0;const Je={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(Je);class et extends Error{constructor(n,s,h){s===401&&bn(h)&&(n+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(n),this.status=s,this.url=h}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const vt=Sr()?()=>self.worker&&self.worker.referrer:()=>(v.location.protocol==="blob:"?v.parent:v).location.href,$t=function(a,n){if(!(/^file:/.test(s=a.url)||/^file:/.test(vt())&&!/^\w+:/.test(s))){if(v.fetch&&v.Request&&v.AbortController&&v.Request.prototype.hasOwnProperty("signal"))return function(h,d){const g=new v.AbortController,_=new v.Request(h.url,{method:h.method||"GET",body:h.body,credentials:h.credentials,headers:h.headers,referrer:vt(),referrerPolicy:h.referrerPolicy,signal:g.signal});let b=!1,E=!1;const M=(O=_.url).indexOf("sku=")>0&&bn(O);var O;h.type==="json"&&_.headers.set("Accept","application/json");const B=(q,H,K)=>{if(E)return;if(q&&q.message!=="SecurityError"&&Qe(q),H&&K)return F(H);const re=Date.now();v.fetch(_).then(ue=>{if(ue.ok){const ye=M?ue.clone():null;return F(ue,ye,re)}return d(new et(ue.statusText,ue.status,h.url))}).catch(ue=>{ue.name!=="AbortError"&&d(new Error(`${ue.message} ${h.url}`))})},F=(q,H,K)=>{(h.type==="arrayBuffer"?q.arrayBuffer():h.type==="json"?q.json():q.text()).then(re=>{E||(H&&K&&function(ue,ye,le){if(sa(),!Ln)return;const ge={status:ye.status,statusText:ye.statusText,headers:new v.Headers};ye.headers.forEach((Fe,Re)=>ge.headers.set(Re,Fe));const be=Lr(ye.headers.get("Cache-Control")||"");if(be["no-store"])return;be["max-age"]&&ge.headers.set("Expires",new Date(le+1e3*be["max-age"]).toUTCString());const _e=ge.headers.get("Expires");_e&&(new Date(_e).getTime()-le<42e4||function(Fe,Re){if(ii===void 0)try{new Response(new ReadableStream),ii=!0}catch{ii=!1}ii?Re(Fe.body):Fe.blob().then(Re)}(ye,Fe=>{const Re=new v.Response(Fe,ge);sa(),Ln&&Ln.then(Ye=>Ye.put(Da(ue.url),Re)).catch(Ye=>Qe(Ye.message))}))}(_,H,K),b=!0,d(null,re,q.headers.get("Cache-Control"),q.headers.get("Expires")))}).catch(re=>{E||d(new Error(re.message))})};return M?function(q,H){if(sa(),!Ln)return H(null);const K=Da(q.url);Ln.then(re=>{re.match(K).then(ue=>{const ye=function(le){if(!le)return!1;const ge=new Date(le.headers.get("Expires")||0),be=Lr(le.headers.get("Cache-Control")||"");return ge>Date.now()&&!be["no-cache"]}(ue);re.delete(K),ye&&re.put(K,ue.clone()),H(null,ue,ye)}).catch(H)}).catch(H)}(_,B):B(null,null),{cancel:()=>{E=!0,b||g.abort()}}}(a,n);if(Sr()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",a,n,void 0,!0)}var s;return function(h,d){const g=new v.XMLHttpRequest;g.open(h.method||"GET",h.url,!0),h.type==="arrayBuffer"&&(g.responseType="arraybuffer");for(const _ in h.headers)g.setRequestHeader(_,h.headers[_]);return h.type==="json"&&(g.responseType="text",g.setRequestHeader("Accept","application/json")),g.withCredentials=h.credentials==="include",g.onerror=()=>{d(new Error(g.statusText))},g.onload=()=>{if((g.status>=200&&g.status<300||g.status===0)&&g.response!==null){let _=g.response;if(h.type==="json")try{_=JSON.parse(g.response)}catch(b){return d(b)}d(null,_,g.getResponseHeader("Cache-Control"),g.getResponseHeader("Expires"))}else d(new et(g.statusText,g.status,h.url))},g.send(h.body),{cancel:()=>g.abort()}}(a,n)},jt=function(a,n){return $t(gt(a,{type:"arrayBuffer"}),n)};function sr(a){const n=v.document.createElement("a");return n.href=a,n.protocol===v.document.location.protocol&&n.host===v.document.location.host}const fr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let nr,Xt;nr=[],Xt=0;const Cr=function(a,n){if(P.supported&&(a.headers||(a.headers={}),a.headers.accept="image/webp,*/*"),Xt>=T.MAX_PARALLEL_IMAGE_REQUESTS){const g={requestParameters:a,callback:n,cancelled:!1,cancel(){this.cancelled=!0}};return nr.push(g),g}Xt++;let s=!1;const h=()=>{if(!s)for(s=!0,Xt--;nr.length&&Xt<T.MAX_PARALLEL_IMAGE_REQUESTS;){const g=nr.shift(),{requestParameters:_,callback:b,cancelled:E}=g;E||(g.cancel=Cr(_,b).cancel)}},d=jt(a,(g,_,b,E)=>{h(),g?n(g):_&&(v.createImageBitmap?function(M,O){const B=new v.Blob([new Uint8Array(M)],{type:"image/png"});v.createImageBitmap(B).then(F=>{O(null,F)}).catch(F=>{O(new Error(`Could not load image because of ${F.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(_,(M,O)=>n(M,O,b,E)):function(M,O){const B=new v.Image,F=v.URL;B.onload=()=>{O(null,B),F.revokeObjectURL(B.src),B.onload=null,v.requestAnimationFrame(()=>{B.src=fr})},B.onerror=()=>O(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const q=new v.Blob([new Uint8Array(M)],{type:"image/png"});B.src=M.byteLength?F.createObjectURL(q):fr}(_,(M,O)=>n(M,O,b,E)))});return{cancel:()=>{d.cancel(),h()}}},kr="NO_ACCESS_TOKEN";function un(a){return a.indexOf("mapbox:")===0}function bn(a){return T.API_URL_REGEX.test(a)}function Cn(a){return T.API_CDN_URL_REGEX.test(a)}function fi(a){return T.API_STYLE_REGEX.test(a)&&!To(a)}function To(a){return T.API_SPRITE_REGEX.test(a)}const Uo=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function oi(a){const n=a.match(Uo);if(!n)throw new Error("Unable to parse URL object");return{protocol:n[1],authority:n[2],path:n[3]||"/",params:n[4]?n[4].split("&"):[]}}function di(a){const n=a.params.length?`?${a.params.join("&")}`:"";return`${a.protocol}://${a.authority}${a.path}${n}`}function Ra(a){if(!a)return null;const n=a.split(".");if(!n||n.length!==3)return null;try{return JSON.parse(decodeURIComponent(v.atob(n[1]).split("").map(s=>"%"+("00"+s.charCodeAt(0).toString(16)).slice(-2)).join("")))}catch{return null}}class Vo{constructor(n){this.type=n,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(n){const s=Ra(T.ACCESS_TOKEN);let h="";return h=s&&s.u?v.btoa(encodeURIComponent(s.u).replace(/%([0-9A-F]{2})/g,(d,g)=>String.fromCharCode(+("0x"+g)))):T.ACCESS_TOKEN||"",n?`mapbox.eventData.${n}:${h}`:`mapbox.eventData:${h}`}fetchEventData(){const n=Yi("localStorage"),s=this.getStorageKey(),h=this.getStorageKey("uuid");if(n)try{const d=v.localStorage.getItem(s);d&&(this.eventData=JSON.parse(d));const g=v.localStorage.getItem(h);g&&(this.anonId=g)}catch{Qe("Unable to read from LocalStorage")}}saveEventData(){const n=Yi("localStorage"),s=this.getStorageKey(),h=this.getStorageKey("uuid");if(n)try{v.localStorage.setItem(h,this.anonId),Object.keys(this.eventData).length>=1&&v.localStorage.setItem(s,JSON.stringify(this.eventData))}catch{Qe("Unable to write to LocalStorage")}}processRequests(n){}postEvent(n,s,h,d){if(!T.EVENTS_URL)return;const g=oi(T.EVENTS_URL);g.params.push(`access_token=${d||T.ACCESS_TOKEN||""}`);const _={event:this.type,created:new Date(n).toISOString()},b=s?gt(_,s):_,E={url:di(g),headers:{"Content-Type":"text/plain"},body:JSON.stringify([b])};this.pendingRequest=function(M,O){return $t(gt(M,{method:"POST"}),O)}(E,M=>{this.pendingRequest=null,h(M),this.saveEventData(),this.processRequests(d)})}queueRequest(n,s){this.queue.push(n),this.processRequests(s)}}const ce=new class extends Vo{constructor(a){super("appUserTurnstile"),this._customAccessToken=a}postTurnstileEvent(a,n){T.EVENTS_URL&&T.ACCESS_TOKEN&&Array.isArray(a)&&a.some(s=>un(s)||bn(s))&&this.queueRequest(Date.now(),n)}processRequests(a){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const n=Ra(T.ACCESS_TOKEN),s=n?n.u:T.ACCESS_TOKEN;let h=s!==this.eventData.tokenU;hr(this.anonId)||(this.anonId=Vt(),h=!0);const d=this.queue.shift();if(this.eventData.lastSuccess){const g=new Date(this.eventData.lastSuccess),_=new Date(d),b=(d-this.eventData.lastSuccess)/864e5;h=h||b>=1||b<-1||g.getDate()!==_.getDate()}else h=!0;h?this.postEvent(d,{sdkIdentifier:"mapbox-gl-js",sdkVersion:w,skuId:j,"enabled.telemetry":!1,userId:this.anonId},g=>{g||(this.eventData.lastSuccess=d,this.eventData.tokenU=s)},a):this.processRequests()}},X=ce.postTurnstileEvent.bind(ce),J=new class extends Vo{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(a,n,s,h){this.skuToken=n,this.errorCb=h,T.EVENTS_URL&&(s||T.ACCESS_TOKEN?this.queueRequest({id:a,timestamp:Date.now()},s):this.errorCb(new Error(kr)))}processRequests(a){if(this.pendingRequest||this.queue.length===0)return;const{id:n,timestamp:s}=this.queue.shift();n&&this.success[n]||(this.anonId||this.fetchEventData(),hr(this.anonId)||(this.anonId=Vt()),this.postEvent(s,{sdkIdentifier:"mapbox-gl-js",sdkVersion:w,skuId:j,skuToken:this.skuToken,userId:this.anonId},h=>{h?this.errorCb(h):n&&(this.success[n]=!0)},a))}},ie=J.postMapLoadEvent.bind(J),pe=new class extends Vo{constructor(){super("gljs.performance")}postPerformanceEvent(a,n){T.EVENTS_URL&&(a||T.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:n},a)}processRequests(a){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:n,performanceData:s}=this.queue.shift(),h=function(d){const g=v.performance.getEntriesByType("resource"),_=v.performance.getEntriesByType("mark"),b=function(F){const q={};if(F){for(const H in F)if(H!=="other")for(const K of F[H]){const re=`${H}ResolveRangeMin`,ue=`${H}ResolveRangeMax`,ye=`${H}RequestCount`,le=`${H}RequestCachedCount`;q[re]=Math.min(q[re]||1/0,K.startTime),q[ue]=Math.max(q[ue]||-1/0,K.responseEnd);const ge=be=>{q[be]===void 0&&(q[be]=0),++q[be]};K.transferSize!==void 0&&K.transferSize===0&&ge(le),ge(ye)}}return q}(function(F,q){const H={};if(F)for(const K of F){const re=q(K);H[re]===void 0&&(H[re]=[]),H[re].push(K)}return H}(g,Ct)),E=v.devicePixelRatio,M=v.navigator.connection||v.navigator.mozConnection||v.navigator.webkitConnection,O={counters:[],metadata:[],attributes:[]},B=(F,q,H)=>{H!=null&&F.push({name:q,value:H.toString()})};for(const F in b)B(O.counters,F,b[F]);if(d.interactionRange[0]!==1/0&&d.interactionRange[1]!==-1/0&&(B(O.counters,"interactionRangeMin",d.interactionRange[0]),B(O.counters,"interactionRangeMax",d.interactionRange[1])),_)for(const F of Object.keys(De)){const q=De[F],H=_.find(K=>K.name===q);H&&B(O.counters,q,H.startTime)}return B(O.counters,"visibilityHidden",d.visibilityHidden),B(O.attributes,"style",function(F){if(F)for(const q of F){const H=q.name.split("?")[0];if(fi(H)){const K=H.split("/").slice(-2);if(K.length===2)return`mapbox://styles/${K[0]}/${K[1]}`}}}(g)),B(O.attributes,"terrainEnabled",d.terrainEnabled?"true":"false"),B(O.attributes,"fogEnabled",d.fogEnabled?"true":"false"),B(O.attributes,"projection",d.projection),B(O.attributes,"zoom",d.zoom),B(O.metadata,"devicePixelRatio",E),B(O.metadata,"connectionEffectiveType",M?M.effectiveType:void 0),B(O.metadata,"navigatorUserAgent",v.navigator.userAgent),B(O.metadata,"screenWidth",v.screen.width),B(O.metadata,"screenHeight",v.screen.height),B(O.metadata,"windowWidth",v.innerWidth),B(O.metadata,"windowHeight",v.innerHeight),B(O.metadata,"mapWidth",d.width/E),B(O.metadata,"mapHeight",d.height/E),B(O.metadata,"webglRenderer",d.renderer),B(O.metadata,"webglVendor",d.vendor),B(O.metadata,"sdkVersion",w),B(O.metadata,"sdkIdentifier","mapbox-gl-js"),O}(s);for(const d of h.metadata);for(const d of h.counters);for(const d of h.attributes);this.postEvent(n,h,()=>{},a)}},Se=pe.postPerformanceEvent.bind(pe),Ie=new class extends Vo{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(a,n,s,h){if(!T.API_URL||!T.SESSION_PATH)return;const d=oi(T.API_URL+T.SESSION_PATH);d.params.push(`sku=${n||""}`),d.params.push(`access_token=${h||T.ACCESS_TOKEN||""}`);const g={url:di(d),headers:{"Content-Type":"text/plain"}};this.pendingRequest=function(_,b){return $t(gt(_,{method:"GET"}),b)}(g,_=>{this.pendingRequest=null,s(_),this.saveEventData(),this.processRequests(h)})}getSessionAPI(a,n,s,h){this.skuToken=n,this.errorCb=h,T.SESSION_PATH&&T.API_URL&&(s||T.ACCESS_TOKEN?this.queueRequest({id:a,timestamp:Date.now()},s):this.errorCb(new Error(kr)))}processRequests(a){if(this.pendingRequest||this.queue.length===0)return;const{id:n,timestamp:s}=this.queue.shift();n&&this.success[n]||this.getSession(s,this.skuToken,h=>{h?this.errorCb(h):n&&(this.success[n]=!0)},a)}},Ae=Ie.getSessionAPI.bind(Ie),Te=new Set,De={create:"create",load:"load",fullLoad:"fullLoad"},at={mark(a){v.performance.mark(a)},measure(a,n,s){v.performance.measure(a,n,s)}};function Ct(a){const n=a.name.split("?")[0];return Cn(n)&&n.includes("mapbox-gl.js")?"javascript":Cn(n)&&n.includes("mapbox-gl.css")?"css":function(s){return T.API_FONTS_REGEX.test(s)}(n)?"fontRange":To(n)?"sprite":fi(n)?"style":function(s){return T.API_TILEJSON_REGEX.test(s)}(n)?"tilejson":"other"}const ft=v.performance;function Kt(a){const n=a?a.url.toString():void 0;return ft.getEntriesByName(n)}let Gt,Ut,tr,pr;const zr={now:()=>tr!==void 0?tr:v.performance.now(),setNow(a){tr=a},restoreNow(){tr=void 0},frame(a){const n=v.requestAnimationFrame(a);return{cancel:()=>v.cancelAnimationFrame(n)}},getImageData(a,n=0){const{width:s,height:h}=a;pr||(pr=v.document.createElement("canvas"));const d=pr.getContext("2d",{willReadFrequently:!0});if(!d)throw new Error("failed to create canvas 2d context");return(s>pr.width||h>pr.height)&&(pr.width=s,pr.height=h),d.clearRect(-n,-n,s+2*n,h+2*n),d.drawImage(a,0,0,s,h),d.getImageData(-n,-n,s+2*n,h+2*n)},resolveURL:a=>(Gt||(Gt=v.document.createElement("a")),Gt.href=a,Gt.href),get devicePixelRatio(){return v.devicePixelRatio},get prefersReducedMotion(){return!!v.matchMedia&&(Ut==null&&(Ut=v.matchMedia("(prefers-reduced-motion: reduce)")),Ut.matches)}};function Jt(a,n,s){s[a]&&s[a].indexOf(n)!==-1||(s[a]=s[a]||[],s[a].push(n))}function qr(a,n,s){if(s&&s[a]){const h=s[a].indexOf(n);h!==-1&&s[a].splice(h,1)}}class Wr{constructor(n,s={}){gt(this,s),this.type=n}}class ls extends Wr{constructor(n,s={}){super("error",gt({error:n},s))}}class La{on(n,s){return this._listeners=this._listeners||{},Jt(n,s,this._listeners),this}off(n,s){return qr(n,s,this._listeners),qr(n,s,this._oneTimeListeners),this}once(n,s){return s?(this._oneTimeListeners=this._oneTimeListeners||{},Jt(n,s,this._oneTimeListeners),this):new Promise(h=>this.once(n,h))}fire(n,s){typeof n=="string"&&(n=new Wr(n,s||{}));const h=n.type;if(this.listens(h)){n.target=this;const d=this._listeners&&this._listeners[h]?this._listeners[h].slice():[];for(const b of d)b.call(this,n);const g=this._oneTimeListeners&&this._oneTimeListeners[h]?this._oneTimeListeners[h].slice():[];for(const b of g)qr(h,b,this._oneTimeListeners),b.call(this,n);const _=this._eventedParent;_&&(gt(n,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),_.fire(n))}else n instanceof ls&&console.error(n.error);return this}listens(n){return!!(this._listeners&&this._listeners[n]&&this._listeners[n].length>0||this._oneTimeListeners&&this._oneTimeListeners[n]&&this._oneTimeListeners[n].length>0||this._eventedParent&&this._eventedParent.listens(n))}setEventedParent(n,s){return this._eventedParent=n,this._eventedParentData=s,this}}var Xe=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360,"units":"degrees"},"pitch":{"type":"number","default":0,"units":"degrees"},"light":{"type":"light"},"terrain":{"type":"terrain"},"fog":{"type":"fog"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"scheme":{"type":"enum","values":{"xyz":{},"tms":{}},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":{}}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512,"units":"pixels"},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":{},"mapbox":{}},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":{}}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":{}}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":{}}},"url":{"required":true,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"hillshade":{},"background":{},"sky":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],"layout_background":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","private":true,"default":0,"minimum":0,"maximum":1,"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":{},"round":{},"square":{}},"default":"butt","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":{},"round":{},"miter":{}},"default":"miter","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"requires":[{"line-join":"miter"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"requires":[{"line-join":"round"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":{},"line":{},"line-center":{}},"default":"point","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"units":"pixels","requires":[{"symbol-placement":"line"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":{},"viewport-y":{},"source":{}},"default":"auto","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"units":"factor of the original icon size","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{"type":"enum","values":{"none":{},"width":{},"height":{},"both":{}},"default":"none","requires":["icon-image","text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"units":"pixels","requires":["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"requires":["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":{},"viewport":{},"auto":{}},"default":"auto","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{"type":"number","default":10,"minimum":0,"units":"ems","requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"units":"ems","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":{},"left":{},"center":{},"right":{}},"default":"center","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","units":"ems","default":0,"requires":["text-field"],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"requires":["text-field",{"symbol-placement":["point"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":{},"left":{},"right":{},"top":{},"bottom":{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},"default":"center","requires":["text-field",{"!":"text-variable-anchor"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"units":"degrees","requires":["text-field",{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":{},"vertical":{}},"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"units":"degrees","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"requires":["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":{},"uppercase":{},"lowercase":{}},"default":"none","requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","units":"ems","length":2,"default":[0,0],"requires":["text-field",{"!":"text-radial-offset"}],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"requires":["text-field"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"requires":["text-field","icon-image"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":{},"none":{}},"default":"visible","property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"transition":false,"property-type":"data-driven","expression":{"interpolated":false,"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},"in":{},"!in":{},"all":{},"any":{},"none":{},"has":{},"!has":{},"within":{}}},"geometry_type":{"type":"enum","values":{"Point":{},"LineString":{},"Polygon":{}}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":{},"exponential":{},"interval":{},"categorical":{}},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":{},"lab":{},"hcl":{}},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":{},"viewport":{}},"property-type":"data-constant","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":{},"equalEarth":{},"equirectangular":{},"lambertConformalConic":{},"mercator":{},"naturalEarth":{},"winkelTripel":{},"globe":{}},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90],"transition":false,"requires":[{"name":["albers","lambertConformalConic"]}]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["source"]}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"requires":[{"!":"fill-pattern"},{"fill-antialias":true}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"fill-extrusion-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["fill-extrusion-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"units":"meters","transition":true,"requires":["fill-extrusion-height"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","private":true,"default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","private":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"requires":["fill-extrusion-edge-radius"]}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"line-pattern"}],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["line-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"transition":false,"units":"line widths","requires":[{"!":"line-pattern"}],"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","transition":false,"requires":[{"!":"line-pattern"},{"source":"geojson","has":{"lineMetrics":true}}],"expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"transition":false,"requires":[{"source":"geojson","has":{"lineMetrics":true}}],"property-type":"constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["circle-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"units":"pixels","expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"transition":false,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"transition":false,"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["icon-image"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["icon-image","icon-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"units":"pixels","requires":["text-field"],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"map","requires":["text-field","text-translate"],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"units":"degrees","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":{},"nearest":{}},"default":"linear","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"transition":false,"units":"milliseconds","expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"transition":false,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":{},"viewport":{}},"default":"viewport","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_background":{"background-color":{"type":"color","default":"#000000","transition":true,"requires":[{"!":"background-pattern"}],"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":{},"atmosphere":{}},"default":"atmosphere","expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"requires":[{"sky-type":"atmosphere"}],"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","requires":[{"sky-type":"atmosphere"}],"default":10,"minimum":0,"maximum":100,"transition":false,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","requires":[{"sky-type":"gradient"}],"value":"number","default":[0,0],"length":2,"units":"degrees","minimum":[0,0],"maximum":[360,180],"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","requires":[{"sky-type":"gradient"}],"default":90,"minimum":0,"maximum":180,"transition":false,"expression":{"interpolated":false,"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"transition":false,"requires":[{"sky-type":"gradient"}],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","transition":false,"requires":[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"transition":{"duration":{"type":"number","default":300,"minimum":0,"units":"milliseconds"},"delay":{"type":"number","default":0,"minimum":0,"units":"milliseconds"}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function za(a,...n){for(const s of n)for(const h in s)a[h]=s[h];return a}function Un(a){return a instanceof Number||a instanceof String||a instanceof Boolean?a.valueOf():a}function cs(a){if(Array.isArray(a))return a.map(cs);if(a instanceof Object&&!(a instanceof Number||a instanceof String||a instanceof Boolean)){const n={};for(const s in a)n[s]=cs(a[s]);return n}return Un(a)}class Fy extends Error{constructor(n,s){super(s),this.message=s,this.key=n}}var la=Fy;class zl{constructor(n,s=[]){this.parent=n,this.bindings={};for(const[h,d]of s)this.bindings[h]=d}concat(n){return new zl(this,n)}get(n){if(this.bindings[n])return this.bindings[n];if(this.parent)return this.parent.get(n);throw new Error(`${n} not found in scope.`)}has(n){return!!this.bindings[n]||!!this.parent&&this.parent.has(n)}}var Ny=zl;const Bl={kind:"null"},wt={kind:"number"},Er={kind:"string"},vr={kind:"boolean"},ca={kind:"color"},Ws={kind:"object"},yr={kind:"value"},Kc={kind:"collator"},$l={kind:"formatted"},Fl={kind:"resolvedImage"};function Ni(a,n){return{kind:"array",itemType:a,N:n}}function rn(a){if(a.kind==="array"){const n=rn(a.itemType);return typeof a.N=="number"?`array<${n}, ${a.N}>`:a.itemType.kind==="value"?"array":`array<${n}>`}return a.kind}const jy=[Bl,wt,Er,vr,ca,$l,Ws,Ni(yr),Fl];function Ji(a,n){if(n.kind==="error")return null;if(a.kind==="array"){if(n.kind==="array"&&(n.N===0&&n.itemType.kind==="value"||!Ji(a.itemType,n.itemType))&&(typeof a.N!="number"||a.N===n.N))return null}else{if(a.kind===n.kind)return null;if(a.kind==="value"){for(const s of jy)if(!Ji(s,n))return null}}return`Expected ${rn(a)} but found ${rn(n)} instead.`}function tp(a,n){return n.some(s=>s.kind===a.kind)}function Hs(a,n){return n.some(s=>s==="null"?a===null:s==="array"?Array.isArray(a):s==="object"?a&&!Array.isArray(a)&&typeof a=="object":s===typeof a)}var rp,gh={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Yc(a){return(a=Math.round(a))<0?0:a>255?255:a}function Zs(a){return Yc(a[a.length-1]==="%"?parseFloat(a)/100*255:parseInt(a))}function Nl(a){return(n=a[a.length-1]==="%"?parseFloat(a)/100:parseFloat(a))<0?0:n>1?1:n;var n}function np(a,n,s){return s<0?s+=1:s>1&&(s-=1),6*s<1?a+(n-a)*s*6:2*s<1?n:3*s<2?a+(n-a)*(2/3-s)*6:a}try{rp={}.parseCSSColor=function(a){var n,s=a.replace(/ /g,"").toLowerCase();if(s in gh)return gh[s].slice();if(s[0]==="#")return s.length===4?(n=parseInt(s.substr(1),16))>=0&&n<=4095?[(3840&n)>>4|(3840&n)>>8,240&n|(240&n)>>4,15&n|(15&n)<<4,1]:null:s.length===7&&(n=parseInt(s.substr(1),16))>=0&&n<=16777215?[(16711680&n)>>16,(65280&n)>>8,255&n,1]:null;var h=s.indexOf("("),d=s.indexOf(")");if(h!==-1&&d+1===s.length){var g=s.substr(0,h),_=s.substr(h+1,d-(h+1)).split(","),b=1;switch(g){case"rgba":if(_.length!==4)return null;b=Nl(_.pop());case"rgb":return _.length!==3?null:[Zs(_[0]),Zs(_[1]),Zs(_[2]),b];case"hsla":if(_.length!==4)return null;b=Nl(_.pop());case"hsl":if(_.length!==3)return null;var E=(parseFloat(_[0])%360+360)%360/360,M=Nl(_[1]),O=Nl(_[2]),B=O<=.5?O*(M+1):O+M-O*M,F=2*O-B;return[Yc(255*np(F,B,E+1/3)),Yc(255*np(F,B,E)),Yc(255*np(F,B,E-1/3)),b];default:return null}}return null}}catch{}class Qi{constructor(n,s,h,d=1){this.r=n,this.g=s,this.b=h,this.a=d}static parse(n){if(!n)return;if(n instanceof Qi)return n;if(typeof n!="string")return;const s=rp(n);return s?new Qi(s[0]/255*s[3],s[1]/255*s[3],s[2]/255*s[3],s[3]):void 0}toString(){const[n,s,h,d]=this.toArray();return`rgba(${Math.round(n)},${Math.round(s)},${Math.round(h)},${d})`}toArray(){const{r:n,g:s,b:h,a:d}=this;return d===0?[0,0,0,0]:[255*n/d,255*s/d,255*h/d,d]}toArray01(){const{r:n,g:s,b:h,a:d}=this;return d===0?[0,0,0,0]:[n/d,s/d,h/d,d]}toArray01PremultipliedAlpha(){const{r:n,g:s,b:h,a:d}=this;return[n,s,h,d]}}Qi.black=new Qi(0,0,0,1),Qi.white=new Qi(1,1,1,1),Qi.transparent=new Qi(0,0,0,0),Qi.red=new Qi(1,0,0,1),Qi.blue=new Qi(0,0,1,1);var zn=Qi;class yh{constructor(n,s,h){this.sensitivity=n?s?"variant":"case":s?"accent":"base",this.locale=h,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(n,s){return this.collator.compare(n,s)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Jc{constructor(n,s,h,d,g){this.text=n.normalize?n.normalize():n,this.image=s,this.scale=h,this.fontStack=d,this.textColor=g}}class eo{constructor(n){this.sections=n}static fromString(n){return new eo([new Jc(n,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(n=>n.text.length!==0||n.image&&n.image.name.length!==0)}static factory(n){return n instanceof eo?n:eo.fromString(n)}toString(){return this.sections.length===0?"":this.sections.map(n=>n.text).join("")}serialize(){const n=["format"];for(const s of this.sections){if(s.image){n.push(["image",s.image.name]);continue}n.push(s.text);const h={};s.fontStack&&(h["text-font"]=["literal",s.fontStack.split(",")]),s.scale&&(h["font-scale"]=s.scale),s.textColor&&(h["text-color"]=["rgba"].concat(s.textColor.toArray())),n.push(h)}return n}}class ji{constructor(n){this.name=n.name,this.available=n.available}toString(){return this.name}static fromString(n){return n?new ji({name:n,available:!1}):null}serialize(){return["image",this.name]}}function Uy(a,n,s,h){return typeof a=="number"&&a>=0&&a<=255&&typeof n=="number"&&n>=0&&n<=255&&typeof s=="number"&&s>=0&&s<=255?h===void 0||typeof h=="number"&&h>=0&&h<=1?null:`Invalid rgba value [${[a,n,s,h].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof h=="number"?[a,n,s,h]:[a,n,s]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function _h(a){if(a===null||typeof a=="string"||typeof a=="boolean"||typeof a=="number"||a instanceof zn||a instanceof yh||a instanceof eo||a instanceof ji)return!0;if(Array.isArray(a)){for(const n of a)if(!_h(n))return!1;return!0}if(typeof a=="object"){for(const n in a)if(!_h(a[n]))return!1;return!0}return!1}function Yn(a){if(a===null)return Bl;if(typeof a=="string")return Er;if(typeof a=="boolean")return vr;if(typeof a=="number")return wt;if(a instanceof zn)return ca;if(a instanceof yh)return Kc;if(a instanceof eo)return $l;if(a instanceof ji)return Fl;if(Array.isArray(a)){const n=a.length;let s;for(const h of a){const d=Yn(h);if(s){if(s===d)continue;s=yr;break}s=d}return Ni(s||yr,n)}return Ws}function Qc(a){const n=typeof a;return a===null?"":n==="string"||n==="number"||n==="boolean"?String(a):a instanceof zn||a instanceof eo||a instanceof ji?a.toString():JSON.stringify(a)}class ip{constructor(n,s){this.type=n,this.value=s}static parse(n,s){if(n.length!==2)return s.error(`'literal' expression requires exactly one argument, but found ${n.length-1} instead.`);if(!_h(n[1]))return s.error("invalid value");const h=n[1];let d=Yn(h);const g=s.expectedType;return d.kind!=="array"||d.N!==0||!g||g.kind!=="array"||typeof g.N=="number"&&g.N!==0||(d=g),new ip(d,h)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof zn?["rgba"].concat(this.value.toArray()):this.value instanceof eo?this.value.serialize():this.value}}var eu=ip,pi=class{constructor(a){this.name="ExpressionEvaluationError",this.message=a}toJSON(){return this.message}};const vh={string:Er,number:wt,boolean:vr,object:Ws};class jl{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");let h,d=1;const g=n[0];if(g==="array"){let b,E;if(n.length>2){const M=n[1];if(typeof M!="string"||!(M in vh)||M==="object")return s.error('The item type argument of "array" must be one of string, number, boolean',1);b=vh[M],d++}else b=yr;if(n.length>3){if(n[2]!==null&&(typeof n[2]!="number"||n[2]<0||n[2]!==Math.floor(n[2])))return s.error('The length argument to "array" must be a positive integer literal',2);E=n[2],d++}h=Ni(b,E)}else h=vh[g];const _=[];for(;d<n.length;d++){const b=s.parse(n[d],d,yr);if(!b)return null;_.push(b)}return new jl(h,_)}evaluate(n){for(let s=0;s<this.args.length;s++){const h=this.args[s].evaluate(n);if(!Ji(this.type,Yn(h)))return h;if(s===this.args.length-1)throw new pi(`Expected value to be of type ${rn(this.type)}, but found ${rn(Yn(h))} instead.`)}return null}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){const n=this.type,s=[n.kind];if(n.kind==="array"){const h=n.itemType;if(h.kind==="string"||h.kind==="number"||h.kind==="boolean"){s.push(h.kind);const d=n.N;(typeof d=="number"||this.args.length>1)&&s.push(d)}}return s.concat(this.args.map(h=>h.serialize()))}}var Ba=jl;class tu{constructor(n){this.type=$l,this.sections=n}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const h=n[1];if(!Array.isArray(h)&&typeof h=="object")return s.error("First argument must be an image or text section.");const d=[];let g=!1;for(let _=1;_<=n.length-1;++_){const b=n[_];if(g&&typeof b=="object"&&!Array.isArray(b)){g=!1;let E=null;if(b["font-scale"]&&(E=s.parse(b["font-scale"],1,wt),!E))return null;let M=null;if(b["text-font"]&&(M=s.parse(b["text-font"],1,Ni(Er)),!M))return null;let O=null;if(b["text-color"]&&(O=s.parse(b["text-color"],1,ca),!O))return null;const B=d[d.length-1];B.scale=E,B.font=M,B.textColor=O}else{const E=s.parse(n[_],1,yr);if(!E)return null;const M=E.type.kind;if(M!=="string"&&M!=="value"&&M!=="null"&&M!=="resolvedImage")return s.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");g=!0,d.push({content:E,scale:null,font:null,textColor:null})}}return new tu(d)}evaluate(n){return new eo(this.sections.map(s=>{const h=s.content.evaluate(n);return Yn(h)===Fl?new Jc("",h,null,null,null):new Jc(Qc(h),null,s.scale?s.scale.evaluate(n):null,s.font?s.font.evaluate(n).join(","):null,s.textColor?s.textColor.evaluate(n):null)}))}eachChild(n){for(const s of this.sections)n(s.content),s.scale&&n(s.scale),s.font&&n(s.font),s.textColor&&n(s.textColor)}outputDefined(){return!1}serialize(){const n=["format"];for(const s of this.sections){n.push(s.content.serialize());const h={};s.scale&&(h["font-scale"]=s.scale.serialize()),s.font&&(h["text-font"]=s.font.serialize()),s.textColor&&(h["text-color"]=s.textColor.serialize()),n.push(h)}return n}}class xh{constructor(n){this.type=Fl,this.input=n}static parse(n,s){if(n.length!==2)return s.error("Expected two arguments.");const h=s.parse(n[1],1,Er);return h?new xh(h):s.error("No image name provided.")}evaluate(n){const s=this.input.evaluate(n),h=ji.fromString(s);return h&&n.availableImages&&(h.available=n.availableImages.indexOf(s)>-1),h}eachChild(n){n(this.input)}outputDefined(){return!1}serialize(){return["image",this.input.serialize()]}}const ab={"to-boolean":vr,"to-color":ca,"to-number":wt,"to-string":Er};class op{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expected at least one argument.");const h=n[0];if((h==="to-boolean"||h==="to-string")&&n.length!==2)return s.error("Expected one argument.");const d=ab[h],g=[];for(let _=1;_<n.length;_++){const b=s.parse(n[_],_,yr);if(!b)return null;g.push(b)}return new op(d,g)}evaluate(n){if(this.type.kind==="boolean")return!!this.args[0].evaluate(n);if(this.type.kind==="color"){let s,h;for(const d of this.args){if(s=d.evaluate(n),h=null,s instanceof zn)return s;if(typeof s=="string"){const g=n.parseColor(s);if(g)return g}else if(Array.isArray(s)&&(h=s.length<3||s.length>4?`Invalid rbga value ${JSON.stringify(s)}: expected an array containing either three or four numeric values.`:Uy(s[0],s[1],s[2],s[3]),!h))return new zn(s[0]/255,s[1]/255,s[2]/255,s[3])}throw new pi(h||`Could not parse color from value '${typeof s=="string"?s:String(JSON.stringify(s))}'`)}if(this.type.kind==="number"){let s=null;for(const h of this.args){if(s=h.evaluate(n),s===null)return 0;const d=Number(s);if(!isNaN(d))return d}throw new pi(`Could not convert ${JSON.stringify(s)} to number.`)}return this.type.kind==="formatted"?eo.fromString(Qc(this.args[0].evaluate(n))):this.type.kind==="resolvedImage"?ji.fromString(Qc(this.args[0].evaluate(n))):Qc(this.args[0].evaluate(n))}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){if(this.type.kind==="formatted")return new tu([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new xh(this.args[0]).serialize();const n=[`to-${this.type.kind}`];return this.eachChild(s=>{n.push(s.serialize())}),n}}var Ul=op;const Vy=["Unknown","Point","LineString","Polygon"];var ru=class{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Vy[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const a=this.featureDistanceData.center,n=this.featureDistanceData.scale,{x:s,y:h}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(s*n-a[0])+this.featureDistanceData.bearing[1]*(h*n-a[1])}return 0}parseColor(a){let n=this._parseColorCache[a];return n||(n=this._parseColorCache[a]=zn.parse(a)),n}};class Vl{constructor(n,s,h,d){this.name=n,this.type=s,this._evaluate=h,this.args=d}evaluate(n){return this._evaluate(n,this.args)}eachChild(n){this.args.forEach(n)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(n=>n.serialize()))}static parse(n,s){const h=n[0],d=Vl.definitions[h];if(!d)return s.error(`Unknown expression "${h}". If you wanted a literal array, use ["literal", [...]].`,0);const g=Array.isArray(d)?d[0]:d.type,_=Array.isArray(d)?[[d[1],d[2]]]:d.overloads,b=_.filter(([M])=>!Array.isArray(M)||M.length===n.length-1);let E=null;for(const[M,O]of b){E=new hp(s.registry,s.path,null,s.scope);const B=[];let F=!1;for(let q=1;q<n.length;q++){const H=n[q],K=Array.isArray(M)?M[q-1]:M.type,re=E.parse(H,1+B.length,K);if(!re){F=!0;break}B.push(re)}if(!F)if(Array.isArray(M)&&M.length!==B.length)E.error(`Expected ${M.length} arguments, but found ${B.length} instead.`);else{for(let q=0;q<B.length;q++){const H=Array.isArray(M)?M[q]:M.type,K=B[q];E.concat(q+1).checkSubtype(H,K.type)}if(E.errors.length===0)return new Vl(h,g,O,B)}}if(b.length===1)s.errors.push(...E.errors);else{const M=(b.length?b:_).map(([B])=>{return F=B,Array.isArray(F)?`(${F.map(rn).join(", ")})`:`(${rn(F.type)}...)`;var F}).join(" | "),O=[];for(let B=1;B<n.length;B++){const F=s.parse(n[B],1+O.length);if(!F)return null;O.push(rn(F.type))}s.error(`Expected arguments of type ${M}, but found (${O.join(", ")}) instead.`)}return null}static register(n,s){Vl.definitions=s;for(const h in s)n[h]=Vl}}var us=Vl;class bh{constructor(n,s,h){this.type=Kc,this.locale=h,this.caseSensitive=n,this.diacriticSensitive=s}static parse(n,s){if(n.length!==2)return s.error("Expected one argument.");const h=n[1];if(typeof h!="object"||Array.isArray(h))return s.error("Collator options argument must be an object.");const d=s.parse(h["case-sensitive"]!==void 0&&h["case-sensitive"],1,vr);if(!d)return null;const g=s.parse(h["diacritic-sensitive"]!==void 0&&h["diacritic-sensitive"],1,vr);if(!g)return null;let _=null;return h.locale&&(_=s.parse(h.locale,1,Er),!_)?null:new bh(d,g,_)}evaluate(n){return new yh(this.caseSensitive.evaluate(n),this.diacriticSensitive.evaluate(n),this.locale?this.locale.evaluate(n):null)}eachChild(n){n(this.caseSensitive),n(this.diacriticSensitive),this.locale&&n(this.locale)}outputDefined(){return!1}serialize(){const n={};return n["case-sensitive"]=this.caseSensitive.serialize(),n["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(n.locale=this.locale.serialize()),["collator",n]}}const hs=8192;function Ao(a,n){a[0]=Math.min(a[0],n[0]),a[1]=Math.min(a[1],n[1]),a[2]=Math.max(a[2],n[0]),a[3]=Math.max(a[3],n[1])}function nu(a,n){return!(a[0]<=n[0]||a[2]>=n[2]||a[1]<=n[1]||a[3]>=n[3])}function Gy(a,n){const s=(180+a[0])/360,h=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a[1]*Math.PI/360)))/360,d=Math.pow(2,n.z);return[Math.round(s*d*hs),Math.round(h*d*hs)]}function qy(a,n,s){const h=a[0]-n[0],d=a[1]-n[1],g=a[0]-s[0],_=a[1]-s[1];return h*_-g*d==0&&h*g<=0&&d*_<=0}function wh(a,n){let s=!1;for(let _=0,b=n.length;_<b;_++){const E=n[_];for(let M=0,O=E.length;M<O-1;M++){if(qy(a,E[M],E[M+1]))return!1;(d=E[M])[1]>(h=a)[1]!=(g=E[M+1])[1]>h[1]&&h[0]<(g[0]-d[0])*(h[1]-d[1])/(g[1]-d[1])+d[0]&&(s=!s)}}var h,d,g;return s}function Wy(a,n){for(let s=0;s<n.length;s++)if(wh(a,n[s]))return!0;return!1}function ap(a,n,s,h){const d=h[0]-s[0],g=h[1]-s[1],_=(a[0]-s[0])*g-d*(a[1]-s[1]),b=(n[0]-s[0])*g-d*(n[1]-s[1]);return _>0&&b<0||_<0&&b>0}function sp(a,n,s){for(const M of s)for(let O=0;O<M.length-1;++O)if((b=[(_=M[O+1])[0]-(g=M[O])[0],_[1]-g[1]])[0]*(E=[(d=n)[0]-(h=a)[0],d[1]-h[1]])[1]-b[1]*E[0]!=0&&ap(h,d,g,_)&&ap(g,_,h,d))return!0;var h,d,g,_,b,E;return!1}function Gl(a,n){for(let s=0;s<a.length;++s)if(!wh(a[s],n))return!1;for(let s=0;s<a.length-1;++s)if(sp(a[s],a[s+1],n))return!1;return!0}function Hy(a,n){for(let s=0;s<n.length;s++)if(Gl(a,n[s]))return!0;return!1}function Sh(a,n,s){const h=[];for(let d=0;d<a.length;d++){const g=[];for(let _=0;_<a[d].length;_++){const b=Gy(a[d][_],s);Ao(n,b),g.push(b)}h.push(g)}return h}function Eh(a,n,s){const h=[];for(let d=0;d<a.length;d++){const g=Sh(a[d],n,s);h.push(g)}return h}function lp(a,n,s,h){if(a[0]<s[0]||a[0]>s[2]){const d=.5*h;let g=a[0]-s[0]>d?-h:s[0]-a[0]>d?h:0;g===0&&(g=a[0]-s[2]>d?-h:s[2]-a[0]>d?h:0),a[0]+=g}Ao(n,a)}function Xs(a,n,s,h){const d=Math.pow(2,h.z)*hs,g=[h.x*hs,h.y*hs],_=[];if(!a)return _;for(const b of a)for(const E of b){const M=[E.x+g[0],E.y+g[1]];lp(M,n,s,d),_.push(M)}return _}function $r(a,n,s,h){const d=Math.pow(2,h.z)*hs,g=[h.x*hs,h.y*hs],_=[];if(!a)return _;for(const E of a){const M=[];for(const O of E){const B=[O.x+g[0],O.y+g[1]];Ao(n,B),M.push(B)}_.push(M)}if(n[2]-n[0]<=d/2){(b=n)[0]=b[1]=1/0,b[2]=b[3]=-1/0;for(const E of _)for(const M of E)lp(M,n,s,d)}var b;return _}class iu{constructor(n,s){this.type=vr,this.geojson=n,this.geometries=s}static parse(n,s){if(n.length!==2)return s.error(`'within' expression requires exactly one argument, but found ${n.length-1} instead.`);if(_h(n[1])){const h=n[1];if(h.type==="FeatureCollection")for(let d=0;d<h.features.length;++d){const g=h.features[d].geometry.type;if(g==="Polygon"||g==="MultiPolygon")return new iu(h,h.features[d].geometry)}else if(h.type==="Feature"){const d=h.geometry.type;if(d==="Polygon"||d==="MultiPolygon")return new iu(h,h.geometry)}else if(h.type==="Polygon"||h.type==="MultiPolygon")return new iu(h,h)}return s.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(n){if(n.geometry()!=null&&n.canonicalID()!=null){if(n.geometryType()==="Point")return function(s,h){const d=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],_=s.canonicalID();if(!_)return!1;if(h.type==="Polygon"){const b=Sh(h.coordinates,g,_),E=Xs(s.geometry(),d,g,_);if(!nu(d,g))return!1;for(const M of E)if(!wh(M,b))return!1}if(h.type==="MultiPolygon"){const b=Eh(h.coordinates,g,_),E=Xs(s.geometry(),d,g,_);if(!nu(d,g))return!1;for(const M of E)if(!Wy(M,b))return!1}return!0}(n,this.geometries);if(n.geometryType()==="LineString")return function(s,h){const d=[1/0,1/0,-1/0,-1/0],g=[1/0,1/0,-1/0,-1/0],_=s.canonicalID();if(!_)return!1;if(h.type==="Polygon"){const b=Sh(h.coordinates,g,_),E=$r(s.geometry(),d,g,_);if(!nu(d,g))return!1;for(const M of E)if(!Gl(M,b))return!1}if(h.type==="MultiPolygon"){const b=Eh(h.coordinates,g,_),E=$r(s.geometry(),d,g,_);if(!nu(d,g))return!1;for(const M of E)if(!Hy(M,b))return!1}return!0}(n,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}var cp=iu;function ou(a){if(a instanceof us&&(a.name==="get"&&a.args.length===1||a.name==="feature-state"||a.name==="has"&&a.args.length===1||a.name==="properties"||a.name==="geometry-type"||a.name==="id"||/^filter-/.test(a.name))||a instanceof cp)return!1;let n=!0;return a.eachChild(s=>{n&&!ou(s)&&(n=!1)}),n}function au(a){if(a instanceof us&&a.name==="feature-state")return!1;let n=!0;return a.eachChild(s=>{n&&!au(s)&&(n=!1)}),n}function Th(a,n){if(a instanceof us&&n.indexOf(a.name)>=0)return!1;let s=!0;return a.eachChild(h=>{s&&!Th(h,n)&&(s=!1)}),s}class Ah{constructor(n,s){this.type=s.type,this.name=n,this.boundExpression=s}static parse(n,s){if(n.length!==2||typeof n[1]!="string")return s.error("'var' expression requires exactly one string literal argument.");const h=n[1];return s.scope.has(h)?new Ah(h,s.scope.get(h)):s.error(`Unknown variable "${h}". Make sure "${h}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(n){return this.boundExpression.evaluate(n)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}var up=Ah;class Mh{constructor(n,s=[],h,d=new Ny,g=[]){this.registry=n,this.path=s,this.key=s.map(_=>`[${_}]`).join(""),this.scope=d,this.errors=g,this.expectedType=h}parse(n,s,h,d,g={}){return s?this.concat(s,h,d)._parse(n,g):this._parse(n,g)}_parse(n,s){function h(d,g,_){return _==="assert"?new Ba(g,[d]):_==="coerce"?new Ul(g,[d]):d}if(n!==null&&typeof n!="string"&&typeof n!="boolean"&&typeof n!="number"||(n=["literal",n]),Array.isArray(n)){if(n.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const d=n[0];if(typeof d!="string")return this.error(`Expression name must be a string, but found ${typeof d} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const g=this.registry[d];if(g){let _=g.parse(n,this);if(!_)return null;if(this.expectedType){const b=this.expectedType,E=_.type;if(b.kind!=="string"&&b.kind!=="number"&&b.kind!=="boolean"&&b.kind!=="object"&&b.kind!=="array"||E.kind!=="value")if(b.kind!=="color"&&b.kind!=="formatted"&&b.kind!=="resolvedImage"||E.kind!=="value"&&E.kind!=="string"){if(this.checkSubtype(b,E))return null}else _=h(_,b,s.typeAnnotation||"coerce");else _=h(_,b,s.typeAnnotation||"assert")}if(!(_ instanceof eu)&&_.type.kind!=="resolvedImage"&&fs(_)){const b=new ru;try{_=new eu(_.type,_.evaluate(b))}catch(E){return this.error(E.message),null}}return _}return this.error(`Unknown expression "${d}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(n===void 0?"'undefined' value invalid. Use null instead.":typeof n=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof n} instead.`)}concat(n,s,h){const d=typeof n=="number"?this.path.concat(n):this.path,g=h?this.scope.concat(h):this.scope;return new Mh(this.registry,d,s||null,g,this.errors)}error(n,...s){const h=`${this.key}${s.map(d=>`[${d}]`).join("")}`;this.errors.push(new la(h,n))}checkSubtype(n,s){const h=Ji(n,s);return h&&this.error(h),h}}var hp=Mh;function fs(a){if(a instanceof up)return fs(a.boundExpression);if(a instanceof us&&a.name==="error"||a instanceof bh||a instanceof cp)return!1;const n=a instanceof Ul||a instanceof Ba;let s=!0;return a.eachChild(h=>{s=n?s&&fs(h):s&&h instanceof eu}),!!s&&ou(a)&&Th(a,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}function Ks(a,n){const s=a.length-1;let h,d,g=0,_=s,b=0;for(;g<=_;)if(b=Math.floor((g+_)/2),h=a[b],d=a[b+1],h<=n){if(b===s||n<d)return b;g=b+1}else{if(!(h>n))throw new pi("Input is not a number.");_=b-1}return 0}class Ch{constructor(n,s,h){this.type=n,this.input=s,this.labels=[],this.outputs=[];for(const[d,g]of h)this.labels.push(d),this.outputs.push(g)}static parse(n,s){if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");const h=s.parse(n[1],1,wt);if(!h)return null;const d=[];let g=null;s.expectedType&&s.expectedType.kind!=="value"&&(g=s.expectedType);for(let _=1;_<n.length;_+=2){const b=_===1?-1/0:n[_],E=n[_+1],M=_,O=_+1;if(typeof b!="number")return s.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',M);if(d.length&&d[d.length-1][0]>=b)return s.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',M);const B=s.parse(E,O,g);if(!B)return null;g=g||B.type,d.push([b,B])}return new Ch(g,h,d)}evaluate(n){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(n);const d=this.input.evaluate(n);if(d<=s[0])return h[0].evaluate(n);const g=s.length;return d>=s[g-1]?h[g-1].evaluate(n):h[Ks(s,d)].evaluate(n)}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}serialize(){const n=["step",this.input.serialize()];for(let s=0;s<this.labels.length;s++)s>0&&n.push(this.labels[s]),n.push(this.outputs[s].serialize());return n}}var fp=Ch;function Pr(a,n,s){return a*(1-s)+n*s}var su=Object.freeze({__proto__:null,number:Pr,color:function(a,n,s){return new zn(Pr(a.r,n.r,s),Pr(a.g,n.g,s),Pr(a.b,n.b,s),Pr(a.a,n.a,s))},array:function(a,n,s){return a.map((h,d)=>Pr(h,n[d],s))}});const Zy=.95047,Xy=1.08883,dp=4/29,pp=6/29,mp=3*pp*pp,Ky=Math.PI/180,sb=180/Math.PI;function Ph(a){return a>.008856451679035631?Math.pow(a,1/3):a/mp+dp}function gp(a){return a>pp?a*a*a:mp*(a-dp)}function Ih(a){return 255*(a<=.0031308?12.92*a:1.055*Math.pow(a,1/2.4)-.055)}function kh(a){return(a/=255)<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4)}function Yy(a){const n=kh(a.r),s=kh(a.g),h=kh(a.b),d=Ph((.4124564*n+.3575761*s+.1804375*h)/Zy),g=Ph((.2126729*n+.7151522*s+.072175*h)/1);return{l:116*g-16,a:500*(d-g),b:200*(g-Ph((.0193339*n+.119192*s+.9503041*h)/Xy)),alpha:a.a}}function Jy(a){let n=(a.l+16)/116,s=isNaN(a.a)?n:n+a.a/500,h=isNaN(a.b)?n:n-a.b/200;return n=1*gp(n),s=Zy*gp(s),h=Xy*gp(h),new zn(Ih(3.2404542*s-1.5371385*n-.4985314*h),Ih(-.969266*s+1.8760108*n+.041556*h),Ih(.0556434*s-.2040259*n+1.0572252*h),a.alpha)}function lb(a,n,s){const h=n-a;return a+s*(h>180||h<-180?h-360*Math.round(h/360):h)}const lu={forward:Yy,reverse:Jy,interpolate:function(a,n,s){return{l:Pr(a.l,n.l,s),a:Pr(a.a,n.a,s),b:Pr(a.b,n.b,s),alpha:Pr(a.alpha,n.alpha,s)}}},cu={forward:function(a){const{l:n,a:s,b:h}=Yy(a),d=Math.atan2(h,s)*sb;return{h:d<0?d+360:d,c:Math.sqrt(s*s+h*h),l:n,alpha:a.a}},reverse:function(a){const n=a.h*Ky,s=a.c;return Jy({l:a.l,a:Math.cos(n)*s,b:Math.sin(n)*s,alpha:a.alpha})},interpolate:function(a,n,s){return{h:lb(a.h,n.h,s),c:Pr(a.c,n.c,s),l:Pr(a.l,n.l,s),alpha:Pr(a.alpha,n.alpha,s)}}};var Qy=Object.freeze({__proto__:null,lab:lu,hcl:cu});class uu{constructor(n,s,h,d,g){this.type=n,this.operator=s,this.interpolation=h,this.input=d,this.labels=[],this.outputs=[];for(const[_,b]of g)this.labels.push(_),this.outputs.push(b)}static interpolationFactor(n,s,h,d){let g=0;if(n.name==="exponential")g=yp(s,n.base,h,d);else if(n.name==="linear")g=yp(s,1,h,d);else if(n.name==="cubic-bezier"){const _=n.controlPoints;g=new D(_[0],_[1],_[2],_[3]).solve(yp(s,1,h,d))}return g}static parse(n,s){let[h,d,g,..._]=n;if(!Array.isArray(d)||d.length===0)return s.error("Expected an interpolation type expression.",1);if(d[0]==="linear")d={name:"linear"};else if(d[0]==="exponential"){const M=d[1];if(typeof M!="number")return s.error("Exponential interpolation requires a numeric base.",1,1);d={name:"exponential",base:M}}else{if(d[0]!=="cubic-bezier")return s.error(`Unknown interpolation type ${String(d[0])}`,1,0);{const M=d.slice(1);if(M.length!==4||M.some(O=>typeof O!="number"||O<0||O>1))return s.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);d={name:"cubic-bezier",controlPoints:M}}}if(n.length-1<4)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if((n.length-1)%2!=0)return s.error("Expected an even number of arguments.");if(g=s.parse(g,2,wt),!g)return null;const b=[];let E=null;h==="interpolate-hcl"||h==="interpolate-lab"?E=ca:s.expectedType&&s.expectedType.kind!=="value"&&(E=s.expectedType);for(let M=0;M<_.length;M+=2){const O=_[M],B=_[M+1],F=M+3,q=M+4;if(typeof O!="number")return s.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',F);if(b.length&&b[b.length-1][0]>=O)return s.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',F);const H=s.parse(B,q,E);if(!H)return null;E=E||H.type,b.push([O,H])}return E.kind==="number"||E.kind==="color"||E.kind==="array"&&E.itemType.kind==="number"&&typeof E.N=="number"?new uu(E,h,d,g,b):s.error(`Type ${rn(E)} is not interpolatable.`)}evaluate(n){const s=this.labels,h=this.outputs;if(s.length===1)return h[0].evaluate(n);const d=this.input.evaluate(n);if(d<=s[0])return h[0].evaluate(n);const g=s.length;if(d>=s[g-1])return h[g-1].evaluate(n);const _=Ks(s,d),b=uu.interpolationFactor(this.interpolation,d,s[_],s[_+1]),E=h[_].evaluate(n),M=h[_+1].evaluate(n);return this.operator==="interpolate"?su[this.type.kind.toLowerCase()](E,M,b):this.operator==="interpolate-hcl"?cu.reverse(cu.interpolate(cu.forward(E),cu.forward(M),b)):lu.reverse(lu.interpolate(lu.forward(E),lu.forward(M),b))}eachChild(n){n(this.input);for(const s of this.outputs)n(s)}outputDefined(){return this.outputs.every(n=>n.outputDefined())}serialize(){let n;n=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const s=[this.operator,n,this.input.serialize()];for(let h=0;h<this.labels.length;h++)s.push(this.labels[h],this.outputs[h].serialize());return s}}function yp(a,n,s,h){const d=h-s,g=a-s;return d===0?0:n===1?g/d:(Math.pow(n,g)-1)/(Math.pow(n,d)-1)}var ua=uu;class _p{constructor(n,s){this.type=n,this.args=s}static parse(n,s){if(n.length<2)return s.error("Expectected at least one argument.");let h=null;const d=s.expectedType;d&&d.kind!=="value"&&(h=d);const g=[];for(const b of n.slice(1)){const E=s.parse(b,1+g.length,h,void 0,{typeAnnotation:"omit"});if(!E)return null;h=h||E.type,g.push(E)}const _=d&&g.some(b=>Ji(d,b.type));return new _p(_?yr:h,g)}evaluate(n){let s,h=null,d=0;for(const g of this.args){if(d++,h=g.evaluate(n),h&&h instanceof ji&&!h.available&&(s||(s=h),h=null,d===this.args.length))return s;if(h!==null)break}return h}eachChild(n){this.args.forEach(n)}outputDefined(){return this.args.every(n=>n.outputDefined())}serialize(){const n=["coalesce"];return this.eachChild(s=>{n.push(s.serialize())}),n}}var e_=_p;class Oh{constructor(n,s){this.type=s.type,this.bindings=[].concat(n),this.result=s}evaluate(n){return this.result.evaluate(n)}eachChild(n){for(const s of this.bindings)n(s[1]);n(this.result)}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found ${n.length-1} instead.`);const h=[];for(let g=1;g<n.length-1;g+=2){const _=n[g];if(typeof _!="string")return s.error(`Expected string, but found ${typeof _} instead.`,g);if(/[^a-zA-Z0-9_]/.test(_))return s.error("Variable names must contain only alphanumeric characters or '_'.",g);const b=s.parse(n[g+1],g+1);if(!b)return null;h.push([_,b])}const d=s.parse(n[n.length-1],n.length-1,s.expectedType,h);return d?new Oh(h,d):null}outputDefined(){return this.result.outputDefined()}serialize(){const n=["let"];for(const[s,h]of this.bindings)n.push(s,h.serialize());return n.push(this.result.serialize()),n}}var vp=Oh;class Dh{constructor(n,s,h){this.type=n,this.index=s,this.input=h}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,wt),d=s.parse(n[2],2,Ni(s.expectedType||yr));return h&&d?new Dh(d.type.itemType,h,d):null}evaluate(n){const s=this.index.evaluate(n),h=this.input.evaluate(n);if(s<0)throw new pi(`Array index out of bounds: ${s} < 0.`);if(s>=h.length)throw new pi(`Array index out of bounds: ${s} > ${h.length-1}.`);if(s!==Math.floor(s))throw new pi(`Array index must be an integer, but found ${s} instead.`);return h[s]}eachChild(n){n(this.index),n(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}var cb=Dh;class xp{constructor(n,s){this.type=vr,this.needle=n,this.haystack=s}static parse(n,s){if(n.length!==3)return s.error(`Expected 2 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,yr),d=s.parse(n[2],2,yr);return h&&d?tp(h.type,[vr,Er,wt,Bl,yr])?new xp(h,d):s.error(`Expected first argument to be of type boolean, string, number or null, but found ${rn(h.type)} instead`):null}evaluate(n){const s=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(h==null)return!1;if(!Hs(s,["boolean","string","number","null"]))throw new pi(`Expected first argument to be of type boolean, string, number or null, but found ${rn(Yn(s))} instead.`);if(!Hs(h,["string","array"]))throw new pi(`Expected second argument to be of type array or string, but found ${rn(Yn(h))} instead.`);return h.indexOf(s)>=0}eachChild(n){n(this.needle),n(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}var t_=xp;class hu{constructor(n,s,h){this.type=wt,this.needle=n,this.haystack=s,this.fromIndex=h}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,yr),d=s.parse(n[2],2,yr);if(!h||!d)return null;if(!tp(h.type,[vr,Er,wt,Bl,yr]))return s.error(`Expected first argument to be of type boolean, string, number or null, but found ${rn(h.type)} instead`);if(n.length===4){const g=s.parse(n[3],3,wt);return g?new hu(h,d,g):null}return new hu(h,d)}evaluate(n){const s=this.needle.evaluate(n),h=this.haystack.evaluate(n);if(!Hs(s,["boolean","string","number","null"]))throw new pi(`Expected first argument to be of type boolean, string, number or null, but found ${rn(Yn(s))} instead.`);if(!Hs(h,["string","array"]))throw new pi(`Expected second argument to be of type array or string, but found ${rn(Yn(h))} instead.`);if(this.fromIndex){const d=this.fromIndex.evaluate(n);return h.indexOf(s,d)}return h.indexOf(s)}eachChild(n){n(this.needle),n(this.haystack),this.fromIndex&&n(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const n=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),n]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}var r_=hu;class bp{constructor(n,s,h,d,g,_){this.inputType=n,this.type=s,this.input=h,this.cases=d,this.outputs=g,this.otherwise=_}static parse(n,s){if(n.length<5)return s.error(`Expected at least 4 arguments, but found only ${n.length-1}.`);if(n.length%2!=1)return s.error("Expected an even number of arguments.");let h,d;s.expectedType&&s.expectedType.kind!=="value"&&(d=s.expectedType);const g={},_=[];for(let M=2;M<n.length-1;M+=2){let O=n[M];const B=n[M+1];Array.isArray(O)||(O=[O]);const F=s.concat(M);if(O.length===0)return F.error("Expected at least one branch label.");for(const H of O){if(typeof H!="number"&&typeof H!="string")return F.error("Branch labels must be numbers or strings.");if(typeof H=="number"&&Math.abs(H)>Number.MAX_SAFE_INTEGER)return F.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof H=="number"&&Math.floor(H)!==H)return F.error("Numeric branch labels must be integer values.");if(h){if(F.checkSubtype(h,Yn(H)))return null}else h=Yn(H);if(g[String(H)]!==void 0)return F.error("Branch labels must be unique.");g[String(H)]=_.length}const q=s.parse(B,M,d);if(!q)return null;d=d||q.type,_.push(q)}const b=s.parse(n[1],1,yr);if(!b)return null;const E=s.parse(n[n.length-1],n.length-1,d);return E?b.type.kind!=="value"&&s.concat(1).checkSubtype(h,b.type)?null:new bp(h,d,b,g,_,E):null}evaluate(n){const s=this.input.evaluate(n);return(Yn(s)===this.inputType&&this.outputs[this.cases[s]]||this.otherwise).evaluate(n)}eachChild(n){n(this.input),this.outputs.forEach(n),n(this.otherwise)}outputDefined(){return this.outputs.every(n=>n.outputDefined())&&this.otherwise.outputDefined()}serialize(){const n=["match",this.input.serialize()],s=Object.keys(this.cases).sort(),h=[],d={};for(const _ of s){const b=d[this.cases[_]];b===void 0?(d[this.cases[_]]=h.length,h.push([this.cases[_],[_]])):h[b][1].push(_)}const g=_=>this.inputType.kind==="number"?Number(_):_;for(const[_,b]of h)n.push(b.length===1?g(b[0]):b.map(g)),n.push(this.outputs[_].serialize());return n.push(this.otherwise.serialize()),n}}var ub=bp;class wp{constructor(n,s,h){this.type=n,this.branches=s,this.otherwise=h}static parse(n,s){if(n.length<4)return s.error(`Expected at least 3 arguments, but found only ${n.length-1}.`);if(n.length%2!=0)return s.error("Expected an odd number of arguments.");let h;s.expectedType&&s.expectedType.kind!=="value"&&(h=s.expectedType);const d=[];for(let _=1;_<n.length-1;_+=2){const b=s.parse(n[_],_,vr);if(!b)return null;const E=s.parse(n[_+1],_+1,h);if(!E)return null;d.push([b,E]),h=h||E.type}const g=s.parse(n[n.length-1],n.length-1,h);return g?new wp(h,d,g):null}evaluate(n){for(const[s,h]of this.branches)if(s.evaluate(n))return h.evaluate(n);return this.otherwise.evaluate(n)}eachChild(n){for(const[s,h]of this.branches)n(s),n(h);n(this.otherwise)}outputDefined(){return this.branches.every(([n,s])=>s.outputDefined())&&this.otherwise.outputDefined()}serialize(){const n=["case"];return this.eachChild(s=>{n.push(s.serialize())}),n}}var hb=wp;class Ys{constructor(n,s,h,d){this.type=n,this.input=s,this.beginIndex=h,this.endIndex=d}static parse(n,s){if(n.length<=2||n.length>=5)return s.error(`Expected 3 or 4 arguments, but found ${n.length-1} instead.`);const h=s.parse(n[1],1,yr),d=s.parse(n[2],2,wt);if(!h||!d)return null;if(!tp(h.type,[Ni(yr),Er,yr]))return s.error(`Expected first argument to be of type array or string, but found ${rn(h.type)} instead`);if(n.length===4){const g=s.parse(n[3],3,wt);return g?new Ys(h.type,h,d,g):null}return new Ys(h.type,h,d)}evaluate(n){const s=this.input.evaluate(n),h=this.beginIndex.evaluate(n);if(!Hs(s,["string","array"]))throw new pi(`Expected first argument to be of type array or string, but found ${rn(Yn(s))} instead.`);if(this.endIndex){const d=this.endIndex.evaluate(n);return s.slice(h,d)}return s.slice(h)}eachChild(n){n(this.input),n(this.beginIndex),this.endIndex&&n(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const n=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),n]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}var n_=Ys;function Sp(a,n){return a==="=="||a==="!="?n.kind==="boolean"||n.kind==="string"||n.kind==="number"||n.kind==="null"||n.kind==="value":n.kind==="string"||n.kind==="number"||n.kind==="value"}function i_(a,n,s,h){return h.compare(n,s)===0}function ql(a,n,s){const h=a!=="=="&&a!=="!=";return class K5{constructor(g,_,b){this.type=vr,this.lhs=g,this.rhs=_,this.collator=b,this.hasUntypedArgument=g.type.kind==="value"||_.type.kind==="value"}static parse(g,_){if(g.length!==3&&g.length!==4)return _.error("Expected two or three arguments.");const b=g[0];let E=_.parse(g[1],1,yr);if(!E)return null;if(!Sp(b,E.type))return _.concat(1).error(`"${b}" comparisons are not supported for type '${rn(E.type)}'.`);let M=_.parse(g[2],2,yr);if(!M)return null;if(!Sp(b,M.type))return _.concat(2).error(`"${b}" comparisons are not supported for type '${rn(M.type)}'.`);if(E.type.kind!==M.type.kind&&E.type.kind!=="value"&&M.type.kind!=="value")return _.error(`Cannot compare types '${rn(E.type)}' and '${rn(M.type)}'.`);h&&(E.type.kind==="value"&&M.type.kind!=="value"?E=new Ba(M.type,[E]):E.type.kind!=="value"&&M.type.kind==="value"&&(M=new Ba(E.type,[M])));let O=null;if(g.length===4){if(E.type.kind!=="string"&&M.type.kind!=="string"&&E.type.kind!=="value"&&M.type.kind!=="value")return _.error("Cannot use collator to compare non-string types.");if(O=_.parse(g[3],3,Kc),!O)return null}return new K5(E,M,O)}evaluate(g){const _=this.lhs.evaluate(g),b=this.rhs.evaluate(g);if(h&&this.hasUntypedArgument){const E=Yn(_),M=Yn(b);if(E.kind!==M.kind||E.kind!=="string"&&E.kind!=="number")throw new pi(`Expected arguments for "${a}" to be (string, string) or (number, number), but found (${E.kind}, ${M.kind}) instead.`)}if(this.collator&&!h&&this.hasUntypedArgument){const E=Yn(_),M=Yn(b);if(E.kind!=="string"||M.kind!=="string")return n(g,_,b)}return this.collator?s(g,_,b,this.collator.evaluate(g)):n(g,_,b)}eachChild(g){g(this.lhs),g(this.rhs),this.collator&&g(this.collator)}outputDefined(){return!0}serialize(){const g=[a];return this.eachChild(_=>{g.push(_.serialize())}),g}}}const fb=ql("==",function(a,n,s){return n===s},i_),o_=ql("!=",function(a,n,s){return n!==s},function(a,n,s,h){return!i_(0,n,s,h)}),a_=ql("<",function(a,n,s){return n<s},function(a,n,s,h){return h.compare(n,s)<0}),s_=ql(">",function(a,n,s){return n>s},function(a,n,s,h){return h.compare(n,s)>0}),Ep=ql("<=",function(a,n,s){return n<=s},function(a,n,s,h){return h.compare(n,s)<=0}),db=ql(">=",function(a,n,s){return n>=s},function(a,n,s,h){return h.compare(n,s)>=0});class Tp{constructor(n,s,h,d,g,_){this.type=Er,this.number=n,this.locale=s,this.currency=h,this.unit=d,this.minFractionDigits=g,this.maxFractionDigits=_}static parse(n,s){if(n.length!==3)return s.error("Expected two arguments.");const h=s.parse(n[1],1,wt);if(!h)return null;const d=n[2];if(typeof d!="object"||Array.isArray(d))return s.error("NumberFormat options argument must be an object.");let g=null;if(d.locale&&(g=s.parse(d.locale,1,Er),!g))return null;let _=null;if(d.currency&&(_=s.parse(d.currency,1,Er),!_))return null;let b=null;if(d.unit&&(b=s.parse(d.unit,1,Er),!b))return null;let E=null;if(d["min-fraction-digits"]&&(E=s.parse(d["min-fraction-digits"],1,wt),!E))return null;let M=null;return d["max-fraction-digits"]&&(M=s.parse(d["max-fraction-digits"],1,wt),!M)?null:new Tp(h,g,_,b,E,M)}evaluate(n){return new Intl.NumberFormat(this.locale?this.locale.evaluate(n):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(n):void 0,unit:this.unit?this.unit.evaluate(n):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(n):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(n):void 0}).format(this.number.evaluate(n))}eachChild(n){n(this.number),this.locale&&n(this.locale),this.currency&&n(this.currency),this.unit&&n(this.unit),this.minFractionDigits&&n(this.minFractionDigits),this.maxFractionDigits&&n(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const n={};return this.locale&&(n.locale=this.locale.serialize()),this.currency&&(n.currency=this.currency.serialize()),this.unit&&(n.unit=this.unit.serialize()),this.minFractionDigits&&(n["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(n["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),n]}}class Ap{constructor(n){this.type=wt,this.input=n}static parse(n,s){if(n.length!==2)return s.error(`Expected 1 argument, but found ${n.length-1} instead.`);const h=s.parse(n[1],1);return h?h.type.kind!=="array"&&h.type.kind!=="string"&&h.type.kind!=="value"?s.error(`Expected argument of type string or array, but found ${rn(h.type)} instead.`):new Ap(h):null}evaluate(n){const s=this.input.evaluate(n);if(typeof s=="string"||Array.isArray(s))return s.length;throw new pi(`Expected value to be of type string or array, but found ${rn(Yn(s))} instead.`)}eachChild(n){n(this.input)}outputDefined(){return!1}serialize(){const n=["length"];return this.eachChild(s=>{n.push(s.serialize())}),n}}const l_={"==":fb,"!=":o_,">":s_,"<":a_,">=":db,"<=":Ep,array:Ba,at:cb,boolean:Ba,case:hb,coalesce:e_,collator:bh,format:tu,image:xh,in:t_,"index-of":r_,interpolate:ua,"interpolate-hcl":ua,"interpolate-lab":ua,length:Ap,let:vp,literal:eu,match:ub,number:Ba,"number-format":Tp,object:Ba,slice:n_,step:fp,string:Ba,"to-boolean":Ul,"to-color":Ul,"to-number":Ul,"to-string":Ul,var:up,within:cp};function c_(a,[n,s,h,d]){n=n.evaluate(a),s=s.evaluate(a),h=h.evaluate(a);const g=d?d.evaluate(a):1,_=Uy(n,s,h,g);if(_)throw new pi(_);return new zn(n/255*g,s/255*g,h/255*g,g)}function u_(a,n){return a in n}function Mp(a,n){const s=n[a];return s===void 0?null:s}function ds(a){return{type:a}}us.register(l_,{error:[{kind:"error"},[Er],(a,[n])=>{throw new pi(n.evaluate(a))}],typeof:[Er,[yr],(a,[n])=>rn(Yn(n.evaluate(a)))],"to-rgba":[Ni(wt,4),[ca],(a,[n])=>n.evaluate(a).toArray()],rgb:[ca,[wt,wt,wt],c_],rgba:[ca,[wt,wt,wt,wt],c_],has:{type:vr,overloads:[[[Er],(a,[n])=>u_(n.evaluate(a),a.properties())],[[Er,Ws],(a,[n,s])=>u_(n.evaluate(a),s.evaluate(a))]]},get:{type:yr,overloads:[[[Er],(a,[n])=>Mp(n.evaluate(a),a.properties())],[[Er,Ws],(a,[n,s])=>Mp(n.evaluate(a),s.evaluate(a))]]},"feature-state":[yr,[Er],(a,[n])=>Mp(n.evaluate(a),a.featureState||{})],properties:[Ws,[],a=>a.properties()],"geometry-type":[Er,[],a=>a.geometryType()],id:[yr,[],a=>a.id()],zoom:[wt,[],a=>a.globals.zoom],pitch:[wt,[],a=>a.globals.pitch||0],"distance-from-center":[wt,[],a=>a.distanceFromCenter()],"heatmap-density":[wt,[],a=>a.globals.heatmapDensity||0],"line-progress":[wt,[],a=>a.globals.lineProgress||0],"sky-radial-progress":[wt,[],a=>a.globals.skyRadialProgress||0],accumulated:[yr,[],a=>a.globals.accumulated===void 0?null:a.globals.accumulated],"+":[wt,ds(wt),(a,n)=>{let s=0;for(const h of n)s+=h.evaluate(a);return s}],"*":[wt,ds(wt),(a,n)=>{let s=1;for(const h of n)s*=h.evaluate(a);return s}],"-":{type:wt,overloads:[[[wt,wt],(a,[n,s])=>n.evaluate(a)-s.evaluate(a)],[[wt],(a,[n])=>-n.evaluate(a)]]},"/":[wt,[wt,wt],(a,[n,s])=>n.evaluate(a)/s.evaluate(a)],"%":[wt,[wt,wt],(a,[n,s])=>n.evaluate(a)%s.evaluate(a)],ln2:[wt,[],()=>Math.LN2],pi:[wt,[],()=>Math.PI],e:[wt,[],()=>Math.E],"^":[wt,[wt,wt],(a,[n,s])=>Math.pow(n.evaluate(a),s.evaluate(a))],sqrt:[wt,[wt],(a,[n])=>Math.sqrt(n.evaluate(a))],log10:[wt,[wt],(a,[n])=>Math.log(n.evaluate(a))/Math.LN10],ln:[wt,[wt],(a,[n])=>Math.log(n.evaluate(a))],log2:[wt,[wt],(a,[n])=>Math.log(n.evaluate(a))/Math.LN2],sin:[wt,[wt],(a,[n])=>Math.sin(n.evaluate(a))],cos:[wt,[wt],(a,[n])=>Math.cos(n.evaluate(a))],tan:[wt,[wt],(a,[n])=>Math.tan(n.evaluate(a))],asin:[wt,[wt],(a,[n])=>Math.asin(n.evaluate(a))],acos:[wt,[wt],(a,[n])=>Math.acos(n.evaluate(a))],atan:[wt,[wt],(a,[n])=>Math.atan(n.evaluate(a))],min:[wt,ds(wt),(a,n)=>Math.min(...n.map(s=>s.evaluate(a)))],max:[wt,ds(wt),(a,n)=>Math.max(...n.map(s=>s.evaluate(a)))],abs:[wt,[wt],(a,[n])=>Math.abs(n.evaluate(a))],round:[wt,[wt],(a,[n])=>{const s=n.evaluate(a);return s<0?-Math.round(-s):Math.round(s)}],floor:[wt,[wt],(a,[n])=>Math.floor(n.evaluate(a))],ceil:[wt,[wt],(a,[n])=>Math.ceil(n.evaluate(a))],"filter-==":[vr,[Er,yr],(a,[n,s])=>a.properties()[n.value]===s.value],"filter-id-==":[vr,[yr],(a,[n])=>a.id()===n.value],"filter-type-==":[vr,[Er],(a,[n])=>a.geometryType()===n.value],"filter-<":[vr,[Er,yr],(a,[n,s])=>{const h=a.properties()[n.value],d=s.value;return typeof h==typeof d&&h<d}],"filter-id-<":[vr,[yr],(a,[n])=>{const s=a.id(),h=n.value;return typeof s==typeof h&&s<h}],"filter->":[vr,[Er,yr],(a,[n,s])=>{const h=a.properties()[n.value],d=s.value;return typeof h==typeof d&&h>d}],"filter-id->":[vr,[yr],(a,[n])=>{const s=a.id(),h=n.value;return typeof s==typeof h&&s>h}],"filter-<=":[vr,[Er,yr],(a,[n,s])=>{const h=a.properties()[n.value],d=s.value;return typeof h==typeof d&&h<=d}],"filter-id-<=":[vr,[yr],(a,[n])=>{const s=a.id(),h=n.value;return typeof s==typeof h&&s<=h}],"filter->=":[vr,[Er,yr],(a,[n,s])=>{const h=a.properties()[n.value],d=s.value;return typeof h==typeof d&&h>=d}],"filter-id->=":[vr,[yr],(a,[n])=>{const s=a.id(),h=n.value;return typeof s==typeof h&&s>=h}],"filter-has":[vr,[yr],(a,[n])=>n.value in a.properties()],"filter-has-id":[vr,[],a=>a.id()!==null&&a.id()!==void 0],"filter-type-in":[vr,[Ni(Er)],(a,[n])=>n.value.indexOf(a.geometryType())>=0],"filter-id-in":[vr,[Ni(yr)],(a,[n])=>n.value.indexOf(a.id())>=0],"filter-in-small":[vr,[Er,Ni(yr)],(a,[n,s])=>s.value.indexOf(a.properties()[n.value])>=0],"filter-in-large":[vr,[Er,Ni(yr)],(a,[n,s])=>function(h,d,g,_){for(;g<=_;){const b=g+_>>1;if(d[b]===h)return!0;d[b]>h?_=b-1:g=b+1}return!1}(a.properties()[n.value],s.value,0,s.value.length-1)],all:{type:vr,overloads:[[[vr,vr],(a,[n,s])=>n.evaluate(a)&&s.evaluate(a)],[ds(vr),(a,n)=>{for(const s of n)if(!s.evaluate(a))return!1;return!0}]]},any:{type:vr,overloads:[[[vr,vr],(a,[n,s])=>n.evaluate(a)||s.evaluate(a)],[ds(vr),(a,n)=>{for(const s of n)if(s.evaluate(a))return!0;return!1}]]},"!":[vr,[vr],(a,[n])=>!n.evaluate(a)],"is-supported-script":[vr,[Er],(a,[n])=>{const s=a.globals&&a.globals.isSupportedScript;return!s||s(n.evaluate(a))}],upcase:[Er,[Er],(a,[n])=>n.evaluate(a).toUpperCase()],downcase:[Er,[Er],(a,[n])=>n.evaluate(a).toLowerCase()],concat:[Er,ds(yr),(a,n)=>n.map(s=>Qc(s.evaluate(a))).join("")],"resolved-locale":[Er,[Kc],(a,[n])=>n.evaluate(a).resolvedLocale()]});var Wl=l_;function fu(a){return{result:"success",value:a}}function Hl(a){return{result:"error",value:a}}function Zl(a){return a["property-type"]==="data-driven"}function $a(a){return!!a.expression&&a.expression.parameters.indexOf("zoom")>-1}function Rh(a){return!!a.expression&&a.expression.interpolated}function Ar(a){return a instanceof Number?"number":a instanceof String?"string":a instanceof Boolean?"boolean":Array.isArray(a)?"array":a===null?"null":typeof a}function Lh(a){return typeof a=="object"&&a!==null&&!Array.isArray(a)}function pb(a){return a}function Cp(a,n){const s=n.type==="color",h=a.stops&&typeof a.stops[0][0]=="object",d=h||!(h||a.property!==void 0),g=a.type||(Rh(n)?"exponential":"interval");if(s&&((a=za({},a)).stops&&(a.stops=a.stops.map(M=>[M[0],zn.parse(M[1])])),a.default=zn.parse(a.default?a.default:n.default)),a.colorSpace&&a.colorSpace!=="rgb"&&!Qy[a.colorSpace])throw new Error(`Unknown color space: ${a.colorSpace}`);let _,b,E;if(g==="exponential")_=zh;else if(g==="interval")_=h_;else if(g==="categorical"){_=Pp,b=Object.create(null);for(const M of a.stops)b[M[0]]=M[1];E=typeof a.stops[0][0]}else{if(g!=="identity")throw new Error(`Unknown function type "${g}"`);_=f_}if(h){const M={},O=[];for(let q=0;q<a.stops.length;q++){const H=a.stops[q],K=H[0].zoom;M[K]===void 0&&(M[K]={zoom:K,type:a.type,property:a.property,default:a.default,stops:[]},O.push(K)),M[K].stops.push([H[0].value,H[1]])}const B=[];for(const q of O)B.push([M[q].zoom,Cp(M[q],n)]);const F={name:"linear"};return{kind:"composite",interpolationType:F,interpolationFactor:ua.interpolationFactor.bind(void 0,F),zoomStops:B.map(q=>q[0]),evaluate:({zoom:q},H)=>zh({stops:B,base:a.base},n,q).evaluate(q,H)}}if(d){const M=g==="exponential"?{name:"exponential",base:a.base!==void 0?a.base:1}:null;return{kind:"camera",interpolationType:M,interpolationFactor:ua.interpolationFactor.bind(void 0,M),zoomStops:a.stops.map(O=>O[0]),evaluate:({zoom:O})=>_(a,n,O,b,E)}}return{kind:"source",evaluate(M,O){const B=O&&O.properties?O.properties[a.property]:void 0;return B===void 0?du(a.default,n.default):_(a,n,B,b,E)}}}function du(a,n,s){return a!==void 0?a:n!==void 0?n:s!==void 0?s:void 0}function Pp(a,n,s,h,d){return du(typeof s===d?h[s]:void 0,a.default,n.default)}function h_(a,n,s){if(Ar(s)!=="number")return du(a.default,n.default);const h=a.stops.length;if(h===1||s<=a.stops[0][0])return a.stops[0][1];if(s>=a.stops[h-1][0])return a.stops[h-1][1];const d=Ks(a.stops.map(g=>g[0]),s);return a.stops[d][1]}function zh(a,n,s){const h=a.base!==void 0?a.base:1;if(Ar(s)!=="number")return du(a.default,n.default);const d=a.stops.length;if(d===1||s<=a.stops[0][0])return a.stops[0][1];if(s>=a.stops[d-1][0])return a.stops[d-1][1];const g=Ks(a.stops.map(O=>O[0]),s),_=function(O,B,F,q){const H=q-F,K=O-F;return H===0?0:B===1?K/H:(Math.pow(B,K)-1)/(Math.pow(B,H)-1)}(s,h,a.stops[g][0],a.stops[g+1][0]),b=a.stops[g][1],E=a.stops[g+1][1];let M=su[n.type]||pb;if(a.colorSpace&&a.colorSpace!=="rgb"){const O=Qy[a.colorSpace];M=(B,F)=>O.reverse(O.interpolate(O.forward(B),O.forward(F),_))}return typeof b.evaluate=="function"?{evaluate(...O){const B=b.evaluate.apply(void 0,O),F=E.evaluate.apply(void 0,O);if(B!==void 0&&F!==void 0)return M(B,F,_)}}:M(b,E,_)}function f_(a,n,s){return n.type==="color"?s=zn.parse(s):n.type==="formatted"?s=eo.fromString(s.toString()):n.type==="resolvedImage"?s=ji.fromString(s.toString()):Ar(s)===n.type||n.type==="enum"&&n.values[s]||(s=void 0),du(s,a.default,n.default)}class Bh{constructor(n,s){this.expression=n,this._warningHistory={},this._evaluator=new ru,this._defaultValue=s?function(h){return h.type==="color"&&(Lh(h.default)||Array.isArray(h.default))?new zn(0,0,0,0):h.type==="color"?zn.parse(h.default)||null:h.default===void 0?null:h.default}(s):null,this._enumValues=s&&s.type==="enum"?s.values:null}evaluateWithoutErrorHandling(n,s,h,d,g,_,b,E){return this._evaluator.globals=n,this._evaluator.feature=s,this._evaluator.featureState=h,this._evaluator.canonical=d||null,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=_,this._evaluator.featureTileCoord=b||null,this._evaluator.featureDistanceData=E||null,this.expression.evaluate(this._evaluator)}evaluate(n,s,h,d,g,_,b,E){this._evaluator.globals=n,this._evaluator.feature=s||null,this._evaluator.featureState=h||null,this._evaluator.canonical=d||null,this._evaluator.availableImages=g||null,this._evaluator.formattedSection=_||null,this._evaluator.featureTileCoord=b||null,this._evaluator.featureDistanceData=E||null;try{const M=this.expression.evaluate(this._evaluator);if(M==null||typeof M=="number"&&M!=M)return this._defaultValue;if(this._enumValues&&!(M in this._enumValues))throw new pi(`Expected value to be one of ${Object.keys(this._enumValues).map(O=>JSON.stringify(O)).join(", ")}, but found ${JSON.stringify(M)} instead.`);return M}catch(M){return this._warningHistory[M.message]||(this._warningHistory[M.message]=!0,typeof console<"u"&&console.warn(M.message)),this._defaultValue}}}function Xl(a){return Array.isArray(a)&&a.length>0&&typeof a[0]=="string"&&a[0]in Wl}function Kl(a,n){const s=new hp(Wl,[],n?function(d){const g={color:ca,string:Er,number:wt,enum:Er,boolean:vr,formatted:$l,resolvedImage:Fl};return d.type==="array"?Ni(g[d.value]||yr,d.length):g[d.type]}(n):void 0),h=s.parse(a,void 0,void 0,void 0,n&&n.type==="string"?{typeAnnotation:"coerce"}:void 0);return h?fu(new Bh(h,n)):Hl(s.errors)}class $h{constructor(n,s){this.kind=n,this._styleExpression=s,this.isStateDependent=n!=="constant"&&!au(s.expression)}evaluateWithoutErrorHandling(n,s,h,d,g,_){return this._styleExpression.evaluateWithoutErrorHandling(n,s,h,d,g,_)}evaluate(n,s,h,d,g,_){return this._styleExpression.evaluate(n,s,h,d,g,_)}}class Js{constructor(n,s,h,d){this.kind=n,this.zoomStops=h,this._styleExpression=s,this.isStateDependent=n!=="camera"&&!au(s.expression),this.interpolationType=d}evaluateWithoutErrorHandling(n,s,h,d,g,_){return this._styleExpression.evaluateWithoutErrorHandling(n,s,h,d,g,_)}evaluate(n,s,h,d,g,_){return this._styleExpression.evaluate(n,s,h,d,g,_)}interpolationFactor(n,s,h){return this.interpolationType?ua.interpolationFactor(this.interpolationType,n,s,h):0}}function Qs(a,n){if((a=Kl(a,n)).result==="error")return a;const s=a.value.expression,h=ou(s);if(!h&&!Zl(n))return Hl([new la("","data expressions not supported")]);const d=Th(s,["zoom","pitch","distance-from-center"]);if(!d&&!$a(n))return Hl([new la("","zoom expressions not supported")]);const g=mu(s);return g||d?g instanceof la?Hl([g]):g instanceof ua&&!Rh(n)?Hl([new la("",'"interpolate" expressions cannot be used with this property')]):fu(g?new Js(h?"camera":"composite",a.value,g.labels,g instanceof ua?g.interpolation:void 0):new $h(h?"constant":"source",a.value)):Hl([new la("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class pu{constructor(n,s){this._parameters=n,this._specification=s,za(this,Cp(this._parameters,this._specification))}static deserialize(n){return new pu(n._parameters,n._specification)}static serialize(n){return{_parameters:n._parameters,_specification:n._specification}}}function mu(a){let n=null;if(a instanceof vp)n=mu(a.result);else if(a instanceof e_){for(const s of a.args)if(n=mu(s),n)break}else(a instanceof fp||a instanceof ua)&&a.input instanceof us&&a.input.name==="zoom"&&(n=a);return n instanceof la||a.eachChild(s=>{const h=mu(s);h instanceof la?n=h:!n&&h?n=new la("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):n&&h&&n!==h&&(n=new la("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),n}class Pt{constructor(n,s,h,d){this.message=(n?`${n}: `:"")+h,d&&(this.identifier=d),s!=null&&s.__line__&&(this.line=s.__line__)}}function Mo(a){const n=a.key,s=a.value,h=a.valueSpec||{},d=a.objectElementValidators||{},g=a.style,_=a.styleSpec;let b=[];const E=Ar(s);if(E!=="object")return[new Pt(n,s,`object expected, ${E} found`)];for(const M in s){const O=M.split(".")[0],B=h[O]||h["*"];let F;d[O]?F=d[O]:h[O]?F=Ai:d["*"]?F=d["*"]:h["*"]&&(F=Ai),F?b=b.concat(F({key:(n&&`${n}.`)+M,value:s[M],valueSpec:B,style:g,styleSpec:_,object:s,objectKey:M},s)):b.push(new Pt(n,s[M],`unknown property "${M}"`))}for(const M in h)d[M]||h[M].required&&h[M].default===void 0&&s[M]===void 0&&b.push(new Pt(n,s,`missing required property "${M}"`));return b}function d_(a){const n=a.value,s=a.valueSpec,h=a.style,d=a.styleSpec,g=a.key,_=a.arrayElementValidator||Ai;if(Ar(n)!=="array")return[new Pt(g,n,`array expected, ${Ar(n)} found`)];if(s.length&&n.length!==s.length)return[new Pt(g,n,`array length ${s.length} expected, length ${n.length} found`)];if(s["min-length"]&&n.length<s["min-length"])return[new Pt(g,n,`array length at least ${s["min-length"]} expected, length ${n.length} found`)];let b={type:s.value,values:s.values,minimum:s.minimum,maximum:s.maximum,function:void 0};d.$version<7&&(b.function=s.function),Ar(s.value)==="object"&&(b=s.value);let E=[];for(let M=0;M<n.length;M++)E=E.concat(_({array:n,arrayIndex:M,value:n[M],valueSpec:b,style:h,styleSpec:d,key:`${g}[${M}]`}));return E}function Ip(a){const n=a.key,s=a.value,h=a.valueSpec;let d=Ar(s);if(d==="number"&&s!=s&&(d="NaN"),d!=="number")return[new Pt(n,s,`number expected, ${d} found`)];if("minimum"in h){let g=h.minimum;if(Ar(h.minimum)==="array"&&(g=h.minimum[a.arrayIndex]),s<g)return[new Pt(n,s,`${s} is less than the minimum value ${g}`)]}if("maximum"in h){let g=h.maximum;if(Ar(h.maximum)==="array"&&(g=h.maximum[a.arrayIndex]),s>g)return[new Pt(n,s,`${s} is greater than the maximum value ${g}`)]}return[]}function gu(a){const n=a.valueSpec,s=Un(a.value.type);let h,d,g,_={};const b=s!=="categorical"&&a.value.property===void 0,E=!b,M=Ar(a.value.stops)==="array"&&Ar(a.value.stops[0])==="array"&&Ar(a.value.stops[0][0])==="object",O=Mo({key:a.key,value:a.value,valueSpec:a.styleSpec.function,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{stops:function(q){if(s==="identity")return[new Pt(q.key,q.value,'identity function may not have a "stops" property')];let H=[];const K=q.value;return H=H.concat(d_({key:q.key,value:K,valueSpec:q.valueSpec,style:q.style,styleSpec:q.styleSpec,arrayElementValidator:B})),Ar(K)==="array"&&K.length===0&&H.push(new Pt(q.key,K,"array must have at least one stop")),H},default:function(q){return Ai({key:q.key,value:q.value,valueSpec:n,style:q.style,styleSpec:q.styleSpec})}}});return s==="identity"&&b&&O.push(new Pt(a.key,a.value,'missing required property "property"')),s==="identity"||a.value.stops||O.push(new Pt(a.key,a.value,'missing required property "stops"')),s==="exponential"&&a.valueSpec.expression&&!Rh(a.valueSpec)&&O.push(new Pt(a.key,a.value,"exponential functions not supported")),a.styleSpec.$version>=8&&(E&&!Zl(a.valueSpec)?O.push(new Pt(a.key,a.value,"property functions not supported")):b&&!$a(a.valueSpec)&&O.push(new Pt(a.key,a.value,"zoom functions not supported"))),s!=="categorical"&&!M||a.value.property!==void 0||O.push(new Pt(a.key,a.value,'"property" property is required')),O;function B(q){let H=[];const K=q.value,re=q.key;if(Ar(K)!=="array")return[new Pt(re,K,`array expected, ${Ar(K)} found`)];if(K.length!==2)return[new Pt(re,K,`array length 2 expected, length ${K.length} found`)];if(M){if(Ar(K[0])!=="object")return[new Pt(re,K,`object expected, ${Ar(K[0])} found`)];if(K[0].zoom===void 0)return[new Pt(re,K,"object stop key must have zoom")];if(K[0].value===void 0)return[new Pt(re,K,"object stop key must have value")];const ue=Un(K[0].zoom);if(typeof ue!="number")return[new Pt(re,K[0].zoom,"stop zoom values must be numbers")];if(g&&g>ue)return[new Pt(re,K[0].zoom,"stop zoom values must appear in ascending order")];ue!==g&&(g=ue,d=void 0,_={}),H=H.concat(Mo({key:`${re}[0]`,value:K[0],valueSpec:{zoom:{}},style:q.style,styleSpec:q.styleSpec,objectElementValidators:{zoom:Ip,value:F}}))}else H=H.concat(F({key:`${re}[0]`,value:K[0],valueSpec:{},style:q.style,styleSpec:q.styleSpec},K));return Xl(cs(K[1]))?H.concat([new Pt(`${re}[1]`,K[1],"expressions are not allowed in function stops.")]):H.concat(Ai({key:`${re}[1]`,value:K[1],valueSpec:n,style:q.style,styleSpec:q.styleSpec}))}function F(q,H){const K=Ar(q.value),re=Un(q.value),ue=q.value!==null?q.value:H;if(h){if(K!==h)return[new Pt(q.key,ue,`${K} stop domain type must match previous stop domain type ${h}`)]}else h=K;if(K!=="number"&&K!=="string"&&K!=="boolean"&&typeof re!="number"&&typeof re!="string"&&typeof re!="boolean")return[new Pt(q.key,ue,"stop domain value must be a number, string, or boolean")];if(K!=="number"&&s!=="categorical"){let ye=`number expected, ${K} found`;return Zl(n)&&s===void 0&&(ye+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new Pt(q.key,ue,ye)]}return s!=="categorical"||K!=="number"||typeof re=="number"&&isFinite(re)&&Math.floor(re)===re?s!=="categorical"&&K==="number"&&typeof re=="number"&&typeof d=="number"&&d!==void 0&&re<d?[new Pt(q.key,ue,"stop domain values must appear in ascending order")]:(d=re,s==="categorical"&&re in _?[new Pt(q.key,ue,"stop domain values must be unique")]:(_[re]=!0,[])):[new Pt(q.key,ue,`integer expected, found ${String(re)}`)]}}function Yl(a){const n=(a.expressionContext==="property"?Qs:Kl)(cs(a.value),a.valueSpec);if(n.result==="error")return n.value.map(h=>new Pt(`${a.key}${h.key}`,a.value,h.message));const s=n.value.expression||n.value._styleExpression.expression;if(a.expressionContext==="property"&&a.propertyKey==="text-font"&&!s.outputDefined())return[new Pt(a.key,a.value,`Invalid data expression for "${a.propertyKey}". Output values must be contained as literals within the expression.`)];if(a.expressionContext==="property"&&a.propertyType==="layout"&&!au(s))return[new Pt(a.key,a.value,'"feature-state" data expressions are not supported with layout properties.')];if(a.expressionContext==="filter")return p_(s,a);if(a.expressionContext&&a.expressionContext.indexOf("cluster")===0){if(!Th(s,["zoom","feature-state"]))return[new Pt(a.key,a.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(a.expressionContext==="cluster-initial"&&!ou(s))return[new Pt(a.key,a.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function p_(a,n){const s=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(n.valueSpec&&n.valueSpec.expression)for(const d of n.valueSpec.expression.parameters)s.delete(d);if(s.size===0)return[];const h=[];return a instanceof us&&s.has(a.name)?[new Pt(n.key,n.value,`["${a.name}"] expression is not supported in a filter for a ${n.object.type} layer with id: ${n.object.id}`)]:(a.eachChild(d=>{h.push(...p_(d,n))}),h)}function Fh(a){const n=a.key,s=a.value,h=a.valueSpec,d=[];return Array.isArray(h.values)?h.values.indexOf(Un(s))===-1&&d.push(new Pt(n,s,`expected one of [${h.values.join(", ")}], ${JSON.stringify(s)} found`)):Object.keys(h.values).indexOf(Un(s))===-1&&d.push(new Pt(n,s,`expected one of [${Object.keys(h.values).join(", ")}], ${JSON.stringify(s)} found`)),d}function kp(a){if(a===!0||a===!1)return!0;if(!Array.isArray(a)||a.length===0)return!1;switch(a[0]){case"has":return a.length>=2&&a[1]!=="$id"&&a[1]!=="$type";case"in":return a.length>=3&&(typeof a[1]!="string"||Array.isArray(a[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return a.length!==3||Array.isArray(a[1])||Array.isArray(a[2]);case"any":case"all":for(const n of a.slice(1))if(!kp(n)&&typeof n!="boolean")return!1;return!0;default:return!0}}function Nh(a,n="fill"){if(a==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};kp(a)||(a=Uh(a));const s=a;let h=!0;try{h=function(M){if(!ai(M))return M;let O=cs(M);return _u(O),O=yu(O),O}(s)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(s,null,2)}
        `)}const d=Xe[`filter_${n}`],g=Kl(h,d);let _=null;if(g.result==="error")throw new Error(g.value.map(M=>`${M.key}: ${M.message}`).join(", "));_=(M,O,B)=>g.value.evaluate(M,O,{},B);let b=null,E=null;if(h!==s){const M=Kl(s,d);if(M.result==="error")throw new Error(M.value.map(O=>`${O.key}: ${O.message}`).join(", "));b=(O,B,F,q,H)=>M.value.evaluate(O,B,{},F,void 0,void 0,q,H),E=!ou(M.value.expression)}return{filter:_,dynamicFilter:b||void 0,needGeometry:m_(h),needFeature:!!E}}function yu(a){if(!Array.isArray(a))return a;const n=function(s){if(jh.has(s[0])){for(let h=1;h<s.length;h++)if(ai(s[h]))return!0}return s}(a);return n===!0?n:n.map(s=>yu(s))}function _u(a){let n=!1;const s=[];if(a[0]==="case"){for(let h=1;h<a.length-1;h+=2)n=n||ai(a[h]),s.push(a[h+1]);s.push(a[a.length-1])}else if(a[0]==="match"){n=n||ai(a[1]);for(let h=2;h<a.length-1;h+=2)s.push(a[h+1]);s.push(a[a.length-1])}else if(a[0]==="step"){n=n||ai(a[1]);for(let h=1;h<a.length-1;h+=2)s.push(a[h+1])}n&&(a.length=0,a.push("any",...s));for(let h=1;h<a.length;h++)_u(a[h])}function ai(a){if(!Array.isArray(a))return!1;if((n=a[0])==="pitch"||n==="distance-from-center")return!0;var n;for(let s=1;s<a.length;s++)if(ai(a[s]))return!0;return!1}const jh=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function mb(a,n){return a<n?-1:a>n?1:0}function m_(a){if(!Array.isArray(a))return!1;if(a[0]==="within")return!0;for(let n=1;n<a.length;n++)if(m_(a[n]))return!0;return!1}function Uh(a){if(!a)return!0;const n=a[0];return a.length<=1?n!=="any":n==="=="?Op(a[1],a[2],"=="):n==="!="?Jl(Op(a[1],a[2],"==")):n==="<"||n===">"||n==="<="||n===">="?Op(a[1],a[2],n):n==="any"?(s=a.slice(1),["any"].concat(s.map(Uh))):n==="all"?["all"].concat(a.slice(1).map(Uh)):n==="none"?["all"].concat(a.slice(1).map(Uh).map(Jl)):n==="in"?Vh(a[1],a.slice(2)):n==="!in"?Jl(Vh(a[1],a.slice(2))):n==="has"?g_(a[1]):n==="!has"?Jl(g_(a[1])):n!=="within"||a;var s}function Op(a,n,s){switch(a){case"$type":return[`filter-type-${s}`,n];case"$id":return[`filter-id-${s}`,n];default:return[`filter-${s}`,a,n]}}function Vh(a,n){if(n.length===0)return!1;switch(a){case"$type":return["filter-type-in",["literal",n]];case"$id":return["filter-id-in",["literal",n]];default:return n.length>200&&!n.some(s=>typeof s!=typeof n[0])?["filter-in-large",a,["literal",n.sort(mb)]]:["filter-in-small",a,["literal",n]]}}function g_(a){switch(a){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",a]}}function Jl(a){return["!",a]}function Dp(a){return kp(cs(a.value))?Yl(za({},a,{expressionContext:"filter",valueSpec:a.styleSpec[`filter_${a.layerType||"fill"}`]})):y_(a)}function y_(a){const n=a.value,s=a.key;if(Ar(n)!=="array")return[new Pt(s,n,`array expected, ${Ar(n)} found`)];const h=a.styleSpec;let d,g=[];if(n.length<1)return[new Pt(s,n,"filter array must have at least 1 element")];switch(g=g.concat(Fh({key:`${s}[0]`,value:n[0],valueSpec:h.filter_operator,style:a.style,styleSpec:a.styleSpec})),Un(n[0])){case"<":case"<=":case">":case">=":n.length>=2&&Un(n[1])==="$type"&&g.push(new Pt(s,n,`"$type" cannot be use with operator "${n[0]}"`));case"==":case"!=":n.length!==3&&g.push(new Pt(s,n,`filter array for operator "${n[0]}" must have 3 elements`));case"in":case"!in":n.length>=2&&(d=Ar(n[1]),d!=="string"&&g.push(new Pt(`${s}[1]`,n[1],`string expected, ${d} found`)));for(let _=2;_<n.length;_++)d=Ar(n[_]),Un(n[1])==="$type"?g=g.concat(Fh({key:`${s}[${_}]`,value:n[_],valueSpec:h.geometry_type,style:a.style,styleSpec:a.styleSpec})):d!=="string"&&d!=="number"&&d!=="boolean"&&g.push(new Pt(`${s}[${_}]`,n[_],`string, number, or boolean expected, ${d} found`));break;case"any":case"all":case"none":for(let _=1;_<n.length;_++)g=g.concat(y_({key:`${s}[${_}]`,value:n[_],style:a.style,styleSpec:a.styleSpec}));break;case"has":case"!has":d=Ar(n[1]),n.length!==2?g.push(new Pt(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):d!=="string"&&g.push(new Pt(`${s}[1]`,n[1],`string expected, ${d} found`));break;case"within":d=Ar(n[1]),n.length!==2?g.push(new Pt(s,n,`filter array for "${n[0]}" operator must have 2 elements`)):d!=="object"&&g.push(new Pt(`${s}[1]`,n[1],`object expected, ${d} found`))}return g}function Gh(a,n){const s=a.key,h=a.style,d=a.styleSpec,g=a.value,_=a.objectKey,b=d[`${n}_${a.layerType}`];if(!b)return[];const E=_.match(/^(.*)-transition$/);if(n==="paint"&&E&&b[E[1]]&&b[E[1]].transition)return Ai({key:s,value:g,valueSpec:d.transition,style:h,styleSpec:d});const M=a.valueSpec||b[_];if(!M)return[new Pt(s,g,`unknown property "${_}"`)];let O;if(Ar(g)==="string"&&Zl(M)&&!M.tokens&&(O=/^{([^}]+)}$/.exec(g))){const F=`\`{ "type": "identity", "property": ${O?JSON.stringify(O[1]):'"_"'} }\``;return[new Pt(s,g,`"${_}" does not support interpolation syntax
Use an identity property function instead: ${F}.`)]}const B=[];return a.layerType==="symbol"&&(_==="text-field"&&h&&!h.glyphs&&B.push(new Pt(s,g,'use of "text-field" requires a style "glyphs" property')),_==="text-font"&&Lh(cs(g))&&Un(g.type)==="identity"&&B.push(new Pt(s,g,'"text-font" does not support identity functions'))),B.concat(Ai({key:a.key,value:g,valueSpec:M,style:h,styleSpec:d,expressionContext:"property",propertyType:n,propertyKey:_}))}function __(a){return Gh(a,"paint")}function Rp(a){return Gh(a,"layout")}function Lp(a){let n=[];const s=a.value,h=a.key,d=a.style,g=a.styleSpec;s.type||s.ref||n.push(new Pt(h,s,'either "type" or "ref" is required'));let _=Un(s.type);const b=Un(s.ref);if(s.id){const E=Un(s.id);for(let M=0;M<a.arrayIndex;M++){const O=d.layers[M];Un(O.id)===E&&n.push(new Pt(h,s.id,`duplicate layer id "${s.id}", previously used at line ${O.id.__line__}`))}}if("ref"in s){let E;["type","source","source-layer","filter","layout"].forEach(M=>{M in s&&n.push(new Pt(h,s[M],`"${M}" is prohibited for ref layers`))}),d.layers.forEach(M=>{Un(M.id)===b&&(E=M)}),E?E.ref?n.push(new Pt(h,s.ref,"ref cannot reference another ref layer")):_=Un(E.type):typeof b=="string"&&n.push(new Pt(h,s.ref,`ref layer "${b}" not found`))}else if(_!=="background"&&_!=="sky")if(s.source){const E=d.sources&&d.sources[s.source],M=E&&Un(E.type);E?M==="vector"&&_==="raster"?n.push(new Pt(h,s.source,`layer "${s.id}" requires a raster source`)):M==="raster"&&_!=="raster"?n.push(new Pt(h,s.source,`layer "${s.id}" requires a vector source`)):M!=="vector"||s["source-layer"]?M==="raster-dem"&&_!=="hillshade"?n.push(new Pt(h,s.source,"raster-dem source can only be used with layer type 'hillshade'.")):_!=="line"||!s.paint||!s.paint["line-gradient"]&&!s.paint["line-trim-offset"]||M==="geojson"&&E.lineMetrics||n.push(new Pt(h,s,`layer "${s.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):n.push(new Pt(h,s,`layer "${s.id}" must specify a "source-layer"`)):n.push(new Pt(h,s.source,`source "${s.source}" not found`))}else n.push(new Pt(h,s,'missing required property "source"'));return n=n.concat(Mo({key:h,value:s,valueSpec:g.layer,style:a.style,styleSpec:a.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Ai({key:`${h}.type`,value:s.type,valueSpec:g.layer.type,style:a.style,styleSpec:a.styleSpec,object:s,objectKey:"type"}),filter:E=>Dp(za({layerType:_},E)),layout:E=>Mo({layer:s,key:E.key,value:E.value,valueSpec:{},style:E.style,styleSpec:E.styleSpec,objectElementValidators:{"*":M=>Rp(za({layerType:_},M))}}),paint:E=>Mo({layer:s,key:E.key,value:E.value,valueSpec:{},style:E.style,styleSpec:E.styleSpec,objectElementValidators:{"*":M=>__(za({layerType:_},M))}})}})),n}function Ql(a){const n=a.value,s=a.key,h=Ar(n);return h!=="string"?[new Pt(s,n,`string expected, ${h} found`)]:[]}const qh={promoteId:function({key:a,value:n}){if(Ar(n)==="string")return Ql({key:a,value:n});{const s=[];for(const h in n)s.push(...Ql({key:`${a}.${h}`,value:n[h]}));return s}}};function vu(a){const n=a.value,s=a.key,h=a.styleSpec,d=a.style;if(!n.type)return[new Pt(s,n,'"type" is required')];const g=Un(n.type);let _;switch(g){case"vector":case"raster":case"raster-dem":return _=Mo({key:s,value:n,valueSpec:h[`source_${g.replace("-","_")}`],style:a.style,styleSpec:h,objectElementValidators:qh}),_;case"geojson":if(_=Mo({key:s,value:n,valueSpec:h.source_geojson,style:d,styleSpec:h,objectElementValidators:qh}),n.cluster)for(const b in n.clusterProperties){const[E,M]=n.clusterProperties[b],O=typeof E=="string"?[E,["accumulated"],["get",b]]:E;_.push(...Yl({key:`${s}.${b}.map`,value:M,expressionContext:"cluster-map"})),_.push(...Yl({key:`${s}.${b}.reduce`,value:O,expressionContext:"cluster-reduce"}))}return _;case"video":return Mo({key:s,value:n,valueSpec:h.source_video,style:d,styleSpec:h});case"image":return Mo({key:s,value:n,valueSpec:h.source_image,style:d,styleSpec:h});case"canvas":return[new Pt(s,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return Fh({key:`${s}.type`,value:n.type,valueSpec:{values:v_(h)},style:d,styleSpec:h})}}function v_(a){return a.source.reduce((n,s)=>{const h=a[s];return h.type.type==="enum"&&(n=n.concat(Object.keys(h.type.values))),n},[])}function x_(a){const n=a.value,s=a.styleSpec,h=s.light,d=a.style;let g=[];const _=Ar(n);if(n===void 0)return g;if(_!=="object")return g=g.concat([new Pt("light",n,`object expected, ${_} found`)]),g;for(const b in n){const E=b.match(/^(.*)-transition$/);g=g.concat(E&&h[E[1]]&&h[E[1]].transition?Ai({key:b,value:n[b],valueSpec:s.transition,style:d,styleSpec:s}):h[b]?Ai({key:b,value:n[b],valueSpec:h[b],style:d,styleSpec:s}):[new Pt(b,n[b],`unknown property "${b}"`)])}return g}function zp(a){const n=a.value,s=a.key,h=a.style,d=a.styleSpec,g=d.terrain;let _=[];const b=Ar(n);if(n===void 0)return _;if(b!=="object")return _=_.concat([new Pt("terrain",n,`object expected, ${b} found`)]),_;for(const E in n){const M=E.match(/^(.*)-transition$/);_=_.concat(M&&g[M[1]]&&g[M[1]].transition?Ai({key:E,value:n[E],valueSpec:d.transition,style:h,styleSpec:d}):g[E]?Ai({key:E,value:n[E],valueSpec:g[E],style:h,styleSpec:d}):[new Pt(E,n[E],`unknown property "${E}"`)])}if(n.source){const E=h.sources&&h.sources[n.source],M=E&&Un(E.type);E?M!=="raster-dem"&&_.push(new Pt(s,n.source,`terrain cannot be used with a source of type ${String(M)}, it only be used with a "raster-dem" source type`)):_.push(new Pt(s,n.source,`source "${n.source}" not found`))}else _.push(new Pt(s,n,'terrain is missing required property "source"'));return _}function b_(a){const n=a.value,s=a.style,h=a.styleSpec,d=h.fog;let g=[];const _=Ar(n);if(n===void 0)return g;if(_!=="object")return g=g.concat([new Pt("fog",n,`object expected, ${_} found`)]),g;for(const b in n){const E=b.match(/^(.*)-transition$/);g=g.concat(E&&d[E[1]]&&d[E[1]].transition?Ai({key:b,value:n[b],valueSpec:h.transition,style:s,styleSpec:h}):d[b]?Ai({key:b,value:n[b],valueSpec:d[b],style:s,styleSpec:h}):[new Pt(b,n[b],`unknown property "${b}"`)])}return g}const Wh={"*":()=>[],array:d_,boolean:function(a){const n=a.value,s=a.key,h=Ar(n);return h!=="boolean"?[new Pt(s,n,`boolean expected, ${h} found`)]:[]},number:Ip,color:function(a){const n=a.key,s=a.value,h=Ar(s);return h!=="string"?[new Pt(n,s,`color expected, ${h} found`)]:rp(s)===null?[new Pt(n,s,`color expected, "${s}" found`)]:[]},enum:Fh,filter:Dp,function:gu,layer:Lp,object:Mo,source:vu,light:x_,terrain:zp,fog:b_,string:Ql,formatted:function(a){return Ql(a).length===0?[]:Yl(a)},resolvedImage:function(a){return Ql(a).length===0?[]:Yl(a)},projection:function(a){const n=a.value,s=a.styleSpec,h=s.projection,d=a.style;let g=[];const _=Ar(n);if(_==="object")for(const b in n)g=g.concat(Ai({key:b,value:n[b],valueSpec:h[b],style:d,styleSpec:s}));else _!=="string"&&(g=g.concat([new Pt("projection",n,`object or string expected, ${_} found`)]));return g}};function Ai(a){const n=a.value,s=a.valueSpec,h=a.styleSpec;return s.expression&&Lh(Un(n))?gu(a):s.expression&&Xl(cs(n))?Yl(a):s.type&&Wh[s.type]?Wh[s.type](a):Mo(za({},a,{valueSpec:s.type?h[s.type]:s}))}function gb(a){const n=a.value,s=a.key,h=Ql(a);return h.length||(n.indexOf("{fontstack}")===-1&&h.push(new Pt(s,n,'"glyphs" url must include a "{fontstack}" token')),n.indexOf("{range}")===-1&&h.push(new Pt(s,n,'"glyphs" url must include a "{range}" token'))),h}function w_(a,n=Xe){return Fa(Ai({key:"",value:a,valueSpec:n.$root,styleSpec:n,style:a,objectElementValidators:{glyphs:gb,"*":()=>[]}}))}const yb=a=>Fa(__(a)),S_=a=>Fa(Rp(a));function Fa(a){return a.slice().sort((n,s)=>n.line&&s.line?n.line-s.line:0)}function E_(a,n){let s=!1;if(n&&n.length)for(const h of n)a.fire(new ls(new Error(h.message))),s=!0;return s}var ec=ha;function ha(a,n,s){var h=this.cells=[];if(a instanceof ArrayBuffer){this.arrayBuffer=a;var d=new Int32Array(this.arrayBuffer);a=d[0],this.d=(n=d[1])+2*(s=d[2]);for(var g=0;g<this.d*this.d;g++){var _=d[3+g],b=d[3+g+1];h.push(_===b?null:d.subarray(_,b))}var E=d[3+h.length+1];this.keys=d.subarray(d[3+h.length],E),this.bboxes=d.subarray(E),this.insert=this._insertReadonly}else{this.d=n+2*s;for(var M=0;M<this.d*this.d;M++)h.push([]);this.keys=[],this.bboxes=[]}this.n=n,this.extent=a,this.padding=s,this.scale=n/a,this.uid=0;var O=s/n*a;this.min=-O,this.max=a+O}ha.prototype.insert=function(a,n,s,h,d){this._forEachCell(n,s,h,d,this._insertCell,this.uid++),this.keys.push(a),this.bboxes.push(n),this.bboxes.push(s),this.bboxes.push(h),this.bboxes.push(d)},ha.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},ha.prototype._insertCell=function(a,n,s,h,d,g){this.cells[d].push(g)},ha.prototype.query=function(a,n,s,h,d){var g=this.min,_=this.max;if(a<=g&&n<=g&&_<=s&&_<=h&&!d)return Array.prototype.slice.call(this.keys);var b=[];return this._forEachCell(a,n,s,h,this._queryCell,b,{},d),b},ha.prototype._queryCell=function(a,n,s,h,d,g,_,b){var E=this.cells[d];if(E!==null)for(var M=this.keys,O=this.bboxes,B=0;B<E.length;B++){var F=E[B];if(_[F]===void 0){var q=4*F;(b?b(O[q+0],O[q+1],O[q+2],O[q+3]):a<=O[q+2]&&n<=O[q+3]&&s>=O[q+0]&&h>=O[q+1])?(_[F]=!0,g.push(M[F])):_[F]=!1}}},ha.prototype._forEachCell=function(a,n,s,h,d,g,_,b){for(var E=this._convertToCellCoord(a),M=this._convertToCellCoord(n),O=this._convertToCellCoord(s),B=this._convertToCellCoord(h),F=E;F<=O;F++)for(var q=M;q<=B;q++){var H=this.d*q+F;if((!b||b(this._convertFromCellCoord(F),this._convertFromCellCoord(q),this._convertFromCellCoord(F+1),this._convertFromCellCoord(q+1)))&&d.call(this,a,n,s,h,H,g,_,b))return}},ha.prototype._convertFromCellCoord=function(a){return(a-this.padding)/this.scale},ha.prototype._convertToCellCoord=function(a){return Math.max(0,Math.min(this.d-1,Math.floor(a*this.scale)+this.padding))},ha.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var a=this.cells,n=3+this.cells.length+1+1,s=0,h=0;h<this.cells.length;h++)s+=this.cells[h].length;var d=new Int32Array(n+s+this.keys.length+this.bboxes.length);d[0]=this.extent,d[1]=this.n,d[2]=this.padding;for(var g=n,_=0;_<a.length;_++){var b=a[_];d[3+_]=g,d.set(b,g),g+=b.length}return d[3+a.length]=g,d.set(this.keys,g),d[3+a.length+1]=g+=this.keys.length,d.set(this.bboxes,g),g+=this.bboxes.length,d.buffer};const Hh={};function Dt(a,n,s={}){Object.defineProperty(a,"_classRegistryKey",{value:n,writeable:!1}),Hh[n]={klass:a,omit:s.omit||[]}}Dt(Object,"Object"),ec.serialize=function(a,n){const s=a.toArrayBuffer();return n&&n.push(s),{buffer:s}},ec.deserialize=function(a){return new ec(a.buffer)},Object.defineProperty(ec,"name",{value:"Grid"}),Dt(ec,"Grid"),Dt(zn,"Color"),Dt(Error,"Error"),Dt(et,"AJAXError"),Dt(ji,"ResolvedImage"),Dt(pu,"StylePropertyFunction"),Dt(Bh,"StyleExpression",{omit:["_evaluator"]}),Dt(Js,"ZoomDependentExpression"),Dt($h,"ZoomConstantExpression"),Dt(us,"CompoundExpression",{omit:["_evaluate"]});for(const a in Wl)Hh[Wl[a]._classRegistryKey]||Dt(Wl[a],`Expression${a}`);function T_(a){return a&&typeof ArrayBuffer<"u"&&(a instanceof ArrayBuffer||a.constructor&&a.constructor.name==="ArrayBuffer")}function xu(a){return v.ImageBitmap&&a instanceof v.ImageBitmap}function bu(a,n){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp)return a;if(T_(a)||xu(a))return n&&n.push(a),a;if(ArrayBuffer.isView(a)){const s=a;return n&&n.push(s.buffer),s}if(a instanceof v.ImageData)return n&&n.push(a.data.buffer),a;if(Array.isArray(a)){const s=[];for(const h of a)s.push(bu(h,n));return s}if(typeof a=="object"){const s=a.constructor,h=s._classRegistryKey;if(!h)throw new Error(`can't serialize object of unregistered class ${h}`);const d=s.serialize?s.serialize(a,n):{};if(!s.serialize){for(const g in a)a.hasOwnProperty(g)&&(Hh[h].omit.indexOf(g)>=0||(d[g]=bu(a[g],n)));a instanceof Error&&(d.message=a.message)}if(d.$name)throw new Error("$name property is reserved for worker serialization logic.");return h!=="Object"&&(d.$name=h),d}throw new Error("can't serialize object of type "+typeof a)}function wu(a){if(a==null||typeof a=="boolean"||typeof a=="number"||typeof a=="string"||a instanceof Boolean||a instanceof Number||a instanceof String||a instanceof Date||a instanceof RegExp||T_(a)||xu(a)||ArrayBuffer.isView(a)||a instanceof v.ImageData)return a;if(Array.isArray(a))return a.map(wu);if(typeof a=="object"){const n=a.$name||"Object",{klass:s}=Hh[n];if(!s)throw new Error(`can't deserialize unregistered class ${n}`);if(s.deserialize)return s.deserialize(a);const h=Object.create(s.prototype);for(const d of Object.keys(a))d!=="$name"&&(h[d]=wu(a[d]));return h}throw new Error("can't deserialize object of type "+typeof a)}const Su=a=>a>=1536&&a<=1791,A_=a=>a>=1872&&a<=1919,Bp=a=>a>=2208&&a<=2303,M_=a=>a>=11904&&a<=12031,$p=a=>a>=12032&&a<=12255,Fp=a=>a>=12272&&a<=12287,Eu=a=>a>=12288&&a<=12351,Zh=a=>a>=12352&&a<=12447,tc=a=>a>=12448&&a<=12543,Xh=a=>a>=12544&&a<=12591,C_=a=>a>=12704&&a<=12735,P_=a=>a>=12736&&a<=12783,Np=a=>a>=12784&&a<=12799,I_=a=>a>=12800&&a<=13055,k_=a=>a>=13056&&a<=13311,O_=a=>a>=13312&&a<=19903,jp=a=>a>=19968&&a<=40959,D_=a=>a>=40960&&a<=42127,R_=a=>a>=42128&&a<=42191,L_=a=>a>=44032&&a<=55215,z_=a=>a>=63744&&a<=64255,Kh=a=>a>=64336&&a<=65023,Tu=a=>a>=65040&&a<=65055,m=a=>a>=65072&&a<=65103,l=a=>a>=65104&&a<=65135,f=a=>a>=65136&&a<=65279,y=a=>a>=65280&&a<=65519;function x(a){for(const n of a)if(I(n.charCodeAt(0)))return!0;return!1}function S(a){for(const n of a)if(!C(n.charCodeAt(0)))return!1;return!0}function C(a){return!(Su(a)||A_(a)||Bp(a)||Kh(a)||f(a))}function I(a){return!(a!==746&&a!==747&&(a<4352||!(C_(a)||Xh(a)||m(a)&&!(a>=65097&&a<=65103)||z_(a)||k_(a)||M_(a)||P_(a)||!(!Eu(a)||a>=12296&&a<=12305||a>=12308&&a<=12319||a===12336)||O_(a)||jp(a)||I_(a)||(n=>n>=12592&&n<=12687)(a)||(n=>n>=43360&&n<=43391)(a)||(n=>n>=55216&&n<=55295)(a)||(n=>n>=4352&&n<=4607)(a)||L_(a)||Zh(a)||Fp(a)||(n=>n>=12688&&n<=12703)(a)||$p(a)||Np(a)||tc(a)&&a!==12540||!(!y(a)||a===65288||a===65289||a===65293||a>=65306&&a<=65310||a===65339||a===65341||a===65343||a>=65371&&a<=65503||a===65507||a>=65512&&a<=65519)||!(!l(a)||a>=65112&&a<=65118||a>=65123&&a<=65126)||(n=>n>=5120&&n<=5759)(a)||(n=>n>=6320&&n<=6399)(a)||Tu(a)||(n=>n>=19904&&n<=19967)(a)||D_(a)||R_(a))))}function z(a){return!(I(a)||function(n){return!!((s=>s>=128&&s<=255)(n)&&(n===167||n===169||n===174||n===177||n===188||n===189||n===190||n===215||n===247)||(s=>s>=8192&&s<=8303)(n)&&(n===8214||n===8224||n===8225||n===8240||n===8241||n===8251||n===8252||n===8258||n===8263||n===8264||n===8265||n===8273)||(s=>s>=8448&&s<=8527)(n)||(s=>s>=8528&&s<=8591)(n)||(s=>s>=8960&&s<=9215)(n)&&(n>=8960&&n<=8967||n>=8972&&n<=8991||n>=8996&&n<=9e3||n===9003||n>=9085&&n<=9114||n>=9150&&n<=9165||n===9167||n>=9169&&n<=9179||n>=9186&&n<=9215)||(s=>s>=9216&&s<=9279)(n)&&n!==9251||(s=>s>=9280&&s<=9311)(n)||(s=>s>=9312&&s<=9471)(n)||(s=>s>=9632&&s<=9727)(n)||(s=>s>=9728&&s<=9983)(n)&&!(n>=9754&&n<=9759)||(s=>s>=11008&&s<=11263)(n)&&(n>=11026&&n<=11055||n>=11088&&n<=11097||n>=11192&&n<=11243)||Eu(n)||tc(n)||(s=>s>=57344&&s<=63743)(n)||m(n)||l(n)||y(n)||n===8734||n===8756||n===8757||n>=9984&&n<=10087||n>=10102&&n<=10131||n===65532||n===65533)}(a))}function V(a){return a>=1424&&a<=2303||Kh(a)||f(a)}function U(a,n){return!(!n&&V(a)||a>=2304&&a<=3583||a>=3840&&a<=4255||(s=>s>=6016&&s<=6143)(a))}function Z(a){for(const n of a)if(V(n.charCodeAt(0)))return!0;return!1}const te="deferred",ne="loading",oe="loaded";let ae=null,se="unavailable",Q=null;const fe=function(a){a&&typeof a=="string"&&a.indexOf("NetworkError")>-1&&(se="error"),ae&&ae(a)};function he(){me.fire(new Wr("pluginStateChange",{pluginStatus:se,pluginURL:Q}))}const me=new La,we=function(){return se},ve=function(){if(se!==te||!Q)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");se=ne,he(),Q&&jt({url:Q},a=>{a?fe(a):(se=oe,he())})},Ee={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>se===oe||Ee.applyArabicShaping!=null,isLoading:()=>se===ne,setState(a){se=a.pluginStatus,Q=a.pluginURL},isParsed:()=>Ee.applyArabicShaping!=null&&Ee.processBidirectionalText!=null&&Ee.processStyledBidirectionalText!=null,getPluginURL:()=>Q};class ke{constructor(n,s){this.zoom=n,s?(this.now=s.now,this.fadeDuration=s.fadeDuration,this.transition=s.transition,this.pitch=s.pitch):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0)}isSupportedScript(n){return function(s,h){for(const d of s)if(!U(d.charCodeAt(0),h))return!1;return!0}(n,Ee.isLoaded())}}class Le{constructor(n,s){this.property=n,this.value=s,this.expression=function(h,d){if(Lh(h))return new pu(h,d);if(Xl(h)){const g=Qs(h,d);if(g.result==="error")throw new Error(g.value.map(_=>`${_.key}: ${_.message}`).join(", "));return g.value}{let g=h;return typeof h=="string"&&d.type==="color"&&(g=zn.parse(h)),{kind:"constant",evaluate:()=>g}}}(s===void 0?n.specification.default:s,n.specification)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(n,s,h){return this.property.possiblyEvaluate(this,n,s,h)}}class Ne{constructor(n){this.property=n,this.value=new Le(n,void 0)}transitioned(n,s){return new Oe(this.property,this.value,s,gt({},n.transition,this.transition),n.now)}untransitioned(){return new Oe(this.property,this.value,null,{},0)}}class yt{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitionablePropertyValues)}getValue(n){return Mt(this._values[n].value.value)}setValue(n,s){this._values.hasOwnProperty(n)||(this._values[n]=new Ne(this._values[n].property)),this._values[n].value=new Le(this._values[n].property,s===null?void 0:Mt(s))}getTransition(n){return Mt(this._values[n].transition)}setTransition(n,s){this._values.hasOwnProperty(n)||(this._values[n]=new Ne(this._values[n].property)),this._values[n].transition=Mt(s)||void 0}serialize(){const n={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(n[s]=h);const d=this.getTransition(s);d!==void 0&&(n[`${s}-transition`]=d)}return n}transitioned(n,s){const h=new rt(this._properties);for(const d of Object.keys(this._values))h._values[d]=this._values[d].transitioned(n,s._values[d]);return h}untransitioned(){const n=new rt(this._properties);for(const s of Object.keys(this._values))n._values[s]=this._values[s].untransitioned();return n}}class Oe{constructor(n,s,h,d,g){const _=d.delay||0,b=d.duration||0;g=g||0,this.property=n,this.value=s,this.begin=g+_,this.end=this.begin+b,n.specification.transition&&(d.delay||d.duration)&&(this.prior=h)}possiblyEvaluate(n,s,h){const d=n.now||0,g=this.value.possiblyEvaluate(n,s,h),_=this.prior;if(_){if(d>this.end)return this.prior=null,g;if(this.value.isDataDriven())return this.prior=null,g;if(d<this.begin)return _.possiblyEvaluate(n,s,h);{const b=(d-this.begin)/(this.end-this.begin);return this.property.interpolate(_.possiblyEvaluate(n,s,h),g,qe(b))}}return g}}class rt{constructor(n){this._properties=n,this._values=Object.create(n.defaultTransitioningPropertyValues)}possiblyEvaluate(n,s,h){const d=new $e(this._properties);for(const g of Object.keys(this._values))d._values[g]=this._values[g].possiblyEvaluate(n,s,h);return d}hasTransition(){for(const n of Object.keys(this._values))if(this._values[n].prior)return!0;return!1}}class We{constructor(n){this._properties=n,this._values=Object.create(n.defaultPropertyValues)}getValue(n){return Mt(this._values[n].value)}setValue(n,s){this._values[n]=new Le(this._values[n].property,s===null?void 0:Mt(s))}serialize(){const n={};for(const s of Object.keys(this._values)){const h=this.getValue(s);h!==void 0&&(n[s]=h)}return n}possiblyEvaluate(n,s,h){const d=new $e(this._properties);for(const g of Object.keys(this._values))d._values[g]=this._values[g].possiblyEvaluate(n,s,h);return d}}class st{constructor(n,s,h){this.property=n,this.value=s,this.parameters=h}isConstant(){return this.value.kind==="constant"}constantOr(n){return this.value.kind==="constant"?this.value.value:n}evaluate(n,s,h,d){return this.property.evaluate(this.value,this.parameters,n,s,h,d)}}class $e{constructor(n){this._properties=n,this._values=Object.create(n.defaultPossiblyEvaluatedValues)}get(n){return this._values[n]}}class Pe{constructor(n){this.specification=n}possiblyEvaluate(n,s){return n.expression.evaluate(s)}interpolate(n,s,h){const d=su[this.specification.type];return d?d(n,s,h):n}}class je{constructor(n,s){this.specification=n,this.overrides=s}possiblyEvaluate(n,s,h,d){return new st(this,n.expression.kind==="constant"||n.expression.kind==="camera"?{kind:"constant",value:n.expression.evaluate(s,null,{},h,d)}:n.expression,s)}interpolate(n,s,h){if(n.value.kind!=="constant"||s.value.kind!=="constant")return n;if(n.value.value===void 0||s.value.value===void 0)return new st(this,{kind:"constant",value:void 0},n.parameters);const d=su[this.specification.type];return d?new st(this,{kind:"constant",value:d(n.value.value,s.value.value,h)},n.parameters):n}evaluate(n,s,h,d,g,_){return n.kind==="constant"?n.value:n.evaluate(s,h,d,g,_)}}class ot{constructor(n){this.specification=n}possiblyEvaluate(n,s,h,d){return!!n.expression.evaluate(s,null,{},h,d)}interpolate(){return!1}}class ct{constructor(n){this.properties=n,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const s=new ke(0,{});for(const h in n){const d=n[h];d.specification.overridable&&this.overridableProperties.push(h);const g=this.defaultPropertyValues[h]=new Le(d,void 0),_=this.defaultTransitionablePropertyValues[h]=new Ne(d);this.defaultTransitioningPropertyValues[h]=_.untransitioned(),this.defaultPossiblyEvaluatedValues[h]=g.possiblyEvaluate(s)}}}function Ft(a,n){return 256*(a=Be(Math.floor(a),0,255))+Be(Math.floor(n),0,255)}Dt(je,"DataDrivenProperty"),Dt(Pe,"DataConstantProperty"),Dt(ot,"ColorRampProperty");const dr={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Lt{constructor(n,s){this._structArray=n,this._pos1=s*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class It{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(n,s){return n._trim(),s&&(n.isTransferred=!0,s.push(n.arrayBuffer)),{length:n.length,arrayBuffer:n.arrayBuffer}}static deserialize(n){const s=Object.create(this.prototype);return s.arrayBuffer=n.arrayBuffer,s.length=n.length,s.capacity=n.arrayBuffer.byteLength/s.bytesPerElement,s._refreshViews(),s}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(n){this.reserve(n),this.length=n}reserve(n){if(n>this.capacity){this.capacity=Math.max(n,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const s=this.uint8;this._refreshViews(),s&&this.uint8.set(s)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function Nt(a,n=1){let s=0,h=0;return{members:a.map(d=>{const g=dr[d.type].BYTES_PER_ELEMENT,_=s=xr(s,Math.max(n,g)),b=d.components||1;return h=Math.max(h,g),s+=g*b,{name:d.name,type:d.type,components:b,offset:_}}),size:xr(s,Math.max(h,n)),alignment:n}}function xr(a,n){return Math.ceil(a/n)*n}class qt extends It{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const d=2*n;return this.int16[d+0]=s,this.int16[d+1]=h,n}}qt.prototype.bytesPerElement=4,Dt(qt,"StructArrayLayout2i4");class Fr extends It{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h){const d=this.length;return this.resize(d+1),this.emplace(d,n,s,h)}emplace(n,s,h,d){const g=3*n;return this.int16[g+0]=s,this.int16[g+1]=h,this.int16[g+2]=d,n}}Fr.prototype.bytesPerElement=6,Dt(Fr,"StructArrayLayout3i6");class Ur extends It{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,d){const g=this.length;return this.resize(g+1),this.emplace(g,n,s,h,d)}emplace(n,s,h,d,g){const _=4*n;return this.int16[_+0]=s,this.int16[_+1]=h,this.int16[_+2]=d,this.int16[_+3]=g,n}}Ur.prototype.bytesPerElement=8,Dt(Ur,"StructArrayLayout4i8");class nn extends It{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,d,g,_,b){const E=this.length;return this.resize(E+1),this.emplace(E,n,s,h,d,g,_,b)}emplace(n,s,h,d,g,_,b,E){const M=6*n,O=12*n,B=3*n;return this.int16[M+0]=s,this.int16[M+1]=h,this.uint8[O+4]=d,this.uint8[O+5]=g,this.uint8[O+6]=_,this.uint8[O+7]=b,this.float32[B+2]=E,n}}nn.prototype.bytesPerElement=12,Dt(nn,"StructArrayLayout2i4ub1f12");class Jr extends It{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,d){const g=this.length;return this.resize(g+1),this.emplace(g,n,s,h,d)}emplace(n,s,h,d,g){const _=4*n;return this.float32[_+0]=s,this.float32[_+1]=h,this.float32[_+2]=d,this.float32[_+3]=g,n}}Jr.prototype.bytesPerElement=16,Dt(Jr,"StructArrayLayout4f16");class Vn extends It{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,d,g){const _=this.length;return this.resize(_+1),this.emplace(_,n,s,h,d,g)}emplace(n,s,h,d,g,_){const b=6*n,E=3*n;return this.uint16[b+0]=s,this.uint16[b+1]=h,this.uint16[b+2]=d,this.uint16[b+3]=g,this.float32[E+2]=_,n}}Vn.prototype.bytesPerElement=12,Dt(Vn,"StructArrayLayout4ui1f12");class to extends It{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,d){const g=this.length;return this.resize(g+1),this.emplace(g,n,s,h,d)}emplace(n,s,h,d,g){const _=4*n;return this.uint16[_+0]=s,this.uint16[_+1]=h,this.uint16[_+2]=d,this.uint16[_+3]=g,n}}to.prototype.bytesPerElement=8,Dt(to,"StructArrayLayout4ui8");class Go extends It{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,d,g,_){const b=this.length;return this.resize(b+1),this.emplace(b,n,s,h,d,g,_)}emplace(n,s,h,d,g,_,b){const E=6*n;return this.int16[E+0]=s,this.int16[E+1]=h,this.int16[E+2]=d,this.int16[E+3]=g,this.int16[E+4]=_,this.int16[E+5]=b,n}}Go.prototype.bytesPerElement=12,Dt(Go,"StructArrayLayout6i12");class Na extends It{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,d,g,_,b,E,M,O,B,F){const q=this.length;return this.resize(q+1),this.emplace(q,n,s,h,d,g,_,b,E,M,O,B,F)}emplace(n,s,h,d,g,_,b,E,M,O,B,F,q){const H=12*n;return this.int16[H+0]=s,this.int16[H+1]=h,this.int16[H+2]=d,this.int16[H+3]=g,this.uint16[H+4]=_,this.uint16[H+5]=b,this.uint16[H+6]=E,this.uint16[H+7]=M,this.int16[H+8]=O,this.int16[H+9]=B,this.int16[H+10]=F,this.int16[H+11]=q,n}}Na.prototype.bytesPerElement=24,Dt(Na,"StructArrayLayout4i4ui4i24");class gn extends It{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,d,g,_){const b=this.length;return this.resize(b+1),this.emplace(b,n,s,h,d,g,_)}emplace(n,s,h,d,g,_,b){const E=10*n,M=5*n;return this.int16[E+0]=s,this.int16[E+1]=h,this.int16[E+2]=d,this.float32[M+2]=g,this.float32[M+3]=_,this.float32[M+4]=b,n}}gn.prototype.bytesPerElement=20,Dt(gn,"StructArrayLayout3i3f20");class Qr extends It{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint32[1*n+0]=s,n}}Qr.prototype.bytesPerElement=4,Dt(Qr,"StructArrayLayout1ul4");class Or extends It{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,d,g,_,b,E,M,O,B,F,q){const H=this.length;return this.resize(H+1),this.emplace(H,n,s,h,d,g,_,b,E,M,O,B,F,q)}emplace(n,s,h,d,g,_,b,E,M,O,B,F,q,H){const K=20*n,re=10*n;return this.int16[K+0]=s,this.int16[K+1]=h,this.int16[K+2]=d,this.int16[K+3]=g,this.int16[K+4]=_,this.float32[re+3]=b,this.float32[re+4]=E,this.float32[re+5]=M,this.float32[re+6]=O,this.int16[K+14]=B,this.uint32[re+8]=F,this.uint16[K+18]=q,this.uint16[K+19]=H,n}}Or.prototype.bytesPerElement=40,Dt(Or,"StructArrayLayout5i4f1i1ul2ui40");class Pn extends It{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,d,g,_,b){const E=this.length;return this.resize(E+1),this.emplace(E,n,s,h,d,g,_,b)}emplace(n,s,h,d,g,_,b,E){const M=8*n;return this.int16[M+0]=s,this.int16[M+1]=h,this.int16[M+2]=d,this.int16[M+4]=g,this.int16[M+5]=_,this.int16[M+6]=b,this.int16[M+7]=E,n}}Pn.prototype.bytesPerElement=16,Dt(Pn,"StructArrayLayout3i2i2i16");class Mi extends It{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(n,s,h,d,g){const _=this.length;return this.resize(_+1),this.emplace(_,n,s,h,d,g)}emplace(n,s,h,d,g,_){const b=4*n,E=8*n;return this.float32[b+0]=s,this.float32[b+1]=h,this.float32[b+2]=d,this.int16[E+6]=g,this.int16[E+7]=_,n}}Mi.prototype.bytesPerElement=16,Dt(Mi,"StructArrayLayout2f1f2i16");class hn extends It{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,d){const g=this.length;return this.resize(g+1),this.emplace(g,n,s,h,d)}emplace(n,s,h,d,g){const _=12*n,b=3*n;return this.uint8[_+0]=s,this.uint8[_+1]=h,this.float32[b+1]=d,this.float32[b+2]=g,n}}hn.prototype.bytesPerElement=12,Dt(hn,"StructArrayLayout2ub2f12");class Ci extends It{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h){const d=this.length;return this.resize(d+1),this.emplace(d,n,s,h)}emplace(n,s,h,d){const g=3*n;return this.float32[g+0]=s,this.float32[g+1]=h,this.float32[g+2]=d,n}}Ci.prototype.bytesPerElement=12,Dt(Ci,"StructArrayLayout3f12");class Pi extends It{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h){const d=this.length;return this.resize(d+1),this.emplace(d,n,s,h)}emplace(n,s,h,d){const g=3*n;return this.uint16[g+0]=s,this.uint16[g+1]=h,this.uint16[g+2]=d,n}}Pi.prototype.bytesPerElement=6,Dt(Pi,"StructArrayLayout3ui6");class ps extends It{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n,s,h,d,g,_,b,E,M,O,B,F,q,H,K,re,ue,ye,le,ge,be){const _e=this.length;return this.resize(_e+1),this.emplace(_e,n,s,h,d,g,_,b,E,M,O,B,F,q,H,K,re,ue,ye,le,ge,be)}emplace(n,s,h,d,g,_,b,E,M,O,B,F,q,H,K,re,ue,ye,le,ge,be,_e){const Fe=30*n,Re=15*n,Ye=60*n;return this.int16[Fe+0]=s,this.int16[Fe+1]=h,this.int16[Fe+2]=d,this.float32[Re+2]=g,this.float32[Re+3]=_,this.uint16[Fe+8]=b,this.uint16[Fe+9]=E,this.uint32[Re+5]=M,this.uint32[Re+6]=O,this.uint32[Re+7]=B,this.uint16[Fe+16]=F,this.uint16[Fe+17]=q,this.uint16[Fe+18]=H,this.float32[Re+10]=K,this.float32[Re+11]=re,this.uint8[Ye+48]=ue,this.uint8[Ye+49]=ye,this.uint8[Ye+50]=le,this.uint32[Re+13]=ge,this.int16[Fe+28]=be,this.uint8[Ye+58]=_e,n}}ps.prototype.bytesPerElement=60,Dt(ps,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class rc extends It{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(n,s,h,d,g,_,b,E,M,O,B,F,q,H,K,re,ue,ye,le,ge,be,_e,Fe,Re,Ye,dt,Ve,tt,it,lt){const pt=this.length;return this.resize(pt+1),this.emplace(pt,n,s,h,d,g,_,b,E,M,O,B,F,q,H,K,re,ue,ye,le,ge,be,_e,Fe,Re,Ye,dt,Ve,tt,it,lt)}emplace(n,s,h,d,g,_,b,E,M,O,B,F,q,H,K,re,ue,ye,le,ge,be,_e,Fe,Re,Ye,dt,Ve,tt,it,lt,pt){const Ge=38*n,St=19*n;return this.int16[Ge+0]=s,this.int16[Ge+1]=h,this.int16[Ge+2]=d,this.float32[St+2]=g,this.float32[St+3]=_,this.int16[Ge+8]=b,this.int16[Ge+9]=E,this.int16[Ge+10]=M,this.int16[Ge+11]=O,this.int16[Ge+12]=B,this.int16[Ge+13]=F,this.uint16[Ge+14]=q,this.uint16[Ge+15]=H,this.uint16[Ge+16]=K,this.uint16[Ge+17]=re,this.uint16[Ge+18]=ue,this.uint16[Ge+19]=ye,this.uint16[Ge+20]=le,this.uint16[Ge+21]=ge,this.uint16[Ge+22]=be,this.uint16[Ge+23]=_e,this.uint16[Ge+24]=Fe,this.uint16[Ge+25]=Re,this.uint16[Ge+26]=Ye,this.uint16[Ge+27]=dt,this.uint16[Ge+28]=Ve,this.uint32[St+15]=tt,this.float32[St+16]=it,this.float32[St+17]=lt,this.float32[St+18]=pt,n}}rc.prototype.bytesPerElement=76,Dt(rc,"StructArrayLayout3i2f6i15ui1ul3f76");class go extends It{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.float32[1*n+0]=s,n}}go.prototype.bytesPerElement=4,Dt(go,"StructArrayLayout1f4");class Co extends It{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s,h,d,g){const _=this.length;return this.resize(_+1),this.emplace(_,n,s,h,d,g)}emplace(n,s,h,d,g,_){const b=5*n;return this.float32[b+0]=s,this.float32[b+1]=h,this.float32[b+2]=d,this.float32[b+3]=g,this.float32[b+4]=_,n}}Co.prototype.bytesPerElement=20,Dt(Co,"StructArrayLayout5f20");class ja extends It{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s,h,d){const g=this.length;return this.resize(g+1),this.emplace(g,n,s,h,d)}emplace(n,s,h,d,g){const _=6*n;return this.uint32[3*n+0]=s,this.uint16[_+2]=h,this.uint16[_+3]=d,this.uint16[_+4]=g,n}}ja.prototype.bytesPerElement=12,Dt(ja,"StructArrayLayout1ul3ui12");class ms extends It{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const d=2*n;return this.uint16[d+0]=s,this.uint16[d+1]=h,n}}ms.prototype.bytesPerElement=4,Dt(ms,"StructArrayLayout2ui4");class gs extends It{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(n){const s=this.length;return this.resize(s+1),this.emplace(s,n)}emplace(n,s){return this.uint16[1*n+0]=s,n}}gs.prototype.bytesPerElement=2,Dt(gs,"StructArrayLayout1ui2");class nc extends It{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(n,s){const h=this.length;return this.resize(h+1),this.emplace(h,n,s)}emplace(n,s,h){const d=2*n;return this.float32[d+0]=s,this.float32[d+1]=h,n}}nc.prototype.bytesPerElement=8,Dt(nc,"StructArrayLayout2f8");class OM extends Lt{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}OM.prototype.size=40;class _b extends Or{get(n){return new OM(this,n)}}Dt(_b,"CollisionBoxArray");class DM extends Lt{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(n){this._structArray.uint8[this._pos1+49]=n}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(n){this._structArray.uint8[this._pos1+50]=n}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(n){this._structArray.uint32[this._pos4+13]=n}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(n){this._structArray.uint8[this._pos1+58]=n}}DM.prototype.size=60;class RM extends ps{get(n){return new DM(this,n)}}Dt(RM,"PlacedSymbolArray");class LM extends Lt{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+11]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+13]}get key(){return this._structArray.uint16[this._pos2+14]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+17]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+19]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+21]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+22]}get featureIndex(){return this._structArray.uint16[this._pos2+23]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+25]}get numIconVertices(){return this._structArray.uint16[this._pos2+26]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+27]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+28]}get crossTileID(){return this._structArray.uint32[this._pos4+15]}set crossTileID(n){this._structArray.uint32[this._pos4+15]=n}get textOffset0(){return this._structArray.float32[this._pos4+16]}get textOffset1(){return this._structArray.float32[this._pos4+17]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+18]}}LM.prototype.size=76;class zM extends rc{get(n){return new LM(this,n)}}Dt(zM,"SymbolInstanceArray");class BM extends go{getoffsetX(n){return this.float32[1*n+0]}}Dt(BM,"GlyphOffsetArray");class $M extends qt{getx(n){return this.int16[2*n+0]}gety(n){return this.int16[2*n+1]}}Dt($M,"SymbolLineVertexArray");class FM extends Lt{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}FM.prototype.size=12;class NM extends ja{get(n){return new FM(this,n)}}Dt(NM,"FeatureIndexArray");class jM extends ms{geta_centroid_pos0(n){return this.uint16[2*n+0]}geta_centroid_pos1(n){return this.uint16[2*n+1]}}Dt(jM,"FillExtrusionCentroidArray");const cF=Nt([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),uF=Nt([{name:"a_dash",components:4,type:"Uint16"}]);var Au={},hF={get exports(){return Au},set exports(a){Au=a}},vb={};({get exports(){return vb},set exports(a){vb=a}}).exports=function(a,n){var s,h,d,g,_,b,E,M;for(h=a.length-(s=3&a.length),d=n,_=3432918353,b=461845907,M=0;M<h;)E=255&a.charCodeAt(M)|(255&a.charCodeAt(++M))<<8|(255&a.charCodeAt(++M))<<16|(255&a.charCodeAt(++M))<<24,++M,d=27492+(65535&(g=5*(65535&(d=(d^=E=(65535&(E=(E=(65535&E)*_+(((E>>>16)*_&65535)<<16)&4294967295)<<15|E>>>17))*b+(((E>>>16)*b&65535)<<16)&4294967295)<<13|d>>>19))+((5*(d>>>16)&65535)<<16)&4294967295))+((58964+(g>>>16)&65535)<<16);switch(E=0,s){case 3:E^=(255&a.charCodeAt(M+2))<<16;case 2:E^=(255&a.charCodeAt(M+1))<<8;case 1:d^=E=(65535&(E=(E=(65535&(E^=255&a.charCodeAt(M)))*_+(((E>>>16)*_&65535)<<16)&4294967295)<<15|E>>>17))*b+(((E>>>16)*b&65535)<<16)&4294967295}return d^=a.length,d=2246822507*(65535&(d^=d>>>16))+((2246822507*(d>>>16)&65535)<<16)&4294967295,d=3266489909*(65535&(d^=d>>>13))+((3266489909*(d>>>16)&65535)<<16)&4294967295,(d^=d>>>16)>>>0};var xb={};({get exports(){return xb},set exports(a){xb=a}}).exports=function(a,n){for(var s,h=a.length,d=n^h,g=0;h>=4;)s=1540483477*(65535&(s=255&a.charCodeAt(g)|(255&a.charCodeAt(++g))<<8|(255&a.charCodeAt(++g))<<16|(255&a.charCodeAt(++g))<<24))+((1540483477*(s>>>16)&65535)<<16),d=1540483477*(65535&d)+((1540483477*(d>>>16)&65535)<<16)^(s=1540483477*(65535&(s^=s>>>24))+((1540483477*(s>>>16)&65535)<<16)),h-=4,++g;switch(h){case 3:d^=(255&a.charCodeAt(g+2))<<16;case 2:d^=(255&a.charCodeAt(g+1))<<8;case 1:d=1540483477*(65535&(d^=255&a.charCodeAt(g)))+((1540483477*(d>>>16)&65535)<<16)}return d=1540483477*(65535&(d^=d>>>13))+((1540483477*(d>>>16)&65535)<<16),(d^=d>>>15)>>>0};var UM=vb,fF=xb;hF.exports=UM,Au.murmur3=UM,Au.murmur2=fF;class B_{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(n,s,h,d){this.ids.push(VM(n)),this.positions.push(s,h,d)}getPositions(n){const s=VM(n);let h=0,d=this.ids.length-1;for(;h<d;){const _=h+d>>1;this.ids[_]>=s?d=_:h=_+1}const g=[];for(;this.ids[h]===s;)g.push({index:this.positions[3*h],start:this.positions[3*h+1],end:this.positions[3*h+2]}),h++;return g}static serialize(n,s){const h=new Float64Array(n.ids),d=new Uint32Array(n.positions);return bb(h,d,0,h.length-1),s&&s.push(h.buffer,d.buffer),{ids:h,positions:d}}static deserialize(n){const s=new B_;return s.ids=n.ids,s.positions=n.positions,s.indexed=!0,s}}function VM(a){const n=+a;return!isNaN(n)&&Number.MIN_SAFE_INTEGER<=n&&n<=Number.MAX_SAFE_INTEGER?n:Au(String(a))}function bb(a,n,s,h){for(;s<h;){const d=a[s+h>>1];let g=s-1,_=h+1;for(;;){do g++;while(a[g]<d);do _--;while(a[_]>d);if(g>=_)break;$_(a,g,_),$_(n,3*g,3*_),$_(n,3*g+1,3*_+1),$_(n,3*g+2,3*_+2)}_-s<h-_?(bb(a,n,s,_),s=_+1):(bb(a,n,_+1,h),h=_)}}function $_(a,n,s){const h=a[n];a[n]=a[s],a[s]=h}Dt(B_,"FeaturePositionMap");class el{constructor(n){this.gl=n.gl,this.initialized=!1}fetchUniformLocation(n,s){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(n,s),this.initialized=!0),!!this.location}}class F_ extends el{constructor(n){super(n),this.current=0}set(n,s,h){this.fetchUniformLocation(n,s)&&this.current!==h&&(this.current=h,this.gl.uniform1f(this.location,h))}}class GM extends el{constructor(n){super(n),this.current=[0,0,0,0]}set(n,s,h){this.fetchUniformLocation(n,s)&&(h[0]===this.current[0]&&h[1]===this.current[1]&&h[2]===this.current[2]&&h[3]===this.current[3]||(this.current=h,this.gl.uniform4f(this.location,h[0],h[1],h[2],h[3])))}}class qM extends el{constructor(n){super(n),this.current=zn.transparent}set(n,s,h){this.fetchUniformLocation(n,s)&&(h.r===this.current.r&&h.g===this.current.g&&h.b===this.current.b&&h.a===this.current.a||(this.current=h,this.gl.uniform4f(this.location,h.r,h.g,h.b,h.a)))}}const dF=new Float32Array(16),pF=new Float32Array(9),mF=new Float32Array(4);function wb(a){return[Ft(255*a.r,255*a.g),Ft(255*a.b,255*a.a)]}class Up{constructor(n,s,h){this.value=n,this.uniformNames=s.map(d=>`u_${d}`),this.type=h}setUniform(n,s,h,d,g){s.set(n,g,d.constantOr(this.value))}getBinding(n,s){return this.type==="color"?new qM(n):new F_(n)}}class Yh{constructor(n,s){this.uniformNames=s.map(h=>`u_${h}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(n){this.pixelRatio=n.pixelRatio||1,this.pattern=n.tl.concat(n.br)}setUniform(n,s,h,d,g){const _=g==="u_pattern"||g==="u_dash"?this.pattern:g==="u_pixel_ratio"?this.pixelRatio:null;_&&s.set(n,g,_)}getBinding(n,s){return s==="u_pattern"||s==="u_dash"?new GM(n):new F_(n)}}class tl{constructor(n,s,h,d){this.expression=n,this.type=h,this.maxValue=0,this.paintVertexAttributes=s.map(g=>({name:`a_${g}`,type:"Float32",components:h==="color"?2:1,offset:0})),this.paintVertexArray=new d}populatePaintArray(n,s,h,d,g,_){const b=this.paintVertexArray.length,E=this.expression.evaluate(new ke(0),s,{},g,d,_);this.paintVertexArray.resize(n),this._setPaintValue(b,n,E)}updatePaintArray(n,s,h,d,g){const _=this.expression.evaluate({zoom:0},h,d,void 0,g);this._setPaintValue(n,s,_)}_setPaintValue(n,s,h){if(this.type==="color"){const d=wb(h);for(let g=n;g<s;g++)this.paintVertexArray.emplace(g,d[0],d[1])}else{for(let d=n;d<s;d++)this.paintVertexArray.emplace(d,h);this.maxValue=Math.max(this.maxValue,Math.abs(h))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ua{constructor(n,s,h,d,g,_){this.expression=n,this.uniformNames=s.map(b=>`u_${b}_t`),this.type=h,this.useIntegerZoom=d,this.zoom=g,this.maxValue=0,this.paintVertexAttributes=s.map(b=>({name:`a_${b}`,type:"Float32",components:h==="color"?4:2,offset:0})),this.paintVertexArray=new _}populatePaintArray(n,s,h,d,g,_){const b=this.expression.evaluate(new ke(this.zoom),s,{},g,d,_),E=this.expression.evaluate(new ke(this.zoom+1),s,{},g,d,_),M=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValue(M,n,b,E)}updatePaintArray(n,s,h,d,g){const _=this.expression.evaluate({zoom:this.zoom},h,d,void 0,g),b=this.expression.evaluate({zoom:this.zoom+1},h,d,void 0,g);this._setPaintValue(n,s,_,b)}_setPaintValue(n,s,h,d){if(this.type==="color"){const g=wb(h),_=wb(d);for(let b=n;b<s;b++)this.paintVertexArray.emplace(b,g[0],g[1],_[0],_[1])}else{for(let g=n;g<s;g++)this.paintVertexArray.emplace(g,h,d);this.maxValue=Math.max(this.maxValue,Math.abs(h),Math.abs(d))}}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(n,s,h,d,g){const _=this.useIntegerZoom?Math.floor(h.zoom):h.zoom,b=Be(this.expression.interpolationFactor(_,this.zoom,this.zoom+1),0,1);s.set(n,g,b)}getBinding(n,s){return new F_(n)}}class ic{constructor(n,s,h,d,g){this.expression=n,this.layerId=g,this.paintVertexAttributes=(h==="array"?uF:cF).members;for(let _=0;_<s.length;++_);this.paintVertexArray=new d}populatePaintArray(n,s,h){const d=this.paintVertexArray.length;this.paintVertexArray.resize(n),this._setPaintValues(d,n,s.patterns&&s.patterns[this.layerId],h)}updatePaintArray(n,s,h,d,g,_){this._setPaintValues(n,s,h.patterns&&h.patterns[this.layerId],_)}_setPaintValues(n,s,h,d){if(!d||!h)return;const g=d[h];if(!g)return;const{tl:_,br:b,pixelRatio:E}=g;for(let M=n;M<s;M++)this.paintVertexArray.emplace(M,_[0],_[1],b[0],b[1],E)}upload(n){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=n.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class oc{constructor(n,s,h=()=>!0){this.binders={},this._buffers=[];const d=[];for(const g in n.paint._values){if(!h(g))continue;const _=n.paint.get(g);if(!(_ instanceof st&&Zl(_.property.specification)))continue;const b=yF(g,n.type),E=_.value,M=_.property.specification.type,O=!!_.property.useIntegerZoom,B=g==="line-dasharray"||g.endsWith("pattern"),F=g==="line-dasharray"&&n.layout.get("line-cap").value.kind!=="constant";if(E.kind!=="constant"||F)if(E.kind==="source"||F||B){const q=WM(g,M,"source");this.binders[g]=B?new ic(E,b,M,q,n.id):new tl(E,b,M,q),d.push(`/a_${g}`)}else{const q=WM(g,M,"composite");this.binders[g]=new Ua(E,b,M,O,s,q),d.push(`/z_${g}`)}else this.binders[g]=B?new Yh(E.value,b):new Up(E.value,b,M),d.push(`/u_${g}`)}this.cacheKey=d.sort().join("")}getMaxValue(n){const s=this.binders[n];return s instanceof tl||s instanceof Ua?s.maxValue:0}populatePaintArrays(n,s,h,d,g,_){for(const b in this.binders){const E=this.binders[b];(E instanceof tl||E instanceof Ua||E instanceof ic)&&E.populatePaintArray(n,s,h,d,g,_)}}setConstantPatternPositions(n){for(const s in this.binders){const h=this.binders[s];h instanceof Yh&&h.setConstantPatternPositions(n)}}updatePaintArrays(n,s,h,d,g,_){let b=!1;for(const E in n){const M=s.getPositions(E);for(const O of M){const B=h.feature(O.index);for(const F in this.binders){const q=this.binders[F];if((q instanceof tl||q instanceof Ua||q instanceof ic)&&q.expression.isStateDependent===!0){const H=d.paint.get(F);q.expression=H.value,q.updatePaintArray(O.start,O.end,B,n[E],g,_),b=!0}}}}return b}defines(){const n=[];for(const s in this.binders){const h=this.binders[s];(h instanceof Up||h instanceof Yh)&&n.push(...h.uniformNames.map(d=>`#define HAS_UNIFORM_${d}`))}return n}getBinderAttributes(){const n=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof tl||h instanceof Ua||h instanceof ic)for(let d=0;d<h.paintVertexAttributes.length;d++)n.push(h.paintVertexAttributes[d].name)}return n}getBinderUniforms(){const n=[];for(const s in this.binders){const h=this.binders[s];if(h instanceof Up||h instanceof Yh||h instanceof Ua)for(const d of h.uniformNames)n.push(d)}return n}getPaintVertexBuffers(){return this._buffers}getUniforms(n){const s=[];for(const h in this.binders){const d=this.binders[h];if(d instanceof Up||d instanceof Yh||d instanceof Ua)for(const g of d.uniformNames)s.push({name:g,property:h,binding:d.getBinding(n,g)})}return s}setUniforms(n,s,h,d,g){for(const{name:_,property:b,binding:E}of h)this.binders[b].setUniform(n,E,g,d.get(b),_)}updatePaintBuffers(){this._buffers=[];for(const n in this.binders){const s=this.binders[n];(s instanceof tl||s instanceof Ua||s instanceof ic)&&s.paintVertexBuffer&&this._buffers.push(s.paintVertexBuffer)}}upload(n){for(const s in this.binders){const h=this.binders[s];(h instanceof tl||h instanceof Ua||h instanceof ic)&&h.upload(n)}this.updatePaintBuffers()}destroy(){for(const n in this.binders){const s=this.binders[n];(s instanceof tl||s instanceof Ua||s instanceof ic)&&s.destroy()}}}class Mu{constructor(n,s,h=()=>!0){this.programConfigurations={};for(const d of n)this.programConfigurations[d.id]=new oc(d,s,h);this.needsUpload=!1,this._featureMap=new B_,this._bufferOffset=0}populatePaintArrays(n,s,h,d,g,_,b){for(const E in this.programConfigurations)this.programConfigurations[E].populatePaintArrays(n,s,d,g,_,b);s.id!==void 0&&this._featureMap.add(s.id,h,this._bufferOffset,n),this._bufferOffset=n,this.needsUpload=!0}updatePaintArrays(n,s,h,d,g){for(const _ of h)this.needsUpload=this.programConfigurations[_.id].updatePaintArrays(n,this._featureMap,s,_,d,g)||this.needsUpload}get(n){return this.programConfigurations[n]}upload(n){if(this.needsUpload){for(const s in this.programConfigurations)this.programConfigurations[s].upload(n);this.needsUpload=!1}}destroy(){for(const n in this.programConfigurations)this.programConfigurations[n].destroy()}}const gF={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function yF(a,n){return gF[a]||[a.replace(`${n}-`,"").replace(/-/g,"_")]}const _F={"line-pattern":{source:Vn,composite:Vn},"fill-pattern":{source:Vn,composite:Vn},"fill-extrusion-pattern":{source:Vn,composite:Vn},"line-dasharray":{source:to,composite:to}},vF={color:{source:nc,composite:Jr},number:{source:go,composite:nc}};function WM(a,n,s){const h=_F[a];return h&&h[s]||vF[n][s]}Dt(Up,"ConstantBinder"),Dt(Yh,"PatternConstantBinder"),Dt(tl,"SourceExpressionBinder"),Dt(ic,"PatternCompositeBinder"),Dt(Ua,"CompositeExpressionBinder"),Dt(oc,"ProgramConfiguration",{omit:["_buffers"]}),Dt(Mu,"ProgramConfigurationSet");const N_="-transition";class Va extends La{constructor(n,s){if(super(),this.id=n.id,this.type=n.type,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,n.type!=="custom"&&(this.metadata=n.metadata,this.minzoom=n.minzoom,this.maxzoom=n.maxzoom,n.type!=="background"&&n.type!=="sky"&&(this.source=n.source,this.sourceLayer=n["source-layer"],this.filter=n.filter),s.layout&&(this._unevaluatedLayout=new We(s.layout)),s.paint)){this._transitionablePaint=new yt(s.paint);for(const h in n.paint)this.setPaintProperty(h,n.paint[h],{validate:!1});for(const h in n.layout)this.setLayoutProperty(h,n.layout[h],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new $e(s.paint)}}getLayoutProperty(n){return n==="visibility"?this.visibility:this._unevaluatedLayout.getValue(n)}setLayoutProperty(n,s,h={}){s!=null&&this._validate(S_,`layers.${this.id}.layout.${n}`,n,s,h)||(n!=="visibility"?this._unevaluatedLayout.setValue(n,s):this.visibility=s)}getPaintProperty(n){return Rr(n,N_)?this._transitionablePaint.getTransition(n.slice(0,-N_.length)):this._transitionablePaint.getValue(n)}setPaintProperty(n,s,h={}){if(s!=null&&this._validate(yb,`layers.${this.id}.paint.${n}`,n,s,h))return!1;if(Rr(n,N_))return this._transitionablePaint.setTransition(n.slice(0,-N_.length),s||void 0),!1;{const d=this._transitionablePaint._values[n],g=d.value.isDataDriven(),_=d.value;this._transitionablePaint.setValue(n,s),this._handleSpecialPaintPropertyUpdate(n);const b=this._transitionablePaint._values[n].value,E=b.isDataDriven(),M=Rr(n,"pattern")||n==="line-dasharray";return E||g||M||this._handleOverridablePaintPropertyUpdate(n,_,b)}}_handleSpecialPaintPropertyUpdate(n){}getProgramIds(){return null}getProgramConfiguration(n){return null}_handleOverridablePaintPropertyUpdate(n,s,h){return!1}isHidden(n){return!!(this.minzoom&&n<this.minzoom)||!!(this.maxzoom&&n>=this.maxzoom)||this.visibility==="none"}updateTransitions(n){this._transitioningPaint=this._transitionablePaint.transitioned(n,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(n,s){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(n,void 0,s)),this.paint=this._transitioningPaint.possiblyEvaluate(n,void 0,s)}serialize(){const n={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(n.layout=n.layout||{},n.layout.visibility=this.visibility),_t(n,(s,h)=>!(s===void 0||h==="layout"&&!Object.keys(s).length||h==="paint"&&!Object.keys(s).length))}_validate(n,s,h,d,g={}){return(!g||g.validate!==!1)&&E_(this,n.call(w_,{key:s,layerType:this.type,objectKey:h,value:d,styleSpec:Xe,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const n in this.paint._values){const s=this.paint.get(n);if(s instanceof st&&Zl(s.property.specification)&&(s.value.kind==="source"||s.value.kind==="composite")&&s.value.isStateDependent)return!0}return!1}compileFilter(){this._filterCompiled||(this._featureFilter=Nh(this.filter),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}}const xF=Nt([{name:"a_pos",components:2,type:"Int16"}],4),bF=Nt([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class Gn{constructor(n=[]){this.segments=n}prepareSegment(n,s,h,d){let g=this.segments[this.segments.length-1];return n>Gn.MAX_VERTEX_ARRAY_LENGTH&&Qe(`Max vertices per segment is ${Gn.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${n}`),(!g||g.vertexLength+n>Gn.MAX_VERTEX_ARRAY_LENGTH||g.sortKey!==d)&&(g={vertexOffset:s.length,primitiveOffset:h.length,vertexLength:0,primitiveLength:0},d!==void 0&&(g.sortKey=d),this.segments.push(g)),g}get(){return this.segments}destroy(){for(const n of this.segments)for(const s in n.vaos)n.vaos[s].destroy()}static simpleSegment(n,s,h,d){return new Gn([{vertexOffset:n,primitiveOffset:s,vertexLength:h,primitiveLength:d,vaos:{},sortKey:0}])}}Gn.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,Dt(Gn,"SegmentVector");var rr=8192;class ac{constructor(n,s){n&&(s?this.setSouthWest(n).setNorthEast(s):n.length===4?this.setSouthWest([n[0],n[1]]).setNorthEast([n[2],n[3]]):this.setSouthWest(n[0]).setNorthEast(n[1]))}setNorthEast(n){return this._ne=n instanceof Ir?new Ir(n.lng,n.lat):Ir.convert(n),this}setSouthWest(n){return this._sw=n instanceof Ir?new Ir(n.lng,n.lat):Ir.convert(n),this}extend(n){const s=this._sw,h=this._ne;let d,g;if(n instanceof Ir)d=n,g=n;else{if(!(n instanceof ac))return Array.isArray(n)?n.length===4||n.every(Array.isArray)?this.extend(ac.convert(n)):this.extend(Ir.convert(n)):typeof n=="object"&&n!==null&&n.hasOwnProperty("lat")&&(n.hasOwnProperty("lon")||n.hasOwnProperty("lng"))?this.extend(Ir.convert(n)):this;if(d=n._sw,g=n._ne,!d||!g)return this}return s||h?(s.lng=Math.min(d.lng,s.lng),s.lat=Math.min(d.lat,s.lat),h.lng=Math.max(g.lng,h.lng),h.lat=Math.max(g.lat,h.lat)):(this._sw=new Ir(d.lng,d.lat),this._ne=new Ir(g.lng,g.lat)),this}getCenter(){return new Ir((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new Ir(this.getWest(),this.getNorth())}getSouthEast(){return new Ir(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(n){const{lng:s,lat:h}=Ir.convert(n);let d=this._sw.lng<=s&&s<=this._ne.lng;return this._sw.lng>this._ne.lng&&(d=this._sw.lng>=s&&s>=this._ne.lng),this._sw.lat<=h&&h<=this._ne.lat&&d}static convert(n){return!n||n instanceof ac?n:new ac(n)}}var j_=1e-6,Po=typeof Float32Array<"u"?Float32Array:Array;function HM(){var a=new Po(9);return Po!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[5]=0,a[6]=0,a[7]=0),a[0]=1,a[4]=1,a[8]=1,a}function ZM(a,n,s){var h=n[0],d=n[1],g=n[2],_=n[3],b=n[4],E=n[5],M=n[6],O=n[7],B=n[8],F=s[0],q=s[1],H=s[2],K=s[3],re=s[4],ue=s[5],ye=s[6],le=s[7],ge=s[8];return a[0]=F*h+q*_+H*M,a[1]=F*d+q*b+H*O,a[2]=F*g+q*E+H*B,a[3]=K*h+re*_+ue*M,a[4]=K*d+re*b+ue*O,a[5]=K*g+re*E+ue*B,a[6]=ye*h+le*_+ge*M,a[7]=ye*d+le*b+ge*O,a[8]=ye*g+le*E+ge*B,a}function Ga(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=1,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=1,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function Sb(a,n){var s=n[0],h=n[1],d=n[2],g=n[3],_=n[4],b=n[5],E=n[6],M=n[7],O=n[8],B=n[9],F=n[10],q=n[11],H=n[12],K=n[13],re=n[14],ue=n[15],ye=s*b-h*_,le=s*E-d*_,ge=s*M-g*_,be=h*E-d*b,_e=h*M-g*b,Fe=d*M-g*E,Re=O*K-B*H,Ye=O*re-F*H,dt=O*ue-q*H,Ve=B*re-F*K,tt=B*ue-q*K,it=F*ue-q*re,lt=ye*it-le*tt+ge*Ve+be*dt-_e*Ye+Fe*Re;return lt?(a[0]=(b*it-E*tt+M*Ve)*(lt=1/lt),a[1]=(d*tt-h*it-g*Ve)*lt,a[2]=(K*Fe-re*_e+ue*be)*lt,a[3]=(F*_e-B*Fe-q*be)*lt,a[4]=(E*dt-_*it-M*Ye)*lt,a[5]=(s*it-d*dt+g*Ye)*lt,a[6]=(re*ge-H*Fe-ue*le)*lt,a[7]=(O*Fe-F*ge+q*le)*lt,a[8]=(_*tt-b*dt+M*Re)*lt,a[9]=(h*dt-s*tt-g*Re)*lt,a[10]=(H*_e-K*ge+ue*ye)*lt,a[11]=(B*ge-O*_e-q*ye)*lt,a[12]=(b*Ye-_*Ve-E*Re)*lt,a[13]=(s*Ve-h*Ye+d*Re)*lt,a[14]=(K*le-H*be-re*ye)*lt,a[15]=(O*be-B*le+F*ye)*lt,a):null}function Cu(a,n,s){var h=n[0],d=n[1],g=n[2],_=n[3],b=n[4],E=n[5],M=n[6],O=n[7],B=n[8],F=n[9],q=n[10],H=n[11],K=n[12],re=n[13],ue=n[14],ye=n[15],le=s[0],ge=s[1],be=s[2],_e=s[3];return a[0]=le*h+ge*b+be*B+_e*K,a[1]=le*d+ge*E+be*F+_e*re,a[2]=le*g+ge*M+be*q+_e*ue,a[3]=le*_+ge*O+be*H+_e*ye,a[4]=(le=s[4])*h+(ge=s[5])*b+(be=s[6])*B+(_e=s[7])*K,a[5]=le*d+ge*E+be*F+_e*re,a[6]=le*g+ge*M+be*q+_e*ue,a[7]=le*_+ge*O+be*H+_e*ye,a[8]=(le=s[8])*h+(ge=s[9])*b+(be=s[10])*B+(_e=s[11])*K,a[9]=le*d+ge*E+be*F+_e*re,a[10]=le*g+ge*M+be*q+_e*ue,a[11]=le*_+ge*O+be*H+_e*ye,a[12]=(le=s[12])*h+(ge=s[13])*b+(be=s[14])*B+(_e=s[15])*K,a[13]=le*d+ge*E+be*F+_e*re,a[14]=le*g+ge*M+be*q+_e*ue,a[15]=le*_+ge*O+be*H+_e*ye,a}function Vp(a,n,s){var h,d,g,_,b,E,M,O,B,F,q,H,K=s[0],re=s[1],ue=s[2];return n===a?(a[12]=n[0]*K+n[4]*re+n[8]*ue+n[12],a[13]=n[1]*K+n[5]*re+n[9]*ue+n[13],a[14]=n[2]*K+n[6]*re+n[10]*ue+n[14],a[15]=n[3]*K+n[7]*re+n[11]*ue+n[15]):(d=n[1],g=n[2],_=n[3],b=n[4],E=n[5],M=n[6],O=n[7],B=n[8],F=n[9],q=n[10],H=n[11],a[0]=h=n[0],a[1]=d,a[2]=g,a[3]=_,a[4]=b,a[5]=E,a[6]=M,a[7]=O,a[8]=B,a[9]=F,a[10]=q,a[11]=H,a[12]=h*K+b*re+B*ue+n[12],a[13]=d*K+E*re+F*ue+n[13],a[14]=g*K+M*re+q*ue+n[14],a[15]=_*K+O*re+H*ue+n[15]),a}function Pu(a,n,s){var h=s[0],d=s[1],g=s[2];return a[0]=n[0]*h,a[1]=n[1]*h,a[2]=n[2]*h,a[3]=n[3]*h,a[4]=n[4]*d,a[5]=n[5]*d,a[6]=n[6]*d,a[7]=n[7]*d,a[8]=n[8]*g,a[9]=n[9]*g,a[10]=n[10]*g,a[11]=n[11]*g,a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15],a}function Eb(a,n,s){var h=Math.sin(s),d=Math.cos(s),g=n[4],_=n[5],b=n[6],E=n[7],M=n[8],O=n[9],B=n[10],F=n[11];return n!==a&&(a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[3],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a[4]=g*d+M*h,a[5]=_*d+O*h,a[6]=b*d+B*h,a[7]=E*d+F*h,a[8]=M*d-g*h,a[9]=O*d-_*h,a[10]=B*d-b*h,a[11]=F*d-E*h,a}function U_(a,n,s){var h=Math.sin(s),d=Math.cos(s),g=n[0],_=n[1],b=n[2],E=n[3],M=n[8],O=n[9],B=n[10],F=n[11];return n!==a&&(a[4]=n[4],a[5]=n[5],a[6]=n[6],a[7]=n[7],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a[0]=g*d-M*h,a[1]=_*d-O*h,a[2]=b*d-B*h,a[3]=E*d-F*h,a[8]=g*h+M*d,a[9]=_*h+O*d,a[10]=b*h+B*d,a[11]=E*h+F*d,a}function XM(a,n){return a[0]=n[0],a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=n[1],a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=n[2],a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a}function KM(a,n,s){var h,d,g,_=s[0],b=s[1],E=s[2],M=Math.hypot(_,b,E);return M<j_?null:(_*=M=1/M,b*=M,E*=M,h=Math.sin(n),d=Math.cos(n),a[0]=_*_*(g=1-d)+d,a[1]=b*_*g+E*h,a[2]=E*_*g-b*h,a[3]=0,a[4]=_*b*g-E*h,a[5]=b*b*g+d,a[6]=E*b*g+_*h,a[7]=0,a[8]=_*E*g+b*h,a[9]=b*E*g-_*h,a[10]=E*E*g+d,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a)}Math.hypot||(Math.hypot=function(){for(var a=0,n=arguments.length;n--;)a+=arguments[n]*arguments[n];return Math.sqrt(a)});var wF=Cu;function Tb(){var a=new Po(3);return Po!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a}function YM(a){var n=new Po(3);return n[0]=a[0],n[1]=a[1],n[2]=a[2],n}function Gp(a){return Math.hypot(a[0],a[1],a[2])}function Jh(a,n,s){var h=new Po(3);return h[0]=a,h[1]=n,h[2]=s,h}function rl(a,n,s){return a[0]=n[0]+s[0],a[1]=n[1]+s[1],a[2]=n[2]+s[2],a}function Ab(a,n,s){return a[0]=n[0]-s[0],a[1]=n[1]-s[1],a[2]=n[2]-s[2],a}function JM(a,n,s){return a[0]=n[0]*s[0],a[1]=n[1]*s[1],a[2]=n[2]*s[2],a}function qp(a,n,s){return a[0]=Math.min(n[0],s[0]),a[1]=Math.min(n[1],s[1]),a[2]=Math.min(n[2],s[2]),a}function Wp(a,n,s){return a[0]=Math.max(n[0],s[0]),a[1]=Math.max(n[1],s[1]),a[2]=Math.max(n[2],s[2]),a}function qo(a,n,s){return a[0]=n[0]*s,a[1]=n[1]*s,a[2]=n[2]*s,a}function Hp(a,n,s,h){return a[0]=n[0]+s[0]*h,a[1]=n[1]+s[1]*h,a[2]=n[2]+s[2]*h,a}function ro(a,n){var s=n[0],h=n[1],d=n[2],g=s*s+h*h+d*d;return g>0&&(g=1/Math.sqrt(g)),a[0]=n[0]*g,a[1]=n[1]*g,a[2]=n[2]*g,a}function fa(a,n){return a[0]*n[0]+a[1]*n[1]+a[2]*n[2]}function Mb(a,n,s){var h=n[0],d=n[1],g=n[2],_=s[0],b=s[1],E=s[2];return a[0]=d*E-g*b,a[1]=g*_-h*E,a[2]=h*b-d*_,a}function Bn(a,n,s){var h=n[0],d=n[1],g=n[2],_=s[3]*h+s[7]*d+s[11]*g+s[15];return a[0]=(s[0]*h+s[4]*d+s[8]*g+s[12])/(_=_||1),a[1]=(s[1]*h+s[5]*d+s[9]*g+s[13])/_,a[2]=(s[2]*h+s[6]*d+s[10]*g+s[14])/_,a}function QM(a,n,s){var h=s[0],d=s[1],g=s[2],_=n[0],b=n[1],E=n[2],M=d*E-g*b,O=g*_-h*E,B=h*b-d*_,F=d*B-g*O,q=g*M-h*B,H=h*O-d*M,K=2*s[3];return O*=K,B*=K,q*=2,H*=2,a[0]=_+(M*=K)+(F*=2),a[1]=b+O+q,a[2]=E+B+H,a}var Zp,qa=Ab,SF=JM,EF=Gp;function eC(a,n,s){return a[0]=n[0]*s,a[1]=n[1]*s,a[2]=n[2]*s,a[3]=n[3]*s,a}function tC(a,n){var s=n[0],h=n[1],d=n[2],g=n[3],_=s*s+h*h+d*d+g*g;return _>0&&(_=1/Math.sqrt(_)),a[0]=s*_,a[1]=h*_,a[2]=d*_,a[3]=g*_,a}function Iu(a,n,s){var h=n[0],d=n[1],g=n[2],_=n[3];return a[0]=s[0]*h+s[4]*d+s[8]*g+s[12]*_,a[1]=s[1]*h+s[5]*d+s[9]*g+s[13]*_,a[2]=s[2]*h+s[6]*d+s[10]*g+s[14]*_,a[3]=s[3]*h+s[7]*d+s[11]*g+s[15]*_,a}function rC(){var a=new Po(4);return Po!=Float32Array&&(a[0]=0,a[1]=0,a[2]=0),a[3]=1,a}function nC(a){return a[0]=0,a[1]=0,a[2]=0,a[3]=1,a}function iC(a,n,s){s*=.5;var h=n[0],d=n[1],g=n[2],_=n[3],b=Math.sin(s),E=Math.cos(s);return a[0]=h*E+_*b,a[1]=d*E+g*b,a[2]=g*E-d*b,a[3]=_*E-h*b,a}function oC(a,n,s){s*=.5;var h=n[0],d=n[1],g=n[2],_=n[3],b=Math.sin(s),E=Math.cos(s);return a[0]=h*E-g*b,a[1]=d*E+_*b,a[2]=g*E+h*b,a[3]=_*E-d*b,a}Tb(),Zp=new Po(4),Po!=Float32Array&&(Zp[0]=0,Zp[1]=0,Zp[2]=0,Zp[3]=0);var TF=tC;Tb(),Jh(1,0,0),Jh(0,1,0),rC(),rC(),HM();const AF=Nt([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:aC}=AF,sC=Nt([{name:"a_pos_3",components:3,type:"Int16"}]);var Xp=Nt([{name:"a_pos",type:"Int16",components:2}]);class Cb{constructor(n,s){this.pos=n,this.dir=s}intersectsPlane(n,s,h){const d=fa(s,this.dir);if(Math.abs(d)<1e-6)return!1;const g=((n[0]-this.pos[0])*s[0]+(n[1]-this.pos[1])*s[1]+(n[2]-this.pos[2])*s[2])/d;return h[0]=this.pos[0]+this.dir[0]*g,h[1]=this.pos[1]+this.dir[1]*g,h[2]=this.pos[2]+this.dir[2]*g,!0}closestPointOnSphere(n,s,h){if(function(q,H){var K=q[0],re=q[1],ue=q[2],ye=H[0],le=H[1],ge=H[2];return Math.abs(K-ye)<=j_*Math.max(1,Math.abs(K),Math.abs(ye))&&Math.abs(re-le)<=j_*Math.max(1,Math.abs(re),Math.abs(le))&&Math.abs(ue-ge)<=j_*Math.max(1,Math.abs(ue),Math.abs(ge))}(this.pos,n)||s===0)return h[0]=h[1]=h[2]=0,!1;const[d,g,_]=this.dir,b=this.pos[0]-n[0],E=this.pos[1]-n[1],M=this.pos[2]-n[2],O=d*d+g*g+_*_,B=2*(b*d+E*g+M*_),F=B*B-4*O*(b*b+E*E+M*M-s*s);if(F<0){const q=Math.max(-B/2,0),H=b+d*q,K=E+g*q,re=M+_*q,ue=Math.hypot(H,K,re);return h[0]=H*s/ue,h[1]=K*s/ue,h[2]=re*s/ue,!1}{const q=(-B-Math.sqrt(F))/(2*O);if(q<0){const H=Math.hypot(b,E,M);return h[0]=b*s/H,h[1]=E*s/H,h[2]=M*s/H,!1}return h[0]=b+d*q,h[1]=E+g*q,h[2]=M+_*q,!0}}}class Pb{constructor(n,s,h,d,g){this.TL=n,this.TR=s,this.BR=h,this.BL=d,this.horizon=g}static fromInvProjectionMatrix(n,s,h){const d=[-1,1,1],g=[1,1,1],_=[1,-1,1],b=[-1,-1,1],E=Bn(d,d,n),M=Bn(g,g,n),O=Bn(_,_,n),B=Bn(b,b,n);return new Pb(E,M,O,B,s/h)}}class Ib{constructor(n,s){this.points=n,this.planes=s}static fromInvProjectionMatrix(n,s,h,d){const g=Math.pow(2,h),_=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(E=>{const M=Iu([],E,n),O=1/M[3]/s*g;return function(B,F,q){return B[0]=F[0]*q[0],B[1]=F[1]*q[1],B[2]=F[2]*q[2],B[3]=F[3]*q[3],B}(M,M,[O,O,d?1/M[3]:O,O])}),b=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(E=>{const M=ro([],Mb([],qa([],_[E[0]],_[E[1]]),qa([],_[E[2]],_[E[1]]))),O=-fa(M,_[E[1]]);return M.concat(O)});return new Ib(_,b)}}class no{static fromPoints(n){const s=[1/0,1/0,1/0],h=[-1/0,-1/0,-1/0];for(const d of n)qp(s,s,d),Wp(h,h,d);return new no(s,h)}static applyTransform(n,s){const h=n.getCorners();for(let d=0;d<h.length;++d)Bn(h[d],h[d],s);return no.fromPoints(h)}constructor(n,s){this.min=n,this.max=s,this.center=qo([],rl([],this.min,this.max),.5)}quadrant(n){const s=[n%2==0,n<2],h=YM(this.min),d=YM(this.max);for(let g=0;g<s.length;g++)h[g]=s[g]?this.min[g]:this.center[g],d[g]=s[g]?this.center[g]:this.max[g];return d[2]=this.max[2],new no(h,d)}distanceX(n){return Math.max(Math.min(this.max[0],n[0]),this.min[0])-n[0]}distanceY(n){return Math.max(Math.min(this.max[1],n[1]),this.min[1])-n[1]}distanceZ(n){return Math.max(Math.min(this.max[2],n[2]),this.min[2])-n[2]}getCorners(){const n=this.min,s=this.max;return[[n[0],n[1],n[2]],[s[0],n[1],n[2]],[s[0],s[1],n[2]],[n[0],s[1],n[2]],[n[0],n[1],s[2]],[s[0],n[1],s[2]],[s[0],s[1],s[2]],[n[0],s[1],s[2]]]}intersects(n){const s=this.getCorners();let h=!0;for(let d=0;d<n.planes.length;d++){const g=n.planes[d];let _=0;for(let b=0;b<s.length;b++)_+=fa(g,s[b])+g[3]>=0;if(_===0)return 0;_!==s.length&&(h=!1)}if(h)return 2;for(let d=0;d<3;d++){let g=Number.MAX_VALUE,_=-Number.MAX_VALUE;for(let b=0;b<n.points.length;b++){const E=n.points[b][d]-this.min[d];g=Math.min(g,E),_=Math.max(_,E)}if(_<0||g>this.max[d]-this.min[d])return 0}return 1}}const ys=rr/Math.PI/2,ku=64,Kp=[ku,32,16],da=-ys,pa=ys,MF=[new no([da,da,da],[pa,pa,pa]),new no([da,da,da],[0,0,pa]),new no([0,da,da],[pa,0,pa]),new no([da,0,da],[0,pa,pa]),new no([0,0,da],[pa,pa,pa])];function V_(a){return a*ys/Qp}function lC(a,n,s,h=!0){const d=qo([],a._camera.position,a.worldSize),g=[n,s,1,1];Iu(g,g,a.pixelMatrixInverse),eC(g,g,1/g[3]);const _=ro([],qa([],g,d)),b=a.globeMatrix,E=[b[12],b[13],b[14]],M=qa([],E,d),O=Gp(M),B=ro([],M),F=a.worldSize/(2*Math.PI),q=fa(B,_),H=Math.asin(F/O);if(H<Math.acos(q)){if(!h)return null;const dt=[],Ve=[];qo(dt,_,O/q),ro(Ve,qa(Ve,dt,M)),ro(_,rl(_,M,qo(_,Ve,Math.tan(H)*O)))}const K=[];new Cb(d,_).closestPointOnSphere(E,F,K);const re=ro([],Ti(b,0)),ue=ro([],Ti(b,1)),ye=ro([],Ti(b,2)),le=fa(re,K),ge=fa(ue,K),be=fa(ye,K),_e=Me(Math.asin(-ge/F));let Fe=Me(Math.atan2(le,be));Fe=a.center.lng+function(dt,Ve){const tt=(Ve-dt+180)%360-180;return tt<-180?tt+360:tt}(a.center.lng,Fe);const Re=vs(Fe),Ye=Be(xs(_e),0,1);return new rf(Re,Ye)}class CF{constructor(n,s,h){this.a=qa([],n,h),this.b=qa([],s,h),this.center=h;const d=ro([],this.a),g=ro([],this.b);this.angle=Math.acos(fa(d,g))}}function kb(a,n){if(a.angle===0)return null;let s;return s=a.a[n]===0?1/a.angle*.5*Math.PI:1/a.angle*Math.atan(a.b[n]/a.a[n]/Math.sin(a.angle)-1/Math.tan(a.angle)),s<0||s>1?null:function(h,d,g,_){const b=Math.sin(g);return h*(Math.sin((1-_)*g)/b)+d*(Math.sin(_*g)/b)}(a.a[n],a.b[n],a.angle,Be(s,0,1))+a.center[n]}function _s(a){if(a.z<=1)return MF[a.z+2*a.y+a.x];const n=Ob(G_(a));return no.fromPoints(n)}function Ou(a,n,s){return qo(a,a,1-s),Hp(a,a,n,s)}function cC(a,n){const s=tf(n.zoom);if(s===0)return _s(a);const h=G_(a),d=Ob(h),g=vs(h.getWest())*n.worldSize,_=vs(h.getEast())*n.worldSize,b=xs(h.getNorth())*n.worldSize,E=xs(h.getSouth())*n.worldSize,M=[g,b,0],O=[_,b,0],B=[g,E,0],F=[_,E,0],q=Sb([],n.globeMatrix);return Bn(M,M,q),Bn(O,O,q),Bn(B,B,q),Bn(F,F,q),d[0]=Ou(d[0],B,s),d[1]=Ou(d[1],F,s),d[2]=Ou(d[2],O,s),d[3]=Ou(d[3],M,s),no.fromPoints(d)}function uC(a,n,s){for(const h of a)Bn(h,h,n),qo(h,h,s)}function PF(a,n,s){const h=n/a.worldSize,d=a.globeMatrix;if(s.z<=1){const Re=_s(s).getCorners();return uC(Re,d,h),no.fromPoints(Re)}const g=G_(s),_=Ob(g);uC(_,d,h);const b=Number.MAX_VALUE,E=[-b,-b,-b],M=[b,b,b];if(g.contains(a.center)){for(const dt of _)qp(M,M,dt),Wp(E,E,dt);E[2]=0;const Re=a.point,Ye=[Re.x*h,Re.y*h,0];return qp(M,M,Ye),Wp(E,E,Ye),new no(M,E)}const O=[d[12]*h,d[13]*h,d[14]*h],B=g.getCenter(),F=Be(a.center.lat,-ki,ki),q=Be(B.lat,-ki,ki),H=vs(a.center.lng),K=xs(F);let re=H-vs(B.lng);const ue=K-xs(q);re>.5?re-=1:re<-.5&&(re+=1);let ye=0;Math.abs(re)>Math.abs(ue)?ye=re>=0?1:3:(ye=ue>=0?0:2,Hp(O,O,[d[4]*h,d[5]*h,d[6]*h],-Math.sin(xe(ue>=0?g.getSouth():g.getNorth()))*ys));const le=_[ye],ge=_[(ye+1)%4],be=new CF(le,ge,O),_e=[kb(be,0)||le[0],kb(be,1)||le[1],kb(be,2)||le[2]],Fe=tf(a.zoom);if(Fe>0){const Re=function({x:dt,y:Ve,z:tt},it,lt,pt,Ge){const St=1/(1<<tt);let Yt=dt*St,At=Yt+St,Bt=Ve*St,Et=Bt+St,Qt=0;const br=(Yt+At)/2-pt;return br>.5?Qt=-1:br<-.5&&(Qt=1),Yt=((Yt+Qt)*it-(pt*=it))*lt+pt,At=((At+Qt)*it-pt)*lt+pt,Bt=(Bt*it-(Ge*=it))*lt+Ge,Et=(Et*it-Ge)*lt+Ge,[[Yt,Et,0],[At,Et,0],[At,Bt,0],[Yt,Bt,0]]}(s,n,a._pixelsPerMercatorPixel,H,K);for(let dt=0;dt<_.length;dt++)Ou(_[dt],Re[dt],Fe);const Ye=rl([],Re[ye],Re[(ye+1)%4]);qo(Ye,Ye,.5),Ou(_e,Ye,Fe)}for(const Re of _)qp(M,M,Re),Wp(E,E,Re);return M[2]=Math.min(le[2],ge[2]),qp(M,M,_e),Wp(E,E,_e),new no(M,E)}function G_({x:a,y:n,z:s}){const h=1/(1<<s),d=new Ir(Wo(a*h),Ii((n+1)*h)),g=new Ir(Wo((a+1)*h),Ii(n*h));return new ac(d,g)}function Ob(a){const n=xe(a.getNorth()),s=xe(a.getSouth()),h=Math.cos(n),d=Math.cos(s),g=Math.sin(n),_=Math.sin(s),b=a.getWest(),E=a.getEast();return[Qh(d,_,b),Qh(d,_,E),Qh(h,g,E),Qh(h,g,b)]}function Qh(a,n,s,h=ys){return s=xe(s),[a*Math.sin(s)*h,-n*h,a*Math.cos(s)*h]}function ef(a,n,s){return Qh(Math.cos(xe(a)),Math.sin(xe(a)),n,s)}function Yp(a,n,s,h){const d=1<<s.z,g=(a/rr+s.x)/d;return ef(Ii((n/rr+s.y)/d),Wo(g),h)}function q_({min:a,max:n}){return 16383/Math.max(n[0]-a[0],n[1]-a[1],n[2]-a[2])}const hC=new Float64Array(16);function Jp(a){const n=q_(a),s=XM(hC,[n,n,n]);return Vp(s,s,((h=[])[0]=-(d=a.min)[0],h[1]=-d[1],h[2]=-d[2],h));var h,d}function Db(a){const n=(h=a.min,(s=hC)[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=h[0],s[13]=h[1],s[14]=h[2],s[15]=1,s);var s,h;const d=1/q_(a);return Pu(n,n,[d,d,d])}function fC(a,n,s,h,d){const g=function(E){const M=rr/(2*Math.PI);return E/(2*Math.PI)/M}(s),_=[a,n,-s/(2*Math.PI)],b=Ga(new Float64Array(16));return Vp(b,b,_),Pu(b,b,[g,g,g]),Eb(b,b,xe(-d)),U_(b,b,xe(-h)),b}function tf(a){return bt(5,6,a)}function dC(a,n){const s=ef(n.lat,n.lng),h=function(H){const K=ef(H._center.lat,H._center.lng);let re=Mb([],Jh(0,1,0),K);const ue=KM([],-H.angle,K);re=Bn(re,re,ue),KM(ue,-H._pitch,re);const ye=ro([],K);return qo(ye,ye,V_(H.cameraToCenterDistance/H.pixelsPerMeter)),Bn(ye,ye,ue),rl([],K,ye)}(a);return _=(d=Ab([],h,s))[0],b=d[1],E=d[2],M=(g=s)[0],O=g[1],B=g[2],q=(F=Math.sqrt(_*_+b*b+E*E)*Math.sqrt(M*M+O*O+B*B))&&fa(d,g)/F,Math.acos(Math.min(Math.max(q,-1),1));var d,g,_,b,E,M,O,B,F,q}function Rb(a,n){return dC(a,n)>Math.PI/2*1.01}const pC=xe(85),IF=Math.cos(pC),kF=Math.sin(pC),Qp=63710088e-1,mC=2*Math.PI*Qp;class Ir{constructor(n,s){if(isNaN(n)||isNaN(s))throw new Error(`Invalid LngLat object: (${n}, ${s})`);if(this.lng=+n,this.lat=+s,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new Ir(kt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(n){const s=Math.PI/180,h=this.lat*s,d=n.lat*s,g=Math.sin(h)*Math.sin(d)+Math.cos(h)*Math.cos(d)*Math.cos((n.lng-this.lng)*s);return Qp*Math.acos(Math.min(g,1))}toBounds(n=0){const s=360*n/40075017,h=s/Math.cos(Math.PI/180*this.lat);return new ac(new Ir(this.lng-h,this.lat-s),new Ir(this.lng+h,this.lat+s))}toEcef(n){const s=V_(n);return ef(this.lat,this.lng,ys+s)}static convert(n){if(n instanceof Ir)return n;if(Array.isArray(n)&&(n.length===2||n.length===3))return new Ir(Number(n[0]),Number(n[1]));if(!Array.isArray(n)&&typeof n=="object"&&n!==null)return new Ir(Number("lng"in n?n.lng:n.lon),Number(n.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}function Lb(a){return mC*Math.cos(a*Math.PI/180)}function vs(a){return(180+a)/360}function xs(a){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+a*Math.PI/360)))/360}function Wa(a,n){return a/Lb(n)}function Wo(a){return 360*a-180}function Ii(a){return 360/Math.PI*Math.atan(Math.exp((180-360*a)*Math.PI/180))-90}function gC(a,n){return a*Lb(Ii(n))}const ki=85.051129;function yC(a){return 1/Math.cos(a*Math.PI/180)}class rf{constructor(n,s,h=0){this.x=+n,this.y=+s,this.z=+h}static fromLngLat(n,s=0){const h=Ir.convert(n);return new rf(vs(h.lng),xs(h.lat),Wa(s,h.lat))}toLngLat(){return new Ir(Wo(this.x),Ii(this.y))}toAltitude(){return gC(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/mC*yC(Ii(this.y))}}function zb(a,n,s,h,d,g,_,b,E){const M=(n+h)/2,O=(s+d)/2,B=new W(M,O);b(B),function(F,q,H,K,re,ue){const ye=H-re,le=K-ue;return Math.abs((K-q)*ye-(H-F)*le)/Math.hypot(ye,le)}(B.x,B.y,g.x,g.y,_.x,_.y)>=E?(zb(a,n,s,M,O,g,B,b,E),zb(a,M,O,h,d,B,_,b,E)):a.push(_)}function _C(a,n,s){let h=a[0],d=h.x,g=h.y;n(h);const _=[h];for(let b=1;b<a.length;b++){const E=a[b],{x:M,y:O}=E;n(E),zb(_,d,g,M,O,h,E,n,s),d=M,g=O,h=E}return _}function Bb(a,n,s,h){if(h(n,s)){const d=n.add(s)._mult(.5);Bb(a,n,d,h),Bb(a,d,s,h)}else a.push(s)}function OF(a,n){let s=a[0];const h=[s];for(let d=1;d<a.length;d++){const g=a[d];Bb(h,s,g,n),s=g}return h}const $b=Math.pow(2,14)-1,vC=-$b-1;function DF(a,n){const s=Math.round(a.x*n),h=Math.round(a.y*n);return a.x=Be(s,vC,$b),a.y=Be(h,vC,$b),(s<a.x||s>a.x+1||h<a.y||h>a.y+1)&&Qe("Geometry exceeds allowed extent, reduce your vector tile buffer size"),a}function nl(a,n,s){const h=a.loadGeometry(),d=a.extent,g=rr/d;if(n&&s&&s.projection.isReprojectedInTileSpace){const _=1<<n.z,{scale:b,x:E,y:M,projection:O}=s,B=F=>{const q=Wo((n.x+F.x/d)/_),H=Ii((n.y+F.y/d)/_),K=O.project(q,H);F.x=(K.x*b-E)*d,F.y=(K.y*b-M)*d};for(let F=0;F<h.length;F++)if(a.type!==1)h[F]=_C(h[F],B,1);else{const q=[];for(const H of h[F])H.x<0||H.x>=d||H.y<0||H.y>=d||(B(H),q.push(H));h[F]=q}}for(const _ of h)for(const b of _)DF(b,g);return h}function Du(a,n){return{type:a.type,id:a.id,properties:a.properties,geometry:n?nl(a):[]}}function W_(a,n,s,h,d){a.emplaceBack(2*n+(h+1)/2,2*s+(d+1)/2)}function H_(a,n,s){a.emplaceBack(n.x,n.y,n.z,s[0]*16384,s[1]*16384,s[2]*16384)}class Fb{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.projection=n.projection,this.layoutVertexArray=new qt,this.indexArray=new Pi,this.segments=new Gn,this.programConfigurations=new Mu(n.layers,n.zoom),this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h,d){const g=this.layers[0],_=[];let b=null;g.type==="circle"&&(b=g.layout.get("circle-sort-key"));for(const{feature:M,id:O,index:B,sourceLayerIndex:F}of n){const q=this.layers[0]._featureFilter.needGeometry,H=Du(M,q);if(!this.layers[0]._featureFilter.filter(new ke(this.zoom),H,h))continue;const K=b?b.evaluate(H,{},h):void 0,re={id:O,properties:M.properties,type:M.type,sourceLayerIndex:F,index:B,geometry:q?H.geometry:nl(M,h,d),patterns:{},sortKey:K};_.push(re)}b&&_.sort((M,O)=>M.sortKey-O.sortKey);let E=null;d.projection.name==="globe"&&(this.globeExtVertexArray=new Go,E=d.projection);for(const M of _){const{geometry:O,index:B,sourceLayerIndex:F}=M,q=n[B].feature;this.addFeature(M,O,B,s.availableImages,h,E),s.featureIndex.insert(q,O,B,F,this.index)}}update(n,s,h,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,xF.members),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=n.createVertexBuffer(this.globeExtVertexArray,bF.members))),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(n,s,h,d,g,_){for(const b of s)for(const E of b){const M=E.x,O=E.y;if(M<0||M>=rr||O<0||O>=rr)continue;if(_){const q=_.projectTilePoint(M,O,g),H=_.upVector(g,M,O),K=this.globeExtVertexArray;H_(K,q,H),H_(K,q,H),H_(K,q,H),H_(K,q,H)}const B=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,n.sortKey),F=B.vertexLength;W_(this.layoutVertexArray,M,O,-1,-1),W_(this.layoutVertexArray,M,O,1,-1),W_(this.layoutVertexArray,M,O,1,1),W_(this.layoutVertexArray,M,O,-1,1),this.indexArray.emplaceBack(F,F+1,F+2),this.indexArray.emplaceBack(F,F+2,F+3),B.vertexLength+=4,B.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,{},d,g)}}function xC(a,n){for(let s=0;s<a.length;s++)if(Ru(n,a[s]))return!0;for(let s=0;s<n.length;s++)if(Ru(a,n[s]))return!0;return!!Nb(a,n)}function RF(a,n,s){return!!Ru(a,n)||!!jb(n,a,s)}function bC(a,n){if(a.length===1)return SC(n,a[0]);for(let s=0;s<n.length;s++){const h=n[s];for(let d=0;d<h.length;d++)if(Ru(a,h[d]))return!0}for(let s=0;s<a.length;s++)if(SC(n,a[s]))return!0;for(let s=0;s<n.length;s++)if(Nb(a,n[s]))return!0;return!1}function LF(a,n,s){if(a.length>1){if(Nb(a,n))return!0;for(let h=0;h<n.length;h++)if(jb(n[h],a,s))return!0}for(let h=0;h<a.length;h++)if(jb(a[h],n,s))return!0;return!1}function Nb(a,n){if(a.length===0||n.length===0)return!1;for(let s=0;s<a.length-1;s++){const h=a[s],d=a[s+1];for(let g=0;g<n.length-1;g++)if(zF(h,d,n[g],n[g+1]))return!0}return!1}function zF(a,n,s,h){return lr(a,s,h)!==lr(n,s,h)&&lr(a,n,s)!==lr(a,n,h)}function jb(a,n,s){const h=s*s;if(n.length===1)return a.distSqr(n[0])<h;for(let d=1;d<n.length;d++)if(wC(a,n[d-1],n[d])<h)return!0;return!1}function wC(a,n,s){const h=n.distSqr(s);if(h===0)return a.distSqr(n);const d=((a.x-n.x)*(s.x-n.x)+(a.y-n.y)*(s.y-n.y))/h;return a.distSqr(d<0?n:d>1?s:s.sub(n)._mult(d)._add(n))}function SC(a,n){let s,h,d,g=!1;for(let _=0;_<a.length;_++){s=a[_];for(let b=0,E=s.length-1;b<s.length;E=b++)h=s[b],d=s[E],h.y>n.y!=d.y>n.y&&n.x<(d.x-h.x)*(n.y-h.y)/(d.y-h.y)+h.x&&(g=!g)}return g}function Ru(a,n){let s=!1;for(let h=0,d=a.length-1;h<a.length;d=h++){const g=a[h],_=a[d];g.y>n.y!=_.y>n.y&&n.x<(_.x-g.x)*(n.y-g.y)/(_.y-g.y)+g.x&&(s=!s)}return s}function EC(a,n,s,h,d){for(const _ of a)if(n<=_.x&&s<=_.y&&h>=_.x&&d>=_.y)return!0;const g=[new W(n,s),new W(n,d),new W(h,d),new W(h,s)];if(a.length>2){for(const _ of g)if(Ru(a,_))return!0}for(let _=0;_<a.length-1;_++)if(BF(a[_],a[_+1],g))return!0;return!1}function BF(a,n,s){const h=s[0],d=s[2];if(a.x<h.x&&n.x<h.x||a.x>d.x&&n.x>d.x||a.y<h.y&&n.y<h.y||a.y>d.y&&n.y>d.y)return!1;const g=lr(a,n,s[0]);return g!==lr(a,n,s[1])||g!==lr(a,n,s[2])||g!==lr(a,n,s[3])}function nf(a,n,s){const h=n.paint.get(a).value;return h.kind==="constant"?h.value:s.programConfigurations.get(n.id).getMaxValue(a)}function Z_(a){return Math.sqrt(a[0]*a[0]+a[1]*a[1])}function TC(a,n,s,h,d){if(!n[0]&&!n[1])return a;const g=W.convert(n)._mult(d);s==="viewport"&&g._rotate(-h);const _=[];for(let b=0;b<a.length;b++)_.push(a[b].sub(g));return _}function AC(a,n,s,h){const d=W.convert(a)._mult(h);return n==="viewport"&&d._rotate(-s),d}Dt(Fb,"CircleBucket",{omit:["layers"]});const $F=new ct({"circle-sort-key":new je(Xe.layout_circle["circle-sort-key"])});var FF={paint:new ct({"circle-radius":new je(Xe.paint_circle["circle-radius"]),"circle-color":new je(Xe.paint_circle["circle-color"]),"circle-blur":new je(Xe.paint_circle["circle-blur"]),"circle-opacity":new je(Xe.paint_circle["circle-opacity"]),"circle-translate":new Pe(Xe.paint_circle["circle-translate"]),"circle-translate-anchor":new Pe(Xe.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Pe(Xe.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Pe(Xe.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new je(Xe.paint_circle["circle-stroke-width"]),"circle-stroke-color":new je(Xe.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new je(Xe.paint_circle["circle-stroke-opacity"])}),layout:$F};function MC(a,n,s,h,d,g,_,b,E){if(g&&a.queryGeometry.isAboveHorizon)return!1;g&&(E*=a.pixelToTileUnitsFactor);const M=a.tileID.canonical,O=s.projection.upVectorScale(M,s.center.lat,s.worldSize).metersToTile;for(const B of n)for(const F of B){const q=F.add(b),H=d&&s.elevation?s.elevation.exaggeration()*d.getElevationAt(q.x,q.y,!0):0,K=s.projection.projectTilePoint(q.x,q.y,M);if(H>0){const le=s.projection.upVector(M,q.x,q.y);K.x+=le[0]*O*H,K.y+=le[1]*O*H,K.z+=le[2]*O*H}const re=g?q:NF(K.x,K.y,K.z,h),ue=g?a.tilespaceRays.map(le=>UF(le,H)):a.queryGeometry.screenGeometry,ye=Iu([],[K.x,K.y,K.z,1],h);if(!_&&g?E*=ye[3]/s.cameraToCenterDistance:_&&!g&&(E*=s.cameraToCenterDistance/ye[3]),g){const le=Ii((F.y/rr+M.y)/(1<<M.z));E/=s.projection.pixelsPerMeter(le,1)/Wa(1,le)}if(RF(ue,re,E))return!0}return!1}function NF(a,n,s,h){const d=Iu([],[a,n,s,1],h);return new W(d[0]/d[3],d[1]/d[3])}const CC=Jh(0,0,0),jF=Jh(0,0,1);function UF(a,n){const s=Tb();return CC[2]=n,a.intersectsPlane(CC,jF,s),new W(s[0],s[1])}class PC extends Fb{}function IC(a,{width:n,height:s},h,d){if(d){if(d instanceof Uint8ClampedArray)d=new Uint8Array(d.buffer);else if(d.length!==n*s*h)throw new RangeError("mismatched image size")}else d=new Uint8Array(n*s*h);return a.width=n,a.height=s,a.data=d,a}function kC(a,n,s){const{width:h,height:d}=n;h===a.width&&d===a.height||(Ub(a,n,{x:0,y:0},{x:0,y:0},{width:Math.min(a.width,h),height:Math.min(a.height,d)},s),a.width=h,a.height=d,a.data=n.data)}function Ub(a,n,s,h,d,g){if(d.width===0||d.height===0)return n;if(d.width>a.width||d.height>a.height||s.x>a.width-d.width||s.y>a.height-d.height)throw new RangeError("out of range source coordinates for image copy");if(d.width>n.width||d.height>n.height||h.x>n.width-d.width||h.y>n.height-d.height)throw new RangeError("out of range destination coordinates for image copy");const _=a.data,b=n.data;for(let E=0;E<d.height;E++){const M=((s.y+E)*a.width+s.x)*g,O=((h.y+E)*n.width+h.x)*g;for(let B=0;B<d.width*g;B++)b[O+B]=_[M+B]}return n}Dt(PC,"HeatmapBucket",{omit:["layers"]});class il{constructor(n,s){IC(this,n,1,s)}resize(n){kC(this,new il(n),1)}clone(){return new il({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,h,d,g){Ub(n,s,h,d,g,1)}}class Io{constructor(n,s){IC(this,n,4,s)}resize(n){kC(this,new Io(n),4)}replace(n,s){s?this.data.set(n):this.data=n instanceof Uint8ClampedArray?new Uint8Array(n.buffer):n}clone(){return new Io({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(n,s,h,d,g){Ub(n,s,h,d,g,4)}}Dt(il,"AlphaImage"),Dt(Io,"RGBAImage");var VF={paint:new ct({"heatmap-radius":new je(Xe.paint_heatmap["heatmap-radius"]),"heatmap-weight":new je(Xe.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Pe(Xe.paint_heatmap["heatmap-intensity"]),"heatmap-color":new ot(Xe.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Pe(Xe.paint_heatmap["heatmap-opacity"])})};function Vb(a){const n={},s=a.resolution||256,h=a.clips?a.clips.length:1,d=a.image||new Io({width:s,height:h}),g=(_,b,E)=>{n[a.evaluationKey]=E;const M=a.expression.evaluate(n);d.data[_+b+0]=Math.floor(255*M.r/M.a),d.data[_+b+1]=Math.floor(255*M.g/M.a),d.data[_+b+2]=Math.floor(255*M.b/M.a),d.data[_+b+3]=Math.floor(255*M.a)};if(a.clips)for(let _=0,b=0;_<h;++_,b+=4*s)for(let E=0,M=0;E<s;E++,M+=4){const O=E/(s-1),{start:B,end:F}=a.clips[_];g(b,M,B*(1-O)+F*O)}else for(let _=0,b=0;_<s;_++,b+=4)g(0,b,_/(s-1));return d}var GF={paint:new ct({"hillshade-illumination-direction":new Pe(Xe.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Pe(Xe.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Pe(Xe.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Pe(Xe.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Pe(Xe.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Pe(Xe.paint_hillshade["hillshade-accent-color"])})};const qF=Nt([{name:"a_pos",components:2,type:"Int16"}],4),{members:WF}=qF;var of={};function X_(a,n,s){s=s||2;var h,d,g,_,b,E,M,O=n&&n.length,B=O?n[0]*s:a.length,F=OC(a,0,B,s,!0),q=[];if(!F||F.next===F.prev)return q;if(O&&(F=function(K,re,ue,ye){var le,ge,be,_e=[];for(le=0,ge=re.length;le<ge;le++)(be=OC(K,re[le]*ye,le<ge-1?re[le+1]*ye:K.length,ye,!1))===be.next&&(be.steiner=!0),_e.push(eN(be));for(_e.sort(YF),le=0;le<_e.length;le++)ue=JF(_e[le],ue);return ue}(a,n,F,s)),a.length>80*s){h=g=a[0],d=_=a[1];for(var H=s;H<B;H+=s)(b=a[H])<h&&(h=b),(E=a[H+1])<d&&(d=E),b>g&&(g=b),E>_&&(_=E);M=(M=Math.max(g-h,_-d))!==0?32767/M:0}return em(F,q,s,h,d,M,0),q}function OC(a,n,s,h,d){var g,_;if(d===Wb(a,n,s,h)>0)for(g=n;g<s;g+=h)_=LC(g,a[g],a[g+1],_);else for(g=s-h;g>=n;g-=h)_=LC(g,a[g],a[g+1],_);return _&&K_(_,_.next)&&(rm(_),_=_.next),_}function Lu(a,n){if(!a)return a;n||(n=a);var s,h=a;do if(s=!1,h.steiner||!K_(h,h.next)&&qn(h.prev,h,h.next)!==0)h=h.next;else{if(rm(h),(h=n=h.prev)===h.next)break;s=!0}while(s||h!==n);return n}function em(a,n,s,h,d,g,_){if(a){!_&&g&&function(O,B,F,q){var H=O;do H.z===0&&(H.z=Gb(H.x,H.y,B,F,q)),H.prevZ=H.prev,H.nextZ=H.next,H=H.next;while(H!==O);H.prevZ.nextZ=null,H.prevZ=null,function(K){var re,ue,ye,le,ge,be,_e,Fe,Re=1;do{for(ue=K,K=null,ge=null,be=0;ue;){for(be++,ye=ue,_e=0,re=0;re<Re&&(_e++,ye=ye.nextZ);re++);for(Fe=Re;_e>0||Fe>0&&ye;)_e!==0&&(Fe===0||!ye||ue.z<=ye.z)?(le=ue,ue=ue.nextZ,_e--):(le=ye,ye=ye.nextZ,Fe--),ge?ge.nextZ=le:K=le,le.prevZ=ge,ge=le;ue=ye}ge.nextZ=null,Re*=2}while(be>1)}(H)}(a,h,d,g);for(var b,E,M=a;a.prev!==a.next;)if(b=a.prev,E=a.next,g?ZF(a,h,d,g):HF(a))n.push(b.i/s|0),n.push(a.i/s|0),n.push(E.i/s|0),rm(a),a=E.next,M=E.next;else if((a=E)===M){_?_===1?em(a=XF(Lu(a),n,s),n,s,h,d,g,2):_===2&&KF(a,n,s,h,d,g):em(Lu(a),n,s,h,d,g,1);break}}}function HF(a){var n=a.prev,s=a,h=a.next;if(qn(n,s,h)>=0)return!1;for(var d=n.x,g=s.x,_=h.x,b=n.y,E=s.y,M=h.y,O=d<g?d<_?d:_:g<_?g:_,B=b<E?b<M?b:M:E<M?E:M,F=d>g?d>_?d:_:g>_?g:_,q=b>E?b>M?b:M:E>M?E:M,H=h.next;H!==n;){if(H.x>=O&&H.x<=F&&H.y>=B&&H.y<=q&&af(d,b,g,E,_,M,H.x,H.y)&&qn(H.prev,H,H.next)>=0)return!1;H=H.next}return!0}function ZF(a,n,s,h){var d=a.prev,g=a,_=a.next;if(qn(d,g,_)>=0)return!1;for(var b=d.x,E=g.x,M=_.x,O=d.y,B=g.y,F=_.y,q=b<E?b<M?b:M:E<M?E:M,H=O<B?O<F?O:F:B<F?B:F,K=b>E?b>M?b:M:E>M?E:M,re=O>B?O>F?O:F:B>F?B:F,ue=Gb(q,H,n,s,h),ye=Gb(K,re,n,s,h),le=a.prevZ,ge=a.nextZ;le&&le.z>=ue&&ge&&ge.z<=ye;){if(le.x>=q&&le.x<=K&&le.y>=H&&le.y<=re&&le!==d&&le!==_&&af(b,O,E,B,M,F,le.x,le.y)&&qn(le.prev,le,le.next)>=0||(le=le.prevZ,ge.x>=q&&ge.x<=K&&ge.y>=H&&ge.y<=re&&ge!==d&&ge!==_&&af(b,O,E,B,M,F,ge.x,ge.y)&&qn(ge.prev,ge,ge.next)>=0))return!1;ge=ge.nextZ}for(;le&&le.z>=ue;){if(le.x>=q&&le.x<=K&&le.y>=H&&le.y<=re&&le!==d&&le!==_&&af(b,O,E,B,M,F,le.x,le.y)&&qn(le.prev,le,le.next)>=0)return!1;le=le.prevZ}for(;ge&&ge.z<=ye;){if(ge.x>=q&&ge.x<=K&&ge.y>=H&&ge.y<=re&&ge!==d&&ge!==_&&af(b,O,E,B,M,F,ge.x,ge.y)&&qn(ge.prev,ge,ge.next)>=0)return!1;ge=ge.nextZ}return!0}function XF(a,n,s){var h=a;do{var d=h.prev,g=h.next.next;!K_(d,g)&&DC(d,h,h.next,g)&&tm(d,g)&&tm(g,d)&&(n.push(d.i/s|0),n.push(h.i/s|0),n.push(g.i/s|0),rm(h),rm(h.next),h=a=g),h=h.next}while(h!==a);return Lu(h)}function KF(a,n,s,h,d,g){var _=a;do{for(var b=_.next.next;b!==_.prev;){if(_.i!==b.i&&tN(_,b)){var E=RC(_,b);return _=Lu(_,_.next),E=Lu(E,E.next),em(_,n,s,h,d,g,0),void em(E,n,s,h,d,g,0)}b=b.next}_=_.next}while(_!==a)}function YF(a,n){return a.x-n.x}function JF(a,n){var s=function(d,g){var _,b=g,E=d.x,M=d.y,O=-1/0;do{if(M<=b.y&&M>=b.next.y&&b.next.y!==b.y){var B=b.x+(M-b.y)*(b.next.x-b.x)/(b.next.y-b.y);if(B<=E&&B>O&&(O=B,_=b.x<b.next.x?b:b.next,B===E))return _}b=b.next}while(b!==g);if(!_)return null;var F,q=_,H=_.x,K=_.y,re=1/0;b=_;do E>=b.x&&b.x>=H&&E!==b.x&&af(M<K?E:O,M,H,K,M<K?O:E,M,b.x,b.y)&&(F=Math.abs(M-b.y)/(E-b.x),tm(b,d)&&(F<re||F===re&&(b.x>_.x||b.x===_.x&&QF(_,b)))&&(_=b,re=F)),b=b.next;while(b!==q);return _}(a,n);if(!s)return n;var h=RC(s,a);return Lu(h,h.next),Lu(s,s.next)}function QF(a,n){return qn(a.prev,a,n.prev)<0&&qn(n.next,a,a.next)<0}function Gb(a,n,s,h,d){return(a=1431655765&((a=858993459&((a=252645135&((a=16711935&((a=(a-s)*d|0)|a<<8))|a<<4))|a<<2))|a<<1))|(n=1431655765&((n=858993459&((n=252645135&((n=16711935&((n=(n-h)*d|0)|n<<8))|n<<4))|n<<2))|n<<1))<<1}function eN(a){var n=a,s=a;do(n.x<s.x||n.x===s.x&&n.y<s.y)&&(s=n),n=n.next;while(n!==a);return s}function af(a,n,s,h,d,g,_,b){return(d-_)*(n-b)>=(a-_)*(g-b)&&(a-_)*(h-b)>=(s-_)*(n-b)&&(s-_)*(g-b)>=(d-_)*(h-b)}function tN(a,n){return a.next.i!==n.i&&a.prev.i!==n.i&&!function(s,h){var d=s;do{if(d.i!==s.i&&d.next.i!==s.i&&d.i!==h.i&&d.next.i!==h.i&&DC(d,d.next,s,h))return!0;d=d.next}while(d!==s);return!1}(a,n)&&(tm(a,n)&&tm(n,a)&&function(s,h){var d=s,g=!1,_=(s.x+h.x)/2,b=(s.y+h.y)/2;do d.y>b!=d.next.y>b&&d.next.y!==d.y&&_<(d.next.x-d.x)*(b-d.y)/(d.next.y-d.y)+d.x&&(g=!g),d=d.next;while(d!==s);return g}(a,n)&&(qn(a.prev,a,n.prev)||qn(a,n.prev,n))||K_(a,n)&&qn(a.prev,a,a.next)>0&&qn(n.prev,n,n.next)>0)}function qn(a,n,s){return(n.y-a.y)*(s.x-n.x)-(n.x-a.x)*(s.y-n.y)}function K_(a,n){return a.x===n.x&&a.y===n.y}function DC(a,n,s,h){var d=J_(qn(a,n,s)),g=J_(qn(a,n,h)),_=J_(qn(s,h,a)),b=J_(qn(s,h,n));return d!==g&&_!==b||!(d!==0||!Y_(a,s,n))||!(g!==0||!Y_(a,h,n))||!(_!==0||!Y_(s,a,h))||!(b!==0||!Y_(s,n,h))}function Y_(a,n,s){return n.x<=Math.max(a.x,s.x)&&n.x>=Math.min(a.x,s.x)&&n.y<=Math.max(a.y,s.y)&&n.y>=Math.min(a.y,s.y)}function J_(a){return a>0?1:a<0?-1:0}function tm(a,n){return qn(a.prev,a,a.next)<0?qn(a,n,a.next)>=0&&qn(a,a.prev,n)>=0:qn(a,n,a.prev)<0||qn(a,a.next,n)<0}function RC(a,n){var s=new qb(a.i,a.x,a.y),h=new qb(n.i,n.x,n.y),d=a.next,g=n.prev;return a.next=n,n.prev=a,s.next=d,d.prev=s,h.next=s,s.prev=h,g.next=h,h.prev=g,h}function LC(a,n,s,h){var d=new qb(a,n,s);return h?(d.next=h.next,d.prev=h,h.next.prev=d,h.next=d):(d.prev=d,d.next=d),d}function rm(a){a.next.prev=a.prev,a.prev.next=a.next,a.prevZ&&(a.prevZ.nextZ=a.nextZ),a.nextZ&&(a.nextZ.prevZ=a.prevZ)}function qb(a,n,s){this.i=a,this.x=n,this.y=s,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Wb(a,n,s,h){for(var d=0,g=n,_=s-h;g<s;g+=h)d+=(a[_]-a[g])*(a[g+1]+a[_+1]),_=g;return d}function rN(a,n,s,h,d){zC(a,n,s||0,h||a.length-1,d||nN)}function zC(a,n,s,h,d){for(;h>s;){if(h-s>600){var g=h-s+1,_=n-s+1,b=Math.log(g),E=.5*Math.exp(2*b/3),M=.5*Math.sqrt(b*E*(g-E)/g)*(_-g/2<0?-1:1);zC(a,n,Math.max(s,Math.floor(n-_*E/g+M)),Math.min(h,Math.floor(n+(g-_)*E/g+M)),d)}var O=a[n],B=s,F=h;for(nm(a,s,n),d(a[h],O)>0&&nm(a,s,h);B<F;){for(nm(a,B,F),B++,F--;d(a[B],O)<0;)B++;for(;d(a[F],O)>0;)F--}d(a[s],O)===0?nm(a,s,F):nm(a,++F,h),F<=n&&(s=F+1),n<=F&&(h=F-1)}}function nm(a,n,s){var h=a[n];a[n]=a[s],a[s]=h}function nN(a,n){return a<n?-1:a>n?1:0}function Hb(a,n){const s=a.length;if(s<=1)return[a];const h=[];let d,g;for(let _=0;_<s;_++){const b=Ot(a[_]);b!==0&&(a[_].area=Math.abs(b),g===void 0&&(g=b<0),g===b<0?(d&&h.push(d),d=[a[_]]):d.push(a[_]))}if(d&&h.push(d),n>1)for(let _=0;_<h.length;_++)h[_].length<=n||(rN(h[_],n,1,h[_].length-1,iN),h[_]=h[_].slice(0,n));return h}function iN(a,n){return n.area-a.area}function Zb(a,n,s){const h=s.patternDependencies;let d=!1;for(const g of n){const _=g.paint.get(`${a}-pattern`);_.isConstant()||(d=!0);const b=_.constantOr(null);b&&(d=!0,h[b]=!0)}return d}function Xb(a,n,s,h,d){const g=d.patternDependencies;for(const _ of n){const b=_.paint.get(`${a}-pattern`).value;if(b.kind!=="constant"){let E=b.evaluate({zoom:h},s,{},d.availableImages);E=E&&E.name?E.name:E,g[E]=!0,s.patterns[_.id]=E}}return s}({get exports(){return of},set exports(a){of=a}}).exports=X_,of.default=X_,X_.deviation=function(a,n,s,h){var d=n&&n.length,g=Math.abs(Wb(a,0,d?n[0]*s:a.length,s));if(d)for(var _=0,b=n.length;_<b;_++)g-=Math.abs(Wb(a,n[_]*s,_<b-1?n[_+1]*s:a.length,s));var E=0;for(_=0;_<h.length;_+=3){var M=h[_]*s,O=h[_+1]*s,B=h[_+2]*s;E+=Math.abs((a[M]-a[B])*(a[O+1]-a[M+1])-(a[M]-a[O])*(a[B+1]-a[M+1]))}return g===0&&E===0?0:Math.abs((E-g)/g)},X_.flatten=function(a){for(var n=a[0][0].length,s={vertices:[],holes:[],dimensions:n},h=0,d=0;d<a.length;d++){for(var g=0;g<a[d].length;g++)for(var _=0;_<n;_++)s.vertices.push(a[d][g][_]);d>0&&s.holes.push(h+=a[d-1].length)}return s};class Q_{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new qt,this.indexArray=new Pi,this.indexArray2=new ms,this.programConfigurations=new Mu(n.layers,n.zoom),this.segments=new Gn,this.segments2=new Gn,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id),this.projection=n.projection}populate(n,s,h,d){this.hasPattern=Zb("fill",this.layers,s);const g=this.layers[0].layout.get("fill-sort-key"),_=[];for(const{feature:b,id:E,index:M,sourceLayerIndex:O}of n){const B=this.layers[0]._featureFilter.needGeometry,F=Du(b,B);if(!this.layers[0]._featureFilter.filter(new ke(this.zoom),F,h))continue;const q=g?g.evaluate(F,{},h,s.availableImages):void 0,H={id:E,properties:b.properties,type:b.type,sourceLayerIndex:O,index:M,geometry:B?F.geometry:nl(b,h,d),patterns:{},sortKey:q};_.push(H)}g&&_.sort((b,E)=>b.sortKey-E.sortKey);for(const b of _){const{geometry:E,index:M,sourceLayerIndex:O}=b;if(this.hasPattern){const B=Xb("fill",this.layers,b,this.zoom,s);this.patternFeatures.push(B)}else this.addFeature(b,E,M,h,{},s.availableImages);s.featureIndex.insert(n[M].feature,E,M,O,this.index)}}update(n,s,h,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h,d)}addFeatures(n,s,h,d,g){for(const _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,s,h,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,WF),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.indexBuffer2=n.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(n,s,h,d,g,_=[]){for(const b of Hb(s,500)){let E=0;for(const H of b)E+=H.length;const M=this.segments.prepareSegment(E,this.layoutVertexArray,this.indexArray),O=M.vertexLength,B=[],F=[];for(const H of b){if(H.length===0)continue;H!==b[0]&&F.push(B.length/2);const K=this.segments2.prepareSegment(H.length,this.layoutVertexArray,this.indexArray2),re=K.vertexLength;this.layoutVertexArray.emplaceBack(H[0].x,H[0].y),this.indexArray2.emplaceBack(re+H.length-1,re),B.push(H[0].x),B.push(H[0].y);for(let ue=1;ue<H.length;ue++)this.layoutVertexArray.emplaceBack(H[ue].x,H[ue].y),this.indexArray2.emplaceBack(re+ue-1,re+ue),B.push(H[ue].x),B.push(H[ue].y);K.vertexLength+=H.length,K.primitiveLength+=H.length}const q=of(B,F);for(let H=0;H<q.length;H+=3)this.indexArray.emplaceBack(O+q[H],O+q[H+1],O+q[H+2]);M.vertexLength+=E,M.primitiveLength+=q.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,g,_,d)}}Dt(Q_,"FillBucket",{omit:["layers","patternFeatures"]});const oN=new ct({"fill-sort-key":new je(Xe.layout_fill["fill-sort-key"])});var aN={paint:new ct({"fill-antialias":new Pe(Xe.paint_fill["fill-antialias"]),"fill-opacity":new je(Xe.paint_fill["fill-opacity"]),"fill-color":new je(Xe.paint_fill["fill-color"]),"fill-outline-color":new je(Xe.paint_fill["fill-outline-color"]),"fill-translate":new Pe(Xe.paint_fill["fill-translate"]),"fill-translate-anchor":new Pe(Xe.paint_fill["fill-translate-anchor"]),"fill-pattern":new je(Xe.paint_fill["fill-pattern"])}),layout:oN};const sN=Nt([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),lN=Nt([{name:"a_centroid_pos",components:2,type:"Uint16"}]),cN=Nt([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:uN}=sN;var ev={},hN=W,BC=sf;function sf(a,n,s,h,d){this.properties={},this.extent=s,this.type=0,this._pbf=a,this._geometry=-1,this._keys=h,this._values=d,a.readFields(fN,this,n)}function fN(a,n,s){a==1?n.id=s.readVarint():a==2?function(h,d){for(var g=h.readVarint()+h.pos;h.pos<g;){var _=d._keys[h.readVarint()],b=d._values[h.readVarint()];d.properties[_]=b}}(s,n):a==3?n.type=s.readVarint():a==4&&(n._geometry=s.pos)}function dN(a){for(var n,s,h=0,d=0,g=a.length,_=g-1;d<g;_=d++)h+=((s=a[_]).x-(n=a[d]).x)*(n.y+s.y);return h}sf.types=["Unknown","Point","LineString","Polygon"],sf.prototype.loadGeometry=function(){var a=this._pbf;a.pos=this._geometry;for(var n,s=a.readVarint()+a.pos,h=1,d=0,g=0,_=0,b=[];a.pos<s;){if(d<=0){var E=a.readVarint();h=7&E,d=E>>3}if(d--,h===1||h===2)g+=a.readSVarint(),_+=a.readSVarint(),h===1&&(n&&b.push(n),n=[]),n.push(new hN(g,_));else{if(h!==7)throw new Error("unknown command "+h);n&&n.push(n[0].clone())}}return n&&b.push(n),b},sf.prototype.bbox=function(){var a=this._pbf;a.pos=this._geometry;for(var n=a.readVarint()+a.pos,s=1,h=0,d=0,g=0,_=1/0,b=-1/0,E=1/0,M=-1/0;a.pos<n;){if(h<=0){var O=a.readVarint();s=7&O,h=O>>3}if(h--,s===1||s===2)(d+=a.readSVarint())<_&&(_=d),d>b&&(b=d),(g+=a.readSVarint())<E&&(E=g),g>M&&(M=g);else if(s!==7)throw new Error("unknown command "+s)}return[_,E,b,M]},sf.prototype.toGeoJSON=function(a,n,s){var h,d,g=this.extent*Math.pow(2,s),_=this.extent*a,b=this.extent*n,E=this.loadGeometry(),M=sf.types[this.type];function O(q){for(var H=0;H<q.length;H++){var K=q[H];q[H]=[360*(K.x+_)/g-180,360/Math.PI*Math.atan(Math.exp((180-360*(K.y+b)/g)*Math.PI/180))-90]}}switch(this.type){case 1:var B=[];for(h=0;h<E.length;h++)B[h]=E[h][0];O(E=B);break;case 2:for(h=0;h<E.length;h++)O(E[h]);break;case 3:for(E=function(q){var H=q.length;if(H<=1)return[q];for(var K,re,ue=[],ye=0;ye<H;ye++){var le=dN(q[ye]);le!==0&&(re===void 0&&(re=le<0),re===le<0?(K&&ue.push(K),K=[q[ye]]):K.push(q[ye]))}return K&&ue.push(K),ue}(E),h=0;h<E.length;h++)for(d=0;d<E[h].length;d++)O(E[h][d])}E.length===1?E=E[0]:M="Multi"+M;var F={type:"Feature",geometry:{type:M,coordinates:E},properties:this.properties};return"id"in this&&(F.id=this.id),F};var pN=BC,$C=FC;function FC(a,n){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=a,this._keys=[],this._values=[],this._features=[],a.readFields(mN,this,n),this.length=this._features.length}function mN(a,n,s){a===15?n.version=s.readVarint():a===1?n.name=s.readString():a===5?n.extent=s.readVarint():a===2?n._features.push(s.pos):a===3?n._keys.push(s.readString()):a===4&&n._values.push(function(h){for(var d=null,g=h.readVarint()+h.pos;h.pos<g;){var _=h.readVarint()>>3;d=_===1?h.readString():_===2?h.readFloat():_===3?h.readDouble():_===4?h.readVarint64():_===5?h.readVarint():_===6?h.readSVarint():_===7?h.readBoolean():null}return d}(s))}FC.prototype.feature=function(a){if(a<0||a>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[a];var n=this._pbf.readVarint()+this._pbf.pos;return new pN(this._pbf,n,this.extent,this._keys,this._values)};var gN=$C;function yN(a,n,s){if(a===3){var h=new gN(s,s.readVarint()+s.pos);h.length&&(n[h.name]=h)}}var Kb=ev.VectorTile=function(a,n){this.layers=a.readFields(yN,{},n)},tv=ev.VectorTileFeature=BC;function rv(a,n,s,h){const d=[],g=h===0?(_,b,E,M,O,B)=>{_.push(new W(B,E+(B-b)/(M-b)*(O-E)))}:(_,b,E,M,O,B)=>{_.push(new W(b+(B-E)/(O-E)*(M-b),B))};for(const _ of a){const b=[];for(const E of _){if(E.length<=2)continue;const M=[];for(let F=0;F<E.length-1;F++){const q=E[F].x,H=E[F].y,K=E[F+1].x,re=E[F+1].y,ue=h===0?q:H,ye=h===0?K:re;ue<n?ye>n&&g(M,q,H,K,re,n):ue>s?ye<s&&g(M,q,H,K,re,s):M.push(E[F]),ye<n&&ue>=n&&g(M,q,H,K,re,n),ye>s&&ue<=s&&g(M,q,H,K,re,s)}let O=E[E.length-1];const B=h===0?O.x:O.y;B>=n&&B<=s&&M.push(O),M.length&&(O=M[M.length-1],M[0].x===O.x&&M[0].y===O.y||M.push(M[0]),b.push(M))}b.length&&d.push(b)}return d}ev.VectorTileLayer=$C;const _N=tv.types,vN=Math.pow(2,13);function im(a,n,s,h,d,g,_,b){a.emplaceBack((n<<1)+_,(s<<1)+g,(Math.floor(h*vN)<<1)+d,Math.round(b))}function om(a,n,s){a.emplaceBack(n.x,n.y,n.z,s[0]*16384,s[1]*16384,s[2]*16384)}class NC{constructor(){this.acc=new W(0,0),this.polyCount=[]}startRing(n){this.currentPolyCount={edges:0,top:0},this.polyCount.push(this.currentPolyCount),this.min||(this.min=new W(n.x,n.y),this.max=new W(n.x,n.y))}append(n,s){this.currentPolyCount.edges++,this.acc._add(n);const h=this.min,d=this.max;n.x<h.x?h.x=n.x:n.x>d.x&&(d.x=n.x),n.y<h.y?h.y=n.y:n.y>d.y&&(d.y=n.y),((n.x===0||n.x===rr)&&n.x===s.x)!=((n.y===0||n.y===rr)&&n.y===s.y)&&this.processBorderOverlap(n,s),s.x<0!=n.x<0&&this.addBorderIntersection(0,Pr(s.y,n.y,(0-s.x)/(n.x-s.x))),s.x>rr!=n.x>rr&&this.addBorderIntersection(1,Pr(s.y,n.y,(rr-s.x)/(n.x-s.x))),s.y<0!=n.y<0&&this.addBorderIntersection(2,Pr(s.x,n.x,(0-s.y)/(n.y-s.y))),s.y>rr!=n.y>rr&&this.addBorderIntersection(3,Pr(s.x,n.x,(rr-s.y)/(n.y-s.y)))}addBorderIntersection(n,s){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const h=this.borders[n];s<h[0]&&(h[0]=s),s>h[1]&&(h[1]=s)}processBorderOverlap(n,s){if(n.x===s.x){if(n.y===s.y)return;const h=n.x===0?0:1;this.addBorderIntersection(h,s.y),this.addBorderIntersection(h,n.y)}else{const h=n.y===0?2:3;this.addBorderIntersection(h,s.x),this.addBorderIntersection(h,n.x)}}centroid(){const n=this.polyCount.reduce((s,h)=>s+h.edges,0);return n!==0?this.acc.div(n)._round():new W(0,0)}span(){return new W(this.max.x-this.min.x,this.max.y-this.min.y)}intersectsCount(){return this.borders.reduce((n,s)=>n+ +(s[0]!==Number.MAX_VALUE),0)}}class am{constructor(n){this.zoom=n.zoom,this.canonical=n.canonical,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=n.projection,this.layoutVertexArray=new Ur,this.centroidVertexArray=new jM,this.indexArray=new Pi,this.programConfigurations=new Mu(n.layers,n.zoom),this.segments=new Gn,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id),this.enableTerrain=n.enableTerrain}populate(n,s,h,d){this.features=[],this.hasPattern=Zb("fill-extrusion",this.layers,s),this.featuresOnBorder=[],this.borders=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.tileToMeter=function(g){const _=Math.exp(Math.PI*(1-g.y/(1<<g.z)*2));return 80150034*_/(_*_+1)/rr/(1<<g.z)}(h),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter;for(const{feature:g,id:_,index:b,sourceLayerIndex:E}of n){const M=this.layers[0]._featureFilter.needGeometry,O=Du(g,M);if(!this.layers[0]._featureFilter.filter(new ke(this.zoom),O,h))continue;const B={id:_,sourceLayerIndex:E,index:b,geometry:M?O.geometry:nl(g,h,d),properties:g.properties,type:g.type,patterns:{}},F=this.layoutVertexArray.length;this.hasPattern?this.features.push(Xb("fill-extrusion",this.layers,B,this.zoom,s)):this.addFeature(B,B.geometry,b,h,{},s.availableImages,d),s.featureIndex.insert(g,B.geometry,b,E,this.index,F)}this.sortBorders()}addFeatures(n,s,h,d,g){for(const _ of this.features){const{geometry:b}=_;this.addFeature(_,b,_.index,s,h,d,g)}this.sortBorders()}update(n,s,h,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,uN),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=n.createVertexBuffer(this.layoutVertexExtArray,cN.members,!0))),this.programConfigurations.upload(n),this.uploaded=!0}uploadCentroid(n){this.centroidVertexArray.length!==0&&(this.centroidVertexBuffer?this.needsCentroidUpdate&&this.centroidVertexBuffer.updateData(this.centroidVertexArray):this.centroidVertexBuffer=n.createVertexBuffer(this.centroidVertexArray,lN.members,!0),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(n,s,h,d,g,_,b){const E=[new W(0,0),new W(rr,rr)],M=b.projection,O=M.name==="globe",B=this.enableTerrain&&!O?new NC:null,F=_N[n.type]==="Polygon";O&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Go);const q=Hb(s,500);for(let ue=q.length-1;ue>=0;ue--){const ye=q[ue];(ye.length===0||(H=ye[0]).every(le=>le.x<=0)||H.every(le=>le.x>=rr)||H.every(le=>le.y<=0)||H.every(le=>le.y>=rr))&&q.splice(ue,1)}var H;let K;if(O)K=HC(q,E,d);else{K=[];for(const ue of q)K.push({polygon:ue,bounds:E})}const re=F?this.edgeRadius:0;for(const{polygon:ue,bounds:ye}of K){let le=0,ge=0;for(const _e of ue)F&&!_e[0].equals(_e[_e.length-1])&&_e.push(_e[0]),ge+=F?_e.length-1:_e.length;const be=this.segments.prepareSegment((F?5:4)*ge,this.layoutVertexArray,this.indexArray);if(F){const _e=[],Fe=[];le=be.vertexLength;for(const Ye of ue){let dt,Ve;Ye.length&&Ye!==ue[0]&&Fe.push(_e.length/2),dt=Ye[1].sub(Ye[0])._perp()._unit();for(let tt=1;tt<Ye.length;tt++){const it=Ye[tt],lt=Ye[tt===Ye.length-1?1:tt+1];let{x:pt,y:Ge}=it;if(re){Ve=lt.sub(it)._perp()._unit();const St=dt.add(Ve)._unit(),Yt=re*Math.min(4,1/(dt.x*St.x+dt.y*St.y));pt+=Yt*St.x,Ge+=Yt*St.y,dt=Ve}im(this.layoutVertexArray,pt,Ge,0,0,1,1,0),be.vertexLength++,_e.push(it.x,it.y),O&&om(this.layoutVertexExtArray,M.projectTilePoint(pt,Ge,d),M.upVector(d,pt,Ge))}}const Re=of(_e,Fe);for(let Ye=0;Ye<Re.length;Ye+=3)this.indexArray.emplaceBack(le+Re[Ye],le+Re[Ye+2],le+Re[Ye+1]),be.primitiveLength++}for(const _e of ue){B&&_e.length&&B.startRing(_e[0]);let Fe,Re,Ye,dt=_e.length>4&&GC(_e[_e.length-2],_e[0],_e[1]),Ve=re?xN(_e[_e.length-2],_e[0],_e[1],re):0;Re=_e[1].sub(_e[0])._perp()._unit();let tt=!0;for(let it=1,lt=0;it<_e.length;it++){let pt=_e[it-1],Ge=_e[it];const St=_e[it===_e.length-1?1:it+1];if(B&&F&&B.currentPolyCount.top++,VC(Ge,pt,ye)){re&&(Re=St.sub(Ge)._perp()._unit(),tt=!tt);continue}B&&B.append(Ge,pt);const Yt=Ge.sub(pt)._perp(),At=Yt.x/(Math.abs(Yt.x)+Math.abs(Yt.y)),Bt=Yt.y>0?1:0,Et=pt.dist(Ge);if(lt+Et>32768&&(lt=0),re){Ye=St.sub(Ge)._perp()._unit();let mr=UC(pt,Ge,St,jC(Re,Ye),re);isNaN(mr)&&(mr=0);const er=Ge.sub(pt)._unit();pt=pt.add(er.mult(Ve))._round(),Ge=Ge.add(er.mult(-mr))._round(),Ve=mr,Re=Ye}const Qt=be.vertexLength,br=_e.length>4&&GC(pt,Ge,St);let _r=qC(lt,dt,tt);if(im(this.layoutVertexArray,pt.x,pt.y,At,Bt,0,0,_r),im(this.layoutVertexArray,pt.x,pt.y,At,Bt,0,1,_r),lt+=Et,_r=qC(lt,br,!tt),dt=br,im(this.layoutVertexArray,Ge.x,Ge.y,At,Bt,0,0,_r),im(this.layoutVertexArray,Ge.x,Ge.y,At,Bt,0,1,_r),be.vertexLength+=4,this.indexArray.emplaceBack(Qt+0,Qt+1,Qt+2),this.indexArray.emplaceBack(Qt+1,Qt+3,Qt+2),be.primitiveLength+=2,re){const mr=le+(it===1?_e.length-2:it-2),er=it===1?le:mr+1;if(this.indexArray.emplaceBack(Qt+1,mr,Qt+3),this.indexArray.emplaceBack(mr,er,Qt+3),be.primitiveLength+=2,Fe===void 0&&(Fe=Qt),!VC(St,_e[it],ye)){const Vr=it===_e.length-1?Fe:be.vertexLength;this.indexArray.emplaceBack(Qt+2,Qt+3,Vr),this.indexArray.emplaceBack(Qt+3,Vr+1,Vr),this.indexArray.emplaceBack(Qt+3,er,Vr+1),be.primitiveLength+=3}tt=!tt}if(O){const mr=this.layoutVertexExtArray,er=M.projectTilePoint(pt.x,pt.y,d),Vr=M.projectTilePoint(Ge.x,Ge.y,d),ar=M.upVector(d,pt.x,pt.y),wr=M.upVector(d,Ge.x,Ge.y);om(mr,er,ar),om(mr,er,ar),om(mr,Vr,wr),om(mr,Vr,wr)}}F&&(le+=_e.length-1)}}if(B&&B.polyCount.length>0){if(B.borders){B.vertexArrayOffset=this.centroidVertexArray.length;const ue=B.borders,ye=this.featuresOnBorder.push(B)-1;for(let le=0;le<4;le++)ue[le][0]!==Number.MAX_VALUE&&this.borders[le].push(ye)}this.encodeCentroid(B.borders?void 0:B.centroid(),B)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,g,_,d)}sortBorders(){for(let n=0;n<4;n++)this.borders[n].sort((s,h)=>this.featuresOnBorder[s].borders[n][0]-this.featuresOnBorder[h].borders[n][0])}encodeCentroid(n,s,h=!0){let d,g;if(n)if(n.y!==0){const b=s.span()._mult(this.tileToMeter);d=(Math.max(n.x,1)<<3)+Math.min(7,Math.round(b.x/10)),g=(Math.max(n.y,1)<<3)+Math.min(7,Math.round(b.y/10))}else d=Math.ceil(7*(n.x+450)),g=0;else d=0,g=+h;let _=h?this.centroidVertexArray.length:s.vertexArrayOffset;for(const b of s.polyCount){h&&this.centroidVertexArray.resize(this.centroidVertexArray.length+4*b.edges+b.top);for(let E=0;E<b.top;E++)this.centroidVertexArray.emplace(_++,d,g);for(let E=0;E<2*b.edges;E++)this.centroidVertexArray.emplace(_++,0,g),this.centroidVertexArray.emplace(_++,d,g)}}}function jC(a,n){const s=a.add(n)._unit();return a.x*s.x+a.y*s.y}function xN(a,n,s,h){const d=n.sub(a)._perp()._unit(),g=s.sub(n)._perp()._unit();return UC(a,n,s,jC(d,g),h)}function UC(a,n,s,h,d){const g=Math.sqrt(1-h*h);return Math.min(a.dist(n)/3,n.dist(s)/3,d*g/h)}function VC(a,n,s){return a.x<s[0].x&&n.x<s[0].x||a.x>s[1].x&&n.x>s[1].x||a.y<s[0].y&&n.y<s[0].y||a.y>s[1].y&&n.y>s[1].y}function GC(a,n,s){if(a.x<0||a.x>=rr||n.x<0||n.x>=rr||s.x<0||s.x>=rr)return!1;const h=s.sub(n),d=h.perp(),g=a.sub(n);return(h.x*g.x+h.y*g.y)/Math.sqrt((h.x*h.x+h.y*h.y)*(g.x*g.x+g.y*g.y))>-.866&&d.x*g.x+d.y*g.y<0}function qC(a,n,s){const h=n?2|a:-3&a;return s?1|h:-2&h}function WC(){const a=Math.PI/32,n=Math.tan(a),s=Qp;return s*Math.sqrt(1+2*n*n)-s}function HC(a,n,s){const h=1<<s.z,d=Wo(s.x/h),g=Wo((s.x+1)/h),_=Ii(s.y/h),b=Ii((s.y+1)/h);return function(E,M,O,B,F=0,q){const H=[];if(!E.length||!O||!B)return H;const K=(_e,Fe)=>{for(const Re of _e)H.push({polygon:Re,bounds:Fe})},re=Math.ceil(Math.log2(O)),ue=Math.ceil(Math.log2(B)),ye=re-ue,le=[];for(let _e=0;_e<Math.abs(ye);_e++)le.push(ye>0?0:1);for(let _e=0;_e<Math.min(re,ue);_e++)le.push(0),le.push(1);let ge=E;if(ge=rv(ge,M[0].y-F,M[1].y+F,1),ge=rv(ge,M[0].x-F,M[1].x+F,0),!ge.length)return H;const be=[];for(le.length?be.push({polygons:ge,bounds:M,depth:0}):K(ge,M);be.length;){const _e=be.pop(),Fe=_e.depth,Re=le[Fe],Ye=_e.bounds[0],dt=_e.bounds[1],Ve=Re===0?Ye.x:Ye.y,tt=Re===0?dt.x:dt.y,it=q?q(Re,Ve,tt):.5*(Ve+tt),lt=rv(_e.polygons,Ve-F,it+F,Re),pt=rv(_e.polygons,it-F,tt+F,Re);if(lt.length){const Ge=[Ye,new W(Re===0?it:dt.x,Re===1?it:dt.y)];le.length>Fe+1?be.push({polygons:lt,bounds:Ge,depth:Fe+1}):K(lt,Ge)}if(pt.length){const Ge=[new W(Re===0?it:Ye.x,Re===1?it:Ye.y),dt];le.length>Fe+1?be.push({polygons:pt,bounds:Ge,depth:Fe+1}):K(pt,Ge)}}return H}(a,n,Math.ceil((g-d)/11.25),Math.ceil((_-b)/11.25),1,(E,M,O)=>{if(E===0)return .5*(M+O);{const B=Ii((s.y+M/rr)/h);return(xs(.5*(Ii((s.y+O/rr)/h)+B))*h-s.y)*rr}})}Dt(am,"FillExtrusionBucket",{omit:["layers","features"]}),Dt(NC,"PartMetadata");const bN=new ct({"fill-extrusion-edge-radius":new Pe(Xe["layout_fill-extrusion"]["fill-extrusion-edge-radius"])});var wN={paint:new ct({"fill-extrusion-opacity":new Pe(Xe["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new je(Xe["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Pe(Xe["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Pe(Xe["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new je(Xe["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new je(Xe["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new je(Xe["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new Pe(Xe["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Pe(Xe["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Pe(Xe["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"])}),layout:bN};function ZC(a,n,s){var h=2*Math.PI*6378137/256/Math.pow(2,s);return[a*h-2*Math.PI*6378137/2,n*h-2*Math.PI*6378137/2]}class nv{constructor(n,s,h){this.z=n,this.x=s,this.y=h,this.key=sm(0,n,n,s,h)}equals(n){return this.z===n.z&&this.x===n.x&&this.y===n.y}url(n,s){const h=function(g,_,b){var E=ZC(256*g,256*(_=Math.pow(2,b)-_-1),b),M=ZC(256*(g+1),256*(_+1),b);return E[0]+","+E[1]+","+M[0]+","+M[1]}(this.x,this.y,this.z),d=function(g,_,b){let E,M="";for(let O=g;O>0;O--)E=1<<O-1,M+=(_&E?1:0)+(b&E?2:0);return M}(this.z,this.x,this.y);return n[(this.x+this.y)%n.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(s==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",d).replace("{bbox-epsg-3857}",h)}toString(){return`${this.z}/${this.x}/${this.y}`}}class XC{constructor(n,s){this.wrap=n,this.canonical=s,this.key=sm(n,s.z,s.z,s.x,s.y)}}class io{constructor(n,s,h,d,g){this.overscaledZ=n,this.wrap=s,this.canonical=new nv(h,+d,+g),this.key=s===0&&n===h?this.canonical.key:sm(s,n,h,d,g)}equals(n){return this.overscaledZ===n.overscaledZ&&this.wrap===n.wrap&&this.canonical.equals(n.canonical)}scaledTo(n){const s=this.canonical.z-n;return n>this.canonical.z?new io(n,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new io(n,this.wrap,n,this.canonical.x>>s,this.canonical.y>>s)}calculateScaledKey(n,s=!0){if(this.overscaledZ===n&&s)return this.key;if(n>this.canonical.z)return sm(this.wrap*+s,n,this.canonical.z,this.canonical.x,this.canonical.y);{const h=this.canonical.z-n;return sm(this.wrap*+s,n,n,this.canonical.x>>h,this.canonical.y>>h)}}isChildOf(n){if(n.wrap!==this.wrap)return!1;const s=this.canonical.z-n.canonical.z;return n.overscaledZ===0||n.overscaledZ<this.overscaledZ&&n.canonical.x===this.canonical.x>>s&&n.canonical.y===this.canonical.y>>s}children(n){if(this.overscaledZ>=n)return[new io(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const s=this.canonical.z+1,h=2*this.canonical.x,d=2*this.canonical.y;return[new io(s,this.wrap,s,h,d),new io(s,this.wrap,s,h+1,d),new io(s,this.wrap,s,h,d+1),new io(s,this.wrap,s,h+1,d+1)]}isLessThan(n){return this.wrap<n.wrap||!(this.wrap>n.wrap)&&(this.overscaledZ<n.overscaledZ||!(this.overscaledZ>n.overscaledZ)&&(this.canonical.x<n.canonical.x||!(this.canonical.x>n.canonical.x)&&this.canonical.y<n.canonical.y))}wrapped(){return new io(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(n){return new io(this.overscaledZ,n,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new XC(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function sm(a,n,s,h,d){const g=1<<Math.min(s,22);let _=g*(d%g)+h%g;return a&&s<22&&(_+=g*g*((a<0?-2*a-1:2*a)%(1<<2*(22-s)))),16*(32*_+s)+(n-s)}Dt(nv,"CanonicalTileID"),Dt(io,"OverscaledTileID",{omit:["projMatrix"]});class lf extends W{constructor(n,s,h){super(n,s),this.z=h}}function lm(a,n){return a.x*n.x+a.y*n.y}function KC(a,n){if(a.length===1){let s=0;const h=n[s++];let d;for(;!d||h.equals(d);)if(d=n[s++],!d)return 1/0;for(;s<n.length;s++){const g=n[s],_=a[0],b=d.sub(h),E=g.sub(h),M=_.sub(h),O=lm(b,b),B=lm(b,E),F=lm(E,E),q=lm(M,b),H=lm(M,E),K=O*F-B*B,re=(F*q-B*H)/K,ue=(O*H-B*q)/K,ye=h.z*(1-re-ue)+d.z*re+g.z*ue;if(isFinite(ye))return ye}return 1/0}{let s=1/0;for(const h of n)s=Math.min(s,h.z);return s}}function YC(a,n,s,h,d,g,_,b){const E=_*d.getElevationAt(a,n,!0,!0),M=g[0]!==0,O=M?g[1]===0?_*(g[0]/7-450):_*function(B,F,q){const H=Math.floor(F[0]/8),K=Math.floor(F[1]/8),re=10*(F[0]-8*H),ue=10*(F[1]-8*K),ye=B.getElevationAt(H,K,!0,!0),le=B.getMeterToDEM(q),ge=Math.floor(.5*(re*le-1)),be=Math.floor(.5*(ue*le-1)),_e=B.tileCoordToPixel(H,K),Fe=2*ge+1,Re=2*be+1,Ye=function(pt,Ge,St,Yt,At){return[pt.getElevationAtPixel(Ge,St,!0),pt.getElevationAtPixel(Ge+At,St,!0),pt.getElevationAtPixel(Ge,St+At,!0),pt.getElevationAtPixel(Ge+Yt,St+At,!0)]}(B,_e.x-ge,_e.y-be,Fe,Re),dt=Math.abs(Ye[0]-Ye[1]),Ve=Math.abs(Ye[2]-Ye[3]),tt=Math.abs(Ye[0]-Ye[2])+Math.abs(Ye[1]-Ye[3]),it=Math.min(.25,.5*le*(dt+Ve)/Fe),lt=Math.min(.25,.5*le*tt/Re);return ye+Math.max(it*re,lt*ue)}(d,g,b):E;return{base:E+(s===0)?-1:s,top:M?Math.max(O+h,E+s+2):E+h}}const SN=Nt([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),{members:EN}=SN,TN=Nt([{name:"a_packed",components:4,type:"Float32"}]),{members:AN}=TN,MN=tv.types,CN=Math.cos(Math.PI/180*37.5);class iv{constructor(n){this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(s=>s.id),this.index=n.index,this.projection=n.projection,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(s=>{this.gradients[s.id]={}}),this.layoutVertexArray=new nn,this.layoutVertexArray2=new Jr,this.indexArray=new Pi,this.programConfigurations=new Mu(n.layers,n.zoom),this.segments=new Gn,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter(s=>s.isStateDependent()).map(s=>s.id)}populate(n,s,h,d){this.hasPattern=Zb("line",this.layers,s);const g=this.layers[0].layout.get("line-sort-key"),_=[];for(const{feature:O,id:B,index:F,sourceLayerIndex:q}of n){const H=this.layers[0]._featureFilter.needGeometry,K=Du(O,H);if(!this.layers[0]._featureFilter.filter(new ke(this.zoom),K,h))continue;const re=g?g.evaluate(K,{},h):void 0,ue={id:B,properties:O.properties,type:O.type,sourceLayerIndex:q,index:F,geometry:H?K.geometry:nl(O,h,d),patterns:{},sortKey:re};_.push(ue)}g&&_.sort((O,B)=>O.sortKey-B.sortKey);const{lineAtlas:b,featureIndex:E}=s,M=this.addConstantDashes(b);for(const O of _){const{geometry:B,index:F,sourceLayerIndex:q}=O;if(M&&this.addFeatureDashes(O,b),this.hasPattern){const H=Xb("line",this.layers,O,this.zoom,s);this.patternFeatures.push(H)}else this.addFeature(O,B,F,h,b.positions,s.availableImages);E.insert(n[F].feature,B,F,q,this.index)}}addConstantDashes(n){let s=!1;for(const h of this.layers){const d=h.paint.get("line-dasharray").value,g=h.layout.get("line-cap").value;if(d.kind!=="constant"||g.kind!=="constant")s=!0;else{const _=g.value,b=d.value;if(!b)continue;n.addDash(b,_)}}return s}addFeatureDashes(n,s){const h=this.zoom;for(const d of this.layers){const g=d.paint.get("line-dasharray").value,_=d.layout.get("line-cap").value;if(g.kind==="constant"&&_.kind==="constant")continue;let b,E;if(g.kind==="constant"){if(b=g.value,!b)continue}else b=g.evaluate({zoom:h},n);E=_.kind==="constant"?_.value:_.evaluate({zoom:h},n),s.addDash(b,E),n.patterns[d.id]=s.getKey(b,E)}}update(n,s,h,d){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(n,s,this.stateDependentLayers,h,d)}addFeatures(n,s,h,d,g){for(const _ of this.patternFeatures)this.addFeature(_,_.geometry,_.index,s,h,d)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(n){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=n.createVertexBuffer(this.layoutVertexArray2,AN)),this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,EN),this.indexBuffer=n.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(n),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(n){if(n.properties&&n.properties.hasOwnProperty("mapbox_clip_start")&&n.properties.hasOwnProperty("mapbox_clip_end"))return{start:+n.properties.mapbox_clip_start,end:+n.properties.mapbox_clip_end}}addFeature(n,s,h,d,g,_){const b=this.layers[0].layout,E=b.get("line-join").evaluate(n,{}),M=b.get("line-cap").evaluate(n,{}),O=b.get("line-miter-limit"),B=b.get("line-round-limit");this.lineClips=this.lineFeatureClips(n);for(const F of s)this.addLine(F,n,E,M,O,B);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,n,h,g,_,d)}addLine(n,s,h,d,g,_){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineSoFar=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(let ue=0;ue<n.length-1;ue++)this.totalDistance+=n[ue].dist(n[ue+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const b=MN[s.type]==="Polygon";let E=n.length;for(;E>=2&&n[E-1].equals(n[E-2]);)E--;let M=0;for(;M<E-1&&n[M].equals(n[M+1]);)M++;if(E<(b?3:2))return;h==="bevel"&&(g=1.05);const O=this.overscaling<=16?122880/(512*this.overscaling):0,B=this.segments.prepareSegment(10*E,this.layoutVertexArray,this.indexArray);let F,q,H,K,re;this.e1=this.e2=-1,b&&(F=n[E-2],re=n[M].sub(F)._unit()._perp());for(let ue=M;ue<E;ue++){if(H=ue===E-1?b?n[M+1]:void 0:n[ue+1],H&&n[ue].equals(H))continue;re&&(K=re),F&&(q=F),F=n[ue],re=H?H.sub(F)._unit()._perp():K,K=K||re;let ye=K.add(re);ye.x===0&&ye.y===0||ye._unit();const le=K.x*re.x+K.y*re.y,ge=ye.x*re.x+ye.y*re.y,be=ge!==0?1/ge:1/0,_e=2*Math.sqrt(2-2*ge),Fe=ge<CN&&q&&H,Re=K.x*re.y-K.y*re.x>0;if(Fe&&ue>M){const Ve=F.dist(q);if(Ve>2*O){const tt=F.sub(F.sub(q)._mult(O/Ve)._round());this.updateDistance(q,tt),this.addCurrentVertex(tt,K,0,0,B),q=tt}}const Ye=q&&H;let dt=Ye?h:b?"butt":d;if(Ye&&dt==="round"&&(be<_?dt="miter":be<=2&&(dt="fakeround")),dt==="miter"&&be>g&&(dt="bevel"),dt==="bevel"&&(be>2&&(dt="flipbevel"),be<g&&(dt="miter")),q&&this.updateDistance(q,F),dt==="miter")ye._mult(be),this.addCurrentVertex(F,ye,0,0,B);else if(dt==="flipbevel"){if(be>100)ye=re.mult(-1);else{const Ve=be*K.add(re).mag()/K.sub(re).mag();ye._perp()._mult(Ve*(Re?-1:1))}this.addCurrentVertex(F,ye,0,0,B),this.addCurrentVertex(F,ye.mult(-1),0,0,B)}else if(dt==="bevel"||dt==="fakeround"){const Ve=-Math.sqrt(be*be-1),tt=Re?Ve:0,it=Re?0:Ve;if(q&&this.addCurrentVertex(F,K,tt,it,B),dt==="fakeround"){const lt=Math.round(180*_e/Math.PI/20);for(let pt=1;pt<lt;pt++){let Ge=pt/lt;if(Ge!==.5){const Yt=Ge-.5;Ge+=Ge*Yt*(Ge-1)*((1.0904+le*(le*(3.55645-1.43519*le)-3.2452))*Yt*Yt+(.848013+le*(.215638*le-1.06021)))}const St=re.sub(K)._mult(Ge)._add(K)._unit()._mult(Re?-1:1);this.addHalfVertex(F,St.x,St.y,!1,Re,0,B)}}H&&this.addCurrentVertex(F,re,-tt,-it,B)}else if(dt==="butt")this.addCurrentVertex(F,ye,0,0,B);else if(dt==="square"){const Ve=q?1:-1;q||this.addCurrentVertex(F,ye,Ve,Ve,B),this.addCurrentVertex(F,ye,0,0,B),q&&this.addCurrentVertex(F,ye,Ve,Ve,B)}else dt==="round"&&(q&&(this.addCurrentVertex(F,K,0,0,B),this.addCurrentVertex(F,K,1,1,B,!0)),H&&(this.addCurrentVertex(F,re,-1,-1,B,!0),this.addCurrentVertex(F,re,0,0,B)));if(Fe&&ue<E-1){const Ve=F.dist(H);if(Ve>2*O){const tt=F.add(H.sub(F)._mult(O/Ve)._round());this.updateDistance(F,tt),this.addCurrentVertex(tt,re,0,0,B),F=tt}}}}addCurrentVertex(n,s,h,d,g,_=!1){const b=s.y*d-s.x,E=-s.y-s.x*d;this.addHalfVertex(n,s.x+s.y*h,s.y-s.x*h,_,!1,h,g),this.addHalfVertex(n,b,E,_,!0,-d,g)}addHalfVertex({x:n,y:s},h,d,g,_,b,E){this.layoutVertexArray.emplaceBack((n<<1)+(g?1:0),(s<<1)+(_?1:0),Math.round(63*h)+128,Math.round(63*d)+128,1+(b===0?0:b<0?-1:1),0,this.lineSoFar),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const M=E.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,M),E.primitiveLength++),_?this.e2=M:this.e1=M}updateScaledDistance(){if(this.lineClips){const n=this.totalDistance/(this.lineClips.end-this.lineClips.start);this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=n*this.lineClips.start+this.distance}else this.lineSoFar=this.distance}updateDistance(n,s){this.distance+=n.dist(s),this.updateScaledDistance()}}Dt(iv,"LineBucket",{omit:["layers","patternFeatures"]});const PN=new ct({"line-cap":new je(Xe.layout_line["line-cap"]),"line-join":new je(Xe.layout_line["line-join"]),"line-miter-limit":new Pe(Xe.layout_line["line-miter-limit"]),"line-round-limit":new Pe(Xe.layout_line["line-round-limit"]),"line-sort-key":new je(Xe.layout_line["line-sort-key"])});var JC={paint:new ct({"line-opacity":new je(Xe.paint_line["line-opacity"]),"line-color":new je(Xe.paint_line["line-color"]),"line-translate":new Pe(Xe.paint_line["line-translate"]),"line-translate-anchor":new Pe(Xe.paint_line["line-translate-anchor"]),"line-width":new je(Xe.paint_line["line-width"]),"line-gap-width":new je(Xe.paint_line["line-gap-width"]),"line-offset":new je(Xe.paint_line["line-offset"]),"line-blur":new je(Xe.paint_line["line-blur"]),"line-dasharray":new je(Xe.paint_line["line-dasharray"]),"line-pattern":new je(Xe.paint_line["line-pattern"]),"line-gradient":new ot(Xe.paint_line["line-gradient"]),"line-trim-offset":new Pe(Xe.paint_line["line-trim-offset"])}),layout:PN};const QC=new class extends je{possiblyEvaluate(a,n){return n=new ke(Math.floor(n.zoom),{now:n.now,fadeDuration:n.fadeDuration,transition:n.transition}),super.possiblyEvaluate(a,n)}evaluate(a,n,s,h){return n=gt({},n,{zoom:Math.floor(n.zoom)}),super.evaluate(a,n,s,h)}}(JC.paint.properties["line-width"].specification);function eP(a,n){return n>0?n+2*a:a}QC.useIntegerZoom=!0;const IN=Nt([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),kN=Nt([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),ON=Nt([{name:"a_projected_pos",components:4,type:"Float32"}],4);Nt([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const DN=Nt([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}]),RN=Nt([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"}]);Nt([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const tP=Nt([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),LN=Nt([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);Nt([{name:"triangle",components:3,type:"Uint16"}]),Nt([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),Nt([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),Nt([{type:"Float32",name:"offsetX"}]),Nt([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var Oi=24;const bs=128;function Yb(a,n){const{expression:s}=n;if(s.kind==="constant")return{kind:"constant",layoutSize:s.evaluate(new ke(a+1))};if(s.kind==="source")return{kind:"source"};{const{zoomStops:h,interpolationType:d}=s;let g=0;for(;g<h.length&&h[g]<=a;)g++;g=Math.max(0,g-1);let _=g;for(;_<h.length&&h[_]<a+1;)_++;_=Math.min(h.length-1,_);const b=h[g],E=h[_];return s.kind==="composite"?{kind:"composite",minZoom:b,maxZoom:E,interpolationType:d}:{kind:"camera",minZoom:b,maxZoom:E,minSize:s.evaluate(new ke(b)),maxSize:s.evaluate(new ke(E)),interpolationType:d}}}function ov(a,{uSize:n,uSizeT:s},{lowerSize:h,upperSize:d}){return a.kind==="source"?h/bs:a.kind==="composite"?Pr(h/bs,d/bs,s):n}function cf(a,n){let s=0,h=0;if(a.kind==="constant")h=a.layoutSize;else if(a.kind!=="source"){const{interpolationType:d,minZoom:g,maxZoom:_}=a,b=d?Be(ua.interpolationFactor(d,n,g,_),0,1):0;a.kind==="camera"?h=Pr(a.minSize,a.maxSize,b):s=b}return{uSizeT:s,uSize:h}}var zN=Object.freeze({__proto__:null,getSizeData:Yb,evaluateSizeForFeature:ov,evaluateSizeForZoom:cf,SIZE_PACK_FACTOR:bs});function BN(a,n,s){return a.sections.forEach(h=>{h.text=function(d,g,_){const b=g.layout.get("text-transform").evaluate(_,{});return b==="uppercase"?d=d.toLocaleUpperCase():b==="lowercase"&&(d=d.toLocaleLowerCase()),Ee.applyArabicShaping&&(d=Ee.applyArabicShaping(d)),d}(h.text,n,s)}),a}const cm={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂","←":"↑","→":"↓"};function $N(a){return a==="︶"||a==="﹈"||a==="︸"||a==="﹄"||a==="﹂"||a==="︾"||a==="︼"||a==="︺"||a==="︘"||a==="﹀"||a==="︐"||a==="︓"||a==="︔"||a==="｀"||a==="￣"||a==="︑"||a==="︒"}function FN(a){return a==="︵"||a==="﹇"||a==="︷"||a==="﹃"||a==="﹁"||a==="︽"||a==="︻"||a==="︹"||a==="︗"||a==="︿"}var um=on,rP=function(a,n,s,h,d){var g,_,b=8*d-h-1,E=(1<<b)-1,M=E>>1,O=-7,B=s?d-1:0,F=s?-1:1,q=a[n+B];for(B+=F,g=q&(1<<-O)-1,q>>=-O,O+=b;O>0;g=256*g+a[n+B],B+=F,O-=8);for(_=g&(1<<-O)-1,g>>=-O,O+=h;O>0;_=256*_+a[n+B],B+=F,O-=8);if(g===0)g=1-M;else{if(g===E)return _?NaN:1/0*(q?-1:1);_+=Math.pow(2,h),g-=M}return(q?-1:1)*_*Math.pow(2,g-h)},nP=function(a,n,s,h,d,g){var _,b,E,M=8*g-d-1,O=(1<<M)-1,B=O>>1,F=d===23?Math.pow(2,-24)-Math.pow(2,-77):0,q=h?0:g-1,H=h?1:-1,K=n<0||n===0&&1/n<0?1:0;for(n=Math.abs(n),isNaN(n)||n===1/0?(b=isNaN(n)?1:0,_=O):(_=Math.floor(Math.log(n)/Math.LN2),n*(E=Math.pow(2,-_))<1&&(_--,E*=2),(n+=_+B>=1?F/E:F*Math.pow(2,1-B))*E>=2&&(_++,E/=2),_+B>=O?(b=0,_=O):_+B>=1?(b=(n*E-1)*Math.pow(2,d),_+=B):(b=n*Math.pow(2,B-1)*Math.pow(2,d),_=0));d>=8;a[s+q]=255&b,q+=H,b/=256,d-=8);for(_=_<<d|b,M+=d;M>0;a[s+q]=255&_,q+=H,_/=256,M-=8);a[s+q-H]|=128*K};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function on(a){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(a)?a:new Uint8Array(a||0),this.pos=0,this.type=0,this.length=this.buf.length}on.Varint=0,on.Fixed64=1,on.Bytes=2,on.Fixed32=5;var Jb=4294967296,iP=1/Jb,oP=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function ol(a){return a.type===on.Bytes?a.readVarint()+a.pos:a.pos+1}function uf(a,n,s){return s?4294967296*n+(a>>>0):4294967296*(n>>>0)+(a>>>0)}function aP(a,n,s){var h=n<=16383?1:n<=2097151?2:n<=268435455?3:Math.floor(Math.log(n)/(7*Math.LN2));s.realloc(h);for(var d=s.pos-1;d>=a;d--)s.buf[d+h]=s.buf[d]}function NN(a,n){for(var s=0;s<a.length;s++)n.writeVarint(a[s])}function jN(a,n){for(var s=0;s<a.length;s++)n.writeSVarint(a[s])}function UN(a,n){for(var s=0;s<a.length;s++)n.writeFloat(a[s])}function VN(a,n){for(var s=0;s<a.length;s++)n.writeDouble(a[s])}function GN(a,n){for(var s=0;s<a.length;s++)n.writeBoolean(a[s])}function qN(a,n){for(var s=0;s<a.length;s++)n.writeFixed32(a[s])}function WN(a,n){for(var s=0;s<a.length;s++)n.writeSFixed32(a[s])}function HN(a,n){for(var s=0;s<a.length;s++)n.writeFixed64(a[s])}function ZN(a,n){for(var s=0;s<a.length;s++)n.writeSFixed64(a[s])}function av(a,n){return(a[n]|a[n+1]<<8|a[n+2]<<16)+16777216*a[n+3]}function hf(a,n,s){a[s]=n,a[s+1]=n>>>8,a[s+2]=n>>>16,a[s+3]=n>>>24}function sP(a,n){return(a[n]|a[n+1]<<8|a[n+2]<<16)+(a[n+3]<<24)}function XN(a,n,s){n.glyphs=[],a===1&&s.readMessage(KN,n)}function KN(a,n,s){if(a===3){const{id:h,bitmap:d,width:g,height:_,left:b,top:E,advance:M}=s.readMessage(YN,{});n.glyphs.push({id:h,bitmap:new il({width:g+6,height:_+6},d),metrics:{width:g,height:_,left:b,top:E,advance:M}})}else a===4?n.ascender=s.readSVarint():a===5&&(n.descender=s.readSVarint())}function YN(a,n,s){a===1?n.id=s.readVarint():a===2?n.bitmap=s.readBytes():a===3?n.width=s.readVarint():a===4?n.height=s.readVarint():a===5?n.left=s.readSVarint():a===6?n.top=s.readSVarint():a===7&&(n.advance=s.readVarint())}function Qb(a){let n=0,s=0;for(const _ of a)n+=_.w*_.h,s=Math.max(s,_.w);a.sort((_,b)=>b.h-_.h);const h=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(n/.95)),s),h:1/0}];let d=0,g=0;for(const _ of a)for(let b=h.length-1;b>=0;b--){const E=h[b];if(!(_.w>E.w||_.h>E.h)){if(_.x=E.x,_.y=E.y,g=Math.max(g,_.y+_.h),d=Math.max(d,_.x+_.w),_.w===E.w&&_.h===E.h){const M=h.pop();b<h.length&&(h[b]=M)}else _.h===E.h?(E.x+=_.w,E.w-=_.w):_.w===E.w?(E.y+=_.h,E.h-=_.h):(h.push({x:E.x+_.w,y:E.y,w:E.w-_.w,h:_.h}),E.y+=_.h,E.h-=_.h);break}}return{w:d,h:g,fill:n/(d*g)||0}}on.prototype={destroy:function(){this.buf=null},readFields:function(a,n,s){for(s=s||this.length;this.pos<s;){var h=this.readVarint(),d=h>>3,g=this.pos;this.type=7&h,a(d,n,this),this.pos===g&&this.skip(h)}return n},readMessage:function(a,n){return this.readFields(a,n,this.readVarint()+this.pos)},readFixed32:function(){var a=av(this.buf,this.pos);return this.pos+=4,a},readSFixed32:function(){var a=sP(this.buf,this.pos);return this.pos+=4,a},readFixed64:function(){var a=av(this.buf,this.pos)+av(this.buf,this.pos+4)*Jb;return this.pos+=8,a},readSFixed64:function(){var a=av(this.buf,this.pos)+sP(this.buf,this.pos+4)*Jb;return this.pos+=8,a},readFloat:function(){var a=rP(this.buf,this.pos,!0,23,4);return this.pos+=4,a},readDouble:function(){var a=rP(this.buf,this.pos,!0,52,8);return this.pos+=8,a},readVarint:function(a){var n,s,h=this.buf;return n=127&(s=h[this.pos++]),s<128?n:(n|=(127&(s=h[this.pos++]))<<7,s<128?n:(n|=(127&(s=h[this.pos++]))<<14,s<128?n:(n|=(127&(s=h[this.pos++]))<<21,s<128?n:function(d,g,_){var b,E,M=_.buf;if(b=(112&(E=M[_.pos++]))>>4,E<128||(b|=(127&(E=M[_.pos++]))<<3,E<128)||(b|=(127&(E=M[_.pos++]))<<10,E<128)||(b|=(127&(E=M[_.pos++]))<<17,E<128)||(b|=(127&(E=M[_.pos++]))<<24,E<128)||(b|=(1&(E=M[_.pos++]))<<31,E<128))return uf(d,b,g);throw new Error("Expected varint not more than 10 bytes")}(n|=(15&(s=h[this.pos]))<<28,a,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var a=this.readVarint();return a%2==1?(a+1)/-2:a/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var a=this.readVarint()+this.pos,n=this.pos;return this.pos=a,a-n>=12&&oP?function(s,h,d){return oP.decode(s.subarray(h,d))}(this.buf,n,a):function(s,h,d){for(var g="",_=h;_<d;){var b,E,M,O=s[_],B=null,F=O>239?4:O>223?3:O>191?2:1;if(_+F>d)break;F===1?O<128&&(B=O):F===2?(192&(b=s[_+1]))==128&&(B=(31&O)<<6|63&b)<=127&&(B=null):F===3?(E=s[_+2],(192&(b=s[_+1]))==128&&(192&E)==128&&((B=(15&O)<<12|(63&b)<<6|63&E)<=2047||B>=55296&&B<=57343)&&(B=null)):F===4&&(E=s[_+2],M=s[_+3],(192&(b=s[_+1]))==128&&(192&E)==128&&(192&M)==128&&((B=(15&O)<<18|(63&b)<<12|(63&E)<<6|63&M)<=65535||B>=1114112)&&(B=null)),B===null?(B=65533,F=1):B>65535&&(B-=65536,g+=String.fromCharCode(B>>>10&1023|55296),B=56320|1023&B),g+=String.fromCharCode(B),_+=F}return g}(this.buf,n,a)},readBytes:function(){var a=this.readVarint()+this.pos,n=this.buf.subarray(this.pos,a);return this.pos=a,n},readPackedVarint:function(a,n){if(this.type!==on.Bytes)return a.push(this.readVarint(n));var s=ol(this);for(a=a||[];this.pos<s;)a.push(this.readVarint(n));return a},readPackedSVarint:function(a){if(this.type!==on.Bytes)return a.push(this.readSVarint());var n=ol(this);for(a=a||[];this.pos<n;)a.push(this.readSVarint());return a},readPackedBoolean:function(a){if(this.type!==on.Bytes)return a.push(this.readBoolean());var n=ol(this);for(a=a||[];this.pos<n;)a.push(this.readBoolean());return a},readPackedFloat:function(a){if(this.type!==on.Bytes)return a.push(this.readFloat());var n=ol(this);for(a=a||[];this.pos<n;)a.push(this.readFloat());return a},readPackedDouble:function(a){if(this.type!==on.Bytes)return a.push(this.readDouble());var n=ol(this);for(a=a||[];this.pos<n;)a.push(this.readDouble());return a},readPackedFixed32:function(a){if(this.type!==on.Bytes)return a.push(this.readFixed32());var n=ol(this);for(a=a||[];this.pos<n;)a.push(this.readFixed32());return a},readPackedSFixed32:function(a){if(this.type!==on.Bytes)return a.push(this.readSFixed32());var n=ol(this);for(a=a||[];this.pos<n;)a.push(this.readSFixed32());return a},readPackedFixed64:function(a){if(this.type!==on.Bytes)return a.push(this.readFixed64());var n=ol(this);for(a=a||[];this.pos<n;)a.push(this.readFixed64());return a},readPackedSFixed64:function(a){if(this.type!==on.Bytes)return a.push(this.readSFixed64());var n=ol(this);for(a=a||[];this.pos<n;)a.push(this.readSFixed64());return a},skip:function(a){var n=7&a;if(n===on.Varint)for(;this.buf[this.pos++]>127;);else if(n===on.Bytes)this.pos=this.readVarint()+this.pos;else if(n===on.Fixed32)this.pos+=4;else{if(n!==on.Fixed64)throw new Error("Unimplemented type: "+n);this.pos+=8}},writeTag:function(a,n){this.writeVarint(a<<3|n)},realloc:function(a){for(var n=this.length||16;n<this.pos+a;)n*=2;if(n!==this.length){var s=new Uint8Array(n);s.set(this.buf),this.buf=s,this.length=n}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(a){this.realloc(4),hf(this.buf,a,this.pos),this.pos+=4},writeSFixed32:function(a){this.realloc(4),hf(this.buf,a,this.pos),this.pos+=4},writeFixed64:function(a){this.realloc(8),hf(this.buf,-1&a,this.pos),hf(this.buf,Math.floor(a*iP),this.pos+4),this.pos+=8},writeSFixed64:function(a){this.realloc(8),hf(this.buf,-1&a,this.pos),hf(this.buf,Math.floor(a*iP),this.pos+4),this.pos+=8},writeVarint:function(a){(a=+a||0)>268435455||a<0?function(n,s){var h,d;if(n>=0?(h=n%4294967296|0,d=n/4294967296|0):(d=~(-n/4294967296),4294967295^(h=~(-n%4294967296))?h=h+1|0:(h=0,d=d+1|0)),n>=18446744073709552e3||n<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");s.realloc(10),function(g,_,b){b.buf[b.pos++]=127&g|128,g>>>=7,b.buf[b.pos++]=127&g|128,g>>>=7,b.buf[b.pos++]=127&g|128,g>>>=7,b.buf[b.pos++]=127&g|128,b.buf[b.pos]=127&(g>>>=7)}(h,0,s),function(g,_){var b=(7&g)<<4;_.buf[_.pos++]|=b|((g>>>=3)?128:0),g&&(_.buf[_.pos++]=127&g|((g>>>=7)?128:0),g&&(_.buf[_.pos++]=127&g|((g>>>=7)?128:0),g&&(_.buf[_.pos++]=127&g|((g>>>=7)?128:0),g&&(_.buf[_.pos++]=127&g|((g>>>=7)?128:0),g&&(_.buf[_.pos++]=127&g)))))}(d,s)}(a,this):(this.realloc(4),this.buf[this.pos++]=127&a|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=127&(a>>>=7)|(a>127?128:0),a<=127||(this.buf[this.pos++]=a>>>7&127))))},writeSVarint:function(a){this.writeVarint(a<0?2*-a-1:2*a)},writeBoolean:function(a){this.writeVarint(!!a)},writeString:function(a){a=String(a),this.realloc(4*a.length),this.pos++;var n=this.pos;this.pos=function(h,d,g){for(var _,b,E=0;E<d.length;E++){if((_=d.charCodeAt(E))>55295&&_<57344){if(!b){_>56319||E+1===d.length?(h[g++]=239,h[g++]=191,h[g++]=189):b=_;continue}if(_<56320){h[g++]=239,h[g++]=191,h[g++]=189,b=_;continue}_=b-55296<<10|_-56320|65536,b=null}else b&&(h[g++]=239,h[g++]=191,h[g++]=189,b=null);_<128?h[g++]=_:(_<2048?h[g++]=_>>6|192:(_<65536?h[g++]=_>>12|224:(h[g++]=_>>18|240,h[g++]=_>>12&63|128),h[g++]=_>>6&63|128),h[g++]=63&_|128)}return g}(this.buf,a,this.pos);var s=this.pos-n;s>=128&&aP(n,s,this),this.pos=n-1,this.writeVarint(s),this.pos+=s},writeFloat:function(a){this.realloc(4),nP(this.buf,a,this.pos,!0,23,4),this.pos+=4},writeDouble:function(a){this.realloc(8),nP(this.buf,a,this.pos,!0,52,8),this.pos+=8},writeBytes:function(a){var n=a.length;this.writeVarint(n),this.realloc(n);for(var s=0;s<n;s++)this.buf[this.pos++]=a[s]},writeRawMessage:function(a,n){this.pos++;var s=this.pos;a(n,this);var h=this.pos-s;h>=128&&aP(s,h,this),this.pos=s-1,this.writeVarint(h),this.pos+=h},writeMessage:function(a,n,s){this.writeTag(a,on.Bytes),this.writeRawMessage(n,s)},writePackedVarint:function(a,n){n.length&&this.writeMessage(a,NN,n)},writePackedSVarint:function(a,n){n.length&&this.writeMessage(a,jN,n)},writePackedBoolean:function(a,n){n.length&&this.writeMessage(a,GN,n)},writePackedFloat:function(a,n){n.length&&this.writeMessage(a,UN,n)},writePackedDouble:function(a,n){n.length&&this.writeMessage(a,VN,n)},writePackedFixed32:function(a,n){n.length&&this.writeMessage(a,qN,n)},writePackedSFixed32:function(a,n){n.length&&this.writeMessage(a,WN,n)},writePackedFixed64:function(a,n){n.length&&this.writeMessage(a,HN,n)},writePackedSFixed64:function(a,n){n.length&&this.writeMessage(a,ZN,n)},writeBytesField:function(a,n){this.writeTag(a,on.Bytes),this.writeBytes(n)},writeFixed32Field:function(a,n){this.writeTag(a,on.Fixed32),this.writeFixed32(n)},writeSFixed32Field:function(a,n){this.writeTag(a,on.Fixed32),this.writeSFixed32(n)},writeFixed64Field:function(a,n){this.writeTag(a,on.Fixed64),this.writeFixed64(n)},writeSFixed64Field:function(a,n){this.writeTag(a,on.Fixed64),this.writeSFixed64(n)},writeVarintField:function(a,n){this.writeTag(a,on.Varint),this.writeVarint(n)},writeSVarintField:function(a,n){this.writeTag(a,on.Varint),this.writeSVarint(n)},writeStringField:function(a,n){this.writeTag(a,on.Bytes),this.writeString(n)},writeFloatField:function(a,n){this.writeTag(a,on.Fixed32),this.writeFloat(n)},writeDoubleField:function(a,n){this.writeTag(a,on.Fixed64),this.writeDouble(n)},writeBooleanField:function(a,n){this.writeVarintField(a,!!n)}};class ew{constructor(n,{pixelRatio:s,version:h,stretchX:d,stretchY:g,content:_}){this.paddedRect=n,this.pixelRatio=s,this.stretchX=d,this.stretchY=g,this.content=_,this.version=h}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class lP{constructor(n,s){const h={},d={};this.haveRenderCallbacks=[];const g=[];this.addImages(n,h,g),this.addImages(s,d,g);const{w:_,h:b}=Qb(g),E=new Io({width:_||1,height:b||1});for(const M in n){const O=n[M],B=h[M].paddedRect;Io.copy(O.data,E,{x:0,y:0},{x:B.x+1,y:B.y+1},O.data)}for(const M in s){const O=s[M],B=d[M].paddedRect,F=B.x+1,q=B.y+1,H=O.data.width,K=O.data.height;Io.copy(O.data,E,{x:0,y:0},{x:F,y:q},O.data),Io.copy(O.data,E,{x:0,y:K-1},{x:F,y:q-1},{width:H,height:1}),Io.copy(O.data,E,{x:0,y:0},{x:F,y:q+K},{width:H,height:1}),Io.copy(O.data,E,{x:H-1,y:0},{x:F-1,y:q},{width:1,height:K}),Io.copy(O.data,E,{x:0,y:0},{x:F+H,y:q},{width:1,height:K})}this.image=E,this.iconPositions=h,this.patternPositions=d}addImages(n,s,h){for(const d in n){const g=n[d],_={x:0,y:0,w:g.data.width+2,h:g.data.height+2};h.push(_),s[d]=new ew(_,g),g.hasRenderCallback&&this.haveRenderCallbacks.push(d)}}patchUpdatedImages(n,s){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(h=>n.hasImage(h)),n.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const h in n.updatedImages)this.patchUpdatedImage(this.iconPositions[h],n.getImage(h),s),this.patchUpdatedImage(this.patternPositions[h],n.getImage(h),s)}patchUpdatedImage(n,s,h){if(!n||!s||n.version===s.version)return;n.version=s.version;const[d,g]=n.tl;h.update(s.data,void 0,{x:d,y:g})}}Dt(ew,"ImagePosition"),Dt(lP,"ImageAtlas");const Ho={horizontal:1,vertical:2,horizontalOnly:3};class hm{constructor(){this.scale=1,this.fontStack="",this.imageName=null}static forText(n,s){const h=new hm;return h.scale=n||1,h.fontStack=s,h}static forImage(n){const s=new hm;return s.imageName=n,s}}class ff{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(n,s){const h=new ff;for(let d=0;d<n.sections.length;d++){const g=n.sections[d];g.image?h.addImageSection(g):h.addTextSection(g,s)}return h}length(){return this.text.length}getSection(n){return this.sections[this.sectionIndex[n]]}getSections(){return this.sections}getSectionIndex(n){return this.sectionIndex[n]}getCharCode(n){return this.text.charCodeAt(n)}verticalizePunctuation(n){this.text=function(s,h){let d="";for(let g=0;g<s.length;g++){const _=s.charCodeAt(g+1)||null,b=s.charCodeAt(g-1)||null;d+=!h&&(_&&z(_)&&!cm[s[g+1]]||b&&z(b)&&!cm[s[g-1]])||!cm[s[g]]?s[g]:cm[s[g]]}return d}(this.text,n)}trim(){let n=0;for(let h=0;h<this.text.length&&sv[this.text.charCodeAt(h)];h++)n++;let s=this.text.length;for(let h=this.text.length-1;h>=0&&h>=n&&sv[this.text.charCodeAt(h)];h--)s--;this.text=this.text.substring(n,s),this.sectionIndex=this.sectionIndex.slice(n,s)}substring(n,s){const h=new ff;return h.text=this.text.substring(n,s),h.sectionIndex=this.sectionIndex.slice(n,s),h.sections=this.sections,h}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((n,s)=>Math.max(n,this.sections[s].scale),0)}addTextSection(n,s){this.text+=n.text,this.sections.push(hm.forText(n.scale,n.fontStack||s));const h=this.sections.length-1;for(let d=0;d<n.text.length;++d)this.sectionIndex.push(h)}addImageSection(n){const s=n.image?n.image.name:"";if(s.length===0)return void Qe("Can't add FormattedSection with an empty image.");const h=this.getNextImageSectionCharCode();h?(this.text+=String.fromCharCode(h),this.sections.push(hm.forImage(s)),this.sectionIndex.push(this.sections.length-1)):Qe("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function tw(a,n,s,h,d,g,_,b,E,M,O,B,F,q,H){const K=ff.fromFeature(a,d);B===Ho.vertical&&K.verticalizePunctuation(F);let re=[];const ue=function(_e,Fe,Re,Ye,dt,Ve){if(!_e)return[];const tt=[],it=function(St,Yt,At,Bt,Et,Qt){let br=0;for(let _r=0;_r<St.length();_r++){const mr=St.getSection(_r);br+=cP(St.getCharCode(_r),mr,Bt,Et,Yt,Qt)}return br/Math.max(1,Math.ceil(br/At))}(_e,Fe,Re,Ye,dt,Ve),lt=_e.text.indexOf("​")>=0;let pt=0;for(let St=0;St<_e.length();St++){const Yt=_e.getSection(St),At=_e.getCharCode(St);if(sv[At]||(pt+=cP(At,Yt,Ye,dt,Fe,Ve)),St<_e.length()-1){const Bt=!((Ge=At)<11904||!(C_(Ge)||Xh(Ge)||m(Ge)||z_(Ge)||k_(Ge)||M_(Ge)||P_(Ge)||Eu(Ge)||O_(Ge)||jp(Ge)||I_(Ge)||y(Ge)||Zh(Ge)||Fp(Ge)||$p(Ge)||Np(Ge)||tc(Ge)||Tu(Ge)||R_(Ge)||D_(Ge)));(JN[At]||Bt||Yt.imageName)&&tt.push(hP(St+1,pt,it,tt,QN(At,_e.getCharCode(St+1),Bt&&lt),!1))}}var Ge;return fP(hP(_e.length(),pt,it,tt,0,!0))}(K,M,g,n,h,q),{processBidirectionalText:ye,processStyledBidirectionalText:le}=Ee;if(ye&&K.sections.length===1){const _e=ye(K.toString(),ue);for(const Fe of _e){const Re=new ff;Re.text=Fe,Re.sections=K.sections;for(let Ye=0;Ye<Fe.length;Ye++)Re.sectionIndex.push(0);re.push(Re)}}else if(le){const _e=le(K.text,K.sectionIndex,ue);for(const Fe of _e){const Re=new ff;Re.text=Fe[0],Re.sectionIndex=Fe[1],Re.sections=K.sections,re.push(Re)}}else re=function(_e,Fe){const Re=[],Ye=_e.text;let dt=0;for(const Ve of Fe)Re.push(_e.substring(dt,Ve)),dt=Ve;return dt<Ye.length&&Re.push(_e.substring(dt,Ye.length)),Re}(K,ue);const ge=[],be={positionedLines:ge,text:K.toString(),top:O[1],bottom:O[1],left:O[0],right:O[0],writingMode:B,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(_e,Fe,Re,Ye,dt,Ve,tt,it,lt,pt,Ge,St){let Yt=0,At=0,Bt=0;const Et=it==="right"?1:it==="left"?0:.5;let Qt=!1;for(const ar of dt){const wr=ar.getSections();for(const Hr of wr){if(Hr.imageName)continue;const fn=Fe[Hr.fontStack];if(fn&&(Qt=fn.ascender!==void 0&&fn.descender!==void 0,!Qt))break}if(!Qt)break}let br=0;for(const ar of dt){ar.trim();const wr=ar.getMaxScale(),Hr=(wr-1)*Oi,fn={positionedGlyphs:[],lineOffset:0};_e.positionedLines[br]=fn;const an=fn.positionedGlyphs;let dn=0;if(!ar.length()){At+=Ve,++br;continue}let yn=0,In=0;for(let Gr=0;Gr<ar.length();Gr++){const Jn=ar.getSection(Gr),Wn=ar.getSectionIndex(Gr),Dr=ar.getCharCode(Gr);let Sn=Jn.scale,ri=null,Zr=null,$n=null,Ui=Oi,gi=0;const yi=!(lt===Ho.horizontal||!Ge&&!I(Dr)||Ge&&(sv[Dr]||(_r=Dr,Su(_r)||A_(_r)||Bp(_r)||Kh(_r)||f(_r))));if(Jn.imageName){const oo=Ye[Jn.imageName];if(!oo)continue;$n=Jn.imageName,_e.iconsInText=_e.iconsInText||!0,Zr=oo.paddedRect;const _i=oo.displaySize;Sn=Sn*Oi/St,ri={width:_i[0],height:_i[1],left:1,top:-3,advance:yi?_i[1]:_i[0],localGlyph:!1},gi=Qt?-ri.height*Sn:wr*Oi-17-_i[1]*Sn,Ui=ri.advance;const sl=(yi?_i[0]:_i[1])*Sn-Oi*wr;sl>0&&sl>dn&&(dn=sl)}else{const oo=Re[Jn.fontStack];if(!oo)continue;oo[Dr]&&(Zr=oo[Dr]);const _i=Fe[Jn.fontStack];if(!_i)continue;const sl=_i.glyphs[Dr];if(!sl)continue;if(ri=sl.metrics,Ui=Dr!==8203?Oi:0,Qt){const yf=_i.ascender!==void 0?Math.abs(_i.ascender):0,vm=_i.descender!==void 0?Math.abs(_i.descender):0,xm=(yf+vm)*Sn;yn<xm&&(yn=xm,In=(yf-vm)/2*Sn),gi=-yf*Sn}else gi=(wr-Sn)*Oi-17}yi?(_e.verticalizable=!0,an.push({glyph:Dr,imageName:$n,x:Yt,y:At+gi,vertical:yi,scale:Sn,localGlyph:ri.localGlyph,fontStack:Jn.fontStack,sectionIndex:Wn,metrics:ri,rect:Zr}),Yt+=Ui*Sn+pt):(an.push({glyph:Dr,imageName:$n,x:Yt,y:At+gi,vertical:yi,scale:Sn,localGlyph:ri.localGlyph,fontStack:Jn.fontStack,sectionIndex:Wn,metrics:ri,rect:Zr}),Yt+=ri.advance*Sn+pt)}an.length!==0&&(Bt=Math.max(Yt-pt,Bt),Qt?dP(an,Et,dn,In,Ve*wr/2):dP(an,Et,dn,0,Ve/2)),Yt=0;const mi=Ve*wr+dn;fn.lineOffset=Math.max(dn,Hr),At+=mi,++br}var _r;const mr=At,{horizontalAlign:er,verticalAlign:Vr}=rw(tt);(function(ar,wr,Hr,fn,an,dn){const yn=(wr-Hr)*an,In=-dn*fn;for(const mi of ar)for(const Gr of mi.positionedGlyphs)Gr.x+=yn,Gr.y+=In})(_e.positionedLines,Et,er,Vr,Bt,mr),_e.top+=-Vr*mr,_e.bottom=_e.top+mr,_e.left+=-er*Bt,_e.right=_e.left+Bt,_e.hasBaseline=Qt}(be,n,s,h,re,_,b,E,B,M,F,H),!function(_e){for(const Fe of _e)if(Fe.positionedGlyphs.length!==0)return!1;return!0}(ge)&&be}const sv={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},JN={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function cP(a,n,s,h,d,g){if(n.imageName){const _=h[n.imageName];return _?_.displaySize[0]*n.scale*Oi/g+d:0}{const _=s[n.fontStack],b=_&&_.glyphs[a];return b?b.metrics.advance*n.scale+d:0}}function uP(a,n,s,h){const d=Math.pow(a-n,2);return h?a<n?d/2:2*d:d+Math.abs(s)*s}function QN(a,n,s){let h=0;return a===10&&(h-=1e4),s&&(h+=150),a!==40&&a!==65288||(h+=50),n!==41&&n!==65289||(h+=50),h}function hP(a,n,s,h,d,g){let _=null,b=uP(n,s,d,g);for(const E of h){const M=uP(n-E.x,s,d,g)+E.badness;M<=b&&(_=E,b=M)}return{index:a,x:n,priorBreak:_,badness:b}}function fP(a){return a?fP(a.priorBreak).concat(a.index):[]}function rw(a){let n=.5,s=.5;switch(a){case"right":case"top-right":case"bottom-right":n=1;break;case"left":case"top-left":case"bottom-left":n=0}switch(a){case"bottom":case"bottom-right":case"bottom-left":s=1;break;case"top":case"top-right":case"top-left":s=0}return{horizontalAlign:n,verticalAlign:s}}function dP(a,n,s,h,d){if(!(n||s||h||d))return;const g=a.length-1,_=a[g],b=(_.x+_.metrics.advance*_.scale)*n;for(let E=0;E<=g;E++)a[E].x-=b,a[E].y+=s+h+d}function ej(a,n,s){const{horizontalAlign:h,verticalAlign:d}=rw(s),g=n[0]-a.displaySize[0]*h,_=n[1]-a.displaySize[1]*d;return{image:a,top:_,bottom:_+a.displaySize[1],left:g,right:g+a.displaySize[0]}}function pP(a,n,s,h,d,g){const _=a.image;let b;if(_.content){const re=_.content,ue=_.pixelRatio||1;b=[re[0]/ue,re[1]/ue,_.displaySize[0]-re[2]/ue,_.displaySize[1]-re[3]/ue]}const E=n.left*g,M=n.right*g;let O,B,F,q;s==="width"||s==="both"?(q=d[0]+E-h[3],B=d[0]+M+h[1]):(q=d[0]+(E+M-_.displaySize[0])/2,B=q+_.displaySize[0]);const H=n.top*g,K=n.bottom*g;return s==="height"||s==="both"?(O=d[1]+H-h[0],F=d[1]+K+h[2]):(O=d[1]+(H+K-_.displaySize[1])/2,F=O+_.displaySize[1]),{image:_,top:O,right:B,bottom:F,left:q,collisionPadding:b}}class al extends W{constructor(n,s,h,d,g){super(n,s),this.angle=d,this.z=h,g!==void 0&&(this.segment=g)}clone(){return new al(this.x,this.y,this.z,this.angle,this.segment)}}function mP(a,n,s,h,d){if(n.segment===void 0)return!0;let g=n,_=n.segment+1,b=0;for(;b>-s/2;){if(_--,_<0)return!1;b-=a[_].dist(g),g=a[_]}b+=a[_].dist(a[_+1]),_++;const E=[];let M=0;for(;b<s/2;){const O=a[_],B=a[_+1];if(!B)return!1;let F=a[_-1].angleTo(O)-O.angleTo(B);for(F=Math.abs((F+3*Math.PI)%(2*Math.PI)-Math.PI),E.push({distance:b,angleDelta:F}),M+=F;b-E[0].distance>h;)M-=E.shift().angleDelta;if(M>d)return!1;_++,b+=O.dist(B)}return!0}function gP(a){let n=0;for(let s=0;s<a.length-1;s++)n+=a[s].dist(a[s+1]);return n}function yP(a,n,s){return a?.6*n*s:0}function _P(a,n){return Math.max(a?a.right-a.left:0,n?n.right-n.left:0)}function tj(a,n,s,h,d,g){const _=yP(s,d,g),b=_P(s,h)*g;let E=0;const M=gP(a)/2;for(let O=0;O<a.length-1;O++){const B=a[O],F=a[O+1],q=B.dist(F);if(E+q>M){const H=(M-E)/q,K=Pr(B.x,F.x,H),re=Pr(B.y,F.y,H),ue=new al(K,re,0,F.angleTo(B),O);return!_||mP(a,ue,b,_,n)?ue:void 0}E+=q}}function rj(a,n,s,h,d,g,_,b,E){const M=yP(h,g,_),O=_P(h,d),B=O*_,F=a[0].x===0||a[0].x===E||a[0].y===0||a[0].y===E;return n-B<n/4&&(n=B+n/4),vP(a,F?n/2*b%n:(O/2+2*g)*_*b%n,n,M,s,B,F,!1,E)}function vP(a,n,s,h,d,g,_,b,E){const M=g/2,O=gP(a);let B=0,F=n-s,q=[];for(let H=0;H<a.length-1;H++){const K=a[H],re=a[H+1],ue=K.dist(re),ye=re.angleTo(K);for(;F+s<B+ue;){F+=s;const le=(F-B)/ue,ge=Pr(K.x,re.x,le),be=Pr(K.y,re.y,le);if(ge>=0&&ge<E&&be>=0&&be<E&&F-M>=0&&F+M<=O){const _e=new al(ge,be,0,ye,H);_e._round(),h&&!mP(a,_e,g,h,d)||q.push(_e)}}B+=ue}return b||q.length||_||(q=vP(a,B/2,s,h,d,g,_,!0,E)),q}function xP(a,n,s,h,d){const g=[];for(let _=0;_<a.length;_++){const b=a[_];let E;for(let M=0;M<b.length-1;M++){let O=b[M],B=b[M+1];O.x<n&&B.x<n||(O.x<n?O=new W(n,O.y+(n-O.x)/(B.x-O.x)*(B.y-O.y))._round():B.x<n&&(B=new W(n,O.y+(n-O.x)/(B.x-O.x)*(B.y-O.y))._round()),O.y<s&&B.y<s||(O.y<s?O=new W(O.x+(s-O.y)/(B.y-O.y)*(B.x-O.x),s)._round():B.y<s&&(B=new W(O.x+(s-O.y)/(B.y-O.y)*(B.x-O.x),s)._round()),O.x>=h&&B.x>=h||(O.x>=h?O=new W(h,O.y+(h-O.x)/(B.x-O.x)*(B.y-O.y))._round():B.x>=h&&(B=new W(h,O.y+(h-O.x)/(B.x-O.x)*(B.y-O.y))._round()),O.y>=d&&B.y>=d||(O.y>=d?O=new W(O.x+(d-O.y)/(B.y-O.y)*(B.x-O.x),d)._round():B.y>=d&&(B=new W(O.x+(d-O.y)/(B.y-O.y)*(B.x-O.x),d)._round()),E&&O.equals(E[E.length-1])||(E=[O],g.push(E)),E.push(B)))))}}return g}Dt(al,"Anchor");const fm=1e20;function bP(a,n,s,h,d,g,_,b,E){for(let M=n;M<n+h;M++)wP(a,s*g+M,g,d,_,b,E);for(let M=s;M<s+d;M++)wP(a,M*g+n,1,h,_,b,E)}function wP(a,n,s,h,d,g,_){g[0]=0,_[0]=-fm,_[1]=fm,d[0]=a[n];for(let b=1,E=0,M=0;b<h;b++){d[b]=a[n+b*s];const O=b*b;do{const B=g[E];M=(d[b]-d[B]+O-B*B)/(b-B)/2}while(M<=_[E]&&--E>-1);E++,g[E]=b,_[E]=M,_[E+1]=fm}for(let b=0,E=0;b<h;b++){for(;_[E+1]<b;)E++;const M=g[E],O=b-M;a[n+b*s]=d[M]+O*O}}const nw={none:0,ideographs:1,all:2};class df{constructor(n,s,h){this.requestManager=n,this.localGlyphMode=s,this.localFontFamily=h,this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(n){this.url=n}getGlyphs(n,s){const h=[];for(const d in n)for(const g of n[d])h.push({stack:d,id:g});He(h,({stack:d,id:g},_)=>{let b=this.entries[d];b||(b=this.entries[d]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let E=b.glyphs[g];if(E!==void 0)return void _(null,{stack:d,id:g,glyph:E});if(E=this._tinySDF(b,d,g),E)return b.glyphs[g]=E,void _(null,{stack:d,id:g,glyph:E});const M=Math.floor(g/256);if(256*M>65535)return void _(new Error("glyphs > 65535 not supported"));if(b.ranges[M])return void _(null,{stack:d,id:g,glyph:E});let O=b.requests[M];O||(O=b.requests[M]=[],df.loadGlyphRange(d,M,this.url,this.requestManager,(B,F)=>{if(F){b.ascender=F.ascender,b.descender=F.descender;for(const q in F.glyphs)this._doesCharSupportLocalGlyph(+q)||(b.glyphs[+q]=F.glyphs[+q]);b.ranges[M]=!0}for(const q of O)q(B,F);delete b.requests[M]})),O.push((B,F)=>{B?_(B):F&&_(null,{stack:d,id:g,glyph:F.glyphs[g]||null})})},(d,g)=>{if(d)s(d);else if(g){const _={};for(const{stack:b,id:E,glyph:M}of g)_[b]===void 0&&(_[b]={}),_[b].glyphs===void 0&&(_[b].glyphs={}),_[b].glyphs[E]=M&&{id:M.id,bitmap:M.bitmap.clone(),metrics:M.metrics},_[b].ascender=this.entries[b].ascender,_[b].descender=this.entries[b].descender;s(null,_)}})}_doesCharSupportLocalGlyph(n){return this.localGlyphMode!==nw.none&&(this.localGlyphMode===nw.all?!!this.localFontFamily:!!this.localFontFamily&&(jp(n)||L_(n)||Zh(n)||tc(n)||Eu(n)))}_tinySDF(n,s,h){const d=this.localFontFamily;if(!d||!this._doesCharSupportLocalGlyph(h))return;let g=n.tinySDF;if(!g){let K="400";/bold/i.test(s)?K="900":/medium/i.test(s)?K="500":/light/i.test(s)&&(K="200"),g=n.tinySDF=new df.TinySDF({fontFamily:d,fontWeight:K,fontSize:48,buffer:6,radius:16}),g.fontWeight=K}if(this.localGlyphs[g.fontWeight][h])return this.localGlyphs[g.fontWeight][h];const _=String.fromCharCode(h),{data:b,width:E,height:M,glyphWidth:O,glyphHeight:B,glyphLeft:F,glyphTop:q,glyphAdvance:H}=g.draw(_);return this.localGlyphs[g.fontWeight][h]={id:h,bitmap:new il({width:E,height:M},b),metrics:{width:O/2,height:B/2,left:F/2,top:q/2-27,advance:H/2,localGlyph:!0}}}}function SP(a,n,s,h){const d=[],g=a.image,_=g.pixelRatio,b=g.paddedRect.w-2,E=g.paddedRect.h-2,M=a.right-a.left,O=a.bottom-a.top,B=g.stretchX||[[0,b]],F=g.stretchY||[[0,E]],q=(Ve,tt)=>Ve+tt[1]-tt[0],H=B.reduce(q,0),K=F.reduce(q,0),re=b-H,ue=E-K;let ye=0,le=H,ge=0,be=K,_e=0,Fe=re,Re=0,Ye=ue;if(g.content&&h){const Ve=g.content;ye=lv(B,0,Ve[0]),ge=lv(F,0,Ve[1]),le=lv(B,Ve[0],Ve[2]),be=lv(F,Ve[1],Ve[3]),_e=Ve[0]-ye,Re=Ve[1]-ge,Fe=Ve[2]-Ve[0]-le,Ye=Ve[3]-Ve[1]-be}const dt=(Ve,tt,it,lt)=>{const pt=cv(Ve.stretch-ye,le,M,a.left),Ge=uv(Ve.fixed-_e,Fe,Ve.stretch,H),St=cv(tt.stretch-ge,be,O,a.top),Yt=uv(tt.fixed-Re,Ye,tt.stretch,K),At=cv(it.stretch-ye,le,M,a.left),Bt=uv(it.fixed-_e,Fe,it.stretch,H),Et=cv(lt.stretch-ge,be,O,a.top),Qt=uv(lt.fixed-Re,Ye,lt.stretch,K),br=new W(pt,St),_r=new W(At,St),mr=new W(At,Et),er=new W(pt,Et),Vr=new W(Ge/_,Yt/_),ar=new W(Bt/_,Qt/_),wr=n*Math.PI/180;if(wr){const an=Math.sin(wr),dn=Math.cos(wr),yn=[dn,-an,an,dn];br._matMult(yn),_r._matMult(yn),er._matMult(yn),mr._matMult(yn)}const Hr=Ve.stretch+Ve.fixed,fn=tt.stretch+tt.fixed;return{tl:br,tr:_r,bl:er,br:mr,tex:{x:g.paddedRect.x+1+Hr,y:g.paddedRect.y+1+fn,w:it.stretch+it.fixed-Hr,h:lt.stretch+lt.fixed-fn},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Vr,pixelOffsetBR:ar,minFontScaleX:Fe/_/M,minFontScaleY:Ye/_/O,isSDF:s}};if(h&&(g.stretchX||g.stretchY)){const Ve=EP(B,re,H),tt=EP(F,ue,K);for(let it=0;it<Ve.length-1;it++){const lt=Ve[it],pt=Ve[it+1];for(let Ge=0;Ge<tt.length-1;Ge++)d.push(dt(lt,tt[Ge],pt,tt[Ge+1]))}}else d.push(dt({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:b+1},{fixed:0,stretch:E+1}));return d}function lv(a,n,s){let h=0;for(const d of a)h+=Math.max(n,Math.min(s,d[1]))-Math.max(n,Math.min(s,d[0]));return h}function EP(a,n,s){const h=[{fixed:-1,stretch:0}];for(const[d,g]of a){const _=h[h.length-1];h.push({fixed:d-_.stretch,stretch:_.stretch}),h.push({fixed:d-_.stretch,stretch:_.stretch+(g-d)})}return h.push({fixed:n+1,stretch:s}),h}function cv(a,n,s,h){return a/n*s+h}function uv(a,n,s,h){return a-n*s/h}function nj(a,n,s,h){const d=n+a.positionedLines[h].lineOffset;return h===0?s+d/2:s+(d+(n+a.positionedLines[h-1].lineOffset))/2}df.loadGlyphRange=function(a,n,s,h,d){const g=256*n,_=g+255,b=h.transformRequest(h.normalizeGlyphsURL(s).replace("{fontstack}",a).replace("{range}",`${g}-${_}`),Je.Glyphs);jt(b,(E,M)=>{if(E)d(E);else if(M){const O={},B=function(F){return new um(F).readFields(XN,{})}(M);for(const F of B.glyphs)O[F.id]=F;d(null,{glyphs:O,ascender:B.ascender,descender:B.descender})}})},df.TinySDF=class{constructor({fontSize:a=24,buffer:n=3,radius:s=8,cutoff:h=.25,fontFamily:d="sans-serif",fontWeight:g="normal",fontStyle:_="normal"}={}){this.buffer=n,this.cutoff=h,this.radius=s;const b=this.size=a+4*n,E=this._createCanvas(b),M=this.ctx=E.getContext("2d",{willReadFrequently:!0});M.font=`${_} ${g} ${a}px ${d}`,M.textBaseline="alphabetic",M.textAlign="left",M.fillStyle="black",this.gridOuter=new Float64Array(b*b),this.gridInner=new Float64Array(b*b),this.f=new Float64Array(b),this.z=new Float64Array(b+1),this.v=new Uint16Array(b)}_createCanvas(a){const n=document.createElement("canvas");return n.width=n.height=a,n}draw(a){const{width:n,actualBoundingBoxAscent:s,actualBoundingBoxDescent:h,actualBoundingBoxLeft:d,actualBoundingBoxRight:g}=this.ctx.measureText(a),_=Math.ceil(s),b=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(g-d))),E=Math.min(this.size-this.buffer,_+Math.ceil(h)),M=b+2*this.buffer,O=E+2*this.buffer,B=Math.max(M*O,0),F=new Uint8ClampedArray(B),q={data:F,width:M,height:O,glyphWidth:b,glyphHeight:E,glyphTop:_,glyphLeft:0,glyphAdvance:n};if(b===0||E===0)return q;const{ctx:H,buffer:K,gridInner:re,gridOuter:ue}=this;H.clearRect(K,K,b,E),H.fillText(a,K,K+_);const ye=H.getImageData(K,K,b,E);ue.fill(fm,0,B),re.fill(0,0,B);for(let le=0;le<E;le++)for(let ge=0;ge<b;ge++){const be=ye.data[4*(le*b+ge)+3]/255;if(be===0)continue;const _e=(le+K)*M+ge+K;if(be===1)ue[_e]=0,re[_e]=fm;else{const Fe=.5-be;ue[_e]=Fe>0?Fe*Fe:0,re[_e]=Fe<0?Fe*Fe:0}}bP(ue,0,0,M,O,M,this.f,this.v,this.z),bP(re,K,K,b,E,M,this.f,this.v,this.z);for(let le=0;le<B;le++){const ge=Math.sqrt(ue[le])-Math.sqrt(re[le]);F[le]=Math.round(255-255*(ge/this.radius+this.cutoff))}return q}};class ij{constructor(n=[],s=oj){if(this.data=n,this.length=this.data.length,this.compare=s,this.length>0)for(let h=(this.length>>1)-1;h>=0;h--)this._down(h)}push(n){this.data.push(n),this.length++,this._up(this.length-1)}pop(){if(this.length===0)return;const n=this.data[0],s=this.data.pop();return this.length--,this.length>0&&(this.data[0]=s,this._down(0)),n}peek(){return this.data[0]}_up(n){const{data:s,compare:h}=this,d=s[n];for(;n>0;){const g=n-1>>1,_=s[g];if(h(d,_)>=0)break;s[n]=_,n=g}s[n]=d}_down(n){const{data:s,compare:h}=this,d=this.length>>1,g=s[n];for(;n<d;){let _=1+(n<<1),b=s[_];const E=_+1;if(E<this.length&&h(s[E],b)<0&&(_=E,b=s[E]),h(b,g)>=0)break;s[n]=b,n=_}s[n]=g}}function oj(a,n){return a<n?-1:a>n?1:0}function aj(a,n=1,s=!1){let h=1/0,d=1/0,g=-1/0,_=-1/0;const b=a[0];for(let q=0;q<b.length;q++){const H=b[q];(!q||H.x<h)&&(h=H.x),(!q||H.y<d)&&(d=H.y),(!q||H.x>g)&&(g=H.x),(!q||H.y>_)&&(_=H.y)}const E=Math.min(g-h,_-d);let M=E/2;const O=new ij([],sj);if(E===0)return new W(h,d);for(let q=h;q<g;q+=E)for(let H=d;H<_;H+=E)O.push(new pf(q+M,H+M,M,a));let B=function(q){let H=0,K=0,re=0;const ue=q[0];for(let ye=0,le=ue.length,ge=le-1;ye<le;ge=ye++){const be=ue[ye],_e=ue[ge],Fe=be.x*_e.y-_e.x*be.y;K+=(be.x+_e.x)*Fe,re+=(be.y+_e.y)*Fe,H+=3*Fe}return new pf(K/H,re/H,0,q)}(a),F=O.length;for(;O.length;){const q=O.pop();(q.d>B.d||!B.d)&&(B=q,s&&console.log("found best %d after %d probes",Math.round(1e4*q.d)/1e4,F)),q.max-B.d<=n||(M=q.h/2,O.push(new pf(q.p.x-M,q.p.y-M,M,a)),O.push(new pf(q.p.x+M,q.p.y-M,M,a)),O.push(new pf(q.p.x-M,q.p.y+M,M,a)),O.push(new pf(q.p.x+M,q.p.y+M,M,a)),F+=4)}return s&&(console.log(`num probes: ${F}`),console.log(`best distance: ${B.d}`)),B.p}function sj(a,n){return n.max-a.max}class pf{constructor(n,s,h,d){this.p=new W(n,s),this.h=h,this.d=function(g,_){let b=!1,E=1/0;for(let M=0;M<_.length;M++){const O=_[M];for(let B=0,F=O.length,q=F-1;B<F;q=B++){const H=O[B],K=O[q];H.y>g.y!=K.y>g.y&&g.x<(K.x-H.x)*(g.y-H.y)/(K.y-H.y)+H.x&&(b=!b),E=Math.min(E,wC(g,H,K))}}return(b?1:-1)*Math.sqrt(E)}(this.p,d),this.max=this.d+this.h*Math.SQRT2}}const iw=Number.POSITIVE_INFINITY,lj=Math.sqrt(2);function TP(a,[n,s]){let h=0,d=0;if(s===iw){n<0&&(n=0);const g=n/lj;switch(a){case"top-right":case"top-left":d=g-7;break;case"bottom-right":case"bottom-left":d=7-g;break;case"bottom":d=7-n;break;case"top":d=n-7}switch(a){case"top-right":case"bottom-right":h=-g;break;case"top-left":case"bottom-left":h=g;break;case"left":h=n;break;case"right":h=-n}}else{switch(n=Math.abs(n),s=Math.abs(s),a){case"top-right":case"top-left":case"top":d=s-7;break;case"bottom-right":case"bottom-left":case"bottom":d=7-s}switch(a){case"top-right":case"bottom-right":case"right":h=-n;break;case"top-left":case"bottom-left":case"left":h=n}}return[h,d]}function cj(a,n,s,h,d,g,_,b,E,M){a.createArrays(),a.tilePixelRatio=rr/(512*a.overscaling),a.compareText={},a.iconsNeedLinear=!1;const O=a.layers[0].layout,B=a.layers[0]._unevaluatedLayout._values,F={};if(a.textSizeData.kind==="composite"){const{minZoom:K,maxZoom:re}=a.textSizeData;F.compositeTextSizes=[B["text-size"].possiblyEvaluate(new ke(K),b),B["text-size"].possiblyEvaluate(new ke(re),b)]}if(a.iconSizeData.kind==="composite"){const{minZoom:K,maxZoom:re}=a.iconSizeData;F.compositeIconSizes=[B["icon-size"].possiblyEvaluate(new ke(K),b),B["icon-size"].possiblyEvaluate(new ke(re),b)]}F.layoutTextSize=B["text-size"].possiblyEvaluate(new ke(E+1),b),F.layoutIconSize=B["icon-size"].possiblyEvaluate(new ke(E+1),b),F.textMaxSize=B["text-size"].possiblyEvaluate(new ke(18),b);const q=O.get("text-rotation-alignment")==="map"&&O.get("symbol-placement")!=="point",H=O.get("text-size");for(const K of a.features){const re=O.get("text-font").evaluate(K,{},b).join(","),ue=H.evaluate(K,{},b),ye=F.layoutTextSize.evaluate(K,{},b),le=(F.layoutIconSize.evaluate(K,{},b),{horizontal:{},vertical:void 0}),ge=K.text;let be,_e=[0,0];if(ge){const Ye=ge.toString(),dt=O.get("text-letter-spacing").evaluate(K,{},b)*Oi,Ve=O.get("text-line-height").evaluate(K,{},b)*Oi,tt=S(Ye)?dt:0,it=O.get("text-anchor").evaluate(K,{},b),lt=O.get("text-variable-anchor");if(!lt){const At=O.get("text-radial-offset").evaluate(K,{},b);_e=At?TP(it,[At*Oi,iw]):O.get("text-offset").evaluate(K,{},b).map(Bt=>Bt*Oi)}let pt=q?"center":O.get("text-justify").evaluate(K,{},b);const Ge=O.get("symbol-placement")==="point",St=Ge?O.get("text-max-width").evaluate(K,{},b)*Oi:1/0,Yt=At=>{a.allowVerticalPlacement&&x(Ye)&&(le.vertical=tw(ge,n,s,d,re,St,Ve,it,At,tt,_e,Ho.vertical,!0,ye,ue))};if(!q&&lt){const At=pt==="auto"?lt.map(Et=>ow(Et)):[pt];let Bt=!1;for(let Et=0;Et<At.length;Et++){const Qt=At[Et];if(!le.horizontal[Qt])if(Bt)le.horizontal[Qt]=le.horizontal[0];else{const br=tw(ge,n,s,d,re,St,Ve,"center",Qt,tt,_e,Ho.horizontal,!1,ye,ue);br&&(le.horizontal[Qt]=br,Bt=br.positionedLines.length===1)}}Yt("left")}else{if(pt==="auto"&&(pt=ow(it)),Ge||O.get("text-writing-mode").indexOf("horizontal")>=0||!x(Ye)){const At=tw(ge,n,s,d,re,St,Ve,it,pt,tt,_e,Ho.horizontal,!1,ye,ue);At&&(le.horizontal[pt]=At)}Yt(Ge?"left":pt)}}let Fe=!1;if(K.icon&&K.icon.name){const Ye=h[K.icon.name];Ye&&(be=ej(d[K.icon.name],O.get("icon-offset").evaluate(K,{},b),O.get("icon-anchor").evaluate(K,{},b)),Fe=Ye.sdf,a.sdfIcons===void 0?a.sdfIcons=Ye.sdf:a.sdfIcons!==Ye.sdf&&Qe("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Ye.pixelRatio!==a.pixelRatio||O.get("icon-rotate").constantOr(1)!==0)&&(a.iconsNeedLinear=!0))}const Re=MP(le.horizontal)||le.vertical;a.iconsInText||(a.iconsInText=!!Re&&Re.iconsInText),(Re||be)&&uj(a,K,le,be,h,F,ye,0,_e,Fe,_,b,M)}g&&a.generateCollisionDebugBuffers(E,a.collisionBoxArray)}function ow(a){switch(a){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function uj(a,n,s,h,d,g,_,b,E,M,O,B,F){let q=g.textMaxSize.evaluate(n,{},B);q===void 0&&(q=_);const H=a.layers[0].layout,K=H.get("icon-offset").evaluate(n,{},B),re=MP(s.horizontal)||s.vertical,ue=F.name==="globe",ye=_/24,le=a.tilePixelRatio*q/24,ge=(tt=a.overscaling,a.zoom>18&&tt>2&&(tt>>=1),Math.max(rr/(512*tt),1)*H.get("symbol-spacing")),be=H.get("text-padding")*a.tilePixelRatio,_e=H.get("icon-padding")*a.tilePixelRatio,Fe=xe(H.get("text-max-angle")),Re=H.get("text-rotation-alignment")==="map"&&H.get("symbol-placement")!=="point",Ye=H.get("icon-rotation-alignment")==="map"&&H.get("symbol-placement")!=="point",dt=H.get("symbol-placement"),Ve=ge/2;var tt;const it=H.get("icon-text-fit");let lt;h&&it!=="none"&&(a.allowVerticalPlacement&&s.vertical&&(lt=pP(h,s.vertical,it,H.get("icon-text-fit-padding"),K,ye)),re&&(h=pP(h,re,it,H.get("icon-text-fit-padding"),K,ye)));const pt=(Ge,St,Yt)=>{if(St.x<0||St.x>=rr||St.y<0||St.y>=rr)return;let At=null;if(ue){const{x:Bt,y:Et,z:Qt}=F.projectTilePoint(St.x,St.y,Yt);At={anchor:new al(Bt,Et,Qt,0,void 0),up:F.upVector(Yt,St.x,St.y)}}(function(Bt,Et,Qt,br,_r,mr,er,Vr,ar,wr,Hr,fn,an,dn,yn,In,mi,Gr,Jn,Wn,Dr,Sn,ri,Zr,$n){const Ui=Bt.addToLineVertexArray(Et,br);let gi,yi,oo,_i,sl,yf,vm,xm=0,rI=0,nI=0,iI=0,yw=-1,_w=-1;const Ts={};let oI=Au("");const $u=Qt?Qt.anchor:Et;let vw=0,xw=0;if(ar._unevaluatedLayout.getValue("text-radial-offset")===void 0?[vw,xw]=ar.layout.get("text-offset").evaluate(Dr,{},$n).map(ko=>ko*Oi):(vw=ar.layout.get("text-radial-offset").evaluate(Dr,{},$n)*Oi,xw=iw),Bt.allowVerticalPlacement&&_r.vertical){const ko=_r.vertical;if(yn)yf=aw(ko),Vr&&(vm=aw(Vr));else{const Oo=ar.layout.get("text-rotate").evaluate(Dr,{},$n)+90;oo=hv(wr,$u,Et,Hr,fn,an,ko,dn,Oo,In),Vr&&(_i=hv(wr,$u,Et,Hr,fn,an,Vr,Gr,Oo))}}if(mr){const ko=ar.layout.get("icon-rotate").evaluate(Dr,{},$n),Oo=ar.layout.get("icon-text-fit")!=="none",bm=SP(mr,ko,ri,Oo),ww=Vr?SP(Vr,ko,ri,Oo):void 0;yi=hv(wr,$u,Et,Hr,fn,an,mr,Gr,ko),xm=4*bm.length;const aI=Bt.iconSizeData;let Fu=null;aI.kind==="source"?(Fu=[bs*ar.layout.get("icon-size").evaluate(Dr,{},$n)],Fu[0]>sc&&Qe(`${Bt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):aI.kind==="composite"&&(Fu=[bs*Sn.compositeIconSizes[0].evaluate(Dr,{},$n),bs*Sn.compositeIconSizes[1].evaluate(Dr,{},$n)],(Fu[0]>sc||Fu[1]>sc)&&Qe(`${Bt.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),Bt.addSymbols(Bt.icon,bm,Fu,Wn,Jn,Dr,!1,Qt,Et,Ui.lineStartIndex,Ui.lineLength,-1,Zr,$n),yw=Bt.icon.placedSymbolArray.length-1,ww&&(rI=4*ww.length,Bt.addSymbols(Bt.icon,ww,Fu,Wn,Jn,Dr,Ho.vertical,Qt,Et,Ui.lineStartIndex,Ui.lineLength,-1,Zr,$n),_w=Bt.icon.placedSymbolArray.length-1)}for(const ko in _r.horizontal){const Oo=_r.horizontal[ko];gi||(oI=Au(Oo.text),yn?sl=aw(Oo):gi=hv(wr,$u,Et,Hr,fn,an,Oo,dn,ar.layout.get("text-rotate").evaluate(Dr,{},$n),In));const bm=Oo.positionedLines.length===1;if(nI+=AP(Bt,Qt,Et,Oo,er,ar,yn,Dr,In,Ui,_r.vertical?Ho.horizontal:Ho.horizontalOnly,bm?Object.keys(_r.horizontal):[ko],Ts,yw,Sn,Zr,$n),bm)break}_r.vertical&&(iI+=AP(Bt,Qt,Et,_r.vertical,er,ar,yn,Dr,In,Ui,Ho.vertical,["vertical"],Ts,_w,Sn,Zr,$n));let dc=-1;const bw=(ko,Oo)=>ko?Math.max(ko,Oo):Oo;dc=bw(sl,dc),dc=bw(yf,dc),dc=bw(vm,dc);const $j=dc>-1?1:0;Bt.glyphOffsetArray.length>=cc.MAX_GLYPHS&&Qe("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Dr.sortKey!==void 0&&Bt.addToSortKeyRanges(Bt.symbolInstances.length,Dr.sortKey),Bt.symbolInstances.emplaceBack($u.x,$u.y,$u.z,Et.x,Et.y,Ts.right>=0?Ts.right:-1,Ts.center>=0?Ts.center:-1,Ts.left>=0?Ts.left:-1,Ts.vertical>=0?Ts.vertical:-1,yw,_w,oI,gi!==void 0?gi:Bt.collisionBoxArray.length,gi!==void 0?gi+1:Bt.collisionBoxArray.length,oo!==void 0?oo:Bt.collisionBoxArray.length,oo!==void 0?oo+1:Bt.collisionBoxArray.length,yi!==void 0?yi:Bt.collisionBoxArray.length,yi!==void 0?yi+1:Bt.collisionBoxArray.length,_i||Bt.collisionBoxArray.length,_i?_i+1:Bt.collisionBoxArray.length,Hr,nI,iI,xm,rI,$j,0,vw,xw,dc)})(a,St,At,Ge,s,h,d,lt,a.layers[0],a.collisionBoxArray,n.index,n.sourceLayerIndex,a.index,be,Re,E,0,_e,Ye,K,n,g,M,O,B)};if(dt==="line")for(const Ge of xP(n.geometry,0,0,rr,rr)){const St=rj(Ge,ge,Fe,s.vertical||re,h,24,le,a.overscaling,rr);for(const Yt of St){const At=re;At&&hj(a,At.text,Ve,Yt)||pt(Ge,Yt,B)}}else if(dt==="line-center"){for(const Ge of n.geometry)if(Ge.length>1){const St=tj(Ge,Fe,s.vertical||re,h,24,le);St&&pt(Ge,St,B)}}else if(n.type==="Polygon")for(const Ge of Hb(n.geometry,0)){const St=aj(Ge,16);pt(Ge[0],new al(St.x,St.y,0,0,void 0),B)}else if(n.type==="LineString")for(const Ge of n.geometry)pt(Ge,new al(Ge[0].x,Ge[0].y,0,0,void 0),B);else if(n.type==="Point")for(const Ge of n.geometry)for(const St of Ge)pt([St],new al(St.x,St.y,0,0,void 0),B)}const sc=32640;function AP(a,n,s,h,d,g,_,b,E,M,O,B,F,q,H,K,re){const ue=function(ge,be,_e,Fe,Re,Ye,dt,Ve){const tt=[];if(be.positionedLines.length===0)return tt;const it=Fe.layout.get("text-rotate").evaluate(Ye,{})*Math.PI/180,lt=function(At){const Bt=At[0],Et=At[1],Qt=Bt*Et;return Qt>0?[Bt,-Et]:Qt<0?[-Bt,Et]:Bt===0?[Et,Bt]:[Et,-Bt]}(_e);let pt=Math.abs(be.top-be.bottom);for(const At of be.positionedLines)pt-=At.lineOffset;const Ge=be.positionedLines.length,St=pt/Ge;let Yt=be.top-_e[1];for(let At=0;At<Ge;++At){const Bt=be.positionedLines[At];Yt=nj(be,St,Yt,At);for(const Et of Bt.positionedGlyphs){if(!Et.rect)continue;const Qt=Et.rect||{};let br=4,_r=!0,mr=1,er=0;if(Et.imageName){const Zr=dt[Et.imageName];if(!Zr)continue;if(Zr.sdf){Qe("SDF images are not supported in formatted text and will be ignored.");continue}_r=!1,mr=Zr.pixelRatio,br=1/mr}const Vr=(Re||Ve)&&Et.vertical,ar=Et.metrics.advance*Et.scale/2,wr=Et.metrics,Hr=Et.rect;if(Hr===null)continue;Ve&&be.verticalizable&&(er=Et.imageName?ar-Et.metrics.width*Et.scale/2:0);const fn=Re?[Et.x+ar,Et.y]:[0,0];let an=[0,0],dn=[0,0],yn=!1;Re||(Vr?(dn=[Et.x+ar+lt[0],Et.y+lt[1]-er],yn=!0):an=[Et.x+ar+_e[0],Et.y+_e[1]-er]);const In=Hr.w*Et.scale/(mr*(Et.localGlyph?2:1)),mi=Hr.h*Et.scale/(mr*(Et.localGlyph?2:1));let Gr,Jn,Wn,Dr;if(Vr){const Zr=Et.y-Yt,$n=new W(-ar,ar-Zr),Ui=-Math.PI/2,gi=new W(...dn);Gr=new W(-ar+an[0],an[1]),Gr._rotateAround(Ui,$n)._add(gi),Gr.x+=-Zr+ar,Gr.y-=(wr.left-br)*Et.scale;const yi=Et.imageName?wr.advance*Et.scale:Oi*Et.scale,oo=String.fromCharCode(Et.glyph);$N(oo)?Gr.x+=(1-br)*Et.scale:FN(oo)?Gr.x+=yi-wr.height*Et.scale+(-br-1)*Et.scale:Gr.x+=Et.imageName||wr.width+2*br===Hr.w&&wr.height+2*br===Hr.h?(yi-mi)/2:(yi-(wr.height+2*br)*Et.scale)/2,Jn=new W(Gr.x,Gr.y-In),Wn=new W(Gr.x+mi,Gr.y),Dr=new W(Gr.x+mi,Gr.y-In)}else{const Zr=(wr.left-br)*Et.scale-ar+an[0],$n=(-wr.top-br)*Et.scale+an[1],Ui=Zr+In,gi=$n+mi;Gr=new W(Zr,$n),Jn=new W(Ui,$n),Wn=new W(Zr,gi),Dr=new W(Ui,gi)}if(it){let Zr;Zr=Re?new W(0,0):yn?new W(lt[0],lt[1]):new W(_e[0],_e[1]),Gr._rotateAround(it,Zr),Jn._rotateAround(it,Zr),Wn._rotateAround(it,Zr),Dr._rotateAround(it,Zr)}const Sn=new W(0,0),ri=new W(0,0);tt.push({tl:Gr,tr:Jn,bl:Wn,br:Dr,tex:Qt,writingMode:be.writingMode,glyphOffset:fn,sectionIndex:Et.sectionIndex,isSDF:_r,pixelOffsetTL:Sn,pixelOffsetBR:ri,minFontScaleX:0,minFontScaleY:0})}}return tt}(0,h,E,g,_,b,d,a.allowVerticalPlacement),ye=a.textSizeData;let le=null;ye.kind==="source"?(le=[bs*g.layout.get("text-size").evaluate(b,{},re)],le[0]>sc&&Qe(`${a.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):ye.kind==="composite"&&(le=[bs*H.compositeTextSizes[0].evaluate(b,{},re),bs*H.compositeTextSizes[1].evaluate(b,{},re)],(le[0]>sc||le[1]>sc)&&Qe(`${a.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),a.addSymbols(a.text,ue,le,E,_,b,O,n,s,M.lineStartIndex,M.lineLength,q,K,re);for(const ge of B)F[ge]=a.text.placedSymbolArray.length-1;return 4*ue.length}function MP(a){for(const n in a)return a[n];return null}function hv(a,n,s,h,d,g,_,b,E,M){let O=_.top,B=_.bottom,F=_.left,q=_.right;const H=_.collisionPadding;if(H&&(F-=H[0],O-=H[1],q+=H[2],B+=H[3]),E){const K=new W(F,O),re=new W(q,O),ue=new W(F,B),ye=new W(q,B),le=xe(E);let ge=new W(0,0);M&&(ge=new W(M[0],M[1])),K._rotateAround(le,ge),re._rotateAround(le,ge),ue._rotateAround(le,ge),ye._rotateAround(le,ge),F=Math.min(K.x,re.x,ue.x,ye.x),q=Math.max(K.x,re.x,ue.x,ye.x),O=Math.min(K.y,re.y,ue.y,ye.y),B=Math.max(K.y,re.y,ue.y,ye.y)}return a.emplaceBack(n.x,n.y,n.z,s.x,s.y,F,O,q,B,b,h,d,g),a.length-1}function aw(a){a.collisionPadding&&(a.top-=a.collisionPadding[1],a.bottom+=a.collisionPadding[3]);const n=a.bottom-a.top;return n>0?Math.max(10,n):null}function hj(a,n,s,h){const d=a.compareText;if(n in d){const g=d[n];for(let _=g.length-1;_>=0;_--)if(h.dist(g[_])<s)return!0}else d[n]=[];return d[n].push(h),!1}function CP(a,n){const s=a.fovAboveCenter,h=a.elevation?a.elevation.getMinElevationBelowMSL()*n:0,d=(a._camera.position[2]*a.worldSize-h)/Math.cos(a._pitch),g=Math.sin(s)*d/Math.sin(Math.max(Math.PI/2-a._pitch-s,.01)),_=Math.sin(a._pitch)*g+d;return Math.min(1.01*_,d*(1/a._horizonShift))}function zu(a,n){if(!n.isReprojectedInTileSpace)return{scale:1<<a.z,x:a.x,y:a.y,x2:a.x+1,y2:a.y+1,projection:n};const s=Math.pow(2,-a.z),h=a.x*s,d=(a.x+1)*s,g=a.y*s,_=(a.y+1)*s,b=Wo(h),E=Wo(d),M=Ii(g),O=Ii(_),B=n.project(b,M),F=n.project(E,M),q=n.project(E,O),H=n.project(b,O);let K=Math.min(B.x,F.x,q.x,H.x),re=Math.min(B.y,F.y,q.y,H.y),ue=Math.max(B.x,F.x,q.x,H.x),ye=Math.max(B.y,F.y,q.y,H.y);const le=s/16;function ge(_e,Fe,Re,Ye,dt,Ve){const tt=(Re+dt)/2,it=(Ye+Ve)/2,lt=n.project(Wo(tt),Ii(it)),pt=Math.max(0,K-lt.x,re-lt.y,lt.x-ue,lt.y-ye);K=Math.min(K,lt.x),ue=Math.max(ue,lt.x),re=Math.min(re,lt.y),ye=Math.max(ye,lt.y),pt>le&&(ge(_e,lt,Re,Ye,tt,it),ge(lt,Fe,tt,it,dt,Ve))}ge(B,F,h,g,d,g),ge(F,q,d,g,d,_),ge(q,H,d,_,h,_),ge(H,B,h,_,h,g),K-=le,re-=le,ue+=le,ye+=le;const be=1/Math.max(ue-K,ye-re);return{scale:be,x:K*be,y:re*be,x2:ue*be,y2:ye*be,projection:n}}const fj=Ga(new Float32Array(16));class lc{constructor(n){this.spec=n,this.name=n.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(n,s){return{x:0,y:0,z:0}}unproject(n,s){return new Ir(0,0)}projectTilePoint(n,s,h){return{x:n,y:s,z:0}}locationPoint(n,s,h=!0){return n._coordinatePoint(n.locationCoordinate(s),h)}pixelsPerMeter(n,s){return Wa(1,n)*s}pixelSpaceConversion(n,s,h){return 1}farthestPixelDistance(n){return CP(n,n.pixelsPerMeter)}pointCoordinate(n,s,h,d){const g=n.horizonLineFromTop(!1),_=new W(s,Math.max(g,h));return n.rayIntersectionCoordinate(n.pointRayIntersection(_,d))}pointCoordinate3D(n,s,h){const d=new W(s,h);if(n.elevation)return n.elevation.pointCoordinate(d);{const g=this.pointCoordinate(n,d.x,d.y,0);return[g.x,g.y,g.z]}}isPointAboveHorizon(n,s){if(n.elevation)return!this.pointCoordinate3D(n,s.x,s.y);const h=n.horizonLineFromTop();return s.y<h}createInversionMatrix(n,s){return fj}createTileMatrix(n,s,h){let d,g,_;const b=h.canonical,E=Ga(new Float64Array(16));if(this.isReprojectedInTileSpace){const M=zu(b,this);d=1,g=M.x+h.wrap*M.scale,_=M.y,Pu(E,E,[d/M.scale,d/M.scale,n.pixelsPerMeter/s])}else d=s/n.zoomScale(b.z),g=(b.x+Math.pow(2,b.z)*h.wrap)*d,_=b.y*d;return Vp(E,E,[g,_,0]),Pu(E,E,[d/rr,d/rr,1]),E}upVector(n,s,h){return[0,0,1]}upVectorScale(n,s,h){return{metersToTile:1}}}class dj extends lc{constructor(n){super(n),this.range=[4,7],this.center=n.center||[-96,37.5];const[s,h]=this.parallels=n.parallels||[29.5,45.5],d=Math.sin(xe(s));this.n=(d+Math.sin(xe(h)))/2,this.c=1+d*(2*this.n-d),this.r0=Math.sqrt(this.c)/this.n}project(n,s){const{n:h,c:d,r0:g}=this,_=xe(n-this.center[0]),b=xe(s),E=Math.sqrt(d-2*h*Math.sin(b))/h;return{x:E*Math.sin(_*h),y:E*Math.cos(_*h)-g,z:0}}unproject(n,s){const{n:h,c:d,r0:g}=this,_=g+s;let b=Math.atan2(n,Math.abs(_))*Math.sign(_);_*h<0&&(b-=Math.PI*Math.sign(n)*Math.sign(_));const E=xe(this.center[0])*h;b=kt(b,-Math.PI-E,Math.PI-E);const M=Be(Me(b/h)+this.center[0],-180,180),O=Math.asin(Be((d-(n*n+_*_)*h*h)/(2*h),-1,1)),B=Be(Me(O),-ki,ki);return new Ir(M,B)}}const dm=1.340264,pm=-.081106,mm=893e-6,gm=.003796,fv=Math.sqrt(3)/2;class pj extends lc{project(n,s){s=s/180*Math.PI,n=n/180*Math.PI;const h=Math.asin(fv*Math.sin(s)),d=h*h,g=d*d*d;return{x:.5*(n*Math.cos(h)/(fv*(dm+3*pm*d+g*(7*mm+9*gm*d)))/Math.PI+.5),y:1-.5*(h*(dm+pm*d+g*(mm+gm*d))/Math.PI+1),z:0}}unproject(n,s){n=(2*n-.5)*Math.PI;let h=s=(2*(1-s)-1)*Math.PI,d=h*h,g=d*d*d;for(let O,B,F,q=0;q<12&&(B=h*(dm+pm*d+g*(mm+gm*d))-s,F=dm+3*pm*d+g*(7*mm+9*gm*d),O=B/F,h=Be(h-O,-Math.PI/3,Math.PI/3),d=h*h,g=d*d*d,!(Math.abs(O)<1e-12));++q);const _=fv*n*(dm+3*pm*d+g*(7*mm+9*gm*d))/Math.cos(h),b=Math.asin(Math.sin(h)/fv),E=Be(180*_/Math.PI,-180,180),M=Be(180*b/Math.PI,-ki,ki);return new Ir(E,M)}}class mj extends lc{constructor(n){super(n),this.wrap=!0,this.supportsWorldCopies=!0}project(n,s){return{x:.5+n/360,y:.5-s/360,z:0}}unproject(n,s){const h=360*(n-.5),d=Be(360*(.5-s),-ki,ki);return new Ir(h,d)}}const mf=Math.PI/2;function dv(a){return Math.tan((mf+a)/2)}class gj extends lc{constructor(n){super(n),this.center=n.center||[0,30];const[s,h]=this.parallels=n.parallels||[30,30];let d=xe(s),g=xe(h);this.southernCenter=d+g<0,this.southernCenter&&(d=-d,g=-g);const _=Math.cos(d),b=dv(d);this.n=d===g?Math.sin(d):Math.log(_/Math.cos(g))/Math.log(dv(g)/b),this.f=_*Math.pow(dv(d),this.n)/this.n}project(n,s){s=xe(s),this.southernCenter&&(s=-s),n=xe(n-this.center[0]);const h=1e-6,{n:d,f:g}=this;g>0?s<-mf+h&&(s=-mf+h):s>mf-h&&(s=mf-h);const _=g/Math.pow(dv(s),d);let b=_*Math.sin(d*n),E=g-_*Math.cos(d*n);return b=.5*(b/Math.PI+.5),E=.5*(E/Math.PI+.5),{x:b,y:this.southernCenter?E:1-E,z:0}}unproject(n,s){n=(2*n-.5)*Math.PI,this.southernCenter&&(s=1-s),s=(2*(1-s)-.5)*Math.PI;const{n:h,f:d}=this,g=d-s,_=Math.sign(g),b=Math.sign(h)*Math.sqrt(n*n+g*g);let E=Math.atan2(n,Math.abs(g))*_;g*h<0&&(E-=Math.PI*Math.sign(n)*_);const M=Be(Me(E/h)+this.center[0],-180,180),O=Be(Me(2*Math.atan(Math.pow(d/b,1/h))-mf),-ki,ki);return new Ir(M,this.southernCenter?-O:O)}}class PP extends lc{constructor(n){super(n),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(n,s){return{x:vs(n),y:xs(s),z:0}}unproject(n,s){const h=Wo(n),d=Ii(s);return new Ir(h,d)}}const IP=xe(ki);class yj extends lc{project(n,s){const h=(s=xe(s))*s,d=h*h;return{x:.5*((n=xe(n))*(.8707-.131979*h+d*(d*(.003971*h-.001529*d)-.013791))/Math.PI+.5),y:1-.5*(s*(1.007226+h*(.015085+d*(.028874*h-.044475-.005916*d)))/Math.PI+1),z:0}}unproject(n,s){n=(2*n-.5)*Math.PI;let h=s=(2*(1-s)-1)*Math.PI,d=25,g=0,_=h*h;do{_=h*h;const M=_*_;g=(h*(1.007226+_*(.015085+M*(.028874*_-.044475-.005916*M)))-s)/(1.007226+_*(.045255+M*(.259866*_-.311325-.005916*11*M))),h=Be(h-g,-IP,IP)}while(Math.abs(g)>1e-6&&--d>0);_=h*h;const b=Be(Me(n/(.8707+_*(_*(_*_*_*(.003971-.001529*_)-.013791)-.131979))),-180,180),E=Me(h);return new Ir(b,E)}}const kP=xe(ki);class _j extends lc{project(n,s){s=xe(s),n=xe(n);const h=Math.cos(s),d=2/Math.PI,g=Math.acos(h*Math.cos(n/2)),_=Math.sin(g)/g,b=.5*(n*d+2*h*Math.sin(n/2)/_)||0,E=.5*(s+Math.sin(s)/_)||0;return{x:.5*(b/Math.PI+.5),y:1-.5*(E/Math.PI+1),z:0}}unproject(n,s){let h=n=(2*n-.5)*Math.PI,d=s=(2*(1-s)-1)*Math.PI,g=25;const _=1e-6;let b=0,E=0;do{const M=Math.cos(d),O=Math.sin(d),B=2*O*M,F=O*O,q=M*M,H=Math.cos(h/2),K=Math.sin(h/2),re=2*H*K,ue=K*K,ye=1-q*H*H,le=ye?1/ye:0,ge=ye?Math.acos(M*H)*Math.sqrt(1/ye):0,be=.5*(2*ge*M*K+2*h/Math.PI)-n,_e=.5*(ge*O+d)-s,Fe=.5*le*(q*ue+ge*M*H*F)+1/Math.PI,Re=le*(re*B/4-ge*O*K),Ye=.125*le*(B*K-ge*O*q*re),dt=.5*le*(F*H+ge*ue*M)+.5,Ve=Re*Ye-dt*Fe;b=(_e*Re-be*dt)/Ve,E=(be*Ye-_e*Fe)/Ve,h=Be(h-b,-Math.PI,Math.PI),d=Be(d-E,-kP,kP)}while((Math.abs(b)>_||Math.abs(E)>_)&&--g>0);return new Ir(Me(h),Me(d))}}class OP extends lc{constructor(n){super(n),this.center=n.center||[0,0],this.parallels=n.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(xe(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(n,s){const{scale:h,cosPhi:d}=this;return{x:xe(n)*d*h+.5,y:-Math.sin(xe(s))/d*h+.5,z:0}}unproject(n,s){const{scale:h,cosPhi:d}=this,g=-(s-.5)/h,_=Be(Me((n-.5)/h)/d,-180,180),b=Math.asin(Be(g*d,-1,1)),E=Be(Me(b),-ki,ki);return new Ir(_,E)}}class vj extends PP{constructor(n){super(n),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(n,s,h){const d=Yp(n,s,h);return Bn(d,d,Jp(_s(h))),{x:d[0],y:d[1],z:d[2]}}locationPoint(n,s){const h=ef(s.lat,s.lng),d=ro([],h),g=n.elevation?n.elevation.getAtPointOrZero(n.locationCoordinate(s),n._centerAltitude):n._centerAltitude;Hp(h,h,d,Wa(1,0)*rr*g);const _=Ga(new Float64Array(16));return Cu(_,n.pixelMatrix,n.globeMatrix),Bn(h,h,_),new W(h[0],h[1])}pixelsPerMeter(n,s){return Wa(1,0)*s}pixelSpaceConversion(n,s,h){const d=Wa(1,n)*s,g=Pr(Wa(1,45)*s,d,h);return this.pixelsPerMeter(n,s)/g}createTileMatrix(n,s,h){const d=Db(_s(h.canonical));return Cu(new Float64Array(16),n.globeMatrix,d)}createInversionMatrix(n,s){const{center:h}=n,d=Jp(_s(s));return U_(d,d,xe(h.lng)),Eb(d,d,xe(h.lat)),Pu(d,d,[n._pixelsPerMercatorPixel,n._pixelsPerMercatorPixel,1]),Float32Array.from(d)}pointCoordinate(n,s,h,d){return lC(n,s,h,!0)||new rf(0,0)}pointCoordinate3D(n,s,h){const d=this.pointCoordinate(n,s,h,0);return[d.x,d.y,d.z]}isPointAboveHorizon(n,s){return!lC(n,s.x,s.y,!1)}farthestPixelDistance(n){const s=function(d,g){const _=d.cameraToCenterDistance,b=d._centerAltitude*g,E=d._camera,M=d._camera.forward(),O=rl([],qo([],M,-_),[0,0,b]),B=d.worldSize/(2*Math.PI),F=[0,0,-B],q=d.width/d.height,H=Math.tan(d.fovAboveCenter),K=qo([],E.up(),H),re=qo([],E.right(),H*q),ue=ro([],rl([],rl([],M,K),re)),ye=[];let le;if(new Cb(O,ue).closestPointOnSphere(F,B,ye)){const ge=rl([],ye,F),be=qa([],ge,O);le=Math.cos(d.fovAboveCenter)*Gp(be)}else{const ge=qa([],O,F),be=qa([],F,O);ro(be,be);const _e=Gp(ge)-B;le=Math.sqrt(_e*(_e+2*B));const Fe=Math.acos(le/(B+_e))-Math.acos(fa(M,be));le*=Math.cos(Fe)}return 1.01*le}(n,this.pixelsPerMeter(n.center.lat,n.worldSize)),h=tf(n.zoom);if(h>0){const d=CP(n,Wa(1,n.center.lat)*n.worldSize),g=n.worldSize/(2*Math.PI),_=Math.max(n.width,n.height)/n.worldSize*Math.PI;return Pr(s,d+g*(1-Math.cos(_)),Math.pow(h,10))}return s}upVector(n,s,h){return Yp(s,h,n,1)}upVectorScale(n){return{metersToTile:V_(q_(_s(n)))}}}function DP(a){const n=a.parallels,s=!!n&&Math.abs(n[0]+n[1])<.01;switch(a.name){case"mercator":return new PP(a);case"equirectangular":return new mj(a);case"naturalEarth":return new yj(a);case"equalEarth":return new pj(a);case"winkelTripel":return new _j(a);case"albers":return s?new OP(a):new dj(a);case"lambertConformalConic":return s?new OP(a):new gj(a);case"globe":return new vj(a)}throw new Error(`Invalid projection name: ${a.name}`)}const xj=tv.types,bj=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function pv(a,n,s,h,d,g,_,b,E,M,O,B,F){const q=b?Math.min(sc,Math.round(b[0])):0,H=b?Math.min(sc,Math.round(b[1])):0;a.emplaceBack(n,s,Math.round(32*h),Math.round(32*d),g,_,(q<<1)+(E?1:0),H,16*M,16*O,256*B,256*F)}function mv(a,n,s,h,d,g,_){a.emplaceBack(n,s,h,d,g,_)}function gv(a,n,s,h,d){a.emplaceBack(n,s,h,d),a.emplaceBack(n,s,h,d),a.emplaceBack(n,s,h,d),a.emplaceBack(n,s,h,d)}function wj(a){for(const n of a.sections)if(Z(n.text))return!0;return!1}class sw{constructor(n){this.layoutVertexArray=new Na,this.indexArray=new Pi,this.programConfigurations=n,this.segments=new Gn,this.dynamicLayoutVertexArray=new Jr,this.opacityVertexArray=new Qr,this.placedSymbolArray=new RM,this.globeExtVertexArray=new gn}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(n,s,h,d){this.isEmpty()||(h&&(this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,IN.members),this.indexBuffer=n.createIndexBuffer(this.indexArray,s),this.dynamicLayoutVertexBuffer=n.createVertexBuffer(this.dynamicLayoutVertexArray,ON.members,!0),this.opacityVertexBuffer=n.createVertexBuffer(this.opacityVertexArray,bj,!0),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=n.createVertexBuffer(this.globeExtVertexArray,kN.members,!0)),this.opacityVertexBuffer.itemSize=1),(h||d)&&this.programConfigurations.upload(n))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}}Dt(sw,"SymbolBuffers");class lw{constructor(n,s,h){this.layoutVertexArray=new n,this.layoutAttributes=s,this.indexArray=new h,this.segments=new Gn,this.collisionVertexArray=new hn,this.collisionVertexArrayExt=new Ci}upload(n){this.layoutVertexBuffer=n.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=n.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=n.createVertexBuffer(this.collisionVertexArray,DN.members,!0),this.collisionVertexBufferExt=n.createVertexBuffer(this.collisionVertexArrayExt,RN.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}Dt(lw,"CollisionBuffers");class cc{constructor(n){this.collisionBoxArray=n.collisionBoxArray,this.zoom=n.zoom,this.overscaling=n.overscaling,this.layers=n.layers,this.layerIds=this.layers.map(_=>_.id),this.index=n.index,this.pixelRatio=n.pixelRatio,this.sourceLayerIndex=n.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Ga([]),this.placementViewportMatrix=Ga([]);const s=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Yb(this.zoom,s["text-size"]),this.iconSizeData=Yb(this.zoom,s["icon-size"]);const h=this.layers[0].layout,d=h.get("symbol-sort-key"),g=h.get("symbol-z-order");this.canOverlap=h.get("text-allow-overlap")||h.get("icon-allow-overlap")||h.get("text-ignore-placement")||h.get("icon-ignore-placement"),this.sortFeaturesByKey=g!=="viewport-y"&&d.constantOr(1)!==void 0,this.sortFeaturesByY=(g==="viewport-y"||g==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=h.get("text-writing-mode").map(_=>Ho[_]),this.stateDependentLayerIds=this.layers.filter(_=>_.isStateDependent()).map(_=>_.id),this.sourceID=n.sourceID,this.projection=n.projection}createArrays(){this.text=new sw(new Mu(this.layers,this.zoom,n=>/^text/.test(n))),this.icon=new sw(new Mu(this.layers,this.zoom,n=>/^icon/.test(n))),this.glyphOffsetArray=new BM,this.lineVertexArray=new $M,this.symbolInstances=new zM}calculateGlyphDependencies(n,s,h,d,g){for(let _=0;_<n.length;_++)if(s[n.charCodeAt(_)]=!0,d&&g){const b=cm[n.charAt(_)];b&&(s[b.charCodeAt(0)]=!0)}}populate(n,s,h,d){const g=this.layers[0],_=g.layout,b=this.projection.name==="globe",E=_.get("text-font"),M=_.get("text-field"),O=_.get("icon-image"),B=(M.value.kind!=="constant"||M.value.value instanceof eo&&!M.value.value.isEmpty()||M.value.value.toString().length>0)&&(E.value.kind!=="constant"||E.value.value.length>0),F=O.value.kind!=="constant"||!!O.value.value||Object.keys(O.parameters).length>0,q=_.get("symbol-sort-key");if(this.features=[],!B&&!F)return;const H=s.iconDependencies,K=s.glyphDependencies,re=s.availableImages,ue=new ke(this.zoom);for(const{feature:ye,id:le,index:ge,sourceLayerIndex:be}of n){const _e=g._featureFilter.needGeometry,Fe=Du(ye,_e);if(!g._featureFilter.filter(ue,Fe,h))continue;if(_e||(Fe.geometry=nl(ye,h,d)),b&&ye.type!==1&&h.z<=5){const Ve=Fe.geometry,tt=.98078528056,it=(lt,pt)=>fa(Yp(lt.x,lt.y,h,1),Yp(pt.x,pt.y,h,1))<tt;for(let lt=0;lt<Ve.length;lt++)Ve[lt]=OF(Ve[lt],it)}let Re,Ye;if(B){const Ve=g.getValueAndResolveTokens("text-field",Fe,h,re),tt=eo.factory(Ve);wj(tt)&&(this.hasRTLText=!0),(!this.hasRTLText||we()==="unavailable"||this.hasRTLText&&Ee.isParsed())&&(Re=BN(tt,g,Fe))}if(F){const Ve=g.getValueAndResolveTokens("icon-image",Fe,h,re);Ye=Ve instanceof ji?Ve:ji.fromString(Ve)}if(!Re&&!Ye)continue;const dt=this.sortFeaturesByKey?q.evaluate(Fe,{},h):void 0;if(this.features.push({id:le,text:Re,icon:Ye,index:ge,sourceLayerIndex:be,geometry:Fe.geometry,properties:ye.properties,type:xj[ye.type],sortKey:dt}),Ye&&(H[Ye.name]=!0),Re){const Ve=E.evaluate(Fe,{},h).join(","),tt=_.get("text-rotation-alignment")==="map"&&_.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Ho.vertical)>=0;for(const it of Re.sections)if(it.image)H[it.image.name]=!0;else{const lt=x(Re.toString()),pt=it.fontStack||Ve,Ge=K[pt]=K[pt]||{};this.calculateGlyphDependencies(it.text,Ge,tt,this.allowVerticalPlacement,lt)}}}_.get("symbol-placement")==="line"&&(this.features=function(ye){const le={},ge={},be=[];let _e=0;function Fe(Ve){be.push(ye[Ve]),_e++}function Re(Ve,tt,it){const lt=ge[Ve];return delete ge[Ve],ge[tt]=lt,be[lt].geometry[0].pop(),be[lt].geometry[0]=be[lt].geometry[0].concat(it[0]),lt}function Ye(Ve,tt,it){const lt=le[tt];return delete le[tt],le[Ve]=lt,be[lt].geometry[0].shift(),be[lt].geometry[0]=it[0].concat(be[lt].geometry[0]),lt}function dt(Ve,tt,it){const lt=it?tt[0][tt[0].length-1]:tt[0][0];return`${Ve}:${lt.x}:${lt.y}`}for(let Ve=0;Ve<ye.length;Ve++){const tt=ye[Ve],it=tt.geometry,lt=tt.text?tt.text.toString():null;if(!lt){Fe(Ve);continue}const pt=dt(lt,it),Ge=dt(lt,it,!0);if(pt in ge&&Ge in le&&ge[pt]!==le[Ge]){const St=Ye(pt,Ge,it),Yt=Re(pt,Ge,be[St].geometry);delete le[pt],delete ge[Ge],ge[dt(lt,be[Yt].geometry,!0)]=Yt,be[St].geometry=null}else pt in ge?Re(pt,Ge,it):Ge in le?Ye(pt,Ge,it):(Fe(Ve),le[pt]=_e-1,ge[Ge]=_e-1)}return be.filter(Ve=>Ve.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ye,le)=>ye.sortKey-le.sortKey)}update(n,s,h,d){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(n,s,this.layers,h,d),this.icon.programConfigurations.updatePaintArrays(n,s,this.layers,h,d))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(n){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(n),this.iconCollisionBox.upload(n)),this.text.upload(n,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(n,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=DP(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(n,s){const h=this.lineVertexArray.length;if(n.segment!==void 0)for(const{x:d,y:g}of s)this.lineVertexArray.emplaceBack(d,g);return{lineStartIndex:h,lineLength:this.lineVertexArray.length-h}}addSymbols(n,s,h,d,g,_,b,E,M,O,B,F,q,H){const K=n.indexArray,re=n.layoutVertexArray,ue=n.globeExtVertexArray,ye=n.segments.prepareSegment(4*s.length,re,K,this.canOverlap?_.sortKey:void 0),le=this.glyphOffsetArray.length,ge=ye.vertexLength,be=this.allowVerticalPlacement&&b===Ho.vertical?Math.PI/2:0,_e=_.text&&_.text.sections;for(let Re=0;Re<s.length;Re++){const{tl:Ye,tr:dt,bl:Ve,br:tt,tex:it,pixelOffsetTL:lt,pixelOffsetBR:pt,minFontScaleX:Ge,minFontScaleY:St,glyphOffset:Yt,isSDF:At,sectionIndex:Bt}=s[Re],Et=ye.vertexLength,Qt=Yt[1];if(pv(re,M.x,M.y,Ye.x,Qt+Ye.y,it.x,it.y,h,At,lt.x,lt.y,Ge,St),pv(re,M.x,M.y,dt.x,Qt+dt.y,it.x+it.w,it.y,h,At,pt.x,lt.y,Ge,St),pv(re,M.x,M.y,Ve.x,Qt+Ve.y,it.x,it.y+it.h,h,At,lt.x,pt.y,Ge,St),pv(re,M.x,M.y,tt.x,Qt+tt.y,it.x+it.w,it.y+it.h,h,At,pt.x,pt.y,Ge,St),E){const{x:br,y:_r,z:mr}=E.anchor,[er,Vr,ar]=E.up;mv(ue,br,_r,mr,er,Vr,ar),mv(ue,br,_r,mr,er,Vr,ar),mv(ue,br,_r,mr,er,Vr,ar),mv(ue,br,_r,mr,er,Vr,ar),gv(n.dynamicLayoutVertexArray,br,_r,mr,be)}else gv(n.dynamicLayoutVertexArray,M.x,M.y,M.z,be);K.emplaceBack(Et,Et+1,Et+2),K.emplaceBack(Et+1,Et+2,Et+3),ye.vertexLength+=4,ye.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Yt[0]),Re!==s.length-1&&Bt===s[Re+1].sectionIndex||n.programConfigurations.populatePaintArrays(re.length,_,_.index,{},q,H,_e&&_e[Bt])}const Fe=E?E.anchor:M;n.placedSymbolArray.emplaceBack(Fe.x,Fe.y,Fe.z,M.x,M.y,le,this.glyphOffsetArray.length-le,ge,O,B,M.segment,h?h[0]:0,h?h[1]:0,d[0],d[1],b,0,!1,0,F,0)}_commitLayoutVertex(n,s,h,d,g,_,b){n.emplaceBack(s,h,d,g,_,Math.round(b.x),Math.round(b.y))}_addCollisionDebugVertices(n,s,h,d,g,_,b){const E=h.segments.prepareSegment(4,h.layoutVertexArray,h.indexArray),M=E.vertexLength,O=b.tileAnchorX,B=b.tileAnchorY;for(let q=0;q<4;q++)h.collisionVertexArray.emplaceBack(0,0,0,0);h.collisionVertexArrayExt.emplaceBack(s,-n.padding,-n.padding),h.collisionVertexArrayExt.emplaceBack(s,n.padding,-n.padding),h.collisionVertexArrayExt.emplaceBack(s,n.padding,n.padding),h.collisionVertexArrayExt.emplaceBack(s,-n.padding,n.padding),this._commitLayoutVertex(h.layoutVertexArray,d,g,_,O,B,new W(n.x1,n.y1)),this._commitLayoutVertex(h.layoutVertexArray,d,g,_,O,B,new W(n.x2,n.y1)),this._commitLayoutVertex(h.layoutVertexArray,d,g,_,O,B,new W(n.x2,n.y2)),this._commitLayoutVertex(h.layoutVertexArray,d,g,_,O,B,new W(n.x1,n.y2)),E.vertexLength+=4;const F=h.indexArray;F.emplaceBack(M,M+1),F.emplaceBack(M+1,M+2),F.emplaceBack(M+2,M+3),F.emplaceBack(M+3,M),E.primitiveLength+=4}_addTextDebugCollisionBoxes(n,s,h,d,g,_){for(let b=d;b<g;b++){const E=h.get(b),M=this.getSymbolInstanceTextSize(n,_,s,b);this._addCollisionDebugVertices(E,M,this.textCollisionBox,E.projectedAnchorX,E.projectedAnchorY,E.projectedAnchorZ,_)}}_addIconDebugCollisionBoxes(n,s,h,d,g,_){for(let b=d;b<g;b++){const E=h.get(b),M=this.getSymbolInstanceIconSize(n,s,_.placedIconSymbolIndex);this._addCollisionDebugVertices(E,M,this.iconCollisionBox,E.projectedAnchorX,E.projectedAnchorY,E.projectedAnchorZ,_)}}generateCollisionDebugBuffers(n,s){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new lw(Pn,tP.members,ms),this.iconCollisionBox=new lw(Pn,tP.members,ms);const h=cf(this.iconSizeData,n),d=cf(this.textSizeData,n);for(let g=0;g<this.symbolInstances.length;g++){const _=this.symbolInstances.get(g);this._addTextDebugCollisionBoxes(d,n,s,_.textBoxStartIndex,_.textBoxEndIndex,_),this._addTextDebugCollisionBoxes(d,n,s,_.verticalTextBoxStartIndex,_.verticalTextBoxEndIndex,_),this._addIconDebugCollisionBoxes(h,n,s,_.iconBoxStartIndex,_.iconBoxEndIndex,_),this._addIconDebugCollisionBoxes(h,n,s,_.verticalIconBoxStartIndex,_.verticalIconBoxEndIndex,_)}}getSymbolInstanceTextSize(n,s,h,d){const g=this.text.placedSymbolArray.get(s.rightJustifiedTextSymbolIndex>=0?s.rightJustifiedTextSymbolIndex:s.centerJustifiedTextSymbolIndex>=0?s.centerJustifiedTextSymbolIndex:s.leftJustifiedTextSymbolIndex>=0?s.leftJustifiedTextSymbolIndex:s.verticalPlacedTextSymbolIndex>=0?s.verticalPlacedTextSymbolIndex:d),_=ov(this.textSizeData,n,g)/Oi;return this.tilePixelRatio*_}getSymbolInstanceIconSize(n,s,h){const d=this.icon.placedSymbolArray.get(h),g=ov(this.iconSizeData,n,d);return this.tilePixelRatio*g}_commitDebugCollisionVertexUpdate(n,s,h){n.emplaceBack(s,-h,-h),n.emplaceBack(s,h,-h),n.emplaceBack(s,h,h),n.emplaceBack(s,-h,h)}_updateTextDebugCollisionBoxes(n,s,h,d,g,_){for(let b=d;b<g;b++){const E=h.get(b),M=this.getSymbolInstanceTextSize(n,_,s,b);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,M,E.padding)}}_updateIconDebugCollisionBoxes(n,s,h,d,g,_){for(let b=d;b<g;b++){const E=h.get(b),M=this.getSymbolInstanceIconSize(n,s,_);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,M,E.padding)}}updateCollisionDebugBuffers(n,s){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const h=cf(this.iconSizeData,n),d=cf(this.textSizeData,n);for(let g=0;g<this.symbolInstances.length;g++){const _=this.symbolInstances.get(g);this._updateTextDebugCollisionBoxes(d,n,s,_.textBoxStartIndex,_.textBoxEndIndex,_),this._updateTextDebugCollisionBoxes(d,n,s,_.verticalTextBoxStartIndex,_.verticalTextBoxEndIndex,_),this._updateIconDebugCollisionBoxes(h,n,s,_.iconBoxStartIndex,_.iconBoxEndIndex,_.placedIconSymbolIndex),this._updateIconDebugCollisionBoxes(h,n,s,_.verticalIconBoxStartIndex,_.verticalIconBoxEndIndex,_.placedIconSymbolIndex)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(n,s,h,d,g,_,b,E,M){const O={};if(s<h){const{x1:B,y1:F,x2:q,y2:H,padding:K,projectedAnchorX:re,projectedAnchorY:ue,projectedAnchorZ:ye,tileAnchorX:le,tileAnchorY:ge,featureIndex:be}=n.get(s);O.textBox={x1:B,y1:F,x2:q,y2:H,padding:K,projectedAnchorX:re,projectedAnchorY:ue,projectedAnchorZ:ye,tileAnchorX:le,tileAnchorY:ge},O.textFeatureIndex=be}if(d<g){const{x1:B,y1:F,x2:q,y2:H,padding:K,projectedAnchorX:re,projectedAnchorY:ue,projectedAnchorZ:ye,tileAnchorX:le,tileAnchorY:ge,featureIndex:be}=n.get(d);O.verticalTextBox={x1:B,y1:F,x2:q,y2:H,padding:K,projectedAnchorX:re,projectedAnchorY:ue,projectedAnchorZ:ye,tileAnchorX:le,tileAnchorY:ge},O.verticalTextFeatureIndex=be}if(_<b){const{x1:B,y1:F,x2:q,y2:H,padding:K,projectedAnchorX:re,projectedAnchorY:ue,projectedAnchorZ:ye,tileAnchorX:le,tileAnchorY:ge,featureIndex:be}=n.get(_);O.iconBox={x1:B,y1:F,x2:q,y2:H,padding:K,projectedAnchorX:re,projectedAnchorY:ue,projectedAnchorZ:ye,tileAnchorX:le,tileAnchorY:ge},O.iconFeatureIndex=be}if(E<M){const{x1:B,y1:F,x2:q,y2:H,padding:K,projectedAnchorX:re,projectedAnchorY:ue,projectedAnchorZ:ye,tileAnchorX:le,tileAnchorY:ge,featureIndex:be}=n.get(E);O.verticalIconBox={x1:B,y1:F,x2:q,y2:H,padding:K,projectedAnchorX:re,projectedAnchorY:ue,projectedAnchorZ:ye,tileAnchorX:le,tileAnchorY:ge},O.verticalIconFeatureIndex=be}return O}deserializeCollisionBoxes(n){this.collisionArrays=[];for(let s=0;s<this.symbolInstances.length;s++){const h=this.symbolInstances.get(s);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(n,h.textBoxStartIndex,h.textBoxEndIndex,h.verticalTextBoxStartIndex,h.verticalTextBoxEndIndex,h.iconBoxStartIndex,h.iconBoxEndIndex,h.verticalIconBoxStartIndex,h.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(n,s){const h=n.placedSymbolArray.get(s),d=h.vertexStartIndex+4*h.numGlyphs;for(let g=h.vertexStartIndex;g<d;g+=4)n.indexArray.emplaceBack(g,g+1,g+2),n.indexArray.emplaceBack(g+1,g+2,g+3)}getSortedSymbolIndexes(n){if(this.sortedAngle===n&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const s=Math.sin(n),h=Math.cos(n),d=[],g=[],_=[];for(let b=0;b<this.symbolInstances.length;++b){_.push(b);const E=this.symbolInstances.get(b);d.push(0|Math.round(s*E.tileAnchorX+h*E.tileAnchorY)),g.push(E.featureIndex)}return _.sort((b,E)=>d[b]-d[E]||g[E]-g[b]),_}addToSortKeyRanges(n,s){const h=this.sortKeyRanges[this.sortKeyRanges.length-1];h&&h.sortKey===s?h.symbolInstanceEnd=n+1:this.sortKeyRanges.push({sortKey:s,symbolInstanceStart:n,symbolInstanceEnd:n+1})}sortFeatures(n){if(this.sortFeaturesByY&&this.sortedAngle!==n&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(n),this.sortedAngle=n,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const s of this.symbolInstanceIndexes){const h=this.symbolInstances.get(s);this.featureSortOrder.push(h.featureIndex);const{rightJustifiedTextSymbolIndex:d,centerJustifiedTextSymbolIndex:g,leftJustifiedTextSymbolIndex:_,verticalPlacedTextSymbolIndex:b,placedIconSymbolIndex:E,verticalPlacedIconSymbolIndex:M}=h;d>=0&&this.addIndicesForPlacedSymbol(this.text,d),g>=0&&g!==d&&this.addIndicesForPlacedSymbol(this.text,g),_>=0&&_!==g&&_!==d&&this.addIndicesForPlacedSymbol(this.text,_),b>=0&&this.addIndicesForPlacedSymbol(this.text,b),E>=0&&this.addIndicesForPlacedSymbol(this.icon,E),M>=0&&this.addIndicesForPlacedSymbol(this.icon,M)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}Dt(cc,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),cc.MAX_GLYPHS=65535,cc.addDynamicAttributes=gv;const Sj=new ct({"symbol-placement":new Pe(Xe.layout_symbol["symbol-placement"]),"symbol-spacing":new Pe(Xe.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Pe(Xe.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new je(Xe.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Pe(Xe.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new Pe(Xe.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Pe(Xe.layout_symbol["icon-ignore-placement"]),"icon-optional":new Pe(Xe.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Pe(Xe.layout_symbol["icon-rotation-alignment"]),"icon-size":new je(Xe.layout_symbol["icon-size"]),"icon-text-fit":new Pe(Xe.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Pe(Xe.layout_symbol["icon-text-fit-padding"]),"icon-image":new je(Xe.layout_symbol["icon-image"]),"icon-rotate":new je(Xe.layout_symbol["icon-rotate"]),"icon-padding":new Pe(Xe.layout_symbol["icon-padding"]),"icon-keep-upright":new Pe(Xe.layout_symbol["icon-keep-upright"]),"icon-offset":new je(Xe.layout_symbol["icon-offset"]),"icon-anchor":new je(Xe.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Pe(Xe.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Pe(Xe.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Pe(Xe.layout_symbol["text-rotation-alignment"]),"text-field":new je(Xe.layout_symbol["text-field"]),"text-font":new je(Xe.layout_symbol["text-font"]),"text-size":new je(Xe.layout_symbol["text-size"]),"text-max-width":new je(Xe.layout_symbol["text-max-width"]),"text-line-height":new je(Xe.layout_symbol["text-line-height"]),"text-letter-spacing":new je(Xe.layout_symbol["text-letter-spacing"]),"text-justify":new je(Xe.layout_symbol["text-justify"]),"text-radial-offset":new je(Xe.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Pe(Xe.layout_symbol["text-variable-anchor"]),"text-anchor":new je(Xe.layout_symbol["text-anchor"]),"text-max-angle":new Pe(Xe.layout_symbol["text-max-angle"]),"text-writing-mode":new Pe(Xe.layout_symbol["text-writing-mode"]),"text-rotate":new je(Xe.layout_symbol["text-rotate"]),"text-padding":new Pe(Xe.layout_symbol["text-padding"]),"text-keep-upright":new Pe(Xe.layout_symbol["text-keep-upright"]),"text-transform":new je(Xe.layout_symbol["text-transform"]),"text-offset":new je(Xe.layout_symbol["text-offset"]),"text-allow-overlap":new Pe(Xe.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Pe(Xe.layout_symbol["text-ignore-placement"]),"text-optional":new Pe(Xe.layout_symbol["text-optional"])});var cw={paint:new ct({"icon-opacity":new je(Xe.paint_symbol["icon-opacity"]),"icon-color":new je(Xe.paint_symbol["icon-color"]),"icon-halo-color":new je(Xe.paint_symbol["icon-halo-color"]),"icon-halo-width":new je(Xe.paint_symbol["icon-halo-width"]),"icon-halo-blur":new je(Xe.paint_symbol["icon-halo-blur"]),"icon-translate":new Pe(Xe.paint_symbol["icon-translate"]),"icon-translate-anchor":new Pe(Xe.paint_symbol["icon-translate-anchor"]),"text-opacity":new je(Xe.paint_symbol["text-opacity"]),"text-color":new je(Xe.paint_symbol["text-color"],{runtimeType:ca,getOverride:a=>a.textColor,hasOverride:a=>!!a.textColor}),"text-halo-color":new je(Xe.paint_symbol["text-halo-color"]),"text-halo-width":new je(Xe.paint_symbol["text-halo-width"]),"text-halo-blur":new je(Xe.paint_symbol["text-halo-blur"]),"text-translate":new Pe(Xe.paint_symbol["text-translate"]),"text-translate-anchor":new Pe(Xe.paint_symbol["text-translate-anchor"])}),layout:Sj};class RP{constructor(n){this.type=n.property.overrides?n.property.overrides.runtimeType:Bl,this.defaultValue=n}evaluate(n){if(n.formattedSection){const s=this.defaultValue.property.overrides;if(s&&s.hasOverride(n.formattedSection))return s.getOverride(n.formattedSection)}return n.feature&&n.featureState?this.defaultValue.evaluate(n.feature,n.featureState):this.defaultValue.property.specification.default}eachChild(n){this.defaultValue.isConstant()||n(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}Dt(RP,"FormatSectionOverride",{omit:["defaultValue"]});class yv extends Va{constructor(n){super(n,cw)}recalculate(n,s){super.recalculate(n,s),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const h=this.layout.get("text-writing-mode");if(h){const d=[];for(const g of h)d.indexOf(g)<0&&d.push(g);this.layout._values["text-writing-mode"]=d}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getValueAndResolveTokens(n,s,h,d){const g=this.layout.get(n).evaluate(s,{},h,d),_=this._unevaluatedLayout._values[n];return _.isDataDriven()||Xl(_.value)||!g?g:function(b,E){return E.replace(/{([^{}]+)}/g,(M,O)=>O in b?String(b[O]):"")}(s.properties,g)}createBucket(n){return new cc(n)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const n of cw.paint.overridableProperties){if(!yv.hasPaintOverride(this.layout,n))continue;const s=this.paint.get(n),h=new RP(s),d=new Bh(h,s.property.specification);let g=null;g=s.value.kind==="constant"||s.value.kind==="source"?new $h("source",d):new Js("composite",d,s.value.zoomStops,s.value._interpolationType),this.paint._values[n]=new st(s.property,g,s.parameters)}}_handleOverridablePaintPropertyUpdate(n,s,h){return!(!this.layout||s.isDataDriven()||h.isDataDriven())&&yv.hasPaintOverride(this.layout,n)}static hasPaintOverride(n,s){const h=n.get("text-field"),d=cw.paint.properties[s];let g=!1;const _=b=>{for(const E of b)if(d.overrides&&d.overrides.hasOverride(E))return void(g=!0)};if(h.value.kind==="constant"&&h.value.value instanceof eo)_(h.value.value.sections);else if(h.value.kind==="source"){const b=M=>{g||(M instanceof eu&&Yn(M.value)===$l?_(M.value.sections):M instanceof tu?_(M.sections):M.eachChild(b))},E=h.value;E._styleExpression&&b(E._styleExpression.expression)}return g}getProgramConfiguration(n){return new oc(this,n)}}var Ej={paint:new ct({"background-color":new Pe(Xe.paint_background["background-color"]),"background-pattern":new Pe(Xe.paint_background["background-pattern"]),"background-opacity":new Pe(Xe.paint_background["background-opacity"])})},Tj={paint:new ct({"raster-opacity":new Pe(Xe.paint_raster["raster-opacity"]),"raster-hue-rotate":new Pe(Xe.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Pe(Xe.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Pe(Xe.paint_raster["raster-brightness-max"]),"raster-saturation":new Pe(Xe.paint_raster["raster-saturation"]),"raster-contrast":new Pe(Xe.paint_raster["raster-contrast"]),"raster-resampling":new Pe(Xe.paint_raster["raster-resampling"]),"raster-fade-duration":new Pe(Xe.paint_raster["raster-fade-duration"])})};class Aj extends Va{constructor(n){super(n,{}),this.implementation=n}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isLayerDraped(){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(n){this.implementation.onAdd&&this.implementation.onAdd(n,n.painter.context.gl)}onRemove(n){this.implementation.onRemove&&this.implementation.onRemove(n,n.painter.context.gl)}}var Mj={paint:new ct({"sky-type":new Pe(Xe.paint_sky["sky-type"]),"sky-atmosphere-sun":new Pe(Xe.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Pe(Xe.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Pe(Xe.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Pe(Xe.paint_sky["sky-gradient-radius"]),"sky-gradient":new ot(Xe.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Pe(Xe.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Pe(Xe.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Pe(Xe.paint_sky["sky-opacity"])})};function uw(a,n,s){const h=[0,0,1],d=nC([]);return oC(d,d,s?-xe(a)+Math.PI:xe(a)),iC(d,d,-xe(n)),QM(h,h,d),ro(h,h)}const Cj={circle:class extends Va{constructor(a){super(a,FF)}createBucket(a){return new Fb(a)}queryRadius(a){const n=a;return nf("circle-radius",this,n)+nf("circle-stroke-width",this,n)+Z_(this.paint.get("circle-translate"))}queryIntersectsFeature(a,n,s,h,d,g,_,b){const E=AC(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),g.angle,a.pixelToTileUnitsFactor),M=this.paint.get("circle-radius").evaluate(n,s)+this.paint.get("circle-stroke-width").evaluate(n,s);return MC(a,h,g,_,b,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",E,M)}getProgramIds(){return["circle"]}getProgramConfiguration(a){return new oc(this,a)}},heatmap:class extends Va{createBucket(a){return new PC(a)}constructor(a){super(a,VF),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(a){a==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=Vb({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(a){return nf("heatmap-radius",this,a)}queryIntersectsFeature(a,n,s,h,d,g,_,b){const E=this.paint.get("heatmap-radius").evaluate(n,s);return MC(a,h,g,_,b,!0,!0,new W(0,0),E)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getProgramConfiguration(a){return new oc(this,a)}},hillshade:class extends Va{constructor(a){super(a,GF)}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}},fill:class extends Va{constructor(a){super(a,aN)}getProgramIds(){const a=this.paint.get("fill-pattern"),n=a&&a.constantOr(1),s=[n?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&s.push(n&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),s}getProgramConfiguration(a){return new oc(this,a)}recalculate(a,n){super.recalculate(a,n);const s=this.paint._values["fill-outline-color"];s.value.kind==="constant"&&s.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(a){return new Q_(a)}queryRadius(){return Z_(this.paint.get("fill-translate"))}queryIntersectsFeature(a,n,s,h,d,g){return!a.queryGeometry.isAboveHorizon&&bC(TC(a.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),g.angle,a.pixelToTileUnitsFactor),h)}isTileClipped(){return!0}},"fill-extrusion":class extends Va{constructor(a){super(a,wN)}createBucket(a){return new am(a)}queryRadius(){return Z_(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}getProgramConfiguration(a){return new oc(this,a)}queryIntersectsFeature(a,n,s,h,d,g,_,b,E){const M=AC(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),g.angle,a.pixelToTileUnitsFactor),O=this.paint.get("fill-extrusion-height").evaluate(n,s),B=this.paint.get("fill-extrusion-base").evaluate(n,s),F=[0,0],q=b&&g.elevation,H=g.elevation?g.elevation.exaggeration():1,K=a.tile.getBucket(this);if(q&&K instanceof am){const ge=K.centroidVertexArray,be=E+1;be<ge.length&&(F[0]=ge.geta_centroid_pos0(be),F[1]=ge.geta_centroid_pos1(be))}if(F[0]===0&&F[1]===1)return!1;g.projection.name==="globe"&&(h=HC([h],[new W(0,0),new W(rr,rr)],a.tileID.canonical).map(ge=>ge.polygon).flat());const re=q?b:null,[ue,ye]=function(ge,be,_e,Fe,Re,Ye,dt,Ve,tt,it,lt){return ge.projection.name==="globe"?function(pt,Ge,St,Yt,At,Bt,Et,Qt,br,_r,mr){const er=[],Vr=[],ar=pt.projection.upVectorScale(mr,pt.center.lat,pt.worldSize).metersToTile,wr=[0,0,0,1],Hr=[0,0,0,1],fn=(dn,yn,In,mi)=>{dn[0]=yn,dn[1]=In,dn[2]=mi,dn[3]=1},an=WC();St>0&&(St+=an),Yt+=an;for(const dn of Ge){const yn=[],In=[];for(const mi of dn){const Gr=mi.x+At.x,Jn=mi.y+At.y,Wn=pt.projection.projectTilePoint(Gr,Jn,mr),Dr=pt.projection.upVector(mr,mi.x,mi.y);let Sn=St,ri=Yt;if(Et){const Zr=YC(Gr,Jn,St,Yt,Et,Qt,br,_r);Sn+=Zr.base,ri+=Zr.top}St!==0?fn(wr,Wn.x+Dr[0]*ar*Sn,Wn.y+Dr[1]*ar*Sn,Wn.z+Dr[2]*ar*Sn):fn(wr,Wn.x,Wn.y,Wn.z),fn(Hr,Wn.x+Dr[0]*ar*ri,Wn.y+Dr[1]*ar*ri,Wn.z+Dr[2]*ar*ri),Bn(wr,wr,Bt),Bn(Hr,Hr,Bt),yn.push(new lf(wr[0],wr[1],wr[2])),In.push(new lf(Hr[0],Hr[1],Hr[2]))}er.push(yn),Vr.push(In)}return[er,Vr]}(ge,be,_e,Fe,Re,Ye,dt,Ve,tt,it,lt):dt?function(pt,Ge,St,Yt,At,Bt,Et,Qt,br){const _r=[],mr=[],er=[0,0,0,1];for(const Vr of pt){const ar=[],wr=[];for(const Hr of Vr){const fn=Hr.x+Yt.x,an=Hr.y+Yt.y,dn=YC(fn,an,Ge,St,Bt,Et,Qt,br);er[0]=fn,er[1]=an,er[2]=dn.base,er[3]=1,Iu(er,er,At),er[3]=Math.max(er[3],1e-5);const yn=new lf(er[0]/er[3],er[1]/er[3],er[2]/er[3]);er[0]=fn,er[1]=an,er[2]=dn.top,er[3]=1,Iu(er,er,At),er[3]=Math.max(er[3],1e-5);const In=new lf(er[0]/er[3],er[1]/er[3],er[2]/er[3]);ar.push(yn),wr.push(In)}_r.push(ar),mr.push(wr)}return[_r,mr]}(be,_e,Fe,Re,Ye,dt,Ve,tt,it):function(pt,Ge,St,Yt,At){const Bt=[],Et=[],Qt=At[8]*Ge,br=At[9]*Ge,_r=At[10]*Ge,mr=At[11]*Ge,er=At[8]*St,Vr=At[9]*St,ar=At[10]*St,wr=At[11]*St;for(const Hr of pt){const fn=[],an=[];for(const dn of Hr){const yn=dn.x+Yt.x,In=dn.y+Yt.y,mi=At[0]*yn+At[4]*In+At[12],Gr=At[1]*yn+At[5]*In+At[13],Jn=At[2]*yn+At[6]*In+At[14],Wn=At[3]*yn+At[7]*In+At[15],Dr=mi+Qt,Sn=Gr+br,ri=Jn+_r,Zr=Math.max(Wn+mr,1e-5),$n=mi+er,Ui=Gr+Vr,gi=Jn+ar,yi=Math.max(Wn+wr,1e-5);fn.push(new lf(Dr/Zr,Sn/Zr,ri/Zr)),an.push(new lf($n/yi,Ui/yi,gi/yi))}Bt.push(fn),Et.push(an)}return[Bt,Et]}(be,_e,Fe,Re,Ye)}(g,h,B,O,M,_,re,F,H,g.center.lat,a.tileID.canonical),le=a.queryGeometry;return function(ge,be,_e){let Fe=1/0;bC(_e,be)&&(Fe=KC(_e,be[0]));for(let Re=0;Re<be.length;Re++){const Ye=be[Re],dt=ge[Re];for(let Ve=0;Ve<Ye.length-1;Ve++){const tt=Ye[Ve],it=[tt,Ye[Ve+1],dt[Ve+1],dt[Ve],tt];xC(_e,it)&&(Fe=Math.min(Fe,KC(_e,it)))}}return Fe!==1/0&&Fe}(ue,ye,le.isPointQuery()?le.screenBounds:le.screenGeometry)}},line:class extends Va{constructor(a){super(a,JC),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(a){if(a==="line-gradient"){const n=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=n._styleExpression&&n._styleExpression.expression instanceof fp,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(a,n){super.recalculate(a,n),this.paint._values["line-floorwidth"]=QC.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,a)}createBucket(a){return new iv(a)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getProgramConfiguration(a){return new oc(this,a)}queryRadius(a){const n=a,s=eP(nf("line-width",this,n),nf("line-gap-width",this,n)),h=nf("line-offset",this,n);return s/2+Math.abs(h)+Z_(this.paint.get("line-translate"))}queryIntersectsFeature(a,n,s,h,d,g){if(a.queryGeometry.isAboveHorizon)return!1;const _=TC(a.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),g.angle,a.pixelToTileUnitsFactor),b=a.pixelToTileUnitsFactor/2*eP(this.paint.get("line-width").evaluate(n,s),this.paint.get("line-gap-width").evaluate(n,s)),E=this.paint.get("line-offset").evaluate(n,s);return E&&(h=function(M,O){const B=[],F=new W(0,0);for(let q=0;q<M.length;q++){const H=M[q],K=[];for(let re=0;re<H.length;re++){const ue=H[re-1],ye=H[re],le=H[re+1],ge=re===0?F:ye.sub(ue)._unit()._perp(),be=re===H.length-1?F:le.sub(ye)._unit()._perp(),_e=ge._add(be)._unit();_e._mult(1/(_e.x*be.x+_e.y*be.y)),K.push(_e._mult(O)._add(ye))}B.push(K)}return B}(h,E*a.pixelToTileUnitsFactor)),function(M,O,B){for(let F=0;F<O.length;F++){const q=O[F];if(M.length>=3){for(let H=0;H<q.length;H++)if(Ru(M,q[H]))return!0}if(LF(M,q,B))return!0}return!1}(_,h,b)}isTileClipped(){return!0}},symbol:yv,background:class extends Va{constructor(a){super(a,Ej)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}},raster:class extends Va{constructor(a){super(a,Tj)}getProgramIds(){return["raster"]}},sky:class extends Va{constructor(a){super(a,Mj),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(a){a==="sky-gradient"?this._updateColorRamp():a!=="sky-atmosphere-sun"&&a!=="sky-atmosphere-halo-color"&&a!=="sky-atmosphere-color"&&a!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=Vb({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(a){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const n=a.style.light.properties.get("position");return this._lightPosition.azimuthal!==n.azimuthal||this._lightPosition.polar!==n.polar}return!1}getCenter(a,n){if(this.paint.get("sky-type")==="atmosphere"){const h=this.paint.get("sky-atmosphere-sun"),d=!h,g=a.style.light,_=g.properties.get("position");return d&&g.properties.get("anchor")==="viewport"&&Qe("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),d?uw(_.azimuthal,90-_.polar,n):uw(h[0],90-h[1],n)}const s=this.paint.get("sky-gradient-center");return uw(s[0],90-s[1],n)}is3D(){return!1}isSky(){return!0}markSkyboxValid(a){this._skyboxInvalidated=!1,this._lightPosition=a.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const a=this.paint.get("sky-type");return a==="atmosphere"?["skyboxCapture","skybox"]:a==="gradient"?["skyboxGradient"]:null}}};class ym{constructor(n,s,h,d){this.context=n,this.format=h,this.texture=n.gl.createTexture(),this.update(s,d)}update(n,s,h){const{width:d,height:g}=n,{context:_}=this,{gl:b}=_,{HTMLImageElement:E,HTMLCanvasElement:M,HTMLVideoElement:O,ImageData:B,ImageBitmap:F}=v;if(b.bindTexture(b.TEXTURE_2D,this.texture),_.pixelStoreUnpackFlipY.set(!1),_.pixelStoreUnpack.set(1),_.pixelStoreUnpackPremultiplyAlpha.set(this.format===b.RGBA&&(!s||s.premultiply!==!1)),h||this.size&&this.size[0]===d&&this.size[1]===g){const{x:q,y:H}=h||{x:0,y:0};n instanceof E||n instanceof M||n instanceof O||n instanceof B||F&&n instanceof F?b.texSubImage2D(b.TEXTURE_2D,0,q,H,b.RGBA,b.UNSIGNED_BYTE,n):b.texSubImage2D(b.TEXTURE_2D,0,q,H,d,g,b.RGBA,b.UNSIGNED_BYTE,n.data)}else this.size=[d,g],n instanceof E||n instanceof M||n instanceof O||n instanceof B||F&&n instanceof F?b.texImage2D(b.TEXTURE_2D,0,this.format,this.format,b.UNSIGNED_BYTE,n):b.texImage2D(b.TEXTURE_2D,0,this.format,d,g,0,this.format,b.UNSIGNED_BYTE,n.data);this.useMipmap=!!(s&&s.useMipmap&&this.isSizePowerOfTwo()),this.useMipmap&&b.generateMipmap(b.TEXTURE_2D)}bind(n,s){const{context:h}=this,{gl:d}=h;d.bindTexture(d.TEXTURE_2D,this.texture),n!==this.filter&&(d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MAG_FILTER,n),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_MIN_FILTER,this.useMipmap?n===d.NEAREST?d.NEAREST_MIPMAP_NEAREST:d.LINEAR_MIPMAP_NEAREST:n),this.filter=n),s!==this.wrap&&(d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_S,s),d.texParameteri(d.TEXTURE_2D,d.TEXTURE_WRAP_T,s),this.wrap=s)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:n}=this.context;n.deleteTexture(this.texture),this.texture=null}}class Pj{constructor(n){this._callback=n,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class Ij{constructor(){this.tasks={},this.taskQueue=[],Tr(["process"],this),this.invoker=new Pj(this.process),this.nextId=0}add(n,s){const h=this.nextId++,d=function({type:g,isSymbolTile:_,zoom:b}){return b=b||0,g==="message"?0:g!=="maybePrepare"||_?g!=="parseTile"||_?g==="parseTile"&&_?300-b:g==="maybePrepare"&&_?400-b:500:200-b:100-b}(s);if(d===0){Sr();try{n()}finally{}return{cancel:()=>{}}}return this.tasks[h]={fn:n,metadata:s,priority:d,id:h},this.taskQueue.push(h),this.invoker.trigger(),{cancel:()=>{delete this.tasks[h]}}}process(){Sr();try{if(this.taskQueue=this.taskQueue.filter(h=>!!this.tasks[h]),!this.taskQueue.length)return;const n=this.pick();if(n===null)return;const s=this.tasks[n];if(delete this.tasks[n],this.taskQueue.length&&this.invoker.trigger(),!s)return;s.fn()}finally{}}pick(){let n=null,s=1/0;for(let d=0;d<this.taskQueue.length;d++){const g=this.tasks[this.taskQueue[d]];g.priority<s&&(s=g.priority,n=d)}if(n===null)return null;const h=this.taskQueue[n];return this.taskQueue.splice(n,1),h}remove(){this.invoker.remove()}}class LP{constructor(n){this._stringToNumber={},this._numberToString=[];for(let s=0;s<n.length;s++){const h=n[s];this._stringToNumber[h]=s,this._numberToString[s]=h}}encode(n){return this._stringToNumber[n]}decode(n){return this._numberToString[n]}}const kj=["tile","layer","source","sourceLayer","state"];class zP{constructor(n,s,h,d,g){this.type="Feature",this._vectorTileFeature=n,this._z=s,this._x=h,this._y=d,this.properties=n.properties,this.id=g}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(n){this._geometry=n}toJSON(){const n={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};this.id!==void 0&&(n.id=this.id);for(const s of kj)this[s]!==void 0&&(n[s]=this[s]);return n}}const ma=32,ws=33,uc=new Uint16Array(8184);for(let a=0;a<2046;a++){let n=a+2,s=0,h=0,d=0,g=0,_=0,b=0;for(1&n?d=g=_=ma:s=h=b=ma;(n>>=1)>1;){const M=s+d>>1,O=h+g>>1;1&n?(d=s,g=h,s=_,h=b):(s=d,h=g,d=_,g=b),_=M,b=O}const E=4*a;uc[E+0]=s,uc[E+1]=h,uc[E+2]=d,uc[E+3]=g}const Ss=new Uint16Array(2178),hc=new Uint8Array(1089),_v=new Uint16Array(1089);function BP(a){return a===0?-.03125:a===32?.03125:0}var $P=Nt([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);const FP={type:2,extent:rr,loadGeometry:()=>[[new W(0,0),new W(8193,0),new W(8193,8193),new W(0,8193),new W(0,0)]]};class hw{constructor(n,s,h,d,g){this.tileID=n,this.uid=zt(),this.uses=0,this.tileSize=s,this.tileZoom=h,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=g,this.expiredRequestCount=0,this.state="loading",d&&d.transform&&(this.projection=d.transform.projection)}registerFadeDuration(n){const s=n+this.timeAdded;s<zr.now()||this.fadeEndTime&&s<this.fadeEndTime||(this.fadeEndTime=s)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=zu(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(n,s,h){if(this.unloadVectorData(),this.state="loaded",n){n.featureIndex&&(this.latestFeatureIndex=n.featureIndex,n.rawTileData?(this.latestRawTileData=n.rawTileData,this.latestFeatureIndex.rawTileData=n.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=n.collisionBoxArray,this.buckets=function(d,g){const _={};if(!g)return _;for(const b of d){const E=b.layerIds.map(M=>g.getLayer(M)).filter(Boolean);if(E.length!==0){b.layers=E,b.stateDependentLayerIds&&(b.stateDependentLayers=b.stateDependentLayerIds.map(M=>E.filter(O=>O.id===M)[0]));for(const M of E)_[M.id]=b}}return _}(n.buckets,s.style),this.hasSymbolBuckets=!1;for(const d in this.buckets){const g=this.buckets[d];if(g instanceof cc){if(this.hasSymbolBuckets=!0,!h)break;g.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const d in this.buckets){const g=this.buckets[d];if(g instanceof cc&&g.hasRTLText){this.hasRTLText=!0,Ee.isLoading()||Ee.isLoaded()||we()!=="deferred"||ve();break}}this.queryPadding=0;for(const d in this.buckets){const g=this.buckets[d];this.queryPadding=Math.max(this.queryPadding,s.style.getLayer(d).queryRadius(g))}n.imageAtlas&&(this.imageAtlas=n.imageAtlas),n.glyphAtlasImage&&(this.glyphAtlasImage=n.glyphAtlasImage),n.lineAtlas&&(this.lineAtlas=n.lineAtlas)}else this.collisionBoxArray=new _b}unloadVectorData(){if(this.hasData()){for(const n in this.buckets)this.buckets[n].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}getBucket(n){return this.buckets[n.id]}upload(n){for(const h in this.buckets){const d=this.buckets[h];d.uploadPending()&&d.upload(n)}const s=n.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new ym(n,this.imageAtlas.image,s.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new ym(n,this.glyphAtlasImage,s.ALPHA),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new ym(n,this.lineAtlas.image,s.ALPHA),this.lineAtlas.uploaded=!0)}prepare(n){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(n,this.imageAtlasTexture)}queryRenderedFeatures(n,s,h,d,g,_,b,E){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({tileResult:d,pixelPosMatrix:b,transform:_,params:g,tileTransform:this.tileTransform},n,s,h):{}}querySourceFeatures(n,s){const h=this.latestFeatureIndex;if(!h||!h.rawTileData)return;const d=h.loadVTLayers(),g=s?s.sourceLayer:"",_=d._geojsonTileLayer||d[g];if(!_)return;const b=Nh(s&&s.filter),{z:E,x:M,y:O}=this.tileID.canonical,B={z:E,x:M,y:O};for(let F=0;F<_.length;F++){const q=_.feature(F);if(b.needGeometry){const re=Du(q,!0);if(!b.filter(new ke(this.tileID.overscaledZ),re,this.tileID.canonical))continue}else if(!b.filter(new ke(this.tileID.overscaledZ),q))continue;const H=h.getId(q,g),K=new zP(q,E,M,O,H);K.tile=B,n.push(K)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(n){const s=this.expirationTime;if(n.cacheControl){const h=Lr(n.cacheControl);h["max-age"]&&(this.expirationTime=Date.now()+1e3*h["max-age"])}else n.expires&&(this.expirationTime=new Date(n.expires).getTime());if(this.expirationTime){const h=Date.now();let d=!1;if(this.expirationTime>h)d=!1;else if(s)if(this.expirationTime<s)d=!0;else{const g=this.expirationTime-s;g?this.expirationTime=h+Math.max(g,3e4):d=!0}else d=!0;d?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(n,s){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(n).length===0||!s)return;const h=this.latestFeatureIndex.loadVTLayers(),d=s.style.listImages();for(const g in this.buckets){if(!s.style.hasLayer(g))continue;const _=this.buckets[g],b=_.layers[0].sourceLayer||"_geojsonTileLayer",E=h[b],M=n[b];if(!E||!M||Object.keys(M).length===0)continue;if(_.update(M,E,d,this.imageAtlas&&this.imageAtlas.patternPositions||{}),_ instanceof iv||_ instanceof Q_){const B=s.style._getSourceCache(_.layers[0].source);s._terrain&&s._terrain.enabled&&B&&_.programConfigurations.needsUpload&&s._terrain._clearRenderCacheForTile(B.id,this.tileID)}const O=s&&s.style&&s.style.getLayer(g);O&&(this.queryPadding=Math.max(this.queryPadding,O.queryRadius(_)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<zr.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(n){this.symbolFadeHoldUntil=zr.now()+n}setTexture(n,s){const h=s.context,d=h.gl;this.texture=this.texture||s.getTileTexture(n.width),this.texture?this.texture.update(n,{useMipmap:!0}):(this.texture=new ym(h,n,d.RGBA,{useMipmap:!0}),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE))}setDependencies(n,s){const h={};for(const d of s)h[d]=!0;this.dependencies[n]=h}hasDependency(n,s){for(const h of n){const d=this.dependencies[h];if(d){for(const g of s)if(d[g])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(n,s){if(!s||s.name==="mercator"||this._tileDebugBuffer)return;const h=nl(FP,this.tileID.canonical,this.tileTransform)[0],d=new qt,g=new gs;for(let _=0;_<h.length;_++){const{x:b,y:E}=h[_];d.emplaceBack(b,E),g.emplaceBack(_)}g.emplaceBack(0),this._tileDebugIndexBuffer=n.createIndexBuffer(g),this._tileDebugBuffer=n.createVertexBuffer(d,Xp.members),this._tileDebugSegments=Gn.simpleSegment(0,0,d.length,g.length)}_makeTileBoundsBuffers(n,s){if(this._tileBoundsBuffer||!s||s.name==="mercator")return;const h=nl(FP,this.tileID.canonical,this.tileTransform)[0];let d,g;if(this.isRaster){const _=function(b,E){const M=zu(b,E),O=Math.pow(2,b.z);for(let re=0;re<ws;re++)for(let ue=0;ue<ws;ue++){const ye=Wo((b.x+(ue+BP(ue))/ma)/O),le=Ii((b.y+(re+BP(re))/ma)/O),ge=E.project(ye,le),be=re*ws+ue;Ss[2*be+0]=Math.round((ge.x*M.scale-M.x)*rr),Ss[2*be+1]=Math.round((ge.y*M.scale-M.y)*rr)}hc.fill(0),_v.fill(0);for(let re=2045;re>=0;re--){const ue=4*re,ye=uc[ue+0],le=uc[ue+1],ge=uc[ue+2],be=uc[ue+3],_e=ye+ge>>1,Fe=le+be>>1,Re=_e+Fe-le,Ye=Fe+ye-_e,dt=le*ws+ye,Ve=be*ws+ge,tt=Fe*ws+_e,it=Math.hypot((Ss[2*dt+0]+Ss[2*Ve+0])/2-Ss[2*tt+0],(Ss[2*dt+1]+Ss[2*Ve+1])/2-Ss[2*tt+1])>=16;if(hc[tt]=hc[tt]||(it?1:0),re<1022){const lt=(le+Ye>>1)*ws+(ye+Re>>1),pt=(be+Ye>>1)*ws+(ge+Re>>1);hc[tt]=hc[tt]||hc[lt]||hc[pt]}}const B=new Ur,F=new Pi;let q=0;function H(re,ue){const ye=ue*ws+re;return _v[ye]===0&&(B.emplaceBack(Ss[2*ye+0],Ss[2*ye+1],re*rr/ma,ue*rr/ma),_v[ye]=++q),_v[ye]-1}function K(re,ue,ye,le,ge,be){const _e=re+ye>>1,Fe=ue+le>>1;if(Math.abs(re-ge)+Math.abs(ue-be)>1&&hc[Fe*ws+_e])K(ge,be,re,ue,_e,Fe),K(ye,le,ge,be,_e,Fe);else{const Re=H(re,ue),Ye=H(ye,le),dt=H(ge,be);F.emplaceBack(Re,Ye,dt)}}return K(0,0,ma,ma,ma,0),K(ma,ma,0,0,0,ma),{vertices:B,indices:F}}(this.tileID.canonical,s);d=_.vertices,g=_.indices}else{d=new Ur,g=new Pi;for(const{x:b,y:E}of h)d.emplaceBack(b,E,0,0);const _=of(d.int16,void 0,4);for(let b=0;b<_.length;b+=3)g.emplaceBack(_[b],_[b+1],_[b+2])}this._tileBoundsBuffer=n.createVertexBuffer(d,$P.members),this._tileBoundsIndexBuffer=n.createIndexBuffer(g),this._tileBoundsSegments=Gn.simpleSegment(0,0,d.length,g.length)}_makeGlobeTileDebugBuffers(n,s){const h=s.projection;if(!h||h.name!=="globe"||s.freezeTileCoverage)return;const d=this.tileID.canonical,g=Jp(cC(d,s)),_=tf(s.zoom);let b;_>0&&(b=Sb(new Float64Array(16),s.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(n,d,s,g,b,_),this._makeGlobeTileDebugTextBuffer(n,d,s,g,b,_)}_globePoint(n,s,h,d,g,_,b){let E=Yp(n,s,h);if(_){const M=1<<h.z,O=vs(d.center.lng),B=xs(d.center.lat),F=(h.x+.5)/M-O;let q=0;F>.5?q=-1:F<-.5&&(q=1);let H=(n/rr+h.x)/M+q,K=(s/rr+h.y)/M;H=(H-O)*d._pixelsPerMercatorPixel+O,K=(K-B)*d._pixelsPerMercatorPixel+B;const re=[H*d.worldSize,K*d.worldSize,0];Bn(re,re,_),E=Ou(E,re,b)}return Bn(E,E,g)}_makeGlobeTileDebugBorderBuffer(n,s,h,d,g,_){const b=new qt,E=new gs,M=new Fr,O=(F,q,H,K,re)=>{const ue=(H-F)/(re-1),ye=(K-q)/(re-1),le=b.length;for(let ge=0;ge<re;ge++){const be=F+ge*ue,_e=q+ge*ye;b.emplaceBack(be,_e);const Fe=this._globePoint(be,_e,s,h,d,g,_);M.emplaceBack(Fe[0],Fe[1],Fe[2]),E.emplaceBack(le+ge)}},B=rr;O(0,0,B,0,16),O(B,0,B,B,16),O(B,B,0,B,16),O(0,B,0,0,16),this._tileDebugIndexBuffer=n.createIndexBuffer(E),this._tileDebugBuffer=n.createVertexBuffer(b,Xp.members),this._globeTileDebugBorderBuffer=n.createVertexBuffer(M,sC.members),this._tileDebugSegments=Gn.simpleSegment(0,0,b.length,E.length)}_makeGlobeTileDebugTextBuffer(n,s,h,d,g,_){const b=new qt,E=new Pi,M=new Fr,O=25;E.reserve(32),b.reserve(O),M.reserve(O);const B=(F,q)=>O*F+q;for(let F=0;F<O;F++){const q=2048*F;for(let H=0;H<O;H++){const K=2048*H;b.emplaceBack(K,q);const re=this._globePoint(K,q,s,h,d,g,_);M.emplaceBack(re[0],re[1],re[2])}}for(let F=0;F<4;F++)for(let q=0;q<4;q++){const H=B(F,q),K=B(F,q+1),re=B(F+1,q),ue=B(F+1,q+1);E.emplaceBack(H,K,re),E.emplaceBack(re,K,ue)}this._tileDebugTextIndexBuffer=n.createIndexBuffer(E),this._tileDebugTextBuffer=n.createVertexBuffer(b,Xp.members),this._globeTileDebugTextBuffer=n.createVertexBuffer(M,sC.members),this._tileDebugTextSegments=Gn.simpleSegment(0,0,O,32)}}class Oj{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(n,s,h){const d=String(s);if(this.stateChanges[n]=this.stateChanges[n]||{},this.stateChanges[n][d]=this.stateChanges[n][d]||{},gt(this.stateChanges[n][d],h),this.deletedStates[n]===null){this.deletedStates[n]={};for(const g in this.state[n])g!==d&&(this.deletedStates[n][g]=null)}else if(this.deletedStates[n]&&this.deletedStates[n][d]===null){this.deletedStates[n][d]={};for(const g in this.state[n][d])h[g]||(this.deletedStates[n][d][g]=null)}else for(const g in h)this.deletedStates[n]&&this.deletedStates[n][d]&&this.deletedStates[n][d][g]===null&&delete this.deletedStates[n][d][g]}removeFeatureState(n,s,h){if(this.deletedStates[n]===null)return;const d=String(s);if(this.deletedStates[n]=this.deletedStates[n]||{},h&&s!==void 0)this.deletedStates[n][d]!==null&&(this.deletedStates[n][d]=this.deletedStates[n][d]||{},this.deletedStates[n][d][h]=null);else if(s!==void 0)if(this.stateChanges[n]&&this.stateChanges[n][d])for(h in this.deletedStates[n][d]={},this.stateChanges[n][d])this.deletedStates[n][d][h]=null;else this.deletedStates[n][d]=null;else this.deletedStates[n]=null}getState(n,s){const h=String(s),d=gt({},(this.state[n]||{})[h],(this.stateChanges[n]||{})[h]);if(this.deletedStates[n]===null)return{};if(this.deletedStates[n]){const g=this.deletedStates[n][s];if(g===null)return{};for(const _ in g)delete d[_]}return d}initializeTileState(n,s){n.setFeatureState(this.state,s)}coalesceChanges(n,s){const h={};for(const d in this.stateChanges){this.state[d]=this.state[d]||{};const g={};for(const _ in this.stateChanges[d])this.state[d][_]||(this.state[d][_]={}),gt(this.state[d][_],this.stateChanges[d][_]),g[_]=this.state[d][_];h[d]=g}for(const d in this.deletedStates){this.state[d]=this.state[d]||{};const g={};if(this.deletedStates[d]===null)for(const _ in this.state[d])g[_]={},this.state[d][_]={};else for(const _ in this.deletedStates[d]){if(this.deletedStates[d][_]===null)this.state[d][_]={};else if(this.state[d][_])for(const b of Object.keys(this.deletedStates[d][_]))delete this.state[d][_][b];g[_]=this.state[d][_]}h[d]=h[d]||{},gt(h[d],g)}if(this.stateChanges={},this.deletedStates={},Object.keys(h).length!==0)for(const d in n)n[d].setFeatureState(h,s)}}class NP{constructor(n){this.size=n,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(n,s){const h=this.toIdx(n,s);return{min:this.minimums[h],max:this.maximums[h]}}isLeaf(n,s){return this.leaves[this.toIdx(n,s)]}toIdx(n,s){return s*this.size+n}}function jP(a,n,s,h){let d=0,g=Number.MAX_VALUE;for(let _=0;_<3;_++)if(Math.abs(h[_])<1e-15){if(s[_]<a[_]||s[_]>n[_])return null}else{const b=1/h[_];let E=(a[_]-s[_])*b,M=(n[_]-s[_])*b;if(E>M){const O=E;E=M,M=O}if(E>d&&(d=E),M<g&&(g=M),d>g)return null}return d}function UP(a,n,s,h,d,g,_,b,E,M,O){const B=h-a,F=d-n,q=g-s,H=_-a,K=b-n,re=E-s,ue=O[1]*re-O[2]*K,ye=O[2]*H-O[0]*re,le=O[0]*K-O[1]*H,ge=B*ue+F*ye+q*le;if(Math.abs(ge)<1e-15)return null;const be=1/ge,_e=M[0]-a,Fe=M[1]-n,Re=M[2]-s,Ye=(_e*ue+Fe*ye+Re*le)*be;if(Ye<0||Ye>1)return null;const dt=Fe*q-Re*F,Ve=Re*B-_e*q,tt=_e*F-Fe*B,it=(O[0]*dt+O[1]*Ve+O[2]*tt)*be;return it<0||Ye+it>1?null:(H*dt+K*Ve+re*tt)*be}function VP(a,n,s){return(a-n)/(s-n)}function GP(a,n,s,h,d,g,_,b,E){const M=1<<s,O=g-h,B=_-d,F=(a+1)/M*O+h,q=(n+0)/M*B+d,H=(n+1)/M*B+d;b[0]=(a+0)/M*O+h,b[1]=q,E[0]=F,E[1]=H}class qP{constructor(n){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=n,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const s=function(g){const _=Math.ceil(Math.log2(g.dim/8)),b=[];let E=Math.ceil(Math.pow(2,_));const M=1/E,O=(q,H,K,re,ue)=>{const ye=re?1:0,le=(q+1)*K-ye,ge=H*K,be=(H+1)*K-ye;ue[0]=q*K,ue[1]=ge,ue[2]=le,ue[3]=be};let B=new NP(E);const F=[];for(let q=0;q<E*E;q++){O(q%E,Math.floor(q/E),M,!1,F);const H=fc(F[0],F[1],g),K=fc(F[2],F[1],g),re=fc(F[2],F[3],g),ue=fc(F[0],F[3],g);B.minimums.push(Math.min(H,K,re,ue)),B.maximums.push(Math.max(H,K,re,ue)),B.leaves.push(1)}for(b.push(B),E/=2;E>=1;E/=2){const q=b[b.length-1];B=new NP(E);for(let H=0;H<E*E;H++){O(H%E,Math.floor(H/E),2,!0,F);const K=q.getElevation(F[0],F[1]),re=q.getElevation(F[2],F[1]),ue=q.getElevation(F[2],F[3]),ye=q.getElevation(F[0],F[3]),le=q.isLeaf(F[0],F[1]),ge=q.isLeaf(F[2],F[1]),be=q.isLeaf(F[2],F[3]),_e=q.isLeaf(F[0],F[3]),Fe=Math.min(K.min,re.min,ue.min,ye.min),Re=Math.max(K.max,re.max,ue.max,ye.max),Ye=le&&ge&&be&&_e;B.maximums.push(Re),B.minimums.push(Fe),B.leaves.push(Re-Fe<=5&&Ye?1:0)}b.push(B)}return b}(this.dem),h=s.length-1,d=s[h];this._addNode(d.minimums[0],d.maximums[0],d.leaves[0]),this._construct(s,0,0,h,0)}raycastRoot(n,s,h,d,g,_,b=1){return jP([n,s,-100],[h,d,this.maximums[0]*b],g,_)}raycast(n,s,h,d,g,_,b=1){if(!this.nodeCount)return null;const E=this.raycastRoot(n,s,h,d,g,_,b);if(E==null)return null;const M=[],O=[],B=[],F=[],q=[{idx:0,t:E,nodex:0,nodey:0,depth:0}];for(;q.length>0;){const{idx:H,t:K,nodex:re,nodey:ue,depth:ye}=q.pop();if(this.leaves[H]){GP(re,ue,ye,n,s,h,d,B,F);const ge=1<<ye,be=(re+0)/ge,_e=(re+1)/ge,Fe=(ue+0)/ge,Re=(ue+1)/ge,Ye=fc(be,Fe,this.dem)*b,dt=fc(_e,Fe,this.dem)*b,Ve=fc(_e,Re,this.dem)*b,tt=fc(be,Re,this.dem)*b,it=UP(B[0],B[1],Ye,F[0],B[1],dt,F[0],F[1],Ve,g,_),lt=UP(F[0],F[1],Ve,B[0],F[1],tt,B[0],B[1],Ye,g,_),pt=Math.min(it!==null?it:Number.MAX_VALUE,lt!==null?lt:Number.MAX_VALUE);if(pt!==Number.MAX_VALUE)return pt;{const Ge=Hp([],g,_,K);if(WP(Ye,dt,tt,Ve,VP(Ge[0],B[0],F[0]),VP(Ge[1],B[1],F[1]))>=Ge[2])return K}continue}let le=0;for(let ge=0;ge<this._siblingOffset.length;ge++){GP((re<<1)+this._siblingOffset[ge][0],(ue<<1)+this._siblingOffset[ge][1],ye+1,n,s,h,d,B,F),B[2]=-100,F[2]=this.maximums[this.childOffsets[H]+ge]*b;const be=jP(B,F,g,_);if(be!=null){const _e=be;M[ge]=_e;let Fe=!1;for(let Re=0;Re<le&&!Fe;Re++)_e>=M[O[Re]]&&(O.splice(Re,0,ge),Fe=!0);Fe||(O[le]=ge),le++}}for(let ge=0;ge<le;ge++){const be=O[ge];q.push({idx:this.childOffsets[H]+be,t:M[be],nodex:(re<<1)+this._siblingOffset[be][0],nodey:(ue<<1)+this._siblingOffset[be][1],depth:ye+1})}}return null}_addNode(n,s,h){return this.minimums.push(n),this.maximums.push(s),this.leaves.push(h),this.childOffsets.push(0),this.nodeCount++}_construct(n,s,h,d,g){if(n[d].isLeaf(s,h)===1)return;this.childOffsets[g]||(this.childOffsets[g]=this.nodeCount);const _=d-1,b=n[_];let E=0,M=0;for(let O=0;O<this._siblingOffset.length;O++){const B=2*s+this._siblingOffset[O][0],F=2*h+this._siblingOffset[O][1],q=b.getElevation(B,F),H=b.isLeaf(B,F),K=this._addNode(q.min,q.max,H);H&&(E|=1<<O),M||(M=K)}for(let O=0;O<this._siblingOffset.length;O++)E&1<<O||this._construct(n,2*s+this._siblingOffset[O][0],2*h+this._siblingOffset[O][1],_,M+O)}}function WP(a,n,s,h,d,g){return Pr(Pr(a,s,g),Pr(n,h,g),d)}function fc(a,n,s){const h=s.dim,d=Be(a*h-.5,0,h-1),g=Be(n*h-.5,0,h-1),_=Math.floor(d),b=Math.floor(g),E=Math.min(_+1,h-1),M=Math.min(b+1,h-1);return WP(s.get(_,b),s.get(E,b),s.get(_,M),s.get(E,M),d-_,g-b)}const HP={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function Dj(a,n,s){return(256*a*256+256*n+s)/10-1e4}function Rj(a,n,s){return 256*a+n+s/256-32768}class vv{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(n,s,h,d=!1,g=!1){if(this.uid=n,s.height!==s.width)throw new RangeError("DEM tiles must be square");if(h&&h!=="mapbox"&&h!=="terrarium")return Qe(`"${h}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=s.height;const _=this.dim=s.height-2,b=new Uint32Array(s.data.buffer);if(this.pixels=new Uint8Array(s.data.buffer),this.encoding=h||"mapbox",this.borderReady=d,!d){for(let E=0;E<_;E++)b[this._idx(-1,E)]=b[this._idx(0,E)],b[this._idx(_,E)]=b[this._idx(_-1,E)],b[this._idx(E,-1)]=b[this._idx(E,0)],b[this._idx(E,_)]=b[this._idx(E,_-1)];b[this._idx(-1,-1)]=b[this._idx(0,0)],b[this._idx(_,-1)]=b[this._idx(_-1,0)],b[this._idx(-1,_)]=b[this._idx(0,_-1)],b[this._idx(_,_)]=b[this._idx(_-1,_-1)],g&&this._buildQuadTree()}}_buildQuadTree(){this._tree=new qP(this)}get(n,s,h=!1){h&&(n=Be(n,-1,this.dim),s=Be(s,-1,this.dim));const d=4*this._idx(n,s);return(this.encoding==="terrarium"?Rj:Dj)(this.pixels[d],this.pixels[d+1],this.pixels[d+2])}static getUnpackVector(n){return HP[n]}get unpackVector(){return HP[this.encoding]}_idx(n,s){if(n<-1||n>=this.dim+1||s<-1||s>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(s+1)*this.stride+(n+1)}static pack(n,s){const h=[0,0,0,0],d=vv.getUnpackVector(s);let g=Math.floor((n+d[3])/d[2]);return h[2]=g%256,g=Math.floor(g/256),h[1]=g%256,g=Math.floor(g/256),h[0]=g,h}getPixels(){return new Io({width:this.stride,height:this.stride},this.pixels)}backfillBorder(n,s,h){if(this.dim!==n.dim)throw new Error("dem dimension mismatch");let d=s*this.dim,g=s*this.dim+this.dim,_=h*this.dim,b=h*this.dim+this.dim;switch(s){case-1:d=g-1;break;case 1:g=d+1}switch(h){case-1:_=b-1;break;case 1:b=_+1}const E=-s*this.dim,M=-h*this.dim;for(let O=_;O<b;O++)for(let B=d;B<g;B++){const F=4*this._idx(B,O),q=4*this._idx(B+E,O+M);this.pixels[F+0]=n.pixels[q+0],this.pixels[F+1]=n.pixels[q+1],this.pixels[F+2]=n.pixels[q+2],this.pixels[F+3]=n.pixels[q+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}Dt(vv,"DEMData"),Dt(qP,"DemMinMaxQuadTree",{omit:["dem"]});class Lj{constructor(n,s){this.max=n,this.onRemove=s,this.reset()}reset(){for(const n in this.data)for(const s of this.data[n])s.timeout&&clearTimeout(s.timeout),this.onRemove(s.value);return this.data={},this.order=[],this}add(n,s,h){const d=n.wrapped().key;this.data[d]===void 0&&(this.data[d]=[]);const g={value:s,timeout:void 0};if(h!==void 0&&(g.timeout=setTimeout(()=>{this.remove(n,g)},h)),this.data[d].push(g),this.order.push(d),this.order.length>this.max){const _=this._getAndRemoveByKey(this.order[0]);_&&this.onRemove(_)}return this}has(n){return n.wrapped().key in this.data}getAndRemove(n){return this.has(n)?this._getAndRemoveByKey(n.wrapped().key):null}_getAndRemoveByKey(n){const s=this.data[n].shift();return s.timeout&&clearTimeout(s.timeout),this.data[n].length===0&&delete this.data[n],this.order.splice(this.order.indexOf(n),1),s.value}getByKey(n){const s=this.data[n];return s?s[0].value:null}get(n){return this.has(n)?this.data[n.wrapped().key][0].value:null}remove(n,s){if(!this.has(n))return this;const h=n.wrapped().key,d=s===void 0?0:this.data[h].indexOf(s),g=this.data[h][d];return this.data[h].splice(d,1),g.timeout&&clearTimeout(g.timeout),this.data[h].length===0&&delete this.data[h],this.onRemove(g.value),this.order.splice(this.order.indexOf(h),1),this}setMaxSize(n){for(this.max=n;this.order.length>this.max;){const s=this._getAndRemoveByKey(this.order[0]);s&&this.onRemove(s)}return this}filter(n){const s=[];for(const h in this.data)for(const d of this.data[h])n(d.value)||s.push(d);for(const h of s)this.remove(h.value.tileID,h)}}class gf{constructor(n,s,h){this.func=n,this.mask=s,this.range=h}}gf.ReadOnly=!1,gf.ReadWrite=!0,gf.disabled=new gf(519,gf.ReadOnly,[0,1]);const fw=7680;class dw{constructor(n,s,h,d,g,_){this.test=n,this.ref=s,this.mask=h,this.fail=d,this.depthFail=g,this.pass=_}}dw.disabled=new dw({func:519,mask:0},0,0,fw,fw,fw);class Es{constructor(n,s,h){this.blendFunction=n,this.blendColor=s,this.mask=h}}Es.Replace=[1,0],Es.disabled=new Es(Es.Replace,zn.transparent,[!1,!1,!1,!1]),Es.unblended=new Es(Es.Replace,zn.transparent,[!0,!0,!0,!0]),Es.alphaBlended=new Es([1,771],zn.transparent,[!0,!0,!0,!0]);const pw=1029,mw=2305;class Ha{constructor(n,s,h){this.enable=n,this.mode=s,this.frontFace=h}}Ha.disabled=new Ha(!1,pw,mw),Ha.backCCW=new Ha(!0,pw,mw),Ha.backCW=new Ha(!0,pw,2304),Ha.frontCW=new Ha(!0,1028,2304),Ha.frontCCW=new Ha(!0,1028,mw);class Bu extends La{constructor(n,s,h){super(),this.id=n,this._onlySymbols=h,s.on("data",d=>{d.dataType==="source"&&d.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&d.dataType==="source"&&d.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),s.on("error",()=>{this._sourceErrored=!0}),this._source=s,this._tiles={},this._cache=new Lj(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=s.minTileCacheSize,this._maxTileCacheSize=s.maxTileCacheSize,this._loadedParentTiles={},this._coveredTiles={},this._state=new Oj,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(n){this.map=n,this._minTileCacheSize=this._minTileCacheSize===void 0&&n?n._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&n?n._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const n in this._tiles){const s=this._tiles[n];if(s.state!=="loaded"&&s.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const n=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,n&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(n,s){return n.isSymbolTile=this._onlySymbols,this._source.loadTile(n,s)}_unloadTile(n){if(this._source.unloadTile)return this._source.unloadTile(n,()=>{})}_abortTile(n){if(this._source.abortTile)return this._source.abortTile(n,()=>{})}serialize(){return this._source.serialize()}prepare(n){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const s in this._tiles){const h=this._tiles[s];h.upload(n),h.prepare(this.map.style.imageManager)}}getIds(){return nt(this._tiles).map(n=>n.tileID).sort(ZP).map(n=>n.key)}getRenderableIds(n){const s=[];for(const h in this._tiles)this._isIdRenderable(+h,n)&&s.push(this._tiles[h]);return n?s.sort((h,d)=>{const g=h.tileID,_=d.tileID,b=new W(g.canonical.x,g.canonical.y)._rotate(this.transform.angle),E=new W(_.canonical.x,_.canonical.y)._rotate(this.transform.angle);return g.overscaledZ-_.overscaledZ||E.y-b.y||E.x-b.x}).map(h=>h.tileID.key):s.map(h=>h.tileID).sort(ZP).map(h=>h.key)}hasRenderableParent(n){const s=this.findLoadedParent(n,0);return!!s&&this._isIdRenderable(s.tileID.key)}_isIdRenderable(n,s){return this._tiles[n]&&this._tiles[n].hasData()&&!this._coveredTiles[n]&&(s||!this._tiles[n].holdingForFade())}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const n in this._tiles)this._tiles[n].state!=="errored"&&this._reloadTile(+n,"reloading")}}_reloadTile(n,s){const h=this._tiles[n];h&&(h.state!=="loading"&&(h.state=s),this._loadTile(h,this._tileLoaded.bind(this,h,n,s)))}_tileLoaded(n,s,h,d){if(d)if(n.state="errored",d.status!==404)this._source.fire(new ls(d,{tile:n}));else if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const g=this.map.painter.terrain;this.update(this.transform,g.getScaledDemTileSize(),!0),g.resetTileLookupCache(this.id)}else this.update(this.transform);else n.timeAdded=zr.now(),h==="expired"&&(n.refreshedUponExpiration=!0),this._setTileReloadTimer(s,n),this._source.type==="raster-dem"&&n.dem&&this._backfillDEM(n),this._state.initializeTileState(n,this.map?this.map.painter:null),this._source.fire(new Wr("data",{dataType:"source",tile:n,coord:n.tileID,sourceCacheId:this.id}))}_backfillDEM(n){const s=this.getRenderableIds();for(let d=0;d<s.length;d++){const g=s[d];if(n.neighboringTiles&&n.neighboringTiles[g]){const _=this.getTileByID(g);h(n,_),h(_,n)}}function h(d,g){if(!d.dem||d.dem.borderReady)return;d.needsHillshadePrepare=!0,d.needsDEMTextureUpload=!0;let _=g.tileID.canonical.x-d.tileID.canonical.x;const b=g.tileID.canonical.y-d.tileID.canonical.y,E=Math.pow(2,d.tileID.canonical.z),M=g.tileID.key;_===0&&b===0||Math.abs(b)>1||(Math.abs(_)>1&&(Math.abs(_+E)===1?_+=E:Math.abs(_-E)===1&&(_-=E)),g.dem&&d.dem&&(d.dem.backfillBorder(g.dem,_,b),d.neighboringTiles&&d.neighboringTiles[M]&&(d.neighboringTiles[M].backfilled=!0)))}}getTile(n){return this.getTileByID(n.key)}getTileByID(n){return this._tiles[n]}_retainLoadedChildren(n,s,h,d){for(const g in this._tiles){let _=this._tiles[g];if(d[g]||!_.hasData()||_.tileID.overscaledZ<=s||_.tileID.overscaledZ>h)continue;let b=_.tileID;for(;_&&_.tileID.overscaledZ>s+1;){const M=_.tileID.scaledTo(_.tileID.overscaledZ-1);_=this._tiles[M.key],_&&_.hasData()&&(b=M)}let E=b;for(;E.overscaledZ>s;)if(E=E.scaledTo(E.overscaledZ-1),n[E.key]){d[b.key]=b;break}}}findLoadedParent(n,s){if(n.key in this._loadedParentTiles){const h=this._loadedParentTiles[n.key];return h&&h.tileID.overscaledZ>=s?h:null}for(let h=n.overscaledZ-1;h>=s;h--){const d=n.scaledTo(h),g=this._getLoadedTile(d);if(g)return g}}_getLoadedTile(n){const s=this._tiles[n.key];return s&&s.hasData()?s:this._cache.getByKey(this._source.reparseOverscaled?n.wrapped().key:n.canonical.key)}updateCacheSize(n,s){s=s||this._source.tileSize;const h=Math.ceil(n.width/s)+1,d=Math.ceil(n.height/s)+1,g=Math.floor(h*d*5),_=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,g):g,b=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,_):_;this._cache.setMaxSize(b)}handleWrapJump(n){const s=Math.round((n-(this._prevLng===void 0?n:this._prevLng))/360);if(this._prevLng=n,s){const h={};for(const d in this._tiles){const g=this._tiles[d];g.tileID=g.tileID.unwrapTo(g.tileID.wrap+s),h[g.tileID.key]=g}this._tiles=h;for(const d in this._timers)clearTimeout(this._timers[d]),delete this._timers[d];for(const d in this._tiles)this._setTileReloadTimer(+d,this._tiles[d])}}update(n,s,h){if(this.transform=n,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!h)return;let d;this.updateCacheSize(n,s),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used||this.usedForTerrain?this._source.tileID?d=n.getVisibleUnwrappedCoordinates(this._source.tileID).map(b=>new io(b.canonical.z,b.wrap,b.canonical.z,b.canonical.x,b.canonical.y)):(d=n.coveringTiles({tileSize:s||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!h,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain}),this._source.hasTile&&(d=d.filter(b=>this._source.hasTile(b)))):d=[];const g=this._updateRetainedTiles(d);if(XP(this._source.type)&&d.length!==0){const b={},E={},M=Object.keys(g);for(const B of M){const F=g[B],q=this._tiles[B];if(!q||q.fadeEndTime&&q.fadeEndTime<=zr.now())continue;const H=this.findLoadedParent(F,Math.max(F.overscaledZ-Bu.maxOverzooming,this._source.minzoom));H&&(this._addTile(H.tileID),b[H.tileID.key]=H.tileID),E[B]=F}const O=d[d.length-1].overscaledZ;for(const B in this._tiles){const F=this._tiles[B];if(g[B]||!F.hasData())continue;let q=F.tileID;for(;q.overscaledZ>O;){q=q.scaledTo(q.overscaledZ-1);const H=this._tiles[q.key];if(H&&H.hasData()&&E[q.key]){g[B]=F.tileID;break}}}for(const B in b)g[B]||(this._coveredTiles[B]=!0,g[B]=b[B])}for(const b in g)this._tiles[b].clearFadeHold();const _=function(b,E){const M=[];for(const O in b)O in E||M.push(O);return M}(this._tiles,g);for(const b of _){const E=this._tiles[b];E.hasSymbolBuckets&&!E.holdingForFade()?E.setHoldDuration(this.map._fadeDuration):E.hasSymbolBuckets&&!E.symbolFadeFinished()||this._removeTile(+b)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const n in this._tiles)this._tiles[n].holdingForFade()&&this._removeTile(+n)}_updateRetainedTiles(n){const s={};if(n.length===0)return s;const h={},d=n.reduce((M,O)=>Math.min(M,O.overscaledZ),1/0),g=n[0].overscaledZ,_=Math.max(g-Bu.maxOverzooming,this._source.minzoom),b=Math.max(g+Bu.maxUnderzooming,this._source.minzoom),E={};for(const M of n){const O=this._addTile(M);s[M.key]=M,O.hasData()||d<this._source.maxzoom&&(E[M.key]=M)}this._retainLoadedChildren(E,d,b,s);for(const M of n){let O=this._tiles[M.key];if(O.hasData())continue;if(M.canonical.z>=this._source.maxzoom){const F=M.children(this._source.maxzoom)[0],q=this.getTile(F);if(q&&q.hasData()){s[F.key]=F;continue}}else{const F=M.children(this._source.maxzoom);if(s[F[0].key]&&s[F[1].key]&&s[F[2].key]&&s[F[3].key])continue}let B=O.wasRequested();for(let F=M.overscaledZ-1;F>=_;--F){const q=M.scaledTo(F);if(h[q.key]||(h[q.key]=!0,O=this.getTile(q),!O&&B&&(O=this._addTile(q)),O&&(s[q.key]=q,B=O.wasRequested(),O.hasData())))break}}return s}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const n in this._tiles){const s=[];let h,d=this._tiles[n].tileID;for(;d.overscaledZ>0;){if(d.key in this._loadedParentTiles){h=this._loadedParentTiles[d.key];break}s.push(d.key);const g=d.scaledTo(d.overscaledZ-1);if(h=this._getLoadedTile(g),h)break;d=g}for(const g of s)this._loadedParentTiles[g]=h}}_addTile(n){let s=this._tiles[n.key];if(s)return s;s=this._cache.getAndRemove(n),s&&(this._setTileReloadTimer(n.key,s),s.tileID=n,this._state.initializeTileState(s,this.map?this.map.painter:null),this._cacheTimers[n.key]&&(clearTimeout(this._cacheTimers[n.key]),delete this._cacheTimers[n.key],this._setTileReloadTimer(n.key,s)));const h=!!s;if(!h){const d=this.map?this.map.painter:null;s=new hw(n,this._source.tileSize*n.overscaleFactor(),this.transform.tileZoom,d,this._isRaster),this._loadTile(s,this._tileLoaded.bind(this,s,n.key,s.state))}return s?(s.uses++,this._tiles[n.key]=s,h||this._source.fire(new Wr("dataloading",{tile:s,coord:s.tileID,dataType:"source"})),s):null}_setTileReloadTimer(n,s){n in this._timers&&(clearTimeout(this._timers[n]),delete this._timers[n]);const h=s.getExpiryTimeout();h&&(this._timers[n]=setTimeout(()=>{this._reloadTile(n,"expired"),delete this._timers[n]},h))}_removeTile(n){const s=this._tiles[n];s&&(s.uses--,delete this._tiles[n],this._timers[n]&&(clearTimeout(this._timers[n]),delete this._timers[n]),s.uses>0||(s.hasData()&&s.state!=="reloading"?this._cache.add(s.tileID,s,s.getExpiryTimeout()):(s.aborted=!0,this._abortTile(s),this._unloadTile(s))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const n in this._tiles)this._removeTile(+n);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(n,s,h){const d=[],g=this.transform;if(!g)return d;const _=g.projection.name==="globe",b=vs(g.center.lng);for(const E in this._tiles){const M=this._tiles[E];if(h&&M.clearQueryDebugViz(),M.holdingForFade())continue;let O;if(_){const B=M.tileID.canonical;if(B.z===0){const F=[Math.abs(Be(b,..._m(B,-1))-b),Math.abs(Be(b,..._m(B,1))-b)];O=[0,2*F.indexOf(Math.min(...F))-1]}else{const F=[Math.abs(Be(b,..._m(B,-1))-b),Math.abs(Be(b,..._m(B,0))-b),Math.abs(Be(b,..._m(B,1))-b)];O=[F.indexOf(Math.min(...F))-1]}}else O=[0];for(const B of O){const F=n.containsTile(M,g,s,B);F&&d.push(F)}}return d}getVisibleCoordinates(n){const s=this.getRenderableIds(n).map(h=>this._tiles[h].tileID);for(const h of s)h.projMatrix=this.transform.calculateProjMatrix(h.toUnwrapped());return s}hasTransition(){if(this._source.hasTransition())return!0;if(XP(this._source.type))for(const n in this._tiles){const s=this._tiles[n];if(s.fadeEndTime!==void 0&&s.fadeEndTime>=zr.now())return!0}return!1}setFeatureState(n,s,h){this._state.updateState(n=n||"_geojsonTileLayer",s,h)}removeFeatureState(n,s,h){this._state.removeFeatureState(n=n||"_geojsonTileLayer",s,h)}getFeatureState(n,s){return this._state.getState(n=n||"_geojsonTileLayer",s)}setDependencies(n,s,h){const d=this._tiles[n];d&&d.setDependencies(s,h)}reloadTilesForDependencies(n,s){for(const h in this._tiles)this._tiles[h].hasDependency(n,s)&&this._reloadTile(+h,"reloading");this._cache.filter(h=>!h.hasDependency(n,s))}_preloadTiles(n,s){const h=new Map,d=Array.isArray(n)?n:[n],g=this.map.painter.terrain,_=this.usedForTerrain&&g?g.getScaledDemTileSize():this._source.tileSize;for(const b of d){const E=b.coveringTiles({tileSize:_,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const M of E)h.set(M.key,M);this.usedForTerrain&&b.updateElevation(!1)}He(Array.from(h.values()),(b,E)=>{const M=new hw(b,this._source.tileSize*b.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(M,O=>{this._source.type==="raster-dem"&&M.dem&&this._backfillDEM(M),E(O,M)})},s)}}function ZP(a,n){const s=Math.abs(2*a.wrap)-+(a.wrap<0),h=Math.abs(2*n.wrap)-+(n.wrap<0);return a.overscaledZ-n.overscaledZ||h-s||n.canonical.y-a.canonical.y||n.canonical.x-a.canonical.x}function XP(a){return a==="raster"||a==="image"||a==="video"||a==="custom"}function _m(a,n){const s=1<<a.z;return[a.x/s+n,(a.x+1)/s+n]}Bu.maxOverzooming=10,Bu.maxUnderzooming=3;class xv{constructor(n,s,h){this._demTile=n,this._dem=this._demTile.dem,this._scale=s,this._offset=h}static create(n,s,h){const d=h||n.findDEMTileFor(s);if(!d||!d.dem)return;const g=d.dem,_=d.tileID,b=1<<s.canonical.z-_.canonical.z;return new xv(d,d.tileSize/rr/b,[(s.canonical.x/b-_.canonical.x)*g.dim,(s.canonical.y/b-_.canonical.y)*g.dim])}tileCoordToPixel(n,s){const h=s*this._scale+this._offset[1],d=Math.floor(n*this._scale+this._offset[0]),g=Math.floor(h);return new W(d,g)}getElevationAt(n,s,h,d){const g=n*this._scale+this._offset[0],_=s*this._scale+this._offset[1],b=Math.floor(g),E=Math.floor(_),M=this._dem;return d=!!d,h?Pr(Pr(M.get(b,E,d),M.get(b,E+1,d),_-E),Pr(M.get(b+1,E,d),M.get(b+1,E+1,d),_-E),g-b):M.get(b,E,d)}getElevationAtPixel(n,s,h){return this._dem.get(n,s,!!h)}getMeterToDEM(n){return(1<<this._demTile.tileID.canonical.z)*Wa(1,n)*this._dem.stride}}class KP{constructor(n,s){this.tileID=n,this.x=n.canonical.x,this.y=n.canonical.y,this.z=n.canonical.z,this.grid=new ec(rr,16,0),this.featureIndexArray=new NM,this.promoteId=s}insert(n,s,h,d,g,_=0){const b=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(h,d,g,_);const E=this.grid;for(let M=0;M<s.length;M++){const O=s[M],B=[1/0,1/0,-1/0,-1/0];for(let F=0;F<O.length;F++){const q=O[F];B[0]=Math.min(B[0],q.x),B[1]=Math.min(B[1],q.y),B[2]=Math.max(B[2],q.x),B[3]=Math.max(B[3],q.y)}B[0]<rr&&B[1]<rr&&B[2]>=0&&B[3]>=0&&E.insert(b,B[0],B[1],B[2],B[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new Kb(new um(this.rawTileData)).layers,this.sourceLayerCoder=new LP(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const n in this.vtLayers)this.vtFeatures[n]=[]}return this.vtLayers}query(n,s,h,d){this.loadVTLayers();const g=n.params||{},_=Nh(g.filter),b=n.tileResult,E=n.transform,M=b.bufferedTilespaceBounds,O=this.grid.query(M.min.x,M.min.y,M.max.x,M.max.y,(H,K,re,ue)=>EC(b.bufferedTilespaceGeometry,H,K,re,ue));O.sort(zj);let B=null;E.elevation&&O.length>0&&(B=xv.create(E.elevation,this.tileID));const F={};let q;for(let H=0;H<O.length;H++){const K=O[H];if(K===q)continue;q=K;const re=this.featureIndexArray.get(K);let ue=null;this.loadMatchingFeature(F,re,_,g.layers,g.availableImages,s,h,d,(ye,le,ge,be=0)=>(ue||(ue=nl(ye,this.tileID.canonical,n.tileTransform)),le.queryIntersectsFeature(b,ye,ge,ue,this.z,n.transform,n.pixelPosMatrix,B,be)))}return F}loadMatchingFeature(n,s,h,d,g,_,b,E,M){const{featureIndex:O,bucketIndex:B,sourceLayerIndex:F,layoutVertexArrayOffset:q}=s,H=this.bucketLayerIDs[B];if(d&&!function(ye,le){for(let ge=0;ge<ye.length;ge++)if(le.indexOf(ye[ge])>=0)return!0;return!1}(d,H))return;const K=this.sourceLayerCoder.decode(F),re=this.vtLayers[K].feature(O);if(h.needGeometry){const ye=Du(re,!0);if(!h.filter(new ke(this.tileID.overscaledZ),ye,this.tileID.canonical))return}else if(!h.filter(new ke(this.tileID.overscaledZ),re))return;const ue=this.getId(re,K);for(let ye=0;ye<H.length;ye++){const le=H[ye];if(d&&d.indexOf(le)<0)continue;const ge=_[le];if(!ge)continue;let be={};ue!==void 0&&E&&(be=E.getState(ge.sourceLayer||"_geojsonTileLayer",ue));const _e=gt({},b[le]);_e.paint=YP(_e.paint,ge.paint,re,be,g),_e.layout=YP(_e.layout,ge.layout,re,be,g);const Fe=!M||M(re,ge,be,q);if(!Fe)continue;const Re=new zP(re,this.z,this.x,this.y,ue);Re.layer=_e;let Ye=n[le];Ye===void 0&&(Ye=n[le]=[]),Ye.push({featureIndex:O,feature:Re,intersectionZ:Fe})}}lookupSymbolFeatures(n,s,h,d,g,_,b,E){const M={};this.loadVTLayers();const O=Nh(g);for(const B of n)this.loadMatchingFeature(M,{bucketIndex:h,sourceLayerIndex:d,featureIndex:B,layoutVertexArrayOffset:0},O,_,b,E,s);return M}loadFeature(n){const{featureIndex:s,sourceLayerIndex:h}=n;this.loadVTLayers();const d=this.sourceLayerCoder.decode(h),g=this.vtFeatures[d];if(g[s])return g[s];const _=this.vtLayers[d].feature(s);return g[s]=_,_}hasLayer(n){for(const s of this.bucketLayerIDs)for(const h of s)if(n===h)return!0;return!1}getId(n,s){let h=n.id;if(this.promoteId){const d=typeof this.promoteId=="string"?this.promoteId:this.promoteId[s];d!=null&&(h=n.properties[d]),typeof h=="boolean"&&(h=Number(h))}return h}}function YP(a,n,s,h,d){return ir(a,(g,_)=>{const b=n instanceof $e?n.get(_):null;return b&&b.evaluate?b.evaluate(s,h,d):b})}function zj(a,n){return n-a}Dt(KP,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});class JP{constructor(n,s){this.width=n,this.height=s,this.nextRow=0,this.image=new il({width:n,height:s}),this.positions={},this.uploaded=!1}getDash(n,s){const h=this.getKey(n,s);return this.positions[h]}trim(){const n=this.width,s=this.height=Zt(this.nextRow);this.image.resize({width:n,height:s})}getKey(n,s){return n.join(",")+s}getDashRanges(n,s,h){const d=[];let g=n.length%2==1?-n[n.length-1]*h:0,_=n[0]*h,b=!0;d.push({left:g,right:_,isDash:b,zeroLength:n[0]===0});let E=n[0];for(let M=1;M<n.length;M++){b=!b;const O=n[M];g=E*h,E+=O,_=E*h,d.push({left:g,right:_,isDash:b,zeroLength:O===0})}return d}addRoundDash(n,s,h){const d=s/2;for(let g=-h;g<=h;g++){const _=this.width*(this.nextRow+h+g);let b=0,E=n[b];for(let M=0;M<this.width;M++){M/E.right>1&&(E=n[++b]);const O=Math.abs(M-E.left),B=Math.abs(M-E.right),F=Math.min(O,B);let q;const H=g/h*(d+1);if(E.isDash){const K=d-Math.abs(H);q=Math.sqrt(F*F+K*K)}else q=d-Math.sqrt(F*F+H*H);this.image.data[_+M]=Math.max(0,Math.min(255,q+128))}}}addRegularDash(n,s){for(let E=n.length-1;E>=0;--E){const M=n[E],O=n[E+1];M.zeroLength?n.splice(E,1):O&&O.isDash===M.isDash&&(O.left=M.left,n.splice(E,1))}const h=n[0],d=n[n.length-1];h.isDash===d.isDash&&(h.left=d.left-this.width,d.right=h.right+this.width);const g=this.width*this.nextRow;let _=0,b=n[_];for(let E=0;E<this.width;E++){E/b.right>1&&(b=n[++_]);const M=Math.abs(E-b.left),O=Math.abs(E-b.right),B=Math.min(M,O);this.image.data[g+E]=Math.max(0,Math.min(255,(b.isDash?B:-B)+s+128))}}addDash(n,s){const h=this.getKey(n,s);if(this.positions[h])return this.positions[h];const d=s==="round",g=d?7:0,_=2*g+1;if(this.nextRow+_>this.height)return Qe("LineAtlas out of space"),null;n.length===0&&n.push(1);let b=0;for(let O=0;O<n.length;O++)n[O]<0&&(Qe("Negative value is found in line dasharray, replacing values with 0"),n[O]=0),b+=n[O];if(b!==0){const O=this.width/b,B=this.getDashRanges(n,this.width,O);d?this.addRoundDash(B,O,g):this.addRegularDash(B,s==="square"?.5*O:0)}const E=this.nextRow+g;this.nextRow+=_;const M={tl:[E,g],br:[b,0]};return this.positions[h]=M,M}}Dt(JP,"LineAtlas");class QP{constructor(n){const s={},h=[];for(const b in n){const E=n[b],M=s[b]={};for(const O in E.glyphs){const B=E.glyphs[+O];if(!B||B.bitmap.width===0||B.bitmap.height===0)continue;const F=B.metrics.localGlyph?2:1,q={x:0,y:0,w:B.bitmap.width+2*F,h:B.bitmap.height+2*F};h.push(q),M[O]=q}}const{w:d,h:g}=Qb(h),_=new il({width:d||1,height:g||1});for(const b in n){const E=n[b];for(const M in E.glyphs){const O=E.glyphs[+M];if(!O||O.bitmap.width===0||O.bitmap.height===0)continue;const B=s[b][M],F=O.metrics.localGlyph?2:1;il.copy(O.bitmap,_,{x:0,y:0},{x:B.x+F,y:B.y+F},O.bitmap)}}this.image=_,this.positions=s}}Dt(QP,"GlyphAtlas");class Bj{constructor(n){this.tileID=new io(n.tileID.overscaledZ,n.tileID.wrap,n.tileID.canonical.z,n.tileID.canonical.x,n.tileID.canonical.y),this.tileZoom=n.tileZoom,this.uid=n.uid,this.zoom=n.zoom,this.canonical=n.tileID.canonical,this.pixelRatio=n.pixelRatio,this.tileSize=n.tileSize,this.source=n.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=n.showCollisionBoxes,this.collectResourceTiming=!!n.collectResourceTiming,this.returnDependencies=!!n.returnDependencies,this.promoteId=n.promoteId,this.enableTerrain=!!n.enableTerrain,this.isSymbolTile=n.isSymbolTile,this.tileTransform=zu(n.tileID.canonical,n.projection),this.projection=n.projection}parse(n,s,h,d,g){this.status="parsing",this.data=n,this.collisionBoxArray=new _b;const _=new LP(Object.keys(n.layers).sort()),b=new KP(this.tileID,this.promoteId);b.bucketLayerIDs=[];const E={},M=new JP(256,256),O={featureIndex:b,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:M,availableImages:h},B=s.familiesBySource[this.source];for(const be in B){const _e=n.layers[be];if(!_e)continue;let Fe=!1,Re=!1;for(const Ve of B[be])Ve[0].type==="symbol"?Fe=!0:Re=!0;if(this.isSymbolTile===!0&&!Fe||this.isSymbolTile===!1&&!Re)continue;_e.version===1&&Qe(`Vector tile source "${this.source}" layer "${be}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ye=_.encode(be),dt=[];for(let Ve=0;Ve<_e.length;Ve++){const tt=_e.feature(Ve),it=b.getId(tt,be);dt.push({feature:tt,id:it,index:Ve,sourceLayerIndex:Ye})}for(const Ve of B[be]){const tt=Ve[0];this.isSymbolTile!==void 0&&tt.type==="symbol"!==this.isSymbolTile||tt.minzoom&&this.zoom<Math.floor(tt.minzoom)||tt.maxzoom&&this.zoom>=tt.maxzoom||tt.visibility!=="none"&&(gw(Ve,this.zoom,h),(E[tt.id]=tt.createBucket({index:b.bucketLayerIDs.length,layers:Ve,zoom:this.zoom,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ye,sourceID:this.source,enableTerrain:this.enableTerrain,projection:this.projection.spec,availableImages:h})).populate(dt,O,this.tileID.canonical,this.tileTransform),b.bucketLayerIDs.push(Ve.map(it=>it.id)))}}let F,q,H,K;M.trim();const re={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},ue=ir(O.glyphDependencies,be=>Object.keys(be).map(Number));Object.keys(ue).length?d.send("getGlyphs",{uid:this.uid,stacks:ue},(be,_e)=>{F||(F=be,q=_e,ge.call(this))},void 0,!1,re):q={};const ye=Object.keys(O.iconDependencies);ye.length?d.send("getImages",{icons:ye,source:this.source,tileID:this.tileID,type:"icons"},(be,_e)=>{F||(F=be,H=_e,ge.call(this))},void 0,!1,re):H={};const le=Object.keys(O.patternDependencies);function ge(){if(F)return g(F);if(q&&H&&K){const be=new QP(q),_e=new lP(H,K);for(const Fe in E){const Re=E[Fe];Re instanceof cc?(gw(Re.layers,this.zoom,h),cj(Re,q,be.positions,H,_e.iconPositions,this.showCollisionBoxes,h,this.tileID.canonical,this.tileZoom,this.projection)):Re.hasPattern&&(Re instanceof iv||Re instanceof Q_||Re instanceof am)&&(gw(Re.layers,this.zoom,h),Re.addFeatures(O,this.tileID.canonical,_e.patternPositions,h,this.tileTransform))}this.status="done",g(null,{buckets:nt(E).filter(Fe=>!Fe.isEmpty()),featureIndex:b,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:be.image,lineAtlas:M,imageAtlas:_e,glyphMap:this.returnDependencies?q:null,iconMap:this.returnDependencies?H:null,glyphPositions:this.returnDependencies?be.positions:null})}}le.length?d.send("getImages",{icons:le,source:this.source,tileID:this.tileID,type:"patterns"},(be,_e)=>{F||(F=be,K=_e,ge.call(this))},void 0,!1,re):K={},ge.call(this)}}function gw(a,n,s){const h=new ke(n);for(const d of a)d.recalculate(h,s)}class eI{constructor(n){this.entries={},this.scheduler=n}request(n,s,h,d){const g=this.entries[n]=this.entries[n]||{callbacks:[]};if(g.result){const[_,b]=g.result;return this.scheduler?this.scheduler.add(()=>{d(_,b)},s):d(_,b),()=>{}}return g.callbacks.push(d),g.cancel||(g.cancel=h((_,b)=>{g.result=[_,b];for(const E of g.callbacks)this.scheduler?this.scheduler.add(()=>{E(_,b)},s):E(_,b);setTimeout(()=>delete this.entries[n],3e3)})),()=>{g.result||(g.callbacks=g.callbacks.filter(_=>_!==d),g.callbacks.length||(g.cancel(),delete this.entries[n]))}}}function tI(a,n,s){const h=JSON.stringify(a.request);return a.data&&(this.deduped.entries[h]={result:[null,a.data]}),this.deduped.request(h,{type:"parseTile",isSymbolTile:a.isSymbolTile,zoom:a.tileZoom},d=>{const g=jt(a.request,(_,b,E,M)=>{_?d(_):b&&d(null,{vectorTile:s?void 0:new Kb(new um(b)),rawData:b,cacheControl:E,expires:M})});return()=>{g.cancel(),d()}},n)}o.ARRAY_TYPE=Po,o.AUTH_ERR_MSG=kr,o.Aabb=no,o.Actor=class{constructor(a,n,s){this.target=a,this.parent=n,this.mapId=s,this.callbacks={},this.cancelCallbacks={},Tr(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.globalScope=Sr()?a:v,this.scheduler=new Ij}send(a,n,s,h,d=!1,g){const _=Math.round(1e18*Math.random()).toString(36).substring(0,10);s&&(s.metadata=g,this.callbacks[_]=s);const b=Kn(this.globalScope)?void 0:[];return this.target.postMessage({id:_,type:a,hasCallback:!!s,targetMapId:h,mustQueue:d,sourceMapId:this.mapId,data:bu(n,b)},b),{cancel:()=>{s&&delete this.callbacks[_],this.target.postMessage({id:_,type:"<cancel>",targetMapId:h,sourceMapId:this.mapId})}}}receive(a){const n=a.data,s=n.id;if(s&&(!n.targetMapId||this.mapId===n.targetMapId))if(n.type==="<cancel>"){const h=this.cancelCallbacks[s];delete this.cancelCallbacks[s],h&&h.cancel()}else if(n.mustQueue||Sr()){const h=this.callbacks[s];this.cancelCallbacks[s]=this.scheduler.add(()=>this.processTask(s,n),h&&h.metadata||{type:"message"})}else this.processTask(s,n)}processTask(a,n){if(n.type==="<response>"){const s=this.callbacks[a];delete this.callbacks[a],s&&(n.error?s(wu(n.error)):s(null,wu(n.data)))}else{const s=Kn(this.globalScope)?void 0:[],h=n.hasCallback?(g,_)=>{delete this.cancelCallbacks[a],this.target.postMessage({id:a,type:"<response>",sourceMapId:this.mapId,error:g?bu(g):null,data:bu(_,s)},s)}:g=>{},d=wu(n.data);if(this.parent[n.type])this.parent[n.type](n.sourceMapId,d,h);else if(this.parent.getWorkerSource){const g=n.type.split(".");this.parent.getWorkerSource(n.sourceMapId,g[0],d.source)[g[1]](d,h)}else h(new Error(`Could not find function ${n.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}},o.CanonicalTileID=nv,o.Color=zn,o.ColorMode=Es,o.CullFaceMode=Ha,o.DEMData=vv,o.DataConstantProperty=Pe,o.DedupedRequest=eI,o.DepthMode=gf,o.EXTENT=rr,o.Elevation=class{isDataAvailableAtPoint(a){const n=this._source();if(this.isUsingMockSource()||!n||a.y<0||a.y>1)return!1;const s=n.getSource().maxzoom,h=1<<s,d=Math.floor(a.x),g=Math.floor((a.x-d)*h),_=Math.floor(a.y*h),b=this.findDEMTileFor(new io(s,d,s,g,_));return!(!b||!b.dem)}getAtPointOrZero(a,n=0){return this.getAtPoint(a,n)||0}getAtPoint(a,n,s=!0){if(this.isUsingMockSource())return null;n==null&&(n=null);const h=this._source();if(!h||a.y<0||a.y>1)return n;const d=h.getSource().maxzoom,g=1<<d,_=Math.floor(a.x),b=a.x-_,E=new io(d,_,d,Math.floor(b*g),Math.floor(a.y*g)),M=this.findDEMTileFor(E);if(!M||!M.dem)return n;const O=M.dem,B=1<<M.tileID.canonical.z,F=(b*B-M.tileID.canonical.x)*O.dim,q=(a.y*B-M.tileID.canonical.y)*O.dim,H=Math.floor(F),K=Math.floor(q);return(s?this.exaggeration():1)*Pr(Pr(O.get(H,K),O.get(H,K+1),q-K),Pr(O.get(H+1,K),O.get(H+1,K+1),q-K),F-H)}getAtTileOffset(a,n,s){const h=1<<a.canonical.z;return this.getAtPointOrZero(new rf(a.wrap+(a.canonical.x+n/rr)/h,(a.canonical.y+s/rr)/h))}getAtTileOffsetFunc(a,n,s,h){return d=>{const g=this.getAtTileOffset(a,d.x,d.y),_=h.upVector(a.canonical,d.x,d.y);return qo(_,_,g*h.upVectorScale(a.canonical,n,s).metersToTile),_}}getForTilePoints(a,n,s,h){if(this.isUsingMockSource())return!1;const d=xv.create(this,a,h);return!!d&&(n.forEach(g=>{g[2]=this.exaggeration()*d.getElevationAt(g[0],g[1],s)}),!0)}getMinMaxForTile(a){if(this.isUsingMockSource())return null;const n=this.findDEMTileFor(a);if(!n||!n.dem)return null;const s=n.dem.tree,h=n.tileID,d=1<<a.canonical.z-h.canonical.z;let g=a.canonical.x/d-h.canonical.x,_=a.canonical.y/d-h.canonical.y,b=0;for(let E=0;E<a.canonical.z-h.canonical.z&&!s.leaves[b];E++){g*=2,_*=2;const M=2*Math.floor(_)+Math.floor(g);b=s.childOffsets[b]+M,g%=1,_%=1}return{min:this.exaggeration()*s.minimums[b],max:this.exaggeration()*s.maximums[b]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(a,n,s){throw new Error("Pure virtual method called.")}pointCoordinate(a){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(a){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}},o.ErrorEvent=ls,o.EvaluationParameters=ke,o.Event=Wr,o.Evented=La,o.FillExtrusionBucket=am,o.Frustum=Ib,o.FrustumCorners=Pb,o.GLOBE_RADIUS=ys,o.GLOBE_SCALE_MATCH_LATITUDE=45,o.GLOBE_ZOOM_THRESHOLD_MAX=6,o.GLOBE_ZOOM_THRESHOLD_MIN=5,o.GlobeSharedBuffers=class{constructor(a){this._createGrid(a),this._createPoles(a)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const a of this._poleSegments)a.destroy();for(const a of this._gridSegments)a.withSkirts.destroy(),a.withoutSkirts.destroy();if(this._wireframeIndexBuffer){this._wireframeIndexBuffer.destroy();for(const a of this._wireframeSegments)a.destroy()}}_fillGridMeshWithLods(a,n){const s=new qt,h=new Pi,d=[],g=a+1+2,_=n[0]+1,b=n[0]+1+(1+n.length),E=(M,O,B)=>{let F=M===g-1?M-2:M===0?M:M-1;return F+=B?24575:0,[F,O]};for(let M=0;M<g;++M)s.emplaceBack(...E(M,0,!0));for(let M=0;M<_;++M)for(let O=0;O<g;++O)s.emplaceBack(...E(O,M,(O===0||O===g-1)&&!0));for(let M=0;M<n.length;++M){const O=n[M];for(let B=0;B<g;++B)s.emplaceBack(...E(B,O,!0))}for(let M=0;M<n.length;++M){const O=h.length,B=n[M]+1+2,F=new Pi;for(let K=0;K<B-1;K++){const re=K===B-2,ue=re?g*(b-n.length+M-K):g;for(let ye=0;ye<g-1;ye++){const le=K*g+ye;K===0||re||ye===0||ye===g-2?(F.emplaceBack(le+1,le,le+ue),F.emplaceBack(le+ue,le+ue+1,le+1)):(h.emplaceBack(le+1,le,le+ue),h.emplaceBack(le+ue,le+ue+1,le+1))}}const q=Gn.simpleSegment(0,O,s.length,h.length-O);for(let K=0;K<F.uint16.length;K+=3)h.emplaceBack(F.uint16[K],F.uint16[K+1],F.uint16[K+2]);const H=Gn.simpleSegment(0,O,s.length,h.length-O);d.push({withoutSkirts:q,withSkirts:H})}return{vertices:s,indices:h,segments:d}}_createGrid(a){const n=this._fillGridMeshWithLods(ku,Kp);this._gridSegments=n.segments,this._gridBuffer=a.createVertexBuffer(n.vertices,Xp.members),this._gridIndexBuffer=a.createIndexBuffer(n.indices,!0)}_createPoles(a){const n=new Pi;for(let d=0;d<=ku;d++)n.emplaceBack(0,d+1,d+2);this._poleIndexBuffer=a.createIndexBuffer(n,!0);const s=new Co,h=new Co;this._poleSegments=[];for(let d=0,g=0;d<5;d++){const _=360/(1<<d);s.emplaceBack(0,-ys,0,.5,0),h.emplaceBack(0,-ys,0,.5,1);for(let b=0;b<=ku;b++){const E=b/ku,M=Pr(0,_,E),[O,B,F]=Qh(IF,kF,M,ys);s.emplaceBack(O,B,F,E,0),h.emplaceBack(O,B,F,E,1)}this._poleSegments.push(Gn.simpleSegment(g,0,66,64)),g+=66}this._poleNorthVertexBuffer=a.createVertexBuffer(s,aC,!1),this._poleSouthVertexBuffer=a.createVertexBuffer(h,aC,!1)}getGridBuffers(a,n){return[this._gridBuffer,this._gridIndexBuffer,n?this._gridSegments[a].withSkirts:this._gridSegments[a].withoutSkirts]}getPoleBuffers(a){return[this._poleNorthVertexBuffer,this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[a]]}getWirefameBuffers(a,n){if(!this._wireframeSegments){const s=new ms,h=ku,d=h+1+2,g=1;this._wireframeSegments=[];for(let _=0,b=0;_<Kp.length;_++){const E=Kp[_];for(let O=g;O<E+g;O++)for(let B=g;B<h+g;B++){const F=O*d+B;s.emplaceBack(F,F+1),s.emplaceBack(F,F+d),s.emplaceBack(F,F+d+1)}const M=E*h*3;this._wireframeSegments.push(Gn.simpleSegment(0,b,(E+1)*d,M)),b+=M}this._wireframeIndexBuffer=a.createIndexBuffer(s)}return[this._gridBuffer,this._wireframeIndexBuffer,this._wireframeSegments[n]]}},o.GlyphManager=df,o.ImagePosition=ew,o.LivePerformanceUtils=at,o.LngLat=Ir,o.LngLatBounds=ac,o.LocalGlyphMode=nw,o.MAX_MERCATOR_LATITUDE=ki,o.MercatorCoordinate=rf,o.ONE_EM=Oi,o.OverscaledTileID=io,o.PerformanceMarkers=De,o.Properties=ct,o.RGBAImage=Io,o.Ray=Cb,o.RequestManager=class{constructor(a,n,s){this._transformRequestFn=a,this._customAccessToken=n,this._silenceAuthErrors=!!s,this._createSkuToken()}_createSkuToken(){const a=function(){let n="";for(let s=0;s<10;s++)n+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",j,n].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=a.token,this._skuTokenExpiresAt=a.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(a,n){return this._transformRequestFn&&this._transformRequestFn(a,n)||{url:a}}normalizeStyleURL(a,n){if(!un(a))return a;const s=oi(a);return s.path=`/styles/v1${s.path}`,this._makeAPIURL(s,this._customAccessToken||n)}normalizeGlyphsURL(a,n){if(!un(a))return a;const s=oi(a);return s.path=`/fonts/v1${s.path}`,this._makeAPIURL(s,this._customAccessToken||n)}normalizeSourceURL(a,n,s,h){if(!un(a))return a;const d=oi(a);return d.path=`/v4/${d.authority}.json`,d.params.push("secure"),s&&d.params.push(`language=${s}`),h&&d.params.push(`worldview=${h}`),this._makeAPIURL(d,this._customAccessToken||n)}normalizeSpriteURL(a,n,s,h){const d=oi(a);return un(a)?(d.path=`/styles/v1${d.path}/sprite${n}${s}`,this._makeAPIURL(d,this._customAccessToken||h)):(d.path+=`${n}${s}`,di(d))}normalizeTileURL(a,n,s){if(this._isSkuTokenExpired()&&this._createSkuToken(),a&&!un(a))return a;const h=oi(a);h.path=h.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${n||s&&h.authority!=="raster"&&s===512?"@2x":""}${P.supported?".webp":"$1"}`),h.authority==="raster"?h.path=`/${T.RASTER_URL_PREFIX}${h.path}`:(h.path=h.path.replace(/^.+\/v4\//,"/"),h.path=`/${T.TILE_URL_VERSION}${h.path}`);const d=this._customAccessToken||function(g){for(const _ of g){const b=_.match(/^access_token=(.*)$/);if(b)return b[1]}return null}(h.params)||T.ACCESS_TOKEN;return T.REQUIRE_ACCESS_TOKEN&&d&&this._skuToken&&h.params.push(`sku=${this._skuToken}`),this._makeAPIURL(h,d)}canonicalizeTileURL(a,n){const s=oi(a);if(!s.path.match(/^(\/v4\/|\/raster\/v1\/)/)||!s.path.match(/\.[\w]+$/))return a;let h="mapbox://";s.path.match(/^\/raster\/v1\//)?h+=`raster/${s.path.replace(`/${T.RASTER_URL_PREFIX}/`,"")}`:h+=`tiles/${s.path.replace(`/${T.TILE_URL_VERSION}/`,"")}`;let d=s.params;return n&&(d=d.filter(g=>!g.match(/^access_token=/))),d.length&&(h+=`?${d.join("&")}`),h}canonicalizeTileset(a,n){const s=!!n&&un(n),h=[];for(const d of a.tiles||[])bn(d)?h.push(this.canonicalizeTileURL(d,s)):h.push(d);return h}_makeAPIURL(a,n){const s="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",h=oi(T.API_URL);if(a.protocol=h.protocol,a.authority=h.authority,a.protocol==="http"){const d=a.params.indexOf("secure");d>=0&&a.params.splice(d,1)}if(h.path!=="/"&&(a.path=`${h.path}${a.path}`),!T.REQUIRE_ACCESS_TOKEN)return di(a);if(n=n||T.ACCESS_TOKEN,!this._silenceAuthErrors){if(!n)throw new Error(`An API access token is required to use Mapbox GL. ${s}`);if(n[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${s}`)}return a.params=a.params.filter(d=>d.indexOf("access_token")===-1),a.params.push(`access_token=${n||""}`),di(a)}},o.ResourceType=Je,o.SegmentVector=Gn,o.SourceCache=Bu,o.StencilMode=dw,o.StructArrayLayout1ui2=gs,o.StructArrayLayout2f1f2i16=Mi,o.StructArrayLayout2i4=qt,o.StructArrayLayout2ui4=ms,o.StructArrayLayout3f12=Ci,o.StructArrayLayout3ui6=Pi,o.StructArrayLayout4i8=Ur,o.StructArrayLayout5f20=Co,o.Texture=ym,o.Tile=hw,o.Transitionable=yt,o.Uniform1f=F_,o.Uniform1i=class extends el{constructor(a){super(a),this.current=0}set(a,n,s){this.fetchUniformLocation(a,n)&&this.current!==s&&(this.current=s,this.gl.uniform1i(this.location,s))}},o.Uniform2f=class extends el{constructor(a){super(a),this.current=[0,0]}set(a,n,s){this.fetchUniformLocation(a,n)&&(s[0]===this.current[0]&&s[1]===this.current[1]||(this.current=s,this.gl.uniform2f(this.location,s[0],s[1])))}},o.Uniform3f=class extends el{constructor(a){super(a),this.current=[0,0,0]}set(a,n,s){this.fetchUniformLocation(a,n)&&(s[0]===this.current[0]&&s[1]===this.current[1]&&s[2]===this.current[2]||(this.current=s,this.gl.uniform3f(this.location,s[0],s[1],s[2])))}},o.Uniform4f=GM,o.UniformColor=qM,o.UniformMatrix2f=class extends el{constructor(a){super(a),this.current=mF}set(a,n,s){if(this.fetchUniformLocation(a,n)){for(let h=0;h<4;h++)if(s[h]!==this.current[h]){this.current=s,this.gl.uniformMatrix2fv(this.location,!1,s);break}}}},o.UniformMatrix3f=class extends el{constructor(a){super(a),this.current=pF}set(a,n,s){if(this.fetchUniformLocation(a,n)){for(let h=0;h<9;h++)if(s[h]!==this.current[h]){this.current=s,this.gl.uniformMatrix3fv(this.location,!1,s);break}}}},o.UniformMatrix4f=class extends el{constructor(a){super(a),this.current=dF}set(a,n,s){if(this.fetchUniformLocation(a,n)){if(s[12]!==this.current[12]||s[0]!==this.current[0])return this.current=s,void this.gl.uniformMatrix4fv(this.location,!1,s);for(let h=1;h<16;h++)if(s[h]!==this.current[h]){this.current=s,this.gl.uniformMatrix4fv(this.location,!1,s);break}}}},o.UnwrappedTileID=XC,o.ValidationError=Pt,o.VectorTileFeature=tv,o.VectorTileWorkerSource=class extends La{constructor(a,n,s,h,d){super(),this.actor=a,this.layerIndex=n,this.availableImages=s,this.loadVectorData=d||tI,this.loading={},this.loaded={},this.deduped=new eI(a.scheduler),this.isSpriteLoaded=h,this.scheduler=a.scheduler}loadTile(a,n){const s=a.uid,h=a&&a.request,d=h&&h.collectResourceTiming,g=this.loading[s]=new Bj(a);g.abort=this.loadVectorData(a,(_,b)=>{const E=!this.loading[s];if(delete this.loading[s],E||_||!b)return g.status="done",E||(this.loaded[s]=g),n(_);const M=b.rawData,O={};b.expires&&(O.expires=b.expires),b.cacheControl&&(O.cacheControl=b.cacheControl),g.vectorTile=b.vectorTile||new Kb(new um(M));const B=()=>{g.parse(g.vectorTile,this.layerIndex,this.availableImages,this.actor,(F,q)=>{if(F||!q)return n(F);const H={};if(d){const K=Kt(h);K.length>0&&(H.resourceTiming=JSON.parse(JSON.stringify(K)))}n(null,gt({rawTileData:M.slice(0)},q,O,H))})};this.isSpriteLoaded?B():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(B,{type:"parseTile",isSymbolTile:a.isSymbolTile,zoom:a.tileZoom}):B()}),this.loaded=this.loaded||{},this.loaded[s]=g})}reloadTile(a,n){const s=this.loaded,h=a.uid,d=this;if(s&&s[h]){const g=s[h];g.showCollisionBoxes=a.showCollisionBoxes,g.enableTerrain=!!a.enableTerrain,g.projection=a.projection,g.tileTransform=zu(a.tileID.canonical,a.projection);const _=(b,E)=>{const M=g.reloadCallback;M&&(delete g.reloadCallback,g.parse(g.vectorTile,d.layerIndex,this.availableImages,d.actor,M)),n(b,E)};g.status==="parsing"?g.reloadCallback=_:g.status==="done"&&(g.vectorTile?g.parse(g.vectorTile,this.layerIndex,this.availableImages,this.actor,_):_())}}abortTile(a,n){const s=a.uid,h=this.loading[s];h&&(h.abort&&h.abort(),delete this.loading[s]),n()}removeTile(a,n){const s=this.loaded,h=a.uid;s&&s[h]&&delete s[h],n()}},o.WritingMode=Ho,o.ZoomDependentExpression=Js,o.add=rl,o.addDynamicAttributes=gv,o.adjoint=function(a,n){var s=n[0],h=n[1],d=n[2],g=n[3],_=n[4],b=n[5],E=n[6],M=n[7],O=n[8];return a[0]=_*O-b*M,a[1]=d*M-h*O,a[2]=h*b-d*_,a[3]=b*E-g*O,a[4]=s*O-d*E,a[5]=d*g-s*b,a[6]=g*M-_*E,a[7]=h*E-s*M,a[8]=s*_-h*g,a},o.asyncAll=He,o.bezier=Ue,o.bindAll=Tr,o.boundsAttributes=$P,o.bufferConvexPolygon=function(a,n){const s=[];for(let h=0;h<a.length;h++){const d=kt(h-1,-1,a.length-1),g=kt(h+1,-1,a.length-1),_=a[h],b=a[g],E=a[d].sub(_).unit(),M=b.sub(_).unit(),O=M.angleWithSep(E.x,E.y),B=E.add(M).unit().mult(-1*n/Math.sin(O/2));s.push(_.add(B))}return s},o.cacheEntryPossiblyAdded=function(a){ss++,ss>mo&&(a.getActor().send("enforceCacheSizeLimit",jo),ss=0)},o.calculateGlobeLabelMatrix=function(a,n){const{x:s,y:h}=a.point,d=fC(s,h,a.worldSize/a._pixelsPerMercatorPixel,0,0);return Cu(d,d,Db(_s(n)))},o.calculateGlobeMatrix=function(a){const{x:n,y:s}=a.point,{lng:h,lat:d}=a._center;return fC(n,s,a.worldSize,h,d)},o.calculateGlobeMercatorMatrix=function(a){const n=a.pixelsPerMeter,s=n/Wa(1,a.center.lat),h=Ga(new Float64Array(16));return Vp(h,h,[a.point.x,a.point.y,0]),Pu(h,h,[s,s,n]),Float32Array.from(h)},o.circumferenceAtLatitude=Lb,o.clamp=Be,o.clearTileCache=function(a){if(!qs())return;const n=v.caches.delete(po);a&&n.catch(a).then(()=>a())},o.clipLine=xP,o.clone=function(a){var n=new Po(16);return n[0]=a[0],n[1]=a[1],n[2]=a[2],n[3]=a[3],n[4]=a[4],n[5]=a[5],n[6]=a[6],n[7]=a[7],n[8]=a[8],n[9]=a[9],n[10]=a[10],n[11]=a[11],n[12]=a[12],n[13]=a[13],n[14]=a[14],n[15]=a[15],n},o.clone$1=Mt,o.collisionCircleLayout=LN,o.config=T,o.conjugate=function(a,n){return a[0]=-n[0],a[1]=-n[1],a[2]=-n[2],a[3]=n[3],a},o.create=function(){var a=new Po(16);return Po!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=0,a[12]=0,a[13]=0,a[14]=0),a[0]=1,a[5]=1,a[10]=1,a[15]=1,a},o.create$1=HM,o.createExpression=Kl,o.createLayout=Nt,o.createStyleLayer=function(a){return a.type==="custom"?new Aj(a):new Cj[a.type](a)},o.cross=Mb,o.degToRad=xe,o.distance=function(a,n){return Math.hypot(n[0]-a[0],n[1]-a[1],n[2]-a[2])},o.div=function(a,n,s){return a[0]=n[0]/s[0],a[1]=n[1]/s[1],a[2]=n[2]/s[2],a},o.dot=fa,o.earthRadius=Qp,o.ease=ut,o.easeCubicInOut=qe,o.ecefToLatLng=function([a,n,s]){const h=Math.hypot(a,n,s),d=Math.atan2(a,s),g=.5*Math.PI-Math.acos(-n/h);return new Ir(Me(d),Me(g))},o.emitValidationErrors=E_,o.endsWith=Rr,o.enforceCacheSizeLimit=function(a){sa(),Ln&&Ln.then(n=>{n.keys().then(s=>{for(let h=0;h<s.length-a;h++)n.delete(s[h])})})},o.evaluateSizeForFeature=ov,o.evaluateSizeForZoom=cf,o.evaluateVariableOffset=TP,o.evented=me,o.exactEquals=function(a,n){return a[0]===n[0]&&a[1]===n[1]&&a[2]===n[2]&&a[3]===n[3]},o.exactEquals$1=function(a,n){return a[0]===n[0]&&a[1]===n[1]&&a[2]===n[2]},o.exported=zr,o.exported$1=P,o.extend=gt,o.extend$1=za,o.fillExtrusionHeightLift=WC,o.filterObject=_t,o.fromMat4=function(a,n){return a[0]=n[0],a[1]=n[1],a[2]=n[2],a[3]=n[4],a[4]=n[5],a[5]=n[6],a[6]=n[8],a[7]=n[9],a[8]=n[10],a},o.fromQuat=function(a,n){var s=n[0],h=n[1],d=n[2],g=n[3],_=s+s,b=h+h,E=d+d,M=s*_,O=h*_,B=h*b,F=d*_,q=d*b,H=d*E,K=g*_,re=g*b,ue=g*E;return a[0]=1-B-H,a[1]=O+ue,a[2]=F-re,a[3]=0,a[4]=O-ue,a[5]=1-M-H,a[6]=q+K,a[7]=0,a[8]=F+re,a[9]=q-K,a[10]=1-M-B,a[11]=0,a[12]=0,a[13]=0,a[14]=0,a[15]=1,a},o.fromRotation=function(a,n){var s=Math.sin(n),h=Math.cos(n);return a[0]=h,a[1]=s,a[2]=0,a[3]=-s,a[4]=h,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a},o.fromScaling=XM,o.furthestTileCorner=function(a){const n=Math.round((a+45+360)%360/90)%4;return Ce[n]},o.getAABBPointSquareDist=function(a,n,s){let h=0;for(let d=0;d<2;++d){const g=s?s[d]:0;a[d]>g&&(h+=(a[d]-g)*(a[d]-g)),n[d]<g&&(h+=(g-n[d])*(g-n[d]))}return h},o.getAnchorAlignment=rw,o.getAnchorJustification=ow,o.getBounds=function(a){let n=1/0,s=1/0,h=-1/0,d=-1/0;for(const g of a)n=Math.min(n,g.x),s=Math.min(s,g.y),h=Math.max(h,g.x),d=Math.max(d,g.y);return{min:new W(n,s),max:new W(h,d)}},o.getColumn=Ti,o.getGridMatrix=function(a,n,s,h){const d=n.getNorth(),g=n.getSouth(),_=n.getWest(),b=n.getEast(),E=1<<a.z,M=b-_,O=d-g,B=M/ku,F=-O/Kp[s],q=[0,B,0,F,0,0,d,_,0];if(a.z>0){const H=180/h;ZM(q,q,[H/M+1,0,0,0,H/O+1,0,-.5*H/B,.5*H/F,1])}return q[2]=E,q[5]=a.x,q[8]=a.y,q},o.getImage=Cr,o.getJSON=function(a,n){return $t(gt(a,{type:"json"}),n)},o.getLatitudinalLod=function(a){const n=ki-5;a=Be(a,-n,n)/n*90;const s=Math.pow(Math.abs(Math.sin(xe(a))),3);return Math.round(s*(Kp.length-1))},o.getMapSessionAPI=Ae,o.getPerformanceMeasurement=Kt,o.getProjection=DP,o.getRTLTextPluginStatus=we,o.getReferrer=vt,o.getTilePoint=function(a,{x:n,y:s},h=0){return new W(((n-h)*a.scale-a.x)*rr,(s*a.scale-a.y)*rr)},o.getTileVec3=function(a,n,s=0){return Jh(((n.x-s)*a.scale-a.x)*rr,(n.y*a.scale-a.y)*rr,gC(n.z,n.y))},o.getVideo=function(a,n){const s=v.document.createElement("video");s.muted=!0,s.onloadstart=function(){n(null,s)};for(let h=0;h<a.length;h++){const d=v.document.createElement("source");sr(a[h])||(s.crossOrigin="Anonymous"),d.src=a[h],s.appendChild(d)}return{cancel:()=>{}}},o.globeCenterToScreenPoint=function(a){const n=[0,0,0],s=Ga(new Float64Array(16));return Cu(s,a.pixelMatrix,a.globeMatrix),Bn(n,n,s),new W(n[0],n[1])},o.globeDenormalizeECEF=Db,o.globeECEFOrigin=function(a,n){const s=[0,0,0];return Bn(s,s,Jp(_s(n.canonical))),Bn(s,s,a),s},o.globeMetersToEcef=V_,o.globeNormalizeECEF=Jp,o.globePixelsToTileUnits=function(a,n){return rr/(512*Math.pow(2,a))*q_(_s(n))},o.globePoleMatrixForTile=function(a,n,s){const h=Ga(new Float64Array(16)),d=(n/(1<<a)-.5)*Math.PI*2;return U_(h,s.globeMatrix,d),Float32Array.from(h)},o.globeTileBounds=_s,o.globeTiltAtLngLat=dC,o.globeToMercatorTransition=tf,o.globeUseCustomAntiAliasing=function(a,n,s){const h=tf(s.zoom),d=a.style.map._antialias,g=!!n.extStandardDerivatives,_=n.extStandardDerivativesForceOff||a.terrain&&a.terrain.exaggeration()>0;return h===0&&!d&&!_&&g},o.identity=Ga,o.identity$1=nC,o.invert=Sb,o.isFullscreen=function(){return!!v.document.fullscreenElement||!!v.document.webkitFullscreenElement},o.isLngLatBehindGlobe=Rb,o.isMapAuthenticated=function(a){return Te.has(a)},o.isMapboxURL=un,o.isSafariWithAntialiasingBug=function(a){const n=a.navigator?a.navigator.userAgent:null;return!!Kn(a)&&n&&(n.match("Version/15.4")||n.match("Version/15.5")||n.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},o.latFromMercatorY=Ii,o.latLngToECEF=ef,o.len=EF,o.length=Gp,o.length$1=function(a){return Math.hypot(a[0],a[1],a[2],a[3])},o.lngFromMercatorX=Wo,o.loadVectorTile=tI,o.makeRequest=$t,o.mapValue=function(a,n,s,h,d){return Be((a-n)/(s-n)*(d-h)+h,h,d)},o.mercatorScale=yC,o.mercatorXfromLng=vs,o.mercatorYfromLat=xs,o.mercatorZfromAltitude=Wa,o.mul=wF,o.mul$1=SF,o.multiply=Cu,o.multiply$1=ZM,o.multiply$2=JM,o.nextPowerOfTwo=Zt,o.normalize=ro,o.normalize$1=TF,o.normalize$2=tC,o.number=Pr,o.ortho=function(a,n,s,h,d,g,_){var b=1/(n-s),E=1/(h-d),M=1/(g-_);return a[0]=-2*b,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=-2*E,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[10]=2*M,a[11]=0,a[12]=(n+s)*b,a[13]=(d+h)*E,a[14]=(_+g)*M,a[15]=1,a},o.pbf=um,o.perspective=function(a,n,s,h,d){var g,_=1/Math.tan(n/2);return a[0]=_/s,a[1]=0,a[2]=0,a[3]=0,a[4]=0,a[5]=_,a[6]=0,a[7]=0,a[8]=0,a[9]=0,a[11]=-1,a[12]=0,a[13]=0,a[15]=0,d!=null&&d!==1/0?(a[10]=(d+h)*(g=1/(h-d)),a[14]=2*d*h*g):(a[10]=-1,a[14]=-2*h),a},o.pick=function(a,n){const s={};for(let h=0;h<n.length;h++){const d=n[h];d in a&&(s[d]=a[d])}return s},o.plugin=Ee,o.pointGeometry=W,o.polesInViewport=function(a){const n=Ga(new Float64Array(16));Cu(n,a.pixelMatrix,a.globeMatrix);const s=[0,da,0],h=[0,pa,0];return Bn(s,s,n),Bn(h,h,n),[s[0]>0&&s[0]<=a.width&&s[1]>0&&s[1]<=a.height&&!Rb(a,new Ir(a.center.lat,90)),h[0]>0&&h[0]<=a.width&&h[1]>0&&h[1]<=a.height&&!Rb(a,new Ir(a.center.lat,-90))]},o.polygonContainsPoint=Ru,o.polygonIntersectsBox=EC,o.polygonIntersectsPolygon=xC,o.polygonizeBounds=function(a,n,s=0,h=!0){const d=new W(s,s),g=a.sub(d),_=n.add(d),b=[g,new W(_.x,g.y),_,new W(g.x,_.y)];return h&&b.push(g.clone()),b},o.posAttributes=Xp,o.postMapLoadEvent=ie,o.postPerformanceEvent=Se,o.postTurnstileEvent=X,o.potpack=Qb,o.prevPowerOfTwo=function(a){return a<=1?1:Math.pow(2,Math.floor(Math.log(a)/Math.LN2))},o.radToDeg=Me,o.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],o.registerForPluginStateChange=function(a){return a({pluginStatus:se,pluginURL:Q}),me.on("pluginStateChange",a),a},o.removeAuthState=function(a){Te.delete(a)},o.renderColorRamp=Vb,o.resample=_C,o.rotateX=Eb,o.rotateX$1=iC,o.rotateY=U_,o.rotateY$1=oC,o.rotateZ=function(a,n,s){var h=Math.sin(s),d=Math.cos(s),g=n[0],_=n[1],b=n[2],E=n[3],M=n[4],O=n[5],B=n[6],F=n[7];return n!==a&&(a[8]=n[8],a[9]=n[9],a[10]=n[10],a[11]=n[11],a[12]=n[12],a[13]=n[13],a[14]=n[14],a[15]=n[15]),a[0]=g*d+M*h,a[1]=_*d+O*h,a[2]=b*d+B*h,a[3]=E*d+F*h,a[4]=M*d-g*h,a[5]=O*d-_*h,a[6]=B*d-b*h,a[7]=F*d-E*h,a},o.rotateZ$1=function(a,n,s){s*=.5;var h=n[0],d=n[1],g=n[2],_=n[3],b=Math.sin(s),E=Math.cos(s);return a[0]=h*E+d*b,a[1]=d*E-h*b,a[2]=g*E+_*b,a[3]=_*E-g*b,a},o.scale=Pu,o.scale$1=eC,o.scale$2=qo,o.scaleAndAdd=Hp,o.set=function(a,n,s,h){return a[0]=n,a[1]=s,a[2]=h,a},o.setCacheLimits=function(a,n){jo=a,mo=n},o.setColumn=function(a,n,s){a[4*n+0]=s[0],a[4*n+1]=s[1],a[4*n+2]=s[2],a[4*n+3]=s[3]},o.setRTLTextPlugin=function(a,n,s=!1){if(se===te||se===ne||se===oe)throw new Error("setRTLTextPlugin cannot be called multiple times.");Q=zr.resolveURL(a),se=te,ae=n,he(),s||ve()},o.smoothstep=bt,o.spec=Xe,o.squaredLength=function(a){var n=a[0],s=a[1],h=a[2];return n*n+s*s+h*h},o.storeAuthState=function(a,n){n?Te.add(a):Te.delete(a)},o.sub=qa,o.subtract=Ab,o.symbolSize=zN,o.tileAABB=function(a,n,s,h,d,g,_,b,E){if(E.name==="globe")return PF(a,n,new nv(s,h,d));const M=zu({z:s,x:h,y:d},E);return new no([(g+M.x/M.scale)*n,n*(M.y/M.scale),_],[(g+M.x2/M.scale)*n,n*(M.y2/M.scale),b])},o.tileCornersToBounds=G_,o.tileTransform=zu,o.transformMat3=function(a,n,s){var h=n[0],d=n[1],g=n[2];return a[0]=h*s[0]+d*s[3]+g*s[6],a[1]=h*s[1]+d*s[4]+g*s[7],a[2]=h*s[2]+d*s[5]+g*s[8],a},o.transformMat4=Bn,o.transformMat4$1=Iu,o.transformQuat=QM,o.transitionTileAABBinECEF=cC,o.translate=Vp,o.transpose=function(a,n){if(a===n){var s=n[1],h=n[2],d=n[5];a[1]=n[3],a[2]=n[6],a[3]=s,a[5]=n[7],a[6]=h,a[7]=d}else a[0]=n[0],a[1]=n[3],a[2]=n[6],a[3]=n[1],a[4]=n[4],a[5]=n[7],a[6]=n[2],a[7]=n[5],a[8]=n[8];return a},o.triggerPluginCompletionEvent=fe,o.uniqueId=zt,o.updateGlobeVertexNormal=function(a,n,s,h,d){const g=5*n+2;a.float32[g+0]=s,a.float32[g+1]=h,a.float32[g+2]=d},o.validateCustomStyleLayer=function(a){const n=[],s=a.id;return s===void 0&&n.push({message:`layers.${s}: missing required property "id"`}),a.render===void 0&&n.push({message:`layers.${s}: missing required method "render"`}),a.renderingMode&&a.renderingMode!=="2d"&&a.renderingMode!=="3d"&&n.push({message:`layers.${s}: property "renderingMode" must be either "2d" or "3d"`}),n},o.validateFilter=a=>Fa(Dp(a)),o.validateFog=a=>Fa(b_(a)),o.validateLayer=a=>Fa(Lp(a)),o.validateLight=a=>Fa(x_(a)),o.validateSource=a=>Fa(vu(a)),o.validateStyle=w_,o.validateTerrain=a=>Fa(zp(a)),o.values=nt,o.vectorTile=ev,o.version=w,o.warnOnce=Qe,o.window=v,o.wrap=kt}),u(["./shared"],function(o){function v(ce){if(typeof ce=="number"||typeof ce=="boolean"||typeof ce=="string"||ce==null)return JSON.stringify(ce);if(Array.isArray(ce)){let J="[";for(const ie of ce)J+=`${v(ie)},`;return`${J}]`}let X="{";for(const J of Object.keys(ce).sort())X+=`${J}:${v(ce[J])},`;return`${X}}`}function w(ce){let X="";for(const J of o.refProperties)X+=`/${v(ce[J])}`;return X}class A{constructor(X){this.keyCache={},X&&this.replace(X)}replace(X){this._layerConfigs={},this._layers={},this.update(X,[])}update(X,J){for(const pe of X)this._layerConfigs[pe.id]=pe,(this._layers[pe.id]=o.createStyleLayer(pe)).compileFilter(),this.keyCache[pe.id]&&delete this.keyCache[pe.id];for(const pe of J)delete this.keyCache[pe],delete this._layerConfigs[pe],delete this._layers[pe];this.familiesBySource={};const ie=function(pe,Se){const Ie={};for(let Te=0;Te<pe.length;Te++){const De=Se&&Se[pe[Te].id]||w(pe[Te]);Se&&(Se[pe[Te].id]=De);let at=Ie[De];at||(at=Ie[De]=[]),at.push(pe[Te])}const Ae=[];for(const Te in Ie)Ae.push(Ie[Te]);return Ae}(o.values(this._layerConfigs),this.keyCache);for(const pe of ie){const Se=pe.map(Ct=>this._layers[Ct.id]),Ie=Se[0];if(Ie.visibility==="none")continue;const Ae=Ie.source||"";let Te=this.familiesBySource[Ae];Te||(Te=this.familiesBySource[Ae]={});const De=Ie.sourceLayer||"_geojsonTileLayer";let at=Te[De];at||(at=Te[De]=[]),at.push(Se)}}}class T{loadTile(X,J){const{uid:ie,encoding:pe,rawImageData:Se,padding:Ie,buildQuadTree:Ae}=X,Te=o.window.ImageBitmap&&Se instanceof o.window.ImageBitmap?this.getImageData(Se,Ie):Se;J(null,new o.DEMData(ie,Te,pe,Ie<1,Ae))}getImageData(X,J){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(X.width,X.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=X.width,this.offscreenCanvas.height=X.height,this.offscreenCanvasContext.drawImage(X,0,0,X.width,X.height);const ie=this.offscreenCanvasContext.getImageData(-J,-J,X.width+2*J,X.height+2*J);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),ie}}var P=function ce(X,J){var ie,pe=X&&X.type;if(pe==="FeatureCollection")for(ie=0;ie<X.features.length;ie++)ce(X.features[ie],J);else if(pe==="GeometryCollection")for(ie=0;ie<X.geometries.length;ie++)ce(X.geometries[ie],J);else if(pe==="Feature")ce(X.geometry,J);else if(pe==="Polygon")$(X.coordinates,J);else if(pe==="MultiPolygon")for(ie=0;ie<X.coordinates.length;ie++)$(X.coordinates[ie],J);return X};function $(ce,X){if(ce.length!==0){L(ce[0],X);for(var J=1;J<ce.length;J++)L(ce[J],!X)}}function L(ce,X){for(var J=0,ie=0,pe=0,Se=ce.length,Ie=Se-1;pe<Se;Ie=pe++){var Ae=(ce[pe][0]-ce[Ie][0])*(ce[Ie][1]+ce[pe][1]),Te=J+Ae;ie+=Math.abs(J)>=Math.abs(Ae)?J-Te+Ae:Ae-Te+J,J=Te}J+ie>=0!=!!X&&ce.reverse()}const k=o.VectorTileFeature.prototype.toGeoJSON;class N{constructor(X){this._feature=X,this.extent=o.EXTENT,this.type=X.type,this.properties=X.tags,"id"in X&&!isNaN(X.id)&&(this.id=parseInt(X.id,10))}loadGeometry(){if(this._feature.type===1){const X=[];for(const J of this._feature.geometry)X.push([new o.pointGeometry(J[0],J[1])]);return X}{const X=[];for(const J of this._feature.geometry){const ie=[];for(const pe of J)ie.push(new o.pointGeometry(pe[0],pe[1]));X.push(ie)}return X}}toGeoJSON(X,J,ie){return k.call(this,X,J,ie)}}class R{constructor(X){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=o.EXTENT,this.length=X.length,this._features=X}feature(X){return new N(this._features[X])}}var j={},D={get exports(){return j},set exports(ce){j=ce}},G=o.pointGeometry,W=o.vectorTile.VectorTileFeature,Y=ee;function ee(ce,X){this.options=X||{},this.features=ce,this.length=ce.length}function de(ce,X){this.id=typeof ce.id=="number"?ce.id:void 0,this.type=ce.type,this.rawGeometry=ce.type===1?[ce.geometry]:ce.geometry,this.properties=ce.tags,this.extent=X||4096}ee.prototype.feature=function(ce){return new de(this.features[ce],this.options.extent)},de.prototype.loadGeometry=function(){var ce=this.rawGeometry;this.geometry=[];for(var X=0;X<ce.length;X++){for(var J=ce[X],ie=[],pe=0;pe<J.length;pe++)ie.push(new G(J[pe][0],J[pe][1]));this.geometry.push(ie)}return this.geometry},de.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var ce=this.geometry,X=1/0,J=-1/0,ie=1/0,pe=-1/0,Se=0;Se<ce.length;Se++)for(var Ie=ce[Se],Ae=0;Ae<Ie.length;Ae++){var Te=Ie[Ae];X=Math.min(X,Te.x),J=Math.max(J,Te.x),ie=Math.min(ie,Te.y),pe=Math.max(pe,Te.y)}return[X,ie,J,pe]},de.prototype.toGeoJSON=W.prototype.toGeoJSON;var xe=o.pbf,Me=Y;function Ce(ce){var X=new xe;return function(J,ie){for(var pe in J.layers)ie.writeMessage(3,qe,J.layers[pe])}(ce,X),X.finish()}function qe(ce,X){var J;X.writeVarintField(15,ce.version||1),X.writeStringField(1,ce.name||""),X.writeVarintField(5,ce.extent||4096);var ie={keys:[],values:[],keycache:{},valuecache:{}};for(J=0;J<ce.length;J++)ie.feature=ce.feature(J),X.writeMessage(2,Ue,ie);var pe=ie.keys;for(J=0;J<pe.length;J++)X.writeStringField(3,pe[J]);var Se=ie.values;for(J=0;J<Se.length;J++)X.writeMessage(4,He,Se[J])}function Ue(ce,X){var J=ce.feature;J.id!==void 0&&X.writeVarintField(1,J.id),X.writeMessage(2,ut,ce),X.writeVarintField(3,J.type),X.writeMessage(4,kt,J)}function ut(ce,X){var J=ce.feature,ie=ce.keys,pe=ce.values,Se=ce.keycache,Ie=ce.valuecache;for(var Ae in J.properties){var Te=J.properties[Ae],De=Se[Ae];if(Te!==null){De===void 0&&(ie.push(Ae),Se[Ae]=De=ie.length-1),X.writeVarint(De);var at=typeof Te;at!=="string"&&at!=="boolean"&&at!=="number"&&(Te=JSON.stringify(Te));var Ct=at+":"+Te,ft=Ie[Ct];ft===void 0&&(pe.push(Te),Ie[Ct]=ft=pe.length-1),X.writeVarint(ft)}}}function Be(ce,X){return(X<<3)+(7&ce)}function bt(ce){return ce<<1^ce>>31}function kt(ce,X){for(var J=ce.loadGeometry(),ie=ce.type,pe=0,Se=0,Ie=J.length,Ae=0;Ae<Ie;Ae++){var Te=J[Ae],De=1;ie===1&&(De=Te.length),X.writeVarint(Be(1,De));for(var at=ie===3?Te.length-1:Te.length,Ct=0;Ct<at;Ct++){Ct===1&&ie!==1&&X.writeVarint(Be(2,at-1));var ft=Te[Ct].x-pe,Kt=Te[Ct].y-Se;X.writeVarint(bt(ft)),X.writeVarint(bt(Kt)),pe+=ft,Se+=Kt}ie===3&&X.writeVarint(Be(7,1))}}function He(ce,X){var J=typeof ce;J==="string"?X.writeStringField(1,ce):J==="boolean"?X.writeBooleanField(7,ce):J==="number"&&(ce%1!=0?X.writeDoubleField(3,ce):ce<0?X.writeSVarintField(6,ce):X.writeVarintField(5,ce))}function nt(ce,X,J,ie,pe,Se){if(pe-ie<=J)return;const Ie=ie+pe>>1;gt(ce,X,Ie,ie,pe,Se%2),nt(ce,X,J,ie,Ie-1,Se+1),nt(ce,X,J,Ie+1,pe,Se+1)}function gt(ce,X,J,ie,pe,Se){for(;pe>ie;){if(pe-ie>600){const De=pe-ie+1,at=J-ie+1,Ct=Math.log(De),ft=.5*Math.exp(2*Ct/3),Kt=.5*Math.sqrt(Ct*ft*(De-ft)/De)*(at-De/2<0?-1:1);gt(ce,X,J,Math.max(ie,Math.floor(J-at*ft/De+Kt)),Math.min(pe,Math.floor(J+(De-at)*ft/De+Kt)),Se)}const Ie=X[2*J+Se];let Ae=ie,Te=pe;for(xt(ce,X,ie,J),X[2*pe+Se]>Ie&&xt(ce,X,ie,pe);Ae<Te;){for(xt(ce,X,Ae,Te),Ae++,Te--;X[2*Ae+Se]<Ie;)Ae++;for(;X[2*Te+Se]>Ie;)Te--}X[2*ie+Se]===Ie?xt(ce,X,ie,Te):(Te++,xt(ce,X,Te,pe)),Te<=J&&(ie=Te+1),J<=Te&&(pe=Te-1)}}function xt(ce,X,J,ie){zt(ce,J,ie),zt(X,2*J,2*ie),zt(X,2*J+1,2*ie+1)}function zt(ce,X,J){const ie=ce[X];ce[X]=ce[J],ce[J]=ie}function Vt(ce,X,J,ie){const pe=ce-J,Se=X-ie;return pe*pe+Se*Se}D.exports=Ce,j.fromVectorTileJs=Ce,j.fromGeojsonVt=function(ce,X){X=X||{};var J={};for(var ie in ce)J[ie]=new Me(ce[ie].features,X),J[ie].name=ie,J[ie].version=X.version,J[ie].extent=X.extent;return Ce({layers:J})},j.GeoJSONWrapper=Me;const Zt=ce=>ce[0],hr=ce=>ce[1];class Tr{constructor(X,J=Zt,ie=hr,pe=64,Se=Float64Array){this.nodeSize=pe,this.points=X;const Ie=X.length<65536?Uint16Array:Uint32Array,Ae=this.ids=new Ie(X.length),Te=this.coords=new Se(2*X.length);for(let De=0;De<X.length;De++)Ae[De]=De,Te[2*De]=J(X[De]),Te[2*De+1]=ie(X[De]);nt(Ae,Te,pe,0,Ae.length-1,0)}range(X,J,ie,pe){return function(Se,Ie,Ae,Te,De,at,Ct){const ft=[0,Se.length-1,0],Kt=[];let Gt,Ut;for(;ft.length;){const tr=ft.pop(),pr=ft.pop(),zr=ft.pop();if(pr-zr<=Ct){for(let Wr=zr;Wr<=pr;Wr++)Gt=Ie[2*Wr],Ut=Ie[2*Wr+1],Gt>=Ae&&Gt<=De&&Ut>=Te&&Ut<=at&&Kt.push(Se[Wr]);continue}const Jt=Math.floor((zr+pr)/2);Gt=Ie[2*Jt],Ut=Ie[2*Jt+1],Gt>=Ae&&Gt<=De&&Ut>=Te&&Ut<=at&&Kt.push(Se[Jt]);const qr=(tr+1)%2;(tr===0?Ae<=Gt:Te<=Ut)&&(ft.push(zr),ft.push(Jt-1),ft.push(qr)),(tr===0?De>=Gt:at>=Ut)&&(ft.push(Jt+1),ft.push(pr),ft.push(qr))}return Kt}(this.ids,this.coords,X,J,ie,pe,this.nodeSize)}within(X,J,ie){return function(pe,Se,Ie,Ae,Te,De){const at=[0,pe.length-1,0],Ct=[],ft=Te*Te;for(;at.length;){const Kt=at.pop(),Gt=at.pop(),Ut=at.pop();if(Gt-Ut<=De){for(let qr=Ut;qr<=Gt;qr++)Vt(Se[2*qr],Se[2*qr+1],Ie,Ae)<=ft&&Ct.push(pe[qr]);continue}const tr=Math.floor((Ut+Gt)/2),pr=Se[2*tr],zr=Se[2*tr+1];Vt(pr,zr,Ie,Ae)<=ft&&Ct.push(pe[tr]);const Jt=(Kt+1)%2;(Kt===0?Ie-Te<=pr:Ae-Te<=zr)&&(at.push(Ut),at.push(tr-1),at.push(Jt)),(Kt===0?Ie+Te>=pr:Ae+Te>=zr)&&(at.push(tr+1),at.push(Gt),at.push(Jt))}return Ct}(this.ids,this.coords,X,J,ie,this.nodeSize)}}const Rr={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:ce=>ce},ir=Math.fround||(_t=new Float32Array(1),ce=>(_t[0]=+ce,_t[0]));var _t;class Mt{constructor(X){this.options=Kn(Object.create(Rr),X),this.trees=new Array(this.options.maxZoom+1)}load(X){const{log:J,minZoom:ie,maxZoom:pe,nodeSize:Se}=this.options;J&&console.time("total time");const Ie=`prepare ${X.length} points`;J&&console.time(Ie),this.points=X;let Ae=[];for(let Te=0;Te<X.length;Te++)X[Te].geometry&&Ae.push(Qe(X[Te],Te));this.trees[pe+1]=new Tr(Ae,Yi,Ti,Se,Float32Array),J&&console.timeEnd(Ie);for(let Te=pe;Te>=ie;Te--){const De=+Date.now();Ae=this._cluster(Ae,Te),this.trees[Te]=new Tr(Ae,Yi,Ti,Se,Float32Array),J&&console.log("z%d: %d clusters in %dms",Te,Ae.length,+Date.now()-De)}return J&&console.timeEnd("total time"),this}getClusters(X,J){let ie=((X[0]+180)%360+360)%360-180;const pe=Math.max(-90,Math.min(90,X[1]));let Se=X[2]===180?180:((X[2]+180)%360+360)%360-180;const Ie=Math.max(-90,Math.min(90,X[3]));if(X[2]-X[0]>=360)ie=-180,Se=180;else if(ie>Se){const at=this.getClusters([ie,pe,180,Ie],J),Ct=this.getClusters([-180,pe,Se,Ie],J);return at.concat(Ct)}const Ae=this.trees[this._limitZoom(J)],Te=Ae.range(Sr(ie),Lr(Ie),Sr(Se),Lr(pe)),De=[];for(const at of Te){const Ct=Ae.points[at];De.push(Ct.numPoints?lr(Ct):this.points[Ct.index])}return De}getChildren(X){const J=this._getOriginId(X),ie=this._getOriginZoom(X),pe="No cluster with the specified id.",Se=this.trees[ie];if(!Se)throw new Error(pe);const Ie=Se.points[J];if(!Ie)throw new Error(pe);const Ae=this.options.radius/(this.options.extent*Math.pow(2,ie-1)),Te=Se.within(Ie.x,Ie.y,Ae),De=[];for(const at of Te){const Ct=Se.points[at];Ct.parentId===X&&De.push(Ct.numPoints?lr(Ct):this.points[Ct.index])}if(De.length===0)throw new Error(pe);return De}getLeaves(X,J,ie){const pe=[];return this._appendLeaves(pe,X,J=J||10,ie=ie||0,0),pe}getTile(X,J,ie){const pe=this.trees[this._limitZoom(X)],Se=Math.pow(2,X),{extent:Ie,radius:Ae}=this.options,Te=Ae/Ie,De=(ie-Te)/Se,at=(ie+1+Te)/Se,Ct={features:[]};return this._addTileFeatures(pe.range((J-Te)/Se,De,(J+1+Te)/Se,at),pe.points,J,ie,Se,Ct),J===0&&this._addTileFeatures(pe.range(1-Te/Se,De,1,at),pe.points,Se,ie,Se,Ct),J===Se-1&&this._addTileFeatures(pe.range(0,De,Te/Se,at),pe.points,-1,ie,Se,Ct),Ct.features.length?Ct:null}getClusterExpansionZoom(X){let J=this._getOriginZoom(X)-1;for(;J<=this.options.maxZoom;){const ie=this.getChildren(X);if(J++,ie.length!==1)break;X=ie[0].properties.cluster_id}return J}_appendLeaves(X,J,ie,pe,Se){const Ie=this.getChildren(J);for(const Ae of Ie){const Te=Ae.properties;if(Te&&Te.cluster?Se+Te.point_count<=pe?Se+=Te.point_count:Se=this._appendLeaves(X,Te.cluster_id,ie,pe,Se):Se<pe?Se++:X.push(Ae),X.length===ie)break}return Se}_addTileFeatures(X,J,ie,pe,Se,Ie){for(const Ae of X){const Te=J[Ae],De=Te.numPoints;let at,Ct,ft;if(De)at=Ot(Te),Ct=Te.x,ft=Te.y;else{const Ut=this.points[Te.index];at=Ut.properties,Ct=Sr(Ut.geometry.coordinates[0]),ft=Lr(Ut.geometry.coordinates[1])}const Kt={type:1,geometry:[[Math.round(this.options.extent*(Ct*Se-ie)),Math.round(this.options.extent*(ft*Se-pe))]],tags:at};let Gt;De?Gt=Te.id:this.options.generateId?Gt=Te.index:this.points[Te.index].id&&(Gt=this.points[Te.index].id),Gt!==void 0&&(Kt.id=Gt),Ie.features.push(Kt)}}_limitZoom(X){return Math.max(this.options.minZoom,Math.min(Math.floor(+X),this.options.maxZoom+1))}_cluster(X,J){const ie=[],{radius:pe,extent:Se,reduce:Ie,minPoints:Ae}=this.options,Te=pe/(Se*Math.pow(2,J));for(let De=0;De<X.length;De++){const at=X[De];if(at.zoom<=J)continue;at.zoom=J;const Ct=this.trees[J+1],ft=Ct.within(at.x,at.y,Te),Kt=at.numPoints||1;let Gt=Kt;for(const Ut of ft){const tr=Ct.points[Ut];tr.zoom>J&&(Gt+=tr.numPoints||1)}if(Gt>Kt&&Gt>=Ae){let Ut=at.x*Kt,tr=at.y*Kt,pr=Ie&&Kt>1?this._map(at,!0):null;const zr=(De<<5)+(J+1)+this.points.length;for(const Jt of ft){const qr=Ct.points[Jt];if(qr.zoom<=J)continue;qr.zoom=J;const Wr=qr.numPoints||1;Ut+=qr.x*Wr,tr+=qr.y*Wr,qr.parentId=zr,Ie&&(pr||(pr=this._map(at,!0)),Ie(pr,this._map(qr)))}at.parentId=zr,ie.push(or(Ut/Gt,tr/Gt,zr,Gt,pr))}else if(ie.push(at),Gt>1)for(const Ut of ft){const tr=Ct.points[Ut];tr.zoom<=J||(tr.zoom=J,ie.push(tr))}}return ie}_getOriginId(X){return X-this.points.length>>5}_getOriginZoom(X){return(X-this.points.length)%32}_map(X,J){if(X.numPoints)return J?Kn({},X.properties):X.properties;const ie=this.points[X.index].properties,pe=this.options.map(ie);return J&&pe===ie?Kn({},pe):pe}}function or(ce,X,J,ie,pe){return{x:ir(ce),y:ir(X),zoom:1/0,id:J,parentId:-1,numPoints:ie,properties:pe}}function Qe(ce,X){const[J,ie]=ce.geometry.coordinates;return{x:ir(Sr(J)),y:ir(Lr(ie)),zoom:1/0,index:X,parentId:-1}}function lr(ce){return{type:"Feature",id:ce.id,properties:Ot(ce),geometry:{type:"Point",coordinates:[(X=ce.x,360*(X-.5)),mn(ce.y)]}};var X}function Ot(ce){const X=ce.numPoints,J=X>=1e4?`${Math.round(X/1e3)}k`:X>=1e3?Math.round(X/100)/10+"k":X;return Kn(Kn({},ce.properties),{cluster:!0,cluster_id:ce.id,point_count:X,point_count_abbreviated:J})}function Sr(ce){return ce/360+.5}function Lr(ce){const X=Math.sin(ce*Math.PI/180),J=.5-.25*Math.log((1+X)/(1-X))/Math.PI;return J<0?0:J>1?1:J}function mn(ce){const X=(180-360*ce)*Math.PI/180;return 360*Math.atan(Math.exp(X))/Math.PI-90}function Kn(ce,X){for(const J in X)ce[J]=X[J];return ce}function Yi(ce){return ce.x}function Ti(ce){return ce.y}function po(ce,X,J,ie){for(var pe,Se=ie,Ie=J-X>>1,Ae=J-X,Te=ce[X],De=ce[X+1],at=ce[J],Ct=ce[J+1],ft=X+3;ft<J;ft+=3){var Kt=Ln(ce[ft],ce[ft+1],Te,De,at,Ct);if(Kt>Se)pe=ft,Se=Kt;else if(Kt===Se){var Gt=Math.abs(ft-Ie);Gt<Ae&&(pe=ft,Ae=Gt)}}Se>ie&&(pe-X>3&&po(ce,X,pe,ie),ce[pe+2]=Se,J-pe>3&&po(ce,pe,J,ie))}function Ln(ce,X,J,ie,pe,Se){var Ie=pe-J,Ae=Se-ie;if(Ie!==0||Ae!==0){var Te=((ce-J)*Ie+(X-ie)*Ae)/(Ie*Ie+Ae*Ae);Te>1?(J=pe,ie=Se):Te>0&&(J+=Ie*Te,ie+=Ae*Te)}return(Ie=ce-J)*Ie+(Ae=X-ie)*Ae}function ii(ce,X,J,ie){var pe={id:ce===void 0?null:ce,type:X,geometry:J,tags:ie,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return function(Se){var Ie=Se.geometry,Ae=Se.type;if(Ae==="Point"||Ae==="MultiPoint"||Ae==="LineString")jo(Se,Ie);else if(Ae==="Polygon"||Ae==="MultiLineString")for(var Te=0;Te<Ie.length;Te++)jo(Se,Ie[Te]);else if(Ae==="MultiPolygon")for(Te=0;Te<Ie.length;Te++)for(var De=0;De<Ie[Te].length;De++)jo(Se,Ie[Te][De])}(pe),pe}function jo(ce,X){for(var J=0;J<X.length;J+=3)ce.minX=Math.min(ce.minX,X[J]),ce.minY=Math.min(ce.minY,X[J+1]),ce.maxX=Math.max(ce.maxX,X[J]),ce.maxY=Math.max(ce.maxY,X[J+1])}function mo(ce,X,J,ie){if(X.geometry){var pe=X.geometry.coordinates,Se=X.geometry.type,Ie=Math.pow(J.tolerance/((1<<J.maxZoom)*J.extent),2),Ae=[],Te=X.id;if(J.promoteId?Te=X.properties[J.promoteId]:J.generateId&&(Te=ie||0),Se==="Point")qs(pe,Ae);else if(Se==="MultiPoint")for(var De=0;De<pe.length;De++)qs(pe[De],Ae);else if(Se==="LineString")sa(pe,Ae,Ie,!1);else if(Se==="MultiLineString"){if(J.lineMetrics){for(De=0;De<pe.length;De++)sa(pe[De],Ae=[],Ie,!1),ce.push(ii(Te,"LineString",Ae,X.properties));return}Da(pe,Ae,Ie,!1)}else if(Se==="Polygon")Da(pe,Ae,Ie,!0);else{if(Se!=="MultiPolygon"){if(Se==="GeometryCollection"){for(De=0;De<X.geometry.geometries.length;De++)mo(ce,{id:Te,geometry:X.geometry.geometries[De],properties:X.properties},J,ie);return}throw new Error("Input data is not a valid GeoJSON object.")}for(De=0;De<pe.length;De++){var at=[];Da(pe[De],at,Ie,!0),Ae.push(at)}}ce.push(ii(Te,Se,Ae,X.properties))}}function qs(ce,X){X.push(ss(ce[0])),X.push(Je(ce[1])),X.push(0)}function sa(ce,X,J,ie){for(var pe,Se,Ie=0,Ae=0;Ae<ce.length;Ae++){var Te=ss(ce[Ae][0]),De=Je(ce[Ae][1]);X.push(Te),X.push(De),X.push(0),Ae>0&&(Ie+=ie?(pe*De-Te*Se)/2:Math.sqrt(Math.pow(Te-pe,2)+Math.pow(De-Se,2))),pe=Te,Se=De}var at=X.length-3;X[2]=1,po(X,0,at,J),X[at+2]=1,X.size=Math.abs(Ie),X.start=0,X.end=X.size}function Da(ce,X,J,ie){for(var pe=0;pe<ce.length;pe++){var Se=[];sa(ce[pe],Se,J,ie),X.push(Se)}}function ss(ce){return ce/360+.5}function Je(ce){var X=Math.sin(ce*Math.PI/180),J=.5-.25*Math.log((1+X)/(1-X))/Math.PI;return J<0?0:J>1?1:J}function et(ce,X,J,ie,pe,Se,Ie,Ae){if(ie/=X,Se>=(J/=X)&&Ie<ie)return ce;if(Ie<J||Se>=ie)return null;for(var Te=[],De=0;De<ce.length;De++){var at=ce[De],Ct=at.geometry,ft=at.type,Kt=pe===0?at.minX:at.minY,Gt=pe===0?at.maxX:at.maxY;if(Kt>=J&&Gt<ie)Te.push(at);else if(!(Gt<J||Kt>=ie)){var Ut=[];if(ft==="Point"||ft==="MultiPoint")vt(Ct,Ut,J,ie,pe);else if(ft==="LineString")$t(Ct,Ut,J,ie,pe,!1,Ae.lineMetrics);else if(ft==="MultiLineString")sr(Ct,Ut,J,ie,pe,!1);else if(ft==="Polygon")sr(Ct,Ut,J,ie,pe,!0);else if(ft==="MultiPolygon")for(var tr=0;tr<Ct.length;tr++){var pr=[];sr(Ct[tr],pr,J,ie,pe,!0),pr.length&&Ut.push(pr)}if(Ut.length){if(Ae.lineMetrics&&ft==="LineString"){for(tr=0;tr<Ut.length;tr++)Te.push(ii(at.id,ft,Ut[tr],at.tags));continue}ft!=="LineString"&&ft!=="MultiLineString"||(Ut.length===1?(ft="LineString",Ut=Ut[0]):ft="MultiLineString"),ft!=="Point"&&ft!=="MultiPoint"||(ft=Ut.length===3?"Point":"MultiPoint"),Te.push(ii(at.id,ft,Ut,at.tags))}}}return Te.length?Te:null}function vt(ce,X,J,ie,pe){for(var Se=0;Se<ce.length;Se+=3){var Ie=ce[Se+pe];Ie>=J&&Ie<=ie&&(X.push(ce[Se]),X.push(ce[Se+1]),X.push(ce[Se+2]))}}function $t(ce,X,J,ie,pe,Se,Ie){for(var Ae,Te,De=jt(ce),at=pe===0?nr:Xt,Ct=ce.start,ft=0;ft<ce.length-3;ft+=3){var Kt=ce[ft],Gt=ce[ft+1],Ut=ce[ft+2],tr=ce[ft+3],pr=ce[ft+4],zr=pe===0?Kt:Gt,Jt=pe===0?tr:pr,qr=!1;Ie&&(Ae=Math.sqrt(Math.pow(Kt-tr,2)+Math.pow(Gt-pr,2))),zr<J?Jt>J&&(Te=at(De,Kt,Gt,tr,pr,J),Ie&&(De.start=Ct+Ae*Te)):zr>ie?Jt<ie&&(Te=at(De,Kt,Gt,tr,pr,ie),Ie&&(De.start=Ct+Ae*Te)):fr(De,Kt,Gt,Ut),Jt<J&&zr>=J&&(Te=at(De,Kt,Gt,tr,pr,J),qr=!0),Jt>ie&&zr<=ie&&(Te=at(De,Kt,Gt,tr,pr,ie),qr=!0),!Se&&qr&&(Ie&&(De.end=Ct+Ae*Te),X.push(De),De=jt(ce)),Ie&&(Ct+=Ae)}var Wr=ce.length-3;Kt=ce[Wr],Gt=ce[Wr+1],Ut=ce[Wr+2],(zr=pe===0?Kt:Gt)>=J&&zr<=ie&&fr(De,Kt,Gt,Ut),Wr=De.length-3,Se&&Wr>=3&&(De[Wr]!==De[0]||De[Wr+1]!==De[1])&&fr(De,De[0],De[1],De[2]),De.length&&X.push(De)}function jt(ce){var X=[];return X.size=ce.size,X.start=ce.start,X.end=ce.end,X}function sr(ce,X,J,ie,pe,Se){for(var Ie=0;Ie<ce.length;Ie++)$t(ce[Ie],X,J,ie,pe,Se,!1)}function fr(ce,X,J,ie){ce.push(X),ce.push(J),ce.push(ie)}function nr(ce,X,J,ie,pe,Se){var Ie=(Se-X)/(ie-X);return ce.push(Se),ce.push(J+(pe-J)*Ie),ce.push(1),Ie}function Xt(ce,X,J,ie,pe,Se){var Ie=(Se-J)/(pe-J);return ce.push(X+(ie-X)*Ie),ce.push(Se),ce.push(1),Ie}function Cr(ce,X){for(var J=[],ie=0;ie<ce.length;ie++){var pe,Se=ce[ie],Ie=Se.type;if(Ie==="Point"||Ie==="MultiPoint"||Ie==="LineString")pe=kr(Se.geometry,X);else if(Ie==="MultiLineString"||Ie==="Polygon"){pe=[];for(var Ae=0;Ae<Se.geometry.length;Ae++)pe.push(kr(Se.geometry[Ae],X))}else if(Ie==="MultiPolygon")for(pe=[],Ae=0;Ae<Se.geometry.length;Ae++){for(var Te=[],De=0;De<Se.geometry[Ae].length;De++)Te.push(kr(Se.geometry[Ae][De],X));pe.push(Te)}J.push(ii(Se.id,Ie,pe,Se.tags))}return J}function kr(ce,X){var J=[];J.size=ce.size,ce.start!==void 0&&(J.start=ce.start,J.end=ce.end);for(var ie=0;ie<ce.length;ie+=3)J.push(ce[ie]+X,ce[ie+1],ce[ie+2]);return J}function un(ce,X){if(ce.transformed)return ce;var J,ie,pe,Se=1<<ce.z,Ie=ce.x,Ae=ce.y;for(J=0;J<ce.features.length;J++){var Te=ce.features[J],De=Te.geometry,at=Te.type;if(Te.geometry=[],at===1)for(ie=0;ie<De.length;ie+=2)Te.geometry.push(bn(De[ie],De[ie+1],X,Se,Ie,Ae));else for(ie=0;ie<De.length;ie++){var Ct=[];for(pe=0;pe<De[ie].length;pe+=2)Ct.push(bn(De[ie][pe],De[ie][pe+1],X,Se,Ie,Ae));Te.geometry.push(Ct)}}return ce.transformed=!0,ce}function bn(ce,X,J,ie,pe,Se){return[Math.round(J*(ce*ie-pe)),Math.round(J*(X*ie-Se))]}function Cn(ce,X,J,ie,pe){for(var Se=X===pe.maxZoom?0:pe.tolerance/((1<<X)*pe.extent),Ie={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:J,y:ie,z:X,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},Ae=0;Ae<ce.length;Ae++){Ie.numFeatures++,fi(Ie,ce[Ae],Se,pe);var Te=ce[Ae].minX,De=ce[Ae].minY,at=ce[Ae].maxX,Ct=ce[Ae].maxY;Te<Ie.minX&&(Ie.minX=Te),De<Ie.minY&&(Ie.minY=De),at>Ie.maxX&&(Ie.maxX=at),Ct>Ie.maxY&&(Ie.maxY=Ct)}return Ie}function fi(ce,X,J,ie){var pe=X.geometry,Se=X.type,Ie=[];if(Se==="Point"||Se==="MultiPoint")for(var Ae=0;Ae<pe.length;Ae+=3)Ie.push(pe[Ae]),Ie.push(pe[Ae+1]),ce.numPoints++,ce.numSimplified++;else if(Se==="LineString")To(Ie,pe,ce,J,!1,!1);else if(Se==="MultiLineString"||Se==="Polygon")for(Ae=0;Ae<pe.length;Ae++)To(Ie,pe[Ae],ce,J,Se==="Polygon",Ae===0);else if(Se==="MultiPolygon")for(var Te=0;Te<pe.length;Te++){var De=pe[Te];for(Ae=0;Ae<De.length;Ae++)To(Ie,De[Ae],ce,J,!0,Ae===0)}if(Ie.length){var at=X.tags||null;if(Se==="LineString"&&ie.lineMetrics){for(var Ct in at={},X.tags)at[Ct]=X.tags[Ct];at.mapbox_clip_start=pe.start/pe.size,at.mapbox_clip_end=pe.end/pe.size}var ft={geometry:Ie,type:Se==="Polygon"||Se==="MultiPolygon"?3:Se==="LineString"||Se==="MultiLineString"?2:1,tags:at};X.id!==null&&(ft.id=X.id),ce.features.push(ft)}}function To(ce,X,J,ie,pe,Se){var Ie=ie*ie;if(ie>0&&X.size<(pe?Ie:ie))J.numPoints+=X.length/3;else{for(var Ae=[],Te=0;Te<X.length;Te+=3)(ie===0||X[Te+2]>Ie)&&(J.numSimplified++,Ae.push(X[Te]),Ae.push(X[Te+1])),J.numPoints++;pe&&function(De,at){for(var Ct=0,ft=0,Kt=De.length,Gt=Kt-2;ft<Kt;Gt=ft,ft+=2)Ct+=(De[ft]-De[Gt])*(De[ft+1]+De[Gt+1]);if(Ct>0===at)for(ft=0,Kt=De.length;ft<Kt/2;ft+=2){var Ut=De[ft],tr=De[ft+1];De[ft]=De[Kt-2-ft],De[ft+1]=De[Kt-1-ft],De[Kt-2-ft]=Ut,De[Kt-1-ft]=tr}}(Ae,Se),ce.push(Ae)}}function Uo(ce,X){var J=(X=this.options=function(pe,Se){for(var Ie in Se)pe[Ie]=Se[Ie];return pe}(Object.create(this.options),X)).debug;if(J&&console.time("preprocess data"),X.maxZoom<0||X.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(X.promoteId&&X.generateId)throw new Error("promoteId and generateId cannot be used together.");var ie=function(pe,Se){var Ie=[];if(pe.type==="FeatureCollection")for(var Ae=0;Ae<pe.features.length;Ae++)mo(Ie,pe.features[Ae],Se,Ae);else mo(Ie,pe.type==="Feature"?pe:{geometry:pe},Se);return Ie}(ce,X);this.tiles={},this.tileCoords=[],J&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",X.indexMaxZoom,X.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),ie=function(pe,Se){var Ie=Se.buffer/Se.extent,Ae=pe,Te=et(pe,1,-1-Ie,Ie,0,-1,2,Se),De=et(pe,1,1-Ie,2+Ie,0,-1,2,Se);return(Te||De)&&(Ae=et(pe,1,-Ie,1+Ie,0,-1,2,Se)||[],Te&&(Ae=Cr(Te,1).concat(Ae)),De&&(Ae=Ae.concat(Cr(De,-1)))),Ae}(ie,X),ie.length&&this.splitTile(ie,0,0,0),J&&(ie.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function oi(ce,X,J){return 32*((1<<ce)*J+X)+ce}function di(ce,X){const J=ce.tileID.canonical;if(!this._geoJSONIndex)return X(null,null);const ie=this._geoJSONIndex.getTile(J.z,J.x,J.y);if(!ie)return X(null,null);const pe=new R(ie.features);let Se=j(pe);Se.byteOffset===0&&Se.byteLength===Se.buffer.byteLength||(Se=new Uint8Array(Se)),X(null,{vectorTile:pe,rawData:Se.buffer})}Uo.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Uo.prototype.splitTile=function(ce,X,J,ie,pe,Se,Ie){for(var Ae=[ce,X,J,ie],Te=this.options,De=Te.debug;Ae.length;){ie=Ae.pop(),J=Ae.pop(),X=Ae.pop(),ce=Ae.pop();var at=1<<X,Ct=oi(X,J,ie),ft=this.tiles[Ct];if(!ft&&(De>1&&console.time("creation"),ft=this.tiles[Ct]=Cn(ce,X,J,ie,Te),this.tileCoords.push({z:X,x:J,y:ie}),De)){De>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",X,J,ie,ft.numFeatures,ft.numPoints,ft.numSimplified),console.timeEnd("creation"));var Kt="z"+X;this.stats[Kt]=(this.stats[Kt]||0)+1,this.total++}if(ft.source=ce,pe){if(X===Te.maxZoom||X===pe)continue;var Gt=1<<pe-X;if(J!==Math.floor(Se/Gt)||ie!==Math.floor(Ie/Gt))continue}else if(X===Te.indexMaxZoom||ft.numPoints<=Te.indexMaxPoints)continue;if(ft.source=null,ce.length!==0){De>1&&console.time("clipping");var Ut,tr,pr,zr,Jt,qr,Wr=.5*Te.buffer/Te.extent,ls=.5-Wr,La=.5+Wr,Xe=1+Wr;Ut=tr=pr=zr=null,Jt=et(ce,at,J-Wr,J+La,0,ft.minX,ft.maxX,Te),qr=et(ce,at,J+ls,J+Xe,0,ft.minX,ft.maxX,Te),ce=null,Jt&&(Ut=et(Jt,at,ie-Wr,ie+La,1,ft.minY,ft.maxY,Te),tr=et(Jt,at,ie+ls,ie+Xe,1,ft.minY,ft.maxY,Te),Jt=null),qr&&(pr=et(qr,at,ie-Wr,ie+La,1,ft.minY,ft.maxY,Te),zr=et(qr,at,ie+ls,ie+Xe,1,ft.minY,ft.maxY,Te),qr=null),De>1&&console.timeEnd("clipping"),Ae.push(Ut||[],X+1,2*J,2*ie),Ae.push(tr||[],X+1,2*J,2*ie+1),Ae.push(pr||[],X+1,2*J+1,2*ie),Ae.push(zr||[],X+1,2*J+1,2*ie+1)}}},Uo.prototype.getTile=function(ce,X,J){var ie=this.options,pe=ie.extent,Se=ie.debug;if(ce<0||ce>24)return null;var Ie=1<<ce,Ae=oi(ce,X=(X%Ie+Ie)%Ie,J);if(this.tiles[Ae])return un(this.tiles[Ae],pe);Se>1&&console.log("drilling down to z%d-%d-%d",ce,X,J);for(var Te,De=ce,at=X,Ct=J;!Te&&De>0;)De--,at=Math.floor(at/2),Ct=Math.floor(Ct/2),Te=this.tiles[oi(De,at,Ct)];return Te&&Te.source?(Se>1&&console.log("found parent tile z%d-%d-%d",De,at,Ct),Se>1&&console.time("drilling down"),this.splitTile(Te.source,De,at,Ct,ce,X,J),Se>1&&console.timeEnd("drilling down"),this.tiles[Ae]?un(this.tiles[Ae],pe):null):null};class Ra extends o.VectorTileWorkerSource{constructor(X,J,ie,pe,Se){super(X,J,ie,pe,di),Se&&(this.loadGeoJSON=Se)}loadData(X,J){const ie=X&&X.request,pe=ie&&ie.collectResourceTiming;this.loadGeoJSON(X,(Se,Ie)=>{if(Se||!Ie)return J(Se);if(typeof Ie!="object")return J(new Error(`Input data given to '${X.source}' is not a valid GeoJSON object.`));{P(Ie,!0);try{if(X.filter){const Te=o.createExpression(X.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(Te.result==="error")throw new Error(Te.value.map(at=>`${at.key}: ${at.message}`).join(", "));Ie={type:"FeatureCollection",features:Ie.features.filter(at=>Te.value.evaluate({zoom:0},at))}}this._geoJSONIndex=X.cluster?new Mt(function({superclusterOptions:Te,clusterProperties:De}){if(!De||!Te)return Te;const at={},Ct={},ft={accumulated:null,zoom:0},Kt={properties:null},Gt=Object.keys(De);for(const Ut of Gt){const[tr,pr]=De[Ut],zr=o.createExpression(pr),Jt=o.createExpression(typeof tr=="string"?[tr,["accumulated"],["get",Ut]]:tr);at[Ut]=zr.value,Ct[Ut]=Jt.value}return Te.map=Ut=>{Kt.properties=Ut;const tr={};for(const pr of Gt)tr[pr]=at[pr].evaluate(ft,Kt);return tr},Te.reduce=(Ut,tr)=>{Kt.properties=tr;for(const pr of Gt)ft.accumulated=Ut[pr],Ut[pr]=Ct[pr].evaluate(ft,Kt)},Te}(X)).load(Ie.features):function(Te,De){return new Uo(Te,De)}(Ie,X.geojsonVtOptions)}catch(Te){return J(Te)}this.loaded={};const Ae={};if(pe){const Te=o.getPerformanceMeasurement(ie);Te&&(Ae.resourceTiming={},Ae.resourceTiming[X.source]=JSON.parse(JSON.stringify(Te)))}J(null,Ae)}})}reloadTile(X,J){const ie=this.loaded;return ie&&ie[X.uid]?super.reloadTile(X,J):this.loadTile(X,J)}loadGeoJSON(X,J){if(X.request)o.getJSON(X.request,J);else{if(typeof X.data!="string")return J(new Error(`Input data given to '${X.source}' is not a valid GeoJSON object.`));try{return J(null,JSON.parse(X.data))}catch{return J(new Error(`Input data given to '${X.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(X,J){try{J(null,this._geoJSONIndex.getClusterExpansionZoom(X.clusterId))}catch(ie){J(ie)}}getClusterChildren(X,J){try{J(null,this._geoJSONIndex.getChildren(X.clusterId))}catch(ie){J(ie)}}getClusterLeaves(X,J){try{J(null,this._geoJSONIndex.getLeaves(X.clusterId,X.limit,X.offset))}catch(ie){J(ie)}}}class Vo{constructor(X){this.self=X,this.actor=new o.Actor(X,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.projections={},this.defaultProjection=o.getProjection({name:"mercator"}),this.workerSourceTypes={vector:o.VectorTileWorkerSource,geojson:Ra},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(J,ie)=>{if(this.workerSourceTypes[J])throw new Error(`Worker source with name "${J}" already registered.`);this.workerSourceTypes[J]=ie},this.self.registerRTLTextPlugin=J=>{if(o.plugin.isParsed())throw new Error("RTL text plugin already registered.");o.plugin.applyArabicShaping=J.applyArabicShaping,o.plugin.processBidirectionalText=J.processBidirectionalText,o.plugin.processStyledBidirectionalText=J.processStyledBidirectionalText}}clearCaches(X,J,ie){delete this.layerIndexes[X],delete this.availableImages[X],delete this.workerSources[X],delete this.demWorkerSources[X],ie()}checkIfReady(X,J,ie){ie()}setReferrer(X,J){this.referrer=J}spriteLoaded(X,J){this.isSpriteLoaded[X]=J;for(const ie in this.workerSources[X]){const pe=this.workerSources[X][ie];for(const Se in pe)pe[Se]instanceof o.VectorTileWorkerSource&&(pe[Se].isSpriteLoaded=J,pe[Se].fire(new o.Event("isSpriteLoaded")))}}setImages(X,J,ie){this.availableImages[X]=J;for(const pe in this.workerSources[X]){const Se=this.workerSources[X][pe];for(const Ie in Se)Se[Ie].availableImages=J}ie()}enableTerrain(X,J,ie){this.terrain=J,ie()}setProjection(X,J){this.projections[X]=o.getProjection(J)}setLayers(X,J,ie){this.getLayerIndex(X).replace(J),ie()}updateLayers(X,J,ie){this.getLayerIndex(X).update(J.layers,J.removedIds),ie()}loadTile(X,J,ie){const pe=this.enableTerrain?o.extend({enableTerrain:this.terrain},J):J;pe.projection=this.projections[X]||this.defaultProjection,this.getWorkerSource(X,J.type,J.source).loadTile(pe,ie)}loadDEMTile(X,J,ie){const pe=this.enableTerrain?o.extend({buildQuadTree:this.terrain},J):J;this.getDEMWorkerSource(X,J.source).loadTile(pe,ie)}reloadTile(X,J,ie){const pe=this.enableTerrain?o.extend({enableTerrain:this.terrain},J):J;pe.projection=this.projections[X]||this.defaultProjection,this.getWorkerSource(X,J.type,J.source).reloadTile(pe,ie)}abortTile(X,J,ie){this.getWorkerSource(X,J.type,J.source).abortTile(J,ie)}removeTile(X,J,ie){this.getWorkerSource(X,J.type,J.source).removeTile(J,ie)}removeSource(X,J,ie){if(!this.workerSources[X]||!this.workerSources[X][J.type]||!this.workerSources[X][J.type][J.source])return;const pe=this.workerSources[X][J.type][J.source];delete this.workerSources[X][J.type][J.source],pe.removeSource!==void 0?pe.removeSource(J,ie):ie()}loadWorkerSource(X,J,ie){try{this.self.importScripts(J.url),ie()}catch(pe){ie(pe.toString())}}syncRTLPluginState(X,J,ie){try{o.plugin.setState(J);const pe=o.plugin.getPluginURL();if(o.plugin.isLoaded()&&!o.plugin.isParsed()&&pe!=null){this.self.importScripts(pe);const Se=o.plugin.isParsed();ie(Se?void 0:new Error(`RTL Text Plugin failed to import scripts from ${pe}`),Se)}}catch(pe){ie(pe.toString())}}getAvailableImages(X){let J=this.availableImages[X];return J||(J=[]),J}getLayerIndex(X){let J=this.layerIndexes[X];return J||(J=this.layerIndexes[X]=new A),J}getWorkerSource(X,J,ie){if(this.workerSources[X]||(this.workerSources[X]={}),this.workerSources[X][J]||(this.workerSources[X][J]={}),!this.workerSources[X][J][ie]){const pe={send:(Se,Ie,Ae,Te,De,at)=>{this.actor.send(Se,Ie,Ae,X,De,at)},scheduler:this.actor.scheduler};this.workerSources[X][J][ie]=new this.workerSourceTypes[J](pe,this.getLayerIndex(X),this.getAvailableImages(X),this.isSpriteLoaded[X])}return this.workerSources[X][J][ie]}getDEMWorkerSource(X,J){return this.demWorkerSources[X]||(this.demWorkerSources[X]={}),this.demWorkerSources[X][J]||(this.demWorkerSources[X][J]=new T),this.demWorkerSources[X][J]}enforceCacheSizeLimit(X,J){o.enforceCacheSizeLimit(J)}getWorkerPerformanceMetrics(X,J,ie){ie(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Vo(self)),Vo}),u(["./shared"],function(o){function v(m,l){if(Array.isArray(m)){if(!Array.isArray(l)||m.length!==l.length)return!1;for(let f=0;f<m.length;f++)if(!v(m[f],l[f]))return!1;return!0}if(typeof m=="object"&&m!==null&&l!==null){if(typeof l!="object"||Object.keys(m).length!==Object.keys(l).length)return!1;for(const f in m)if(!v(m[f],l[f]))return!1;return!0}return m===l}var w=A;function A(m){return!function(l){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var y,x,S=new Blob([""],{type:"text/javascript"}),C=URL.createObjectURL(S);try{x=new Worker(C),y=!0}catch{y=!1}return x&&x.terminate(),URL.revokeObjectURL(C),y}()?"Uint8ClampedArray"in window?ArrayBuffer.isView?function(){var y=document.createElement("canvas");y.width=y.height=1;var x=y.getContext("2d");if(!x)return!1;var S=x.getImageData(0,0,1,1);return S&&S.width===y.width}()?(T[f=l&&l.failIfMajorPerformanceCaveat]===void 0&&(T[f]=function(y){var x,S=function(C){var I=document.createElement("canvas"),z=Object.create(A.webGLContextAttributes);return z.failIfMajorPerformanceCaveat=C,I.getContext("webgl",z)||I.getContext("experimental-webgl",z)}(y);if(!S)return!1;try{x=S.createShader(S.VERTEX_SHADER)}catch{return!1}return!(!x||S.isContextLost())&&(S.shaderSource(x,"void main() {}"),S.compileShader(x),S.getShaderParameter(x,S.COMPILE_STATUS)===!0)}(f)),T[f]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var f}(m)}var T={};function P(m,l,f){const y=o.window.document.createElement(m);return l!==void 0&&(y.className=l),f&&f.appendChild(y),y}function $(m,l,f){const y=o.window.document.createElementNS("http://www.w3.org/2000/svg",m);for(const x of Object.keys(l))y.setAttributeNS(null,x,l[x]);return f&&f.appendChild(y),y}A.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0};const L=o.window.document&&o.window.document.documentElement.style,k=L&&L.userSelect!==void 0?"userSelect":"WebkitUserSelect";let N;function R(){L&&k&&(N=L[k],L[k]="none")}function j(){L&&k&&(L[k]=N)}function D(m){m.preventDefault(),m.stopPropagation(),o.window.removeEventListener("click",D,!0)}function G(){o.window.addEventListener("click",D,!0),o.window.setTimeout(()=>{o.window.removeEventListener("click",D,!0)},0)}function W(m,l){const f=m.getBoundingClientRect();return de(m,f,l)}function Y(m,l){const f=m.getBoundingClientRect(),y=[];for(let x=0;x<l.length;x++)y.push(de(m,f,l[x]));return y}function ee(m){return o.window.InstallTrigger!==void 0&&m.button===2&&m.ctrlKey&&o.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:m.button}function de(m,l,f){const y=m.offsetWidth===l.width?1:m.offsetWidth/l.width;return new o.pointGeometry((f.clientX-l.left)*y,(f.clientY-l.top)*y)}function xe(m,l){var f=l[0],y=l[1],x=l[2],S=l[3],C=f*S-x*y;return C?(m[0]=S*(C=1/C),m[1]=-y*C,m[2]=-x*C,m[3]=f*C,m):null}function Me(m){const{userImage:l}=m;return!!(l&&l.render&&l.render())&&(m.data.replace(new Uint8Array(l.data.buffer)),!0)}class Ce extends o.Evented{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.RGBAImage({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(l){if(this.loaded!==l&&(this.loaded=l,l)){for(const{ids:f,callback:y}of this.requestors)this._notify(f,y);this.requestors=[]}}hasImage(l){return!!this.getImage(l)}getImage(l){return this.images[l]}addImage(l,f){this._validate(l,f)&&(this.images[l]=f)}_validate(l,f){let y=!0;return this._validateStretch(f.stretchX,f.data&&f.data.width)||(this.fire(new o.ErrorEvent(new Error(`Image "${l}" has invalid "stretchX" value`))),y=!1),this._validateStretch(f.stretchY,f.data&&f.data.height)||(this.fire(new o.ErrorEvent(new Error(`Image "${l}" has invalid "stretchY" value`))),y=!1),this._validateContent(f.content,f)||(this.fire(new o.ErrorEvent(new Error(`Image "${l}" has invalid "content" value`))),y=!1),y}_validateStretch(l,f){if(!l)return!0;let y=0;for(const x of l){if(x[0]<y||x[1]<x[0]||f<x[1])return!1;y=x[1]}return!0}_validateContent(l,f){return!(l&&(l.length!==4||l[0]<0||f.data.width<l[0]||l[1]<0||f.data.height<l[1]||l[2]<0||f.data.width<l[2]||l[3]<0||f.data.height<l[3]||l[2]<l[0]||l[3]<l[1]))}updateImage(l,f){f.version=this.images[l].version+1,this.images[l]=f,this.updatedImages[l]=!0}removeImage(l){const f=this.images[l];delete this.images[l],delete this.patterns[l],f.userImage&&f.userImage.onRemove&&f.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(l,f){let y=!0;if(!this.isLoaded())for(const x of l)this.images[x]||(y=!1);this.isLoaded()||y?this._notify(l,f):this.requestors.push({ids:l,callback:f})}_notify(l,f){const y={};for(const x of l){this.images[x]||this.fire(new o.Event("styleimagemissing",{id:x}));const S=this.images[x];S?y[x]={data:S.data.clone(),pixelRatio:S.pixelRatio,sdf:S.sdf,version:S.version,stretchX:S.stretchX,stretchY:S.stretchY,content:S.content,hasRenderCallback:!!(S.userImage&&S.userImage.render)}:o.warnOnce(`Image "${x}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}f(null,y)}getPixelSize(){const{width:l,height:f}=this.atlasImage;return{width:l,height:f}}getPattern(l){const f=this.patterns[l],y=this.getImage(l);if(!y)return null;if(f&&f.position.version===y.version)return f.position;if(f)f.position.version=y.version;else{const x={w:y.data.width+2,h:y.data.height+2,x:0,y:0},S=new o.ImagePosition(x,y);this.patterns[l]={bin:x,position:S}}return this._updatePatternAtlas(),this.patterns[l].position}bind(l){const f=l.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.Texture(l,this.atlasImage,f.RGBA),this.atlasTexture&&this.atlasTexture.bind(f.LINEAR,f.CLAMP_TO_EDGE)}_updatePatternAtlas(){const l=[];for(const S in this.patterns)l.push(this.patterns[S].bin);const{w:f,h:y}=o.potpack(l),x=this.atlasImage;x.resize({width:f||1,height:y||1});for(const S in this.patterns){const{bin:C}=this.patterns[S],I=C.x+1,z=C.y+1,V=this.images[S].data,U=V.width,Z=V.height;o.RGBAImage.copy(V,x,{x:0,y:0},{x:I,y:z},{width:U,height:Z}),o.RGBAImage.copy(V,x,{x:0,y:Z-1},{x:I,y:z-1},{width:U,height:1}),o.RGBAImage.copy(V,x,{x:0,y:0},{x:I,y:z+Z},{width:U,height:1}),o.RGBAImage.copy(V,x,{x:U-1,y:0},{x:I-1,y:z},{width:1,height:Z}),o.RGBAImage.copy(V,x,{x:0,y:0},{x:I+U,y:z},{width:1,height:Z})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(l){for(const f of l){if(this.callbackDispatchedThisFrame[f])continue;this.callbackDispatchedThisFrame[f]=!0;const y=this.images[f];Me(y)&&this.updateImage(f,y)}}}const qe=new o.Properties({anchor:new o.DataConstantProperty(o.spec.light.anchor),position:new class{constructor(){this.specification=o.spec.light.position}possiblyEvaluate(m,l){return function([f,y,x]){const S=o.degToRad(y+90),C=o.degToRad(x);return{x:f*Math.cos(S)*Math.sin(C),y:f*Math.sin(S)*Math.sin(C),z:f*Math.cos(C),azimuthal:y,polar:x}}(m.expression.evaluate(l))}interpolate(m,l,f){return{x:o.number(m.x,l.x,f),y:o.number(m.y,l.y,f),z:o.number(m.z,l.z,f),azimuthal:o.number(m.azimuthal,l.azimuthal,f),polar:o.number(m.polar,l.polar,f)}}},color:new o.DataConstantProperty(o.spec.light.color),intensity:new o.DataConstantProperty(o.spec.light.intensity)}),Ue="-transition";class ut extends o.Evented{constructor(l){super(),this._transitionable=new o.Transitionable(qe),this.setLight(l),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(l,f={}){if(!this._validate(o.validateLight,l,f))for(const y in l){const x=l[y];o.endsWith(y,Ue)?this._transitionable.setTransition(y.slice(0,-Ue.length),x):this._transitionable.setValue(y,x)}}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,f,y){return(!y||y.validate!==!1)&&o.emitValidationErrors(this,l.call(o.validateStyle,o.extend({value:f,style:{glyphs:!0,sprite:!0},styleSpec:o.spec})))}}const Be=new o.Properties({source:new o.DataConstantProperty(o.spec.terrain.source),exaggeration:new o.DataConstantProperty(o.spec.terrain.exaggeration)}),bt="-transition";class kt extends o.Evented{constructor(l,f){super(),this._transitionable=new o.Transitionable(Be),this.set(l),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=f}get(){return this._transitionable.serialize()}set(l){for(const f in l){const y=l[f];o.endsWith(f,bt)?this._transitionable.setTransition(f.slice(0,-bt.length),y):this._transitionable.setValue(f,y)}}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}}function He(m,l,f,y){const x=o.smoothstep(45,65,f),[S,C]=nt(m,y),I=o.length(l);let z=1-Math.min(1,Math.exp((I-S)/(C-S)*-6));return z*=z*z,z=Math.min(1,1.00747*z),z*x*m.alpha}function nt(m,l){const f=.5/Math.tan(.5*l);return[m.range[0]+f,m.range[1]+f]}const gt=new o.Properties({range:new o.DataConstantProperty(o.spec.fog.range),color:new o.DataConstantProperty(o.spec.fog.color),"high-color":new o.DataConstantProperty(o.spec.fog["high-color"]),"space-color":new o.DataConstantProperty(o.spec.fog["space-color"]),"horizon-blend":new o.DataConstantProperty(o.spec.fog["horizon-blend"]),"star-intensity":new o.DataConstantProperty(o.spec.fog["star-intensity"])}),xt="-transition";class zt extends o.Evented{constructor(l,f){super(),this._transitionable=new o.Transitionable(gt),this.set(l),this._transitioning=this._transitionable.untransitioned(),this._transform=f}get state(){const l=this._transform,f=l.projection.name==="globe",y=o.globeToMercatorTransition(l.zoom),x=this.properties.get("range"),S=[.5,3];return{range:f?[o.number(S[0],x[0],y),o.number(S[1],x[1],y)]:x,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(l,f={}){if(!this._validate(o.validateFog,l,f)){for(const y of Object.keys(o.spec.fog))l&&l[y]===void 0&&(l[y]=o.spec.fog[y].default);for(const y in l){const x=l[y];o.endsWith(y,xt)?this._transitionable.setTransition(y.slice(0,-xt.length),x):this._transitionable.setValue(y,x)}}}getOpacity(l){if(!this._transform.projection.supportsFog)return 0;const f=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:o.smoothstep(45,65,l))*f.a}getOpacityAtLatLng(l,f){return this._transform.projection.supportsFog?function(y,x,S){const C=o.MercatorCoordinate.fromLngLat(x),I=S.elevation?S.elevation.getAtPointOrZero(C):0,z=[C.x,C.y,I];return o.transformMat4(z,z,S.mercatorFogMatrix),He(y,z,S.pitch,S._fov)}(this.state,l,f):0}getFovAdjustedRange(l){return this._transform.projection.supportsFog?nt(this.state,l):[0,1]}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,f,y){return(!y||y.validate!==!1)&&o.emitValidationErrors(this,l.call(o.validateStyle,o.extend({value:f,style:{glyphs:!0,sprite:!0},styleSpec:o.spec})))}}class Vt{constructor(l,f){this.workerPool=l,this.actors=[],this.currentActor=0,this.id=o.uniqueId();const y=this.workerPool.acquire(this.id);for(let x=0;x<y.length;x++){const S=new Vt.Actor(y[x],f,this.id);S.name=`Worker ${x}`,this.actors.push(S)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(l,f,y){o.asyncAll(this.actors,(x,S)=>{x.send(l,f,S)},y=y||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(l=>{l.remove()}),this.actors=[],this.workerPool.release(this.id)}}function Zt(m,l,f){return l*(o.EXTENT/(m.tileSize*Math.pow(2,f-m.tileID.overscaledZ)))}Vt.Actor=o.Actor;class hr{constructor(l,f,y,x){this.screenBounds=l,this.cameraPoint=f,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=y,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,x)}static createFromScreenPoints(l,f){let y,x;if(l instanceof o.pointGeometry||typeof l[0]=="number"){const S=o.pointGeometry.convert(l);y=[S],x=f.isPointAboveHorizon(S)}else{const S=o.pointGeometry.convert(l[0]),C=o.pointGeometry.convert(l[1]);y=[S,C],x=o.polygonizeBounds(S,C).every(I=>f.isPointAboveHorizon(I))}return new hr(y,f.getCameraPoint(),x,f)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(l){return o.polygonizeBounds(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],l)}bufferedCameraGeometry(l){const f=this.screenBounds[0],y=this.screenBounds.length===1?this.screenBounds[0].add(new o.pointGeometry(1,1)):this.screenBounds[1],x=o.polygonizeBounds(f,y,0,!1);return this.cameraPoint.y>y.y&&(this.cameraPoint.x>f.x&&this.cameraPoint.x<y.x?x.splice(3,0,this.cameraPoint):this.cameraPoint.x>=y.x?x[2]=this.cameraPoint:this.cameraPoint.x<=f.x&&(x[3]=this.cameraPoint)),o.bufferConvexPolygon(x,l)}bufferedCameraGeometryGlobe(l){const f=this.screenBounds[0],y=this.screenBounds.length===1?this.screenBounds[0].add(new o.pointGeometry(1,1)):this.screenBounds[1],x=o.polygonizeBounds(f,y,l),S=this.cameraPoint.clone();switch(3*((S.y>f.y)+(S.y>y.y))+((S.x>f.x)+(S.x>y.x))){case 0:x[0]=S,x[4]=S.clone();break;case 1:x.splice(1,0,S);break;case 2:x[1]=S;break;case 3:x.splice(4,0,S);break;case 5:x.splice(2,0,S);break;case 6:x[3]=S;break;case 7:x.splice(3,0,S);break;case 8:x[2]=S}return x}containsTile(l,f,y,x=0){const S=l.queryPadding/f._pixelsPerMercatorPixel+1,C=y?this._bufferedCameraMercator(S,f):this._bufferedScreenMercator(S,f);let I=l.tileID.wrap+(C.unwrapped?x:0);const z=C.polygon.map(se=>o.getTilePoint(l.tileTransform,se,I));if(!o.polygonIntersectsBox(z,0,0,o.EXTENT,o.EXTENT))return;I=l.tileID.wrap+(this.screenGeometryMercator.unwrapped?x:0);const V=this.screenGeometryMercator.polygon.map(se=>o.getTileVec3(l.tileTransform,se,I)),U=V.map(se=>new o.pointGeometry(se[0],se[1])),Z=f.getFreeCameraOptions().position||new o.MercatorCoordinate(0,0,0),te=o.getTileVec3(l.tileTransform,Z,I),ne=V.map(se=>{const Q=o.sub(se,se,te);return o.normalize(Q,Q),new o.Ray(te,Q)}),oe=Zt(l,1,f.zoom)*f._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:U,tilespaceRays:ne,bufferedTilespaceGeometry:z,bufferedTilespaceBounds:(ae=o.getBounds(z),ae.min.x=o.clamp(ae.min.x,0,o.EXTENT),ae.min.y=o.clamp(ae.min.y,0,o.EXTENT),ae.max.x=o.clamp(ae.max.x,0,o.EXTENT),ae.max.y=o.clamp(ae.max.y,0,o.EXTENT),ae),tile:l,tileID:l.tileID,pixelToTileUnitsFactor:oe};var ae}_bufferedScreenMercator(l,f){const y=ir(l);if(this._screenRaycastCache[y])return this._screenRaycastCache[y];{let x;return x=f.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(l),f):{polygon:this.bufferedScreenGeometry(l).map(S=>f.pointCoordinate3D(S)),unwrapped:!0},this._screenRaycastCache[y]=x,x}}_bufferedCameraMercator(l,f){const y=ir(l);if(this._cameraRaycastCache[y])return this._cameraRaycastCache[y];{let x;return x=f.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(l),f):{polygon:this.bufferedCameraGeometry(l).map(S=>f.pointCoordinate3D(S)),unwrapped:!0},this._cameraRaycastCache[y]=x,x}}_projectAndResample(l,f){const y=function(S,C){const I=o.multiply([],C.pixelMatrix,C.globeMatrix),z=[0,-o.GLOBE_RADIUS,0,1],V=[0,o.GLOBE_RADIUS,0,1],U=[0,0,0,1];o.transformMat4$1(z,z,I),o.transformMat4$1(V,V,I),o.transformMat4$1(U,U,I);const Z=new o.pointGeometry(z[0]/z[3],z[1]/z[3]),te=new o.pointGeometry(V[0]/V[3],V[1]/V[3]),ne=o.polygonContainsPoint(S,Z)&&z[3]<U[3],oe=o.polygonContainsPoint(S,te)&&V[3]<U[3];if(!ne&&!oe)return null;const ae=function(Ee,ke,Le){for(let Ne=1;Ne<Ee.length;Ne++){const yt=Rr(ke.pointCoordinate3D(Ee[Ne-1]).x),Oe=Rr(ke.pointCoordinate3D(Ee[Ne]).x);if(Le<0){if(yt<Oe)return{idx:Ne,t:-yt/(Oe-1-yt)}}else if(Oe<yt)return{idx:Ne,t:(1-yt)/(Oe+1-yt)}}return null}(S,C,ne?-1:1);if(!ae)return null;const{idx:se,t:Q}=ae;let fe=se>1?Tr(S.slice(0,se),C):[],he=se<S.length?Tr(S.slice(se),C):[];fe=fe.map(Ee=>new o.pointGeometry(Rr(Ee.x),Ee.y)),he=he.map(Ee=>new o.pointGeometry(Rr(Ee.x),Ee.y));const me=[...fe];me.length===0&&me.push(he[he.length-1]);const we=o.number(me[me.length-1].y,(he.length===0?fe[0]:he[0]).y,Q);let ve;return ve=ne?[new o.pointGeometry(0,we),new o.pointGeometry(0,0),new o.pointGeometry(1,0),new o.pointGeometry(1,we)]:[new o.pointGeometry(1,we),new o.pointGeometry(1,1),new o.pointGeometry(0,1),new o.pointGeometry(0,we)],me.push(...ve),he.length===0?me.push(fe[0]):me.push(...he),{polygon:me.map(Ee=>new o.MercatorCoordinate(Ee.x,Ee.y)),unwrapped:!1}}(l,f);if(y)return y;const x=function(S,C){let I=!1,z=-1/0,V=0;for(let Z=0;Z<S.length-1;Z++)S[Z].x>z&&(z=S[Z].x,V=Z);for(let Z=0;Z<S.length-1;Z++){const te=(V+Z)%(S.length-1),ne=S[te],oe=S[te+1];Math.abs(ne.x-oe.x)>.5&&(ne.x<oe.x?(ne.x+=1,te===0&&(S[S.length-1].x+=1)):(oe.x+=1,te+1===S.length-1&&(S[0].x+=1)),I=!0)}const U=o.mercatorXfromLng(C.center.lng);return I&&U<Math.abs(U-1)&&S.forEach(Z=>{Z.x-=1}),{polygon:S,unwrapped:I}}(Tr(l,f).map(S=>new o.pointGeometry(Rr(S.x),S.y)),f);return{polygon:x.polygon.map(S=>new o.MercatorCoordinate(S.x,S.y)),unwrapped:x.unwrapped}}}function Tr(m,l){return o.resample(m,f=>{const y=l.pointCoordinate3D(f);f.x=y.x,f.y=y.y},1/256)}function Rr(m){return m<0?1+m%1:m%1}function ir(m){return 100*m|0}function _t(m,l,f,y,x){const S=function(C,I){if(C)return x(C);if(I){m.url&&I.tiles&&m.tiles&&delete m.tiles;const z=o.pick(o.extend(I,m),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);I.vector_layers&&(z.vectorLayers=I.vector_layers,z.vectorLayerIds=z.vectorLayers.map(V=>V.id)),z.tiles=l.canonicalizeTileset(z,m.url),x(null,z)}};return m.url?o.getJSON(l.transformRequest(l.normalizeSourceURL(m.url,null,f,y),o.ResourceType.Source),S):o.exported.frame(()=>S(null,m))}class Mt{constructor(l,f,y){this.bounds=o.LngLatBounds.convert(this.validateBounds(l)),this.minzoom=f||0,this.maxzoom=y||24}validateBounds(l){return Array.isArray(l)&&l.length===4?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]}contains(l){const f=Math.pow(2,l.z),y=Math.floor(o.mercatorXfromLng(this.bounds.getWest())*f),x=Math.floor(o.mercatorYfromLat(this.bounds.getNorth())*f),S=Math.ceil(o.mercatorXfromLng(this.bounds.getEast())*f),C=Math.ceil(o.mercatorYfromLat(this.bounds.getSouth())*f);return l.x>=y&&l.x<S&&l.y>=x&&l.y<C}}class or{constructor(l,f,y){this.context=l;const x=l.gl;this.buffer=x.createBuffer(),this.dynamicDraw=!!y,this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),x.bufferData(x.ELEMENT_ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?x.DYNAMIC_DRAW:x.STATIC_DRAW),this.dynamicDraw||f.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(l){const f=this.context.gl;this.context.unbindVAO(),this.bind(),f.bufferSubData(f.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Qe={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class lr{constructor(l,f,y,x){this.length=f.length,this.attributes=y,this.itemSize=f.bytesPerElement,this.dynamicDraw=x,this.context=l;const S=l.gl;this.buffer=S.createBuffer(),l.bindVertexBuffer.set(this.buffer),S.bufferData(S.ARRAY_BUFFER,f.arrayBuffer,this.dynamicDraw?S.DYNAMIC_DRAW:S.STATIC_DRAW),this.dynamicDraw||f.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(l){const f=this.context.gl;this.bind(),f.bufferSubData(f.ARRAY_BUFFER,0,l.arrayBuffer)}enableAttributes(l,f){for(let y=0;y<this.attributes.length;y++){const x=f.attributes[this.attributes[y].name];x!==void 0&&l.enableVertexAttribArray(x)}}setVertexAttribPointers(l,f,y){for(let x=0;x<this.attributes.length;x++){const S=this.attributes[x],C=f.attributes[S.name];C!==void 0&&l.vertexAttribPointer(C,S.components,l[Qe[S.type]],!1,this.itemSize,S.offset+this.itemSize*(y||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Ot{constructor(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(l){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Sr extends Ot{getDefault(){return o.Color.transparent}set(l){const f=this.current;(l.r!==f.r||l.g!==f.g||l.b!==f.b||l.a!==f.a||this.dirty)&&(this.gl.clearColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class Lr extends Ot{getDefault(){return 1}set(l){(l!==this.current||this.dirty)&&(this.gl.clearDepth(l),this.current=l,this.dirty=!1)}}class mn extends Ot{getDefault(){return 0}set(l){(l!==this.current||this.dirty)&&(this.gl.clearStencil(l),this.current=l,this.dirty=!1)}}class Kn extends Ot{getDefault(){return[!0,!0,!0,!0]}set(l){const f=this.current;(l[0]!==f[0]||l[1]!==f[1]||l[2]!==f[2]||l[3]!==f[3]||this.dirty)&&(this.gl.colorMask(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class Yi extends Ot{getDefault(){return!0}set(l){(l!==this.current||this.dirty)&&(this.gl.depthMask(l),this.current=l,this.dirty=!1)}}class Ti extends Ot{getDefault(){return 255}set(l){(l!==this.current||this.dirty)&&(this.gl.stencilMask(l),this.current=l,this.dirty=!1)}}class po extends Ot{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(l){const f=this.current;(l.func!==f.func||l.ref!==f.ref||l.mask!==f.mask||this.dirty)&&(this.gl.stencilFunc(l.func,l.ref,l.mask),this.current=l,this.dirty=!1)}}class Ln extends Ot{getDefault(){const l=this.gl;return[l.KEEP,l.KEEP,l.KEEP]}set(l){const f=this.current;(l[0]!==f[0]||l[1]!==f[1]||l[2]!==f[2]||this.dirty)&&(this.gl.stencilOp(l[0],l[1],l[2]),this.current=l,this.dirty=!1)}}class ii extends Ot{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;l?f.enable(f.STENCIL_TEST):f.disable(f.STENCIL_TEST),this.current=l,this.dirty=!1}}class jo extends Ot{getDefault(){return[0,1]}set(l){const f=this.current;(l[0]!==f[0]||l[1]!==f[1]||this.dirty)&&(this.gl.depthRange(l[0],l[1]),this.current=l,this.dirty=!1)}}class mo extends Ot{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;l?f.enable(f.DEPTH_TEST):f.disable(f.DEPTH_TEST),this.current=l,this.dirty=!1}}class qs extends Ot{getDefault(){return this.gl.LESS}set(l){(l!==this.current||this.dirty)&&(this.gl.depthFunc(l),this.current=l,this.dirty=!1)}}class sa extends Ot{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;l?f.enable(f.BLEND):f.disable(f.BLEND),this.current=l,this.dirty=!1}}class Da extends Ot{getDefault(){const l=this.gl;return[l.ONE,l.ZERO]}set(l){const f=this.current;(l[0]!==f[0]||l[1]!==f[1]||this.dirty)&&(this.gl.blendFunc(l[0],l[1]),this.current=l,this.dirty=!1)}}class ss extends Ot{getDefault(){return o.Color.transparent}set(l){const f=this.current;(l.r!==f.r||l.g!==f.g||l.b!==f.b||l.a!==f.a||this.dirty)&&(this.gl.blendColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class Je extends Ot{getDefault(){return this.gl.FUNC_ADD}set(l){(l!==this.current||this.dirty)&&(this.gl.blendEquation(l),this.current=l,this.dirty=!1)}}class et extends Ot{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;l?f.enable(f.CULL_FACE):f.disable(f.CULL_FACE),this.current=l,this.dirty=!1}}class vt extends Ot{getDefault(){return this.gl.BACK}set(l){(l!==this.current||this.dirty)&&(this.gl.cullFace(l),this.current=l,this.dirty=!1)}}class $t extends Ot{getDefault(){return this.gl.CCW}set(l){(l!==this.current||this.dirty)&&(this.gl.frontFace(l),this.current=l,this.dirty=!1)}}class jt extends Ot{getDefault(){return null}set(l){(l!==this.current||this.dirty)&&(this.gl.useProgram(l),this.current=l,this.dirty=!1)}}class sr extends Ot{getDefault(){return this.gl.TEXTURE0}set(l){(l!==this.current||this.dirty)&&(this.gl.activeTexture(l),this.current=l,this.dirty=!1)}}class fr extends Ot{getDefault(){const l=this.gl;return[0,0,l.drawingBufferWidth,l.drawingBufferHeight]}set(l){const f=this.current;(l[0]!==f[0]||l[1]!==f[1]||l[2]!==f[2]||l[3]!==f[3]||this.dirty)&&(this.gl.viewport(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class nr extends Ot{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.bindFramebuffer(f.FRAMEBUFFER,l),this.current=l,this.dirty=!1}}class Xt extends Ot{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.bindRenderbuffer(f.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class Cr extends Ot{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.bindTexture(f.TEXTURE_2D,l),this.current=l,this.dirty=!1}}class kr extends Ot{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.bindBuffer(f.ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class un extends Ot{getDefault(){return null}set(l){const f=this.gl;f.bindBuffer(f.ELEMENT_ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class bn extends Ot{constructor(l){super(l),this.vao=l.extVertexArrayObject}getDefault(){return null}set(l){this.vao&&(l!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(l),this.current=l,this.dirty=!1)}}class Cn extends Ot{getDefault(){return 4}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_ALIGNMENT,l),this.current=l,this.dirty=!1}}class fi extends Ot{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),this.current=l,this.dirty=!1}}class To extends Ot{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const f=this.gl;f.pixelStorei(f.UNPACK_FLIP_Y_WEBGL,l),this.current=l,this.dirty=!1}}class Uo extends Ot{constructor(l,f){super(l),this.context=l,this.parent=f}getDefault(){return null}}class oi extends Uo{setDirty(){this.dirty=!0}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class di extends Uo{attachment(){return this.gl.DEPTH_ATTACHMENT}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const f=this.gl;f.framebufferRenderbuffer(f.FRAMEBUFFER,this.attachment(),f.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class Ra extends di{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}class Vo{constructor(l,f,y,x){this.context=l,this.width=f,this.height=y;const S=this.framebuffer=l.gl.createFramebuffer();this.colorAttachment=new oi(l,S),x&&(this.depthAttachment=new di(l,S))}destroy(){const l=this.context.gl,f=this.colorAttachment.get();if(f&&l.deleteTexture(f),this.depthAttachment){const y=this.depthAttachment.get();y&&l.deleteRenderbuffer(y)}l.deleteFramebuffer(this.framebuffer)}}class ce{constructor(l,f=!1){if(this.gl=l,this.isWebGL2=f,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),f){const y=l;this.extVertexArrayObject={createVertexArrayOES:y.createVertexArray.bind(l),deleteVertexArrayOES:y.deleteVertexArray.bind(l),bindVertexArrayOES:y.bindVertexArray.bind(l)}}this.clearColor=new Sr(this),this.clearDepth=new Lr(this),this.clearStencil=new mn(this),this.colorMask=new Kn(this),this.depthMask=new Yi(this),this.stencilMask=new Ti(this),this.stencilFunc=new po(this),this.stencilOp=new Ln(this),this.stencilTest=new ii(this),this.depthRange=new jo(this),this.depthTest=new mo(this),this.depthFunc=new qs(this),this.blend=new sa(this),this.blendFunc=new Da(this),this.blendColor=new ss(this),this.blendEquation=new Je(this),this.cullFace=new et(this),this.cullFaceSide=new vt(this),this.frontFace=new $t(this),this.program=new jt(this),this.activeTexture=new sr(this),this.viewport=new fr(this),this.bindFramebuffer=new nr(this),this.bindRenderbuffer=new Xt(this),this.bindTexture=new Cr(this),this.bindVertexBuffer=new kr(this),this.bindElementBuffer=new un(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new bn(this),this.pixelStoreUnpack=new Cn(this),this.pixelStoreUnpackPremultiplyAlpha=new fi(this),this.pixelStoreUnpackFlipY=new To(this),this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureFilterAnisotropicForceOff=!1,this.extStandardDerivativesForceOff=!1,this.extDebugRendererInfo=l.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=l.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=l.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),f||(this.extTextureHalfFloat=l.getExtension("OES_texture_half_float")),(f||this.extTextureHalfFloat&&l.getExtension("OES_texture_half_float_linear"))&&(this.extRenderToTextureHalfFloat=l.getExtension("EXT_color_buffer_half_float")),this.extStandardDerivatives=f||l.getExtension("OES_standard_derivatives"),this.extTimerQuery=l.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE)}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(l,f){return new or(this,l,f)}createVertexBuffer(l,f,y){return new lr(this,l,f,y)}createRenderbuffer(l,f,y){const x=this.gl,S=x.createRenderbuffer();return this.bindRenderbuffer.set(S),x.renderbufferStorage(x.RENDERBUFFER,l,f,y),this.bindRenderbuffer.set(null),S}createFramebuffer(l,f,y){return new Vo(this,l,f,y)}clear({color:l,depth:f,stencil:y}){const x=this.gl;let S=0;l&&(S|=x.COLOR_BUFFER_BIT,this.clearColor.set(l),this.colorMask.set([!0,!0,!0,!0])),f!==void 0&&(S|=x.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(f),this.depthMask.set(!0)),y!==void 0&&(S|=x.STENCIL_BUFFER_BIT,this.clearStencil.set(y),this.stencilMask.set(255)),x.clear(S)}setCullFace(l){l.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))}setDepthMode(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)}setStencilMode(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)}setColorMode(l){v(l.blendFunction,o.ColorMode.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor)),this.colorMask.set(l.mask)}unbindVAO(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)}}class X extends o.Evented{constructor(l,f,y,x){if(super(),this.id=l,this.dispatcher=y,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.extend(this,o.pick(f,["url","scheme","tileSize","promoteId"])),this._options=o.extend({type:"vector"},f),this._collectResourceTiming=f.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(x),this._tileWorkers={},this._deduped=new o.DedupedRequest}load(l){this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"}));const f=Array.isArray(this.map._language)?this.map._language.join():this.map._language,y=this.map._worldview;this._tileJSONRequest=_t(this._options,this.map._requestManager,f,y,(x,S)=>{this._tileJSONRequest=null,this._loaded=!0,x?(f&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${f}`),y&&y.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${y}`),this.fire(new o.ErrorEvent(x))):S&&(o.extend(this,S),S.bounds&&(this.tileBounds=new Mt(S.bounds,this.minzoom,this.maxzoom)),o.postTurnstileEvent(S.tiles,this.map._requestManager._customAccessToken),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))),l&&l(x)})}loaded(){return this._loaded}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}onAdd(l){this.map=l,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(l){return this._options.tiles=l,this.reload(),this}setUrl(l){return this.url=l,this._options.url=l,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return o.extend({},this._options)}loadTile(l,f){const y=this.map._requestManager.normalizeTileURL(l.tileID.canonical.url(this.tiles,this.scheme)),x={request:this.map._requestManager.transformRequest(y,o.ResourceType.Tile),data:void 0,uid:l.uid,tileID:l.tileID,tileZoom:l.tileZoom,zoom:l.tileID.overscaledZ,tileSize:this.tileSize*l.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:o.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:l.isSymbolTile};if(x.request.collectResourceTiming=this._collectResourceTiming,l.actor&&l.state!=="expired")l.state==="loading"?l.reloadCallback=f:l.request=l.actor.send("reloadTile",x,S.bind(this));else if(l.actor=this._tileWorkers[y]=this._tileWorkers[y]||this.dispatcher.getActor(),this.dispatcher.ready)l.request=l.actor.send("loadTile",x,S.bind(this),void 0,!0);else{const C=o.loadVectorTile.call({deduped:this._deduped},x,(I,z)=>{I||!z?S.call(this,I):(x.data={cacheControl:z.cacheControl,expires:z.expires,rawData:z.rawData.slice(0)},l.actor&&l.actor.send("loadTile",x,S.bind(this),void 0,!0))},!0);l.request={cancel:C}}function S(C,I){return delete l.request,l.aborted?f(null):C&&C.status!==404?f(C):(I&&I.resourceTiming&&(l.resourceTiming=I.resourceTiming),this.map._refreshExpiredTiles&&I&&l.setExpiryData(I),l.loadVectorData(I,this.map.painter),o.cacheEntryPossiblyAdded(this.dispatcher),f(null),void(l.reloadCallback&&(this.loadTile(l,l.reloadCallback),l.reloadCallback=null)))}}abortTile(l){l.request&&(l.request.cancel(),delete l.request),l.actor&&l.actor.send("abortTile",{uid:l.uid,type:this.type,source:this.id})}unloadTile(l){l.unloadVectorData(),l.actor&&l.actor.send("removeTile",{uid:l.uid,type:this.type,source:this.id})}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class J extends o.Evented{constructor(l,f,y,x){super(),this.id=l,this.dispatcher=y,this.setEventedParent(x),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.extend({type:"raster"},f),o.extend(this,o.pick(f,["url","scheme","tileSize"]))}load(l){this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=_t(this._options,this.map._requestManager,null,null,(f,y)=>{this._tileJSONRequest=null,this._loaded=!0,f?this.fire(new o.ErrorEvent(f)):y&&(o.extend(this,y),y.bounds&&(this.tileBounds=new Mt(y.bounds,this.minzoom,this.maxzoom)),o.postTurnstileEvent(y.tiles),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))),l&&l(f)})}loaded(){return this._loaded}onAdd(l){this.map=l,this.load()}reload(){this.cancelTileJSONRequest(),this.load(()=>this.map.style._clearSource(this.id))}setTiles(l){return this._options.tiles=l,this.reload(),this}setUrl(l){return this.url=l,this._options.url=l,this.reload(),this}onRemove(){this.cancelTileJSONRequest()}serialize(){return o.extend({},this._options)}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}loadTile(l,f){const y=o.exported.devicePixelRatio>=2,x=this.map._requestManager.normalizeTileURL(l.tileID.canonical.url(this.tiles,this.scheme),y,this.tileSize);l.request=o.getImage(this.map._requestManager.transformRequest(x,o.ResourceType.Tile),(S,C,I,z)=>(delete l.request,l.aborted?(l.state="unloaded",f(null)):S?(l.state="errored",f(S)):C?(this.map._refreshExpiredTiles&&l.setExpiryData({cacheControl:I,expires:z}),l.setTexture(C,this.map.painter),l.state="loaded",o.cacheEntryPossiblyAdded(this.dispatcher),void f(null)):f(null)))}static loadTileData(l,f,y){l.setTexture(f,y)}static unloadTileData(l,f){l.texture&&f.saveTileTexture(l.texture)}abortTile(l,f){l.request&&(l.request.cancel(),delete l.request),f()}unloadTile(l,f){l.texture&&this.map.painter.saveTileTexture(l.texture),f()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}let ie;function pe(m,l,f,y,x,S,C,I){const z=[m,f,x,l,y,S,1,1,1],V=[C,I,1],U=o.adjoint([],z),[Z,te,ne]=o.transformMat3(V,V,o.transpose(U,U));return o.multiply$1(z,[Z,0,0,0,te,0,0,0,ne],z)}class Se extends o.Evented{constructor(l,f,y,x){super(),this.id=l,this.dispatcher=y,this.coordinates=f.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(x),this.options=f,this._dirty=!1}load(l,f){this._loaded=f||!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this.url=this.options.url,this._imageRequest=o.getImage(this.map._requestManager.transformRequest(this.url,o.ResourceType.Image),(y,x)=>{if(this._imageRequest=null,this._loaded=!0,y)this.fire(new o.ErrorEvent(y));else if(x){const{HTMLImageElement:S}=o.window;this.image=x instanceof S?o.exported.getImageData(x):x,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,l&&(this.coordinates=l),this._finishLoading()}})}loaded(){return this._loaded}updateImage(l){return this.image&&l.url?(this._imageRequest&&l.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=l.url,this.load(l.coordinates,this._loaded),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(l){this.map=l,this.load()}onRemove(){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),this.texture&&this.texture.destroy()}setCoordinates(l){this.coordinates=l,this._boundsArray=void 0;const f=l.map(o.MercatorCoordinate.fromLngLat);return this.tileID=function(y){let x=1/0,S=1/0,C=-1/0,I=-1/0;for(const Z of y)x=Math.min(x,Z.x),S=Math.min(S,Z.y),C=Math.max(C,Z.x),I=Math.max(I,Z.y);const z=Math.max(C-x,I-S),V=Math.max(0,Math.floor(-Math.log(z)/Math.LN2)),U=Math.pow(2,V);return new o.CanonicalTileID(V,Math.floor((x+C)/2*U),Math.floor((S+I)/2*U))}(f),this.minzoom=this.maxzoom=this.tileID.z,this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0}_prepareData(l){for(const z in this.tiles){const V=this.tiles[z];V.state!=="loaded"&&(V.state="loaded",V.texture=this.texture)}if(this._boundsArray)return;const f=o.tileTransform(this.tileID,this.map.transform.projection),[y,x,S,C]=this.coordinates.map(z=>{const V=f.projection.project(z[0],z[1]);return o.getTilePoint(f,V)._round()});this.perspectiveTransform=function(z,V,U,Z,te,ne,oe,ae,se,Q){const fe=pe(0,0,z,0,0,V,z,V),he=pe(U,Z,te,ne,oe,ae,se,Q);return o.multiply$1(he,o.adjoint(fe,fe),he),[he[6]/he[8]*z/o.EXTENT,he[7]/he[8]*V/o.EXTENT]}(this.width,this.height,y.x,y.y,x.x,x.y,C.x,C.y,S.x,S.y);const I=this._boundsArray=new o.StructArrayLayout4i8;I.emplaceBack(y.x,y.y,0,0),I.emplaceBack(x.x,x.y,o.EXTENT,0),I.emplaceBack(C.x,C.y,0,o.EXTENT),I.emplaceBack(S.x,S.y,o.EXTENT,o.EXTENT),this.boundsBuffer&&this.boundsBuffer.destroy(),this.boundsBuffer=l.createVertexBuffer(I,o.boundsAttributes.members),this.boundsSegments=o.SegmentVector.simpleSegment(0,0,4,2)}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const l=this.map.painter.context,f=l.gl;this._dirty&&(this.texture?this.texture.update(this.image):(this.texture=new o.Texture(l,this.image,f.RGBA),this.texture.bind(f.LINEAR,f.CLAMP_TO_EDGE)),this._dirty=!1),this._prepareData(l)}loadTile(l,f){this.tileID&&this.tileID.equals(l.tileID.canonical)?(this.tiles[String(l.tileID.wrap)]=l,l.buckets={},f(null)):(l.state="errored",f(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}}const Ie={vector:X,raster:J,"raster-dem":class extends J{constructor(m,l,f,y){super(m,l,f,y),this.type="raster-dem",this.maxzoom=22,this._options=o.extend({type:"raster-dem"},l),this.encoding=l.encoding||"mapbox"}loadTile(m,l){const f=this.map._requestManager.normalizeTileURL(m.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function y(x,S){x&&(m.state="errored",l(x)),S&&(m.dem=S,m.dem.onDeserialize(),m.needsHillshadePrepare=!0,m.needsDEMTextureUpload=!0,m.state="loaded",l(null))}m.request=o.getImage(this.map._requestManager.transformRequest(f,o.ResourceType.Tile),function(x,S,C,I){if(delete m.request,m.aborted)m.state="unloaded",l(null);else if(x)m.state="errored",l(x);else if(S){this.map._refreshExpiredTiles&&m.setExpiryData({cacheControl:C,expires:I});const z=o.window.ImageBitmap&&S instanceof o.window.ImageBitmap&&(ie==null&&(ie=o.window.OffscreenCanvas&&new o.window.OffscreenCanvas(1,1).getContext("2d")&&typeof o.window.createImageBitmap=="function"),ie),V=1-(S.width-o.prevPowerOfTwo(S.width))/2;V<1||m.neighboringTiles||(m.neighboringTiles=this._getNeighboringTiles(m.tileID));const U=z?S:o.exported.getImageData(S,V),Z={uid:m.uid,coord:m.tileID,source:this.id,rawImageData:U,encoding:this.encoding,padding:V};m.actor&&m.state!=="expired"||(m.actor=this.dispatcher.getActor(),m.actor.send("loadDEMTile",Z,y.bind(this),void 0,!0))}}.bind(this))}_getNeighboringTiles(m){const l=m.canonical,f=Math.pow(2,l.z),y=(l.x-1+f)%f,x=l.x===0?m.wrap-1:m.wrap,S=(l.x+1+f)%f,C=l.x+1===f?m.wrap+1:m.wrap,I={};return I[new o.OverscaledTileID(m.overscaledZ,x,l.z,y,l.y).key]={backfilled:!1},I[new o.OverscaledTileID(m.overscaledZ,C,l.z,S,l.y).key]={backfilled:!1},l.y>0&&(I[new o.OverscaledTileID(m.overscaledZ,x,l.z,y,l.y-1).key]={backfilled:!1},I[new o.OverscaledTileID(m.overscaledZ,m.wrap,l.z,l.x,l.y-1).key]={backfilled:!1},I[new o.OverscaledTileID(m.overscaledZ,C,l.z,S,l.y-1).key]={backfilled:!1}),l.y+1<f&&(I[new o.OverscaledTileID(m.overscaledZ,x,l.z,y,l.y+1).key]={backfilled:!1},I[new o.OverscaledTileID(m.overscaledZ,m.wrap,l.z,l.x,l.y+1).key]={backfilled:!1},I[new o.OverscaledTileID(m.overscaledZ,C,l.z,S,l.y+1).key]={backfilled:!1}),I}unloadTile(m){m.demTexture&&this.map.painter.saveTileTexture(m.demTexture),m.fbo&&(m.fbo.destroy(),delete m.fbo),m.dem&&delete m.dem,delete m.neighboringTiles,m.state="unloaded"}},geojson:class extends o.Evented{constructor(m,l,f,y){super(),this.id=m,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=f.getActor(),this.setEventedParent(y),this._data=l.data,this._options=o.extend({},l),this._collectResourceTiming=l.collectResourceTiming,l.maxzoom!==void 0&&(this.maxzoom=l.maxzoom),l.type&&(this.type=l.type),l.attribution&&(this.attribution=l.attribution),this.promoteId=l.promoteId;const x=o.EXTENT/this.tileSize;this.workerOptions=o.extend({source:this.id,cluster:l.cluster||!1,geojsonVtOptions:{buffer:(l.buffer!==void 0?l.buffer:128)*x,tolerance:(l.tolerance!==void 0?l.tolerance:.375)*x,extent:o.EXTENT,maxZoom:this.maxzoom,lineMetrics:l.lineMetrics||!1,generateId:l.generateId||!1},superclusterOptions:{maxZoom:l.clusterMaxZoom!==void 0?l.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,l.clusterMinPoints||2),extent:o.EXTENT,radius:(l.clusterRadius!==void 0?l.clusterRadius:50)*x,log:!1,generateId:l.generateId||!1},clusterProperties:l.clusterProperties,filter:l.filter},l.workerOptions)}onAdd(m){this.map=m,this.setData(this._data)}setData(m){return this._data=m,this._updateWorkerData(),this}getClusterExpansionZoom(m,l){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:m,source:this.id},l),this}getClusterChildren(m,l){return this.actor.send("geojson.getClusterChildren",{clusterId:m,source:this.id},l),this}getClusterLeaves(m,l,f,y){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:m,limit:l,offset:f},y),this}_updateWorkerData(){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new o.Event("dataloading",{dataType:"source"})),this._loaded=!1;const m=o.extend({},this.workerOptions),l=this._data;typeof l=="string"?(m.request=this.map._requestManager.transformRequest(o.exported.resolveURL(l),o.ResourceType.Source),m.request.collectResourceTiming=this._collectResourceTiming):m.data=JSON.stringify(l),this._pendingLoad=this.actor.send(`${this.type}.loadData`,m,(f,y)=>{if(this._loaded=!0,this._pendingLoad=null,f)this.fire(new o.ErrorEvent(f));else{const x={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&y&&y.resourceTiming&&y.resourceTiming[this.id]&&(x.resourceTiming=y.resourceTiming[this.id]),this.fire(new o.Event("data",x)),this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(m,l){const f=m.actor?"reloadTile":"loadTile";m.actor=this.actor,m.request=this.actor.send(f,{type:this.type,uid:m.uid,tileID:m.tileID,tileZoom:m.tileZoom,zoom:m.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:o.exported.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(y,x)=>(delete m.request,m.unloadVectorData(),m.aborted?l(null):y?l(y):(m.loadVectorData(x,this.map.painter,f==="reloadTile"),l(null))),void 0,f==="loadTile")}abortTile(m){m.request&&(m.request.cancel(),delete m.request),m.aborted=!0}unloadTile(m){m.unloadVectorData(),this.actor.send("removeTile",{uid:m.uid,type:this.type,source:this.id})}onRemove(){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return o.extend({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends Se{constructor(m,l,f,y){super(m,l,f,y),this.roundZoom=!0,this.type="video",this.options=l}load(){this._loaded=!1;const m=this.options;this.urls=[];for(const l of m.urls)this.urls.push(this.map._requestManager.transformRequest(l,o.ResourceType.Source).url);o.getVideo(this.urls,(l,f)=>{this._loaded=!0,l?this.fire(new o.ErrorEvent(l)):f&&(this.video=f,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(m){if(this.video){const l=this.video.seekable;m<l.start(0)||m>l.end(0)?this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${this.id}`,null,`Playback for this video can be set only between the ${l.start(0)} and ${l.end(0)}-second mark.`))):this.video.currentTime=m}}getVideo(){return this.video}onAdd(m){this.map||(this.map=m,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const m=this.map.painter.context,l=m.gl;this.texture?this.video.paused||(this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),l.texSubImage2D(l.TEXTURE_2D,0,0,0,l.RGBA,l.UNSIGNED_BYTE,this.video)):(this.texture=new o.Texture(m,this.video,l.RGBA),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(m)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:Se,canvas:class extends Se{constructor(m,l,f,y){super(m,l,f,y),l.coordinates?Array.isArray(l.coordinates)&&l.coordinates.length===4&&!l.coordinates.some(x=>!Array.isArray(x)||x.length!==2||x.some(S=>typeof S!="number"))||this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${m}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${m}`,null,'missing required property "coordinates"'))),l.animate&&typeof l.animate!="boolean"&&this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${m}`,null,'optional "animate" property must be a boolean value'))),l.canvas?typeof l.canvas=="string"||l.canvas instanceof o.window.HTMLCanvasElement||this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${m}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.ErrorEvent(new o.ValidationError(`sources.${m}`,null,'missing required property "canvas"'))),this.options=l,this.animate=l.animate===void 0||l.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof o.window.HTMLCanvasElement?this.options.canvas:o.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(m){this.map=m,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let m=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,m=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,m=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const l=this.map.painter.context;this.texture?(m||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new o.Texture(l,this.canvas,l.gl.RGBA,{premultiply:!0}),this._prepareData(l)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const m of[this.canvas.width,this.canvas.height])if(isNaN(m)||m<=0)return!0;return!1}},custom:class extends o.Evented{constructor(m,l,f,y){super(),this.id=m,this.type="custom",this._dataType="raster",this._dispatcher=f,this._implementation=l,this.setEventedParent(y),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new o.ErrorEvent(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new o.ErrorEvent(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new Mt(this._implementation.bounds,this.minzoom,this.maxzoom)),l.update=this._update.bind(this),l.clearTiles=this._clearTiles.bind(this),l.coveringTiles=this._coveringTiles.bind(this),o.extend(this,o.pick(l,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return o.pick(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new o.Event("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(m){this._map=m,this._loaded=!1,this.fire(new o.Event("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(m),this.load()}onRemove(m){this._implementation.onRemove&&this._implementation.onRemove(m)}hasTile(m){if(this._implementation.hasTile){const{x:l,y:f,z:y}=m.canonical;return this._implementation.hasTile({x:l,y:f,z:y})}return!this.tileBounds||this.tileBounds.contains(m.canonical)}loadTile(m,l){const{x:f,y,z:x}=m.tileID.canonical,S=new o.window.AbortController;m.request=Promise.resolve(this._implementation.loadTile({x:f,y,z:x},{signal:S.signal})).then(function(C){return delete m.request,m.aborted?(m.state="unloaded",l(null)):C===void 0?(m.state="errored",l(null)):C===null?(this.loadTileData(m,{width:this.tileSize,height:this.tileSize,data:null}),m.state="loaded",l(null)):function(I){return I instanceof o.window.ImageData||I instanceof o.window.HTMLCanvasElement||I instanceof o.window.ImageBitmap||I instanceof o.window.HTMLImageElement}(C)?(this.loadTileData(m,C),m.state="loaded",void l(null)):(m.state="errored",l(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}.bind(this)).catch(C=>{C.code!==20&&(m.state="errored",l(C))}),m.request.cancel=()=>S.abort()}loadTileData(m,l){J.loadTileData(m,l,this._map.painter)}unloadTileData(m){J.unloadTileData(m,this._map.painter)}unloadTile(m,l){if(this.unloadTileData(m),this._implementation.unloadTile){const{x:f,y,z:x}=m.tileID.canonical;this._implementation.unloadTile({x:f,y,z:x})}l()}abortTile(m,l){m.request&&m.request.cancel&&(m.request.cancel(),delete m.request),l()}hasTransition(){return!1}_coveringTiles(){return this._map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(m=>({x:m.canonical.x,y:m.canonical.y,z:m.canonical.z}))}_clearTiles(){this._map.style._clearSource(this.id)}_update(){this.fire(new o.Event("data",{dataType:"source",sourceDataType:"content"}))}}},Ae=function(m,l,f,y){const x=new Ie[l.type](m,l,f,y);if(x.id!==m)throw new Error(`Expected Source id to be ${m} instead of ${x.id}`);return o.bindAll(["load","abort","unload","serialize","prepare"],x),x};function Te(m,l){const f=o.identity([]);return o.scale(f,f,[.5*m.width,.5*-m.height,1]),o.translate(f,f,[1,-1,0]),o.multiply(f,f,m.calculateProjMatrix(l.toUnwrapped())),Float32Array.from(f)}function De(m,l,f,y,x,S,C,I=!1){const z=m.tilesIn(y,C,I);z.sort(Ct);const V=[];for(const Z of z)V.push({wrappedTileID:Z.tile.tileID.wrapped().key,queryResults:Z.tile.queryRenderedFeatures(l,f,m._state,Z,x,S,Te(m.transform,Z.tile.tileID),I)});const U=function(Z){const te={},ne={};for(const oe of Z){const ae=oe.queryResults,se=oe.wrappedTileID,Q=ne[se]=ne[se]||{};for(const fe in ae){const he=ae[fe],me=Q[fe]=Q[fe]||{},we=te[fe]=te[fe]||[];for(const ve of he)me[ve.featureIndex]||(me[ve.featureIndex]=!0,we.push(ve))}}return te}(V);for(const Z in U)U[Z].forEach(te=>{const ne=te.feature,oe=ne.layer;oe&&oe.type!=="background"&&oe.type!=="sky"&&(ne.source=oe.source,oe["source-layer"]&&(ne.sourceLayer=oe["source-layer"]),ne.state=ne.id!==void 0?m.getFeatureState(oe["source-layer"],ne.id):{})});return U}function at(m,l){const f=m.getRenderableIds().map(S=>m.getTileByID(S)),y=[],x={};for(let S=0;S<f.length;S++){const C=f[S],I=C.tileID.canonical.key;x[I]||(x[I]=!0,C.querySourceFeatures(y,l))}return y}function Ct(m,l){const f=m.tileID,y=l.tileID;return f.overscaledZ-y.overscaledZ||f.canonical.y-y.canonical.y||f.wrap-y.wrap||f.canonical.x-y.canonical.x}function ft(){return Tu.workerClass!=null?new Tu.workerClass:new o.window.Worker(Tu.workerUrl)}const Kt="mapboxgl_preloaded_worker_pool";class Gt{constructor(){this.active={}}acquire(l){if(!this.workers)for(this.workers=[];this.workers.length<Gt.workerCount;)this.workers.push(new ft);return this.active[l]=!0,this.workers.slice()}release(l){delete this.active[l],this.numActive()===0&&(this.workers.forEach(f=>{f.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[Kt]}numActive(){return Object.keys(this.active).length}}let Ut;function tr(){return Ut||(Ut=new Gt),Ut}function pr(m,l){const f={};for(const y in m)y!=="ref"&&(f[y]=m[y]);return o.refProperties.forEach(y=>{y in l&&(f[y]=l[y])}),f}function zr(m){m=m.slice();const l=Object.create(null);for(let f=0;f<m.length;f++)l[m[f].id]=m[f];for(let f=0;f<m.length;f++)"ref"in m[f]&&(m[f]=pr(m[f],l[m[f].ref]));return m}Gt.workerCount=2;const Jt={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setProjection:"setProjection"};function qr(m,l,f){f.push({command:Jt.addSource,args:[m,l[m]]})}function Wr(m,l,f){l.push({command:Jt.removeSource,args:[m]}),f[m]=!0}function ls(m,l,f,y){Wr(m,f,y),qr(m,l,f)}function La(m,l,f){let y;for(y in m[f])if(m[f].hasOwnProperty(y)&&y!=="data"&&!v(m[f][y],l[f][y]))return!1;for(y in l[f])if(l[f].hasOwnProperty(y)&&y!=="data"&&!v(m[f][y],l[f][y]))return!1;return!0}function Xe(m,l,f,y,x,S){let C;for(C in l=l||{},m=m||{})m.hasOwnProperty(C)&&(v(m[C],l[C])||f.push({command:S,args:[y,C,l[C],x]}));for(C in l)l.hasOwnProperty(C)&&!m.hasOwnProperty(C)&&(v(m[C],l[C])||f.push({command:S,args:[y,C,l[C],x]}))}function za(m){return m.id}function Un(m,l){return m[l.id]=l,m}class cs{constructor(l,f){this.reset(l,f)}reset(l,f){this.points=l||[],this._distances=[0];for(let y=1;y<this.points.length;y++)this._distances[y]=this._distances[y-1]+this.points[y].dist(this.points[y-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(f||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(l){if(this.points.length===1)return this.points[0];l=o.clamp(l,0,1);let f=1,y=this._distances[f];const x=l*this.paddedLength+this.padding;for(;y<x&&f<this._distances.length;)y=this._distances[++f];const S=f-1,C=this._distances[S],I=y-C,z=I>0?(x-C)/I:0;return this.points[S].mult(1-z).add(this.points[f].mult(z))}}class Fy{constructor(l,f,y){const x=this.boxCells=[],S=this.circleCells=[];this.xCellCount=Math.ceil(l/y),this.yCellCount=Math.ceil(f/y);for(let C=0;C<this.xCellCount*this.yCellCount;C++)x.push([]),S.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=f,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/f,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(l,f,y,x,S){this._forEachCell(f,y,x,S,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(f),this.bboxes.push(y),this.bboxes.push(x),this.bboxes.push(S)}insertCircle(l,f,y,x){this._forEachCell(f-x,y-x,f+x,y+x,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(f),this.circles.push(y),this.circles.push(x)}_insertBoxCell(l,f,y,x,S,C){this.boxCells[S].push(C)}_insertCircleCell(l,f,y,x,S,C){this.circleCells[S].push(C)}_query(l,f,y,x,S,C){if(y<0||l>this.width||x<0||f>this.height)return!S&&[];const I=[];if(l<=0&&f<=0&&this.width<=y&&this.height<=x){if(S)return!0;for(let z=0;z<this.boxKeys.length;z++)I.push({key:this.boxKeys[z],x1:this.bboxes[4*z],y1:this.bboxes[4*z+1],x2:this.bboxes[4*z+2],y2:this.bboxes[4*z+3]});for(let z=0;z<this.circleKeys.length;z++){const V=this.circles[3*z],U=this.circles[3*z+1],Z=this.circles[3*z+2];I.push({key:this.circleKeys[z],x1:V-Z,y1:U-Z,x2:V+Z,y2:U+Z})}return C?I.filter(C):I}return this._forEachCell(l,f,y,x,this._queryCell,I,{hitTest:S,seenUids:{box:{},circle:{}}},C),S?I.length>0:I}_queryCircle(l,f,y,x,S){const C=l-y,I=l+y,z=f-y,V=f+y;if(I<0||C>this.width||V<0||z>this.height)return!x&&[];const U=[];return this._forEachCell(C,z,I,V,this._queryCellCircle,U,{hitTest:x,circle:{x:l,y:f,radius:y},seenUids:{box:{},circle:{}}},S),x?U.length>0:U}query(l,f,y,x,S){return this._query(l,f,y,x,!1,S)}hitTest(l,f,y,x,S){return this._query(l,f,y,x,!0,S)}hitTestCircle(l,f,y,x){return this._queryCircle(l,f,y,!0,x)}_queryCell(l,f,y,x,S,C,I,z){const V=I.seenUids,U=this.boxCells[S];if(U!==null){const te=this.bboxes;for(const ne of U)if(!V.box[ne]){V.box[ne]=!0;const oe=4*ne;if(l<=te[oe+2]&&f<=te[oe+3]&&y>=te[oe+0]&&x>=te[oe+1]&&(!z||z(this.boxKeys[ne]))){if(I.hitTest)return C.push(!0),!0;C.push({key:this.boxKeys[ne],x1:te[oe],y1:te[oe+1],x2:te[oe+2],y2:te[oe+3]})}}}const Z=this.circleCells[S];if(Z!==null){const te=this.circles;for(const ne of Z)if(!V.circle[ne]){V.circle[ne]=!0;const oe=3*ne;if(this._circleAndRectCollide(te[oe],te[oe+1],te[oe+2],l,f,y,x)&&(!z||z(this.circleKeys[ne]))){if(I.hitTest)return C.push(!0),!0;{const ae=te[oe],se=te[oe+1],Q=te[oe+2];C.push({key:this.circleKeys[ne],x1:ae-Q,y1:se-Q,x2:ae+Q,y2:se+Q})}}}}}_queryCellCircle(l,f,y,x,S,C,I,z){const V=I.circle,U=I.seenUids,Z=this.boxCells[S];if(Z!==null){const ne=this.bboxes;for(const oe of Z)if(!U.box[oe]){U.box[oe]=!0;const ae=4*oe;if(this._circleAndRectCollide(V.x,V.y,V.radius,ne[ae+0],ne[ae+1],ne[ae+2],ne[ae+3])&&(!z||z(this.boxKeys[oe])))return C.push(!0),!0}}const te=this.circleCells[S];if(te!==null){const ne=this.circles;for(const oe of te)if(!U.circle[oe]){U.circle[oe]=!0;const ae=3*oe;if(this._circlesCollide(ne[ae],ne[ae+1],ne[ae+2],V.x,V.y,V.radius)&&(!z||z(this.circleKeys[oe])))return C.push(!0),!0}}}_forEachCell(l,f,y,x,S,C,I,z){const V=this._convertToXCellCoord(l),U=this._convertToYCellCoord(f),Z=this._convertToXCellCoord(y),te=this._convertToYCellCoord(x);for(let ne=V;ne<=Z;ne++)for(let oe=U;oe<=te;oe++)if(S.call(this,l,f,y,x,this.xCellCount*oe+ne,C,I,z))return}_convertToXCellCoord(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))}_convertToYCellCoord(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))}_circlesCollide(l,f,y,x,S,C){const I=x-l,z=S-f,V=y+C;return V*V>I*I+z*z}_circleAndRectCollide(l,f,y,x,S,C,I){const z=(C-x)/2,V=Math.abs(l-(x+z));if(V>z+y)return!1;const U=(I-S)/2,Z=Math.abs(f-(S+U));if(Z>U+y)return!1;if(V<=z||Z<=U)return!0;const te=V-z,ne=Z-U;return te*te+ne*ne<=y*y}}const la=Math.tan(85*Math.PI/180);function zl(m,l,f,y,x,S,C){const I=o.create();if(f)if(S.name==="globe"){const z=o.calculateGlobeLabelMatrix(x,l);o.multiply(I,I,z)}else{const z=xe([],C);I[0]=z[0],I[1]=z[1],I[4]=z[2],I[5]=z[3],y||o.rotateZ(I,I,x.angle)}else o.multiply(I,x.labelPlaneMatrix,m);return I}function Ny(m,l,f,y,x,S,C){const I=zl(m,l,f,y,x,S,C);return S.name==="globe"&&f||(I[2]=I[6]=I[10]=I[14]=0),I}function Bl(m,l,f,y,x,S,C){if(f){if(S.name==="globe"){const I=zl(m,l,f,y,x,S,C);return o.invert(I,I),o.multiply(I,m,I),I}{const I=o.clone(m),z=o.identity([]);return z[0]=C[0],z[1]=C[1],z[4]=C[2],z[5]=C[3],o.multiply(I,I,z),y||o.rotateZ(I,I,-x.angle),I}}return x.glCoordMatrix}function wt(m,l,f,y){const x=[m,l,f,1];f?o.transformMat4$1(x,x,y):jy(x,x,y);const S=x[3];return x[0]/=S,x[1]/=S,x[2]/=S,x}function Er(m,l){return Math.min(.5+m/l*.5,1.5)}function vr(m,l){const f=m[0]/m[3],y=m[1]/m[3];return f>=-l[0]&&f<=l[0]&&y>=-l[1]&&y<=l[1]}function ca(m,l,f,y,x,S,C,I,z,V){const U=f.transform,Z=y?m.textSizeData:m.iconSizeData,te=o.evaluateSizeForZoom(Z,f.transform.zoom),ne=U.projection.name==="globe",oe=[256/f.width*2+1,256/f.height*2+1],ae=y?m.text.dynamicLayoutVertexArray:m.icon.dynamicLayoutVertexArray;ae.clear();let se=null;ne&&(se=y?m.text.globeExtVertexArray:m.icon.globeExtVertexArray);const Q=m.lineVertexArray,fe=y?m.text.placedSymbolArray:m.icon.placedSymbolArray,he=f.transform.width/f.transform.height;let me,we=!1;for(let ve=0;ve<fe.length;ve++){const Ee=fe.get(ve),{numGlyphs:ke,writingMode:Le}=Ee;if(Le!==o.WritingMode.vertical||we||me===o.WritingMode.horizontal||(we=!0),me=Le,(Ee.hidden||Le===o.WritingMode.vertical)&&!we){rn(ke,ae);continue}we=!1;const Ne=new o.pointGeometry(Ee.tileAnchorX,Ee.tileAnchorY);let{x:yt,y:Oe,z:rt}=U.projection.projectTilePoint(Ne.x,Ne.y,V.canonical);if(z){const[dr,Lt,It]=z(Ne);yt+=dr,Oe+=Lt,rt+=It}const We=[yt,Oe,rt,1];if(o.transformMat4$1(We,We,l),!vr(We,oe)){rn(ke,ae);continue}const st=Er(f.transform.cameraToCenterDistance,We[3]),$e=o.evaluateSizeForFeature(Z,te,Ee),Pe=C?$e/st:$e*st,je=wt(yt,Oe,rt,x);if(je[3]<=0){rn(ke,ae);continue}let ot={};const ct=C?null:z,Ft=Kc(Ee,Pe,!1,I,l,x,S,m.glyphOffsetArray,Q,ae,se,je,Ne,ot,he,ct,U.projection,V,C);we=Ft.useVertical,ct&&Ft.needsFlipping&&(ot={}),(Ft.notEnoughRoom||we||Ft.needsFlipping&&Kc(Ee,Pe,!0,I,l,x,S,m.glyphOffsetArray,Q,ae,se,je,Ne,ot,he,ct,U.projection,V,C).notEnoughRoom)&&rn(ke,ae)}y?(m.text.dynamicLayoutVertexBuffer.updateData(ae),se&&m.text.globeExtVertexBuffer.updateData(se)):(m.icon.dynamicLayoutVertexBuffer.updateData(ae),se&&m.icon.globeExtVertexBuffer.updateData(se))}function Ws(m,l,f,y,x,S,C,I,z,V,U,Z,te,ne,oe,ae){const{lineStartIndex:se,glyphStartIndex:Q,segment:fe}=I,he=Q+I.numGlyphs,me=se+I.lineLength,we=l.getoffsetX(Q),ve=l.getoffsetX(he-1),Ee=Ni(m*we,f,y,x,S,C,fe,se,me,z,V,U,Z,te,!0,ne,oe,ae);if(!Ee)return null;const ke=Ni(m*ve,f,y,x,S,C,fe,se,me,z,V,U,Z,te,!0,ne,oe,ae);return ke?{first:Ee,last:ke}:null}function yr(m,l,f,y){return m===o.WritingMode.horizontal&&Math.abs(y)>Math.abs(f)?{useVertical:!0}:m===o.WritingMode.vertical?y>0?{needsFlipping:!0}:null:l!==0&&function(x,S){return x===0||Math.abs(S/x)>la}(f,y)?l===1?{needsFlipping:!0}:null:f<0?{needsFlipping:!0}:null}function Kc(m,l,f,y,x,S,C,I,z,V,U,Z,te,ne,oe,ae,se,Q,fe){const he=l/24,me=m.lineOffsetX*he,we=m.lineOffsetY*he,{lineStartIndex:ve,glyphStartIndex:Ee,numGlyphs:ke,segment:Le,writingMode:Ne,flipState:yt}=m,Oe=ve+m.lineLength,rt=We=>{if(U){const[je,ot,ct]=We.up,Ft=V.length;o.updateGlobeVertexNormal(U,Ft+0,je,ot,ct),o.updateGlobeVertexNormal(U,Ft+1,je,ot,ct),o.updateGlobeVertexNormal(U,Ft+2,je,ot,ct),o.updateGlobeVertexNormal(U,Ft+3,je,ot,ct)}const[st,$e,Pe]=We.point;o.addDynamicAttributes(V,st,$e,Pe,We.angle)};if(ke>1){const We=Ws(he,I,me,we,f,Z,te,m,z,S,ne,ae,!1,se,Q,fe);if(!We)return{notEnoughRoom:!0};if(y&&!f){let[st,$e,Pe]=We.first.point,[je,ot,ct]=We.last.point;[st,$e]=wt(st,$e,Pe,C),[je,ot]=wt(je,ot,ct,C);const Ft=yr(Ne,yt,(je-st)*oe,ot-$e);if(m.flipState=Ft&&Ft.needsFlipping?1:2,Ft)return Ft}rt(We.first);for(let st=Ee+1;st<Ee+ke-1;st++){const $e=Ni(he*I.getoffsetX(st),me,we,f,Z,te,Le,ve,Oe,z,S,ne,ae,!1,!1,se,Q,fe);if(!$e)return V.length-=4*(st-Ee),{notEnoughRoom:!0};rt($e)}rt(We.last)}else{if(y&&!f){const st=wt(te.x,te.y,0,x),$e=ve+Le+1,Pe=new o.pointGeometry(z.getx($e),z.gety($e)),je=wt(Pe.x,Pe.y,0,x),ot=je[3]>0?je:Fl(te,Pe,st,1,x,void 0,se,Q.canonical),ct=yr(Ne,yt,(ot[0]-st[0])*oe,ot[1]-st[1]);if(m.flipState=ct&&ct.needsFlipping?1:2,ct)return ct}const We=Ni(he*I.getoffsetX(Ee),me,we,f,Z,te,Le,ve,Oe,z,S,ne,ae,!1,!1,se,Q,fe);if(!We)return{notEnoughRoom:!0};rt(We)}return{}}function $l(m,l,f,y,x){const{x:S,y:C,z:I}=y.projectTilePoint(m.x,m.y,l);if(!x)return wt(S,C,I,f);const[z,V,U]=x(m);return wt(S+z,C+V,I+U,f)}function Fl(m,l,f,y,x,S,C,I){const z=$l(m.sub(l)._unit()._add(m),I,x,C,S);return o.sub(z,f,z),o.normalize(z,z),o.scaleAndAdd(z,f,z,y)}function Ni(m,l,f,y,x,S,C,I,z,V,U,Z,te,ne,oe,ae,se,Q){const fe=y?m-l:m+l;let he=fe>0?1:-1,me=0;y&&(he*=-1,me=Math.PI),he<0&&(me+=Math.PI);let we=I+C+(he>0?0:1)|0,ve=x,Ee=x,ke=0,Le=0;const Ne=Math.abs(fe),yt=[],Oe=[];let rt=S,We=rt;const st=()=>Fl(We,rt,Ee,Ne-ke+1,U,te,ae,se.canonical);for(;ke+Le<=Ne;){if(we+=he,we<I||we>=z)return null;if(Ee=ve,We=rt,yt.push(Ee),ne&&Oe.push(We),rt=new o.pointGeometry(V.getx(we),V.gety(we)),ve=Z[we],!ve){const It=$l(rt,se.canonical,U,ae,te);ve=It[3]>0?Z[we]=It:st()}ke+=Le,Le=o.distance(Ee,ve)}oe&&te&&(Z[we]&&(ve=st(),Le=o.distance(Ee,ve)),Z[we]=ve);const $e=(Ne-ke)/Le,Pe=rt.sub(We)._mult($e)._add(We),je=o.sub([],ve,Ee),ot=o.scaleAndAdd([],Ee,je,$e);let ct=[0,0,1],Ft=je[0],dr=je[1];if(Q&&(ct=ae.upVector(se.canonical,Pe.x,Pe.y),ct[0]!==0||ct[1]!==0||ct[2]!==1)){const It=[ct[2],0,-ct[0]],Nt=o.cross([],ct,It);o.normalize(It,It),o.normalize(Nt,Nt),Ft=o.dot(je,It),dr=o.dot(je,Nt)}if(f){const It=o.cross([],ct,je);o.normalize(It,It),o.scaleAndAdd(ot,ot,It,f*he)}const Lt=me+Math.atan2(dr,Ft);return yt.push(ot),ne&&Oe.push(Pe),{point:ot,angle:Lt,path:yt,tilePath:Oe,up:ct}}function rn(m,l){const f=l.length,y=f+4*m;l.resize(y),l.float32.fill(-1/0,4*f,4*y)}function jy(m,l,f){const y=l[0],x=l[1];return m[0]=f[0]*y+f[4]*x+f[12],m[1]=f[1]*y+f[5]*x+f[13],m[3]=f[3]*y+f[7]*x+f[15],m}const Ji=100;class tp{constructor(l,f,y=new Fy(l.width+200,l.height+200,25),x=new Fy(l.width+200,l.height+200,25)){this.transform=l,this.grid=y,this.ignoredGrid=x,this.pitchfactor=Math.cos(l._pitch)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+Ji,this.screenBottomBoundary=l.height+Ji,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200,this.fogState=f}placeCollisionBox(l,f,y,x,S,C,I,z){let V=y.projectedAnchorX,U=y.projectedAnchorY,Z=y.projectedAnchorZ;const te=y.elevation,ne=y.tileID,oe=l.getProjection();if(te&&ne){const[ve,Ee,ke]=oe.upVector(ne.canonical,y.tileAnchorX,y.tileAnchorY),Le=oe.upVectorScale(ne.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;V+=ve*te*Le,U+=Ee*te*Le,Z+=ke*te*Le}const ae=this.projectAndGetPerspectiveRatio(I,V,U,Z,y.tileID,oe.name==="globe"||!!te||this.transform.pitch>0,oe),se=C*ae.perspectiveRatio,Q=(y.x1*f+x.x-y.padding)*se+ae.point.x,fe=(y.y1*f+x.y-y.padding)*se+ae.point.y,he=(y.x2*f+x.x+y.padding)*se+ae.point.x,me=(y.y2*f+x.y+y.padding)*se+ae.point.y,we=ae.perspectiveRatio<=.55||ae.occluded;return!this.isInsideGrid(Q,fe,he,me)||!S&&this.grid.hitTest(Q,fe,he,me,z)||we?{box:[],offscreen:!1,occluded:ae.occluded}:{box:[Q,fe,he,me],offscreen:this.isOffscreen(Q,fe,he,me),occluded:!1}}placeCollisionCircles(l,f,y,x,S,C,I,z,V,U,Z,te,ne,oe,ae){const se=[],Q=this.transform.elevation,fe=l.getProjection(),he=Q?Q.getAtTileOffsetFunc(ae,this.transform.center.lat,this.transform.worldSize,fe):null,me=new o.pointGeometry(y.tileAnchorX,y.tileAnchorY);let{x:we,y:ve,z:Ee}=fe.projectTilePoint(me.x,me.y,ae.canonical);if(he){const[Pe,je,ot]=he(me);we+=Pe,ve+=je,Ee+=ot}const ke=fe.name==="globe",Le=this.projectAndGetPerspectiveRatio(I,we,ve,Ee,ae,ke||!!Q||this.transform.pitch>0,fe),{perspectiveRatio:Ne}=Le,yt=(Z?C/Ne:C*Ne)/o.ONE_EM,Oe=wt(we,ve,Ee,z),rt=Le.signedDistanceFromCamera>0?Ws(yt,S,y.lineOffsetX*yt,y.lineOffsetY*yt,!1,Oe,me,y,x,z,{},Q&&!Z?he:null,Z&&!!Q,fe,ae,Z):null;let We=!1,st=!1,$e=!0;if(rt&&!Le.occluded){const Pe=.5*ne*Ne+oe,je=new o.pointGeometry(-100,-100),ot=new o.pointGeometry(this.screenRightBoundary,this.screenBottomBoundary),ct=new cs,{first:Ft,last:dr}=rt,Lt=Ft.path.length;let It=[];for(let qt=Lt-1;qt>=1;qt--)It.push(Ft.path[qt]);for(let qt=1;qt<dr.path.length;qt++)It.push(dr.path[qt]);const Nt=2.5*Pe;V&&(It=It.map(([qt,Fr,Ur],nn)=>(he&&!ke&&(Ur=he(nn<Lt-1?Ft.tilePath[Lt-1-nn]:dr.tilePath[nn-Lt+2])[2]),wt(qt,Fr,Ur,V))),It.some(qt=>qt[3]<=0)&&(It=[]));let xr=[];if(It.length>0){let qt=1/0,Fr=-1/0,Ur=1/0,nn=-1/0;for(const Jr of It)qt=Math.min(qt,Jr[0]),Ur=Math.min(Ur,Jr[1]),Fr=Math.max(Fr,Jr[0]),nn=Math.max(nn,Jr[1]);Fr>=je.x&&qt<=ot.x&&nn>=je.y&&Ur<=ot.y&&(xr=[It.map(Jr=>new o.pointGeometry(Jr[0],Jr[1]))],(qt<je.x||Fr>ot.x||Ur<je.y||nn>ot.y)&&(xr=o.clipLine(xr,je.x,je.y,ot.x,ot.y)))}for(const qt of xr){ct.reset(qt,.25*Pe);let Fr=0;Fr=ct.length<=.5*Pe?1:Math.ceil(ct.paddedLength/Nt)+1;for(let Ur=0;Ur<Fr;Ur++){const nn=Ur/Math.max(Fr-1,1),Jr=ct.lerp(nn),Vn=Jr.x+Ji,to=Jr.y+Ji;se.push(Vn,to,Pe,0);const Go=Vn-Pe,Na=to-Pe,gn=Vn+Pe,Qr=to+Pe;if($e=$e&&this.isOffscreen(Go,Na,gn,Qr),st=st||this.isInsideGrid(Go,Na,gn,Qr),!f&&this.grid.hitTestCircle(Vn,to,Pe,te)&&(We=!0,!U))return{circles:[],offscreen:!1,collisionDetected:We,occluded:!1}}}}return{circles:!U&&We||!st?[]:se,offscreen:$e,collisionDetected:We,occluded:Le.occluded}}queryRenderedSymbols(l){if(l.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const f=[];let y=1/0,x=1/0,S=-1/0,C=-1/0;for(const U of l){const Z=new o.pointGeometry(U.x+Ji,U.y+Ji);y=Math.min(y,Z.x),x=Math.min(x,Z.y),S=Math.max(S,Z.x),C=Math.max(C,Z.y),f.push(Z)}const I=this.grid.query(y,x,S,C).concat(this.ignoredGrid.query(y,x,S,C)),z={},V={};for(const U of I){const Z=U.key;if(z[Z.bucketInstanceId]===void 0&&(z[Z.bucketInstanceId]={}),z[Z.bucketInstanceId][Z.featureIndex])continue;const te=[new o.pointGeometry(U.x1,U.y1),new o.pointGeometry(U.x2,U.y1),new o.pointGeometry(U.x2,U.y2),new o.pointGeometry(U.x1,U.y2)];o.polygonIntersectsPolygon(f,te)&&(z[Z.bucketInstanceId][Z.featureIndex]=!0,V[Z.bucketInstanceId]===void 0&&(V[Z.bucketInstanceId]=[]),V[Z.bucketInstanceId].push(Z.featureIndex))}return V}insertCollisionBox(l,f,y,x,S){(f?this.ignoredGrid:this.grid).insert({bucketInstanceId:y,featureIndex:x,collisionGroupID:S},l[0],l[1],l[2],l[3])}insertCollisionCircles(l,f,y,x,S){const C=f?this.ignoredGrid:this.grid,I={bucketInstanceId:y,featureIndex:x,collisionGroupID:S};for(let z=0;z<l.length;z+=4)C.insertCircle(I,l[z],l[z+1],l[z+2])}projectAndGetPerspectiveRatio(l,f,y,x,S,C,I){const z=[f,y,x,1];let V=!1;if(x||this.transform.pitch>0){o.transformMat4$1(z,z,l);const Z=I.name==="globe";this.fogState&&S&&!Z&&(V=function(ne,oe,ae,se,Q,fe){const he=fe.calculateFogTileMatrix(Q),me=[oe,ae,se];return o.transformMat4(me,me,he),He(ne,me,fe.pitch,fe._fov)}(this.fogState,f,y,x,S.toUnwrapped(),this.transform)>.9)}else jy(z,z,l);const U=z[3];return{point:new o.pointGeometry((z[0]/U+1)/2*this.transform.width+Ji,(-z[1]/U+1)/2*this.transform.height+Ji),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(I)/U*.5,1.5),signedDistanceFromCamera:U,occluded:C&&z[2]>U||V}}isOffscreen(l,f,y,x){return y<Ji||l>=this.screenRightBoundary||x<Ji||f>this.screenBottomBoundary}isInsideGrid(l,f,y,x){return y>=0&&l<this.gridRightBoundary&&x>=0&&f<this.gridBottomBoundary}getViewportMatrix(){const l=o.identity([]);return o.translate(l,l,[-100,-100,0]),l}}function Hs(m,l,f){const y=l.createTileMatrix(m,m.worldSize,f.toUnwrapped());return o.multiply(new Float32Array(16),m.projMatrix,y)}function rp(m,l,f){if(l.projection.name===f.projection.name)return m.projMatrix;const y=f.clone();return y.setProjection(l.projection),Hs(y,l.getProjection(),m)}function gh(m,l,f){return l.name===f.projection.name?m.projMatrix:Hs(f,l,m)}class Yc{constructor(l,f,y,x){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?f:-f))):x&&y?1:0,this.placed=y}isHidden(){return this.opacity===0&&!this.placed}}class Zs{constructor(l,f,y,x,S,C=!1){this.text=new Yc(l?l.text:null,f,y,S),this.icon=new Yc(l?l.icon:null,f,x,S),this.clipped=C}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Nl{constructor(l,f,y,x=!1){this.text=l,this.icon=f,this.skipFade=y,this.clipped=x}}class np{constructor(){this.invProjMatrix=o.create(),this.viewportMatrix=o.create(),this.circles=[]}}class Qi{constructor(l,f,y,x,S){this.bucketInstanceId=l,this.featureIndex=f,this.sourceLayerIndex=y,this.bucketIndex=x,this.tileID=S}}class zn{constructor(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}}get(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){const f=++this.maxGroupID;this.collisionGroups[l]={ID:f,predicate:y=>y.collisionGroupID===f}}return this.collisionGroups[l]}}function yh(m,l,f,y,x){const{horizontalAlign:S,verticalAlign:C}=o.getAnchorAlignment(m),I=-(S-.5)*l,z=-(C-.5)*f,V=o.evaluateVariableOffset(m,y);return new o.pointGeometry(I+V[0]*x,z+V[1]*x)}function Jc(m,l,f,y,x){const S=new o.pointGeometry(m,l);return f&&S._rotate(y?x:-x),S}class eo{constructor(l,f,y,x,S){this.transform=l.clone(),this.projection=l.projection.name,this.collisionIndex=new tp(this.transform,S),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=f,this.retainedQueryData={},this.collisionGroups=new zn(y),this.collisionCircleArrays={},this.prevPlacement=x,x&&(x.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(l,f,y,x){const S=y.getBucket(f),C=y.latestFeatureIndex;if(!S||!C||f.id!==S.layerIds[0])return;const I=S.layers[0].layout,z=y.collisionBoxArray,V=Math.pow(2,this.transform.zoom-y.tileID.overscaledZ),U=y.tileSize/o.EXTENT,Z=y.tileID.toUnwrapped();this.transform.setProjection(S.projection);const te=(ne=y.tileID,oe=S.getProjection(),ae=this.transform,oe.name===this.projection?ae.calculateProjMatrix(ne.toUnwrapped()):Hs(ae,oe,ne));var ne,oe,ae;const se=I.get("text-pitch-alignment")==="map",Q=I.get("text-rotation-alignment")==="map";f.compileFilter();const fe=f.dynamicFilter(),he=f.dynamicFilterNeedsFeature(),me=this.transform.calculatePixelsToTileUnitsMatrix(y),we=Ny(te,y.tileID.canonical,se,Q,this.transform,S.getProjection(),me);let ve=null;if(se){const Le=Bl(te,y.tileID.canonical,se,Q,this.transform,S.getProjection(),me);ve=o.multiply([],this.transform.labelPlaneMatrix,Le)}let Ee=null;fe&&y.latestFeatureIndex&&(Ee={unwrappedTileID:Z,dynamicFilter:fe,dynamicFilterNeedsFeature:he,featureIndex:y.latestFeatureIndex}),this.retainedQueryData[S.bucketInstanceId]=new Qi(S.bucketInstanceId,C,S.sourceLayerIndex,S.index,y.tileID);const ke={bucket:S,layout:I,posMatrix:te,textLabelPlaneMatrix:we,labelToScreenMatrix:ve,clippingData:Ee,scale:V,textPixelRatio:U,holdingForFade:y.holdingForFade(),collisionBoxArray:z,partiallyEvaluatedTextSize:o.evaluateSizeForZoom(S.textSizeData,this.transform.zoom),partiallyEvaluatedIconSize:o.evaluateSizeForZoom(S.iconSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(S.sourceID)};if(x)for(const Le of S.sortKeyRanges){const{sortKey:Ne,symbolInstanceStart:yt,symbolInstanceEnd:Oe}=Le;l.push({sortKey:Ne,symbolInstanceStart:yt,symbolInstanceEnd:Oe,parameters:ke})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:S.symbolInstances.length,parameters:ke})}attemptAnchorPlacement(l,f,y,x,S,C,I,z,V,U,Z,te,ne,oe,ae,se,Q,fe){const{textOffset0:he,textOffset1:me,crossTileID:we}=te,ve=[he,me],Ee=yh(l,y,x,ve,S),ke=this.collisionIndex.placeCollisionBox(oe,S,f,Jc(Ee.x,Ee.y,C,I,this.transform.angle),Z,z,V,U.predicate);if(se){const Le=oe.getSymbolInstanceIconSize(fe,this.transform.zoom,te.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(oe,Le,se,Jc(Ee.x,Ee.y,C,I,this.transform.angle),Z,z,V,U.predicate).box.length===0)return}if(ke.box.length>0){let Le;return this.prevPlacement&&this.prevPlacement.variableOffsets[we]&&this.prevPlacement.placements[we]&&this.prevPlacement.placements[we].text&&(Le=this.prevPlacement.variableOffsets[we].anchor),this.variableOffsets[we]={textOffset:ve,width:y,height:x,anchor:l,textScale:S,prevAnchor:Le},this.markUsedJustification(oe,l,te,ae),oe.allowVerticalPlacement&&(this.markUsedOrientation(oe,ae,te),this.placedOrientations[we]=ae),{shift:Ee,placedGlyphBoxes:ke}}}placeLayerBucketPart(l,f,y,x){const{bucket:S,layout:C,posMatrix:I,textLabelPlaneMatrix:z,labelToScreenMatrix:V,clippingData:U,textPixelRatio:Z,holdingForFade:te,collisionBoxArray:ne,partiallyEvaluatedTextSize:oe,partiallyEvaluatedIconSize:ae,collisionGroup:se}=l.parameters,Q=C.get("text-optional"),fe=C.get("icon-optional"),he=C.get("text-allow-overlap"),me=C.get("icon-allow-overlap"),we=C.get("text-rotation-alignment")==="map",ve=C.get("text-pitch-alignment")==="map",Ee=C.get("icon-text-fit")!=="none",ke=C.get("symbol-z-order")==="viewport-y";this.transform.setProjection(S.projection);let Le=he&&(me||!S.hasIconData()||fe),Ne=me&&(he||!S.hasTextData()||Q);!S.collisionArrays&&ne&&S.deserializeCollisionBoxes(ne),y&&x&&S.updateCollisionDebugBuffers(this.transform.zoom,ne);const yt=(Oe,rt,We)=>{const{crossTileID:st,numVerticalGlyphVertices:$e}=Oe;if(U){const gn={zoom:this.transform.zoom,pitch:this.transform.pitch};let Qr=null;if(U.dynamicFilterNeedsFeature){const Or=this.retainedQueryData[S.bucketInstanceId];Qr=U.featureIndex.loadFeature({featureIndex:Oe.featureIndex,bucketIndex:Or.bucketIndex,sourceLayerIndex:Or.sourceLayerIndex,layoutVertexArrayOffset:0})}if(!(0,U.dynamicFilter)(gn,Qr,this.retainedQueryData[S.bucketInstanceId].tileID.canonical,new o.pointGeometry(Oe.tileAnchorX,Oe.tileAnchorY),this.transform.calculateDistanceTileData(U.unwrappedTileID)))return this.placements[st]=new Nl(!1,!1,!1,!0),void(f[st]=!0)}if(f[st])return;if(te)return void(this.placements[st]=new Nl(!1,!1,!1));let Pe=!1,je=!1,ot=!0,ct=!1,Ft=!1,dr=null,Lt={box:null,offscreen:null,occluded:null},It={box:null,offscreen:null,occluded:null},Nt=null,xr=null,qt=null,Fr=0,Ur=0,nn=0;We.textFeatureIndex?Fr=We.textFeatureIndex:Oe.useRuntimeCollisionCircles&&(Fr=Oe.featureIndex),We.verticalTextFeatureIndex&&(Ur=We.verticalTextFeatureIndex);const Jr=gn=>{gn.tileID=this.retainedQueryData[S.bucketInstanceId].tileID;const Qr=this.transform.elevation;(Qr||gn.elevation)&&(gn.elevation=Qr?Qr.getAtTileOffset(gn.tileID,gn.tileAnchorX,gn.tileAnchorY):0)},Vn=We.textBox;if(Vn){Jr(Vn);const gn=Or=>{let Pn=o.WritingMode.horizontal;if(S.allowVerticalPlacement&&!Or&&this.prevPlacement){const Mi=this.prevPlacement.placedOrientations[st];Mi&&(this.placedOrientations[st]=Mi,Pn=Mi,this.markUsedOrientation(S,Pn,Oe))}return Pn},Qr=(Or,Pn)=>{if(S.allowVerticalPlacement&&$e>0&&We.verticalTextBox){for(const Mi of S.writingModes)if(Mi===o.WritingMode.vertical?(Lt=Pn(),It=Lt):Lt=Or(),Lt&&Lt.box&&Lt.box.length)break}else Lt=Or()};if(C.get("text-variable-anchor")){let Or=C.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[st]){const hn=this.prevPlacement.variableOffsets[st];Or.indexOf(hn.anchor)>0&&(Or=Or.filter(Ci=>Ci!==hn.anchor),Or.unshift(hn.anchor))}const Pn=(hn,Ci,Pi)=>{const ps=S.getSymbolInstanceTextSize(oe,Oe,this.transform.zoom,rt),rc=(hn.x2-hn.x1)*ps+2*hn.padding,go=(hn.y2-hn.y1)*ps+2*hn.padding,Co=Ee&&!me?Ci:null;Co&&Jr(Co);let ja={box:[],offscreen:!1,occluded:!1};const ms=he?2*Or.length:Or.length;for(let gs=0;gs<ms;++gs){const nc=this.attemptAnchorPlacement(Or[gs%Or.length],hn,rc,go,ps,we,ve,Z,I,se,gs>=Or.length,Oe,rt,S,Pi,Co,oe,ae);if(nc&&(ja=nc.placedGlyphBoxes,ja&&ja.box&&ja.box.length)){Pe=!0,dr=nc.shift;break}}return ja};Qr(()=>Pn(Vn,We.iconBox,o.WritingMode.horizontal),()=>{const hn=We.verticalTextBox;return hn&&Jr(hn),S.allowVerticalPlacement&&!(Lt&&Lt.box&&Lt.box.length)&&$e>0&&hn?Pn(hn,We.verticalIconBox,o.WritingMode.vertical):{box:null,offscreen:null,occluded:null}}),Lt&&(Pe=Lt.box,ot=Lt.offscreen,ct=Lt.occluded);const Mi=gn(Lt&&Lt.box);if(!Pe&&this.prevPlacement){const hn=this.prevPlacement.variableOffsets[st];hn&&(this.variableOffsets[st]=hn,this.markUsedJustification(S,hn.anchor,Oe,Mi))}}else{const Or=(Pn,Mi)=>{const hn=S.getSymbolInstanceTextSize(oe,Oe,this.transform.zoom,rt),Ci=this.collisionIndex.placeCollisionBox(S,hn,Pn,new o.pointGeometry(0,0),he,Z,I,se.predicate);return Ci&&Ci.box&&Ci.box.length&&(this.markUsedOrientation(S,Mi,Oe),this.placedOrientations[st]=Mi),Ci};Qr(()=>Or(Vn,o.WritingMode.horizontal),()=>{const Pn=We.verticalTextBox;return S.allowVerticalPlacement&&$e>0&&Pn?(Jr(Pn),Or(Pn,o.WritingMode.vertical)):{box:null,offscreen:null,occluded:null}}),gn(Lt&&Lt.box&&Lt.box.length)}}if(Nt=Lt,Pe=Nt&&Nt.box&&Nt.box.length>0,ot=Nt&&Nt.offscreen,ct=Nt&&Nt.occluded,Oe.useRuntimeCollisionCircles){const gn=S.text.placedSymbolArray.get(Oe.centerJustifiedTextSymbolIndex>=0?Oe.centerJustifiedTextSymbolIndex:Oe.verticalPlacedTextSymbolIndex),Qr=o.evaluateSizeForFeature(S.textSizeData,oe,gn),Or=C.get("text-padding");xr=this.collisionIndex.placeCollisionCircles(S,he,gn,S.lineVertexArray,S.glyphOffsetArray,Qr,I,z,V,y,ve,se.predicate,Oe.collisionCircleDiameter*Qr/o.ONE_EM,Or,this.retainedQueryData[S.bucketInstanceId].tileID),Pe=he||xr.circles.length>0&&!xr.collisionDetected,ot=ot&&xr.offscreen,ct=xr.occluded}if(We.iconFeatureIndex&&(nn=We.iconFeatureIndex),We.iconBox){const gn=Qr=>{Jr(Qr);const Or=Ee&&dr?Jc(dr.x,dr.y,we,ve,this.transform.angle):new o.pointGeometry(0,0),Pn=S.getSymbolInstanceIconSize(ae,this.transform.zoom,Oe.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(S,Pn,Qr,Or,me,Z,I,se.predicate)};It&&It.box&&It.box.length&&We.verticalIconBox?(qt=gn(We.verticalIconBox),je=qt.box.length>0):(qt=gn(We.iconBox),je=qt.box.length>0),ot=ot&&qt.offscreen,Ft=qt.occluded}const to=Q||Oe.numHorizontalGlyphVertices===0&&$e===0,Go=fe||Oe.numIconVertices===0;if(to||Go?Go?to||(je=je&&Pe):Pe=je&&Pe:je=Pe=je&&Pe,Pe&&Nt&&Nt.box&&this.collisionIndex.insertCollisionBox(Nt.box,C.get("text-ignore-placement"),S.bucketInstanceId,It&&It.box&&Ur?Ur:Fr,se.ID),je&&qt&&this.collisionIndex.insertCollisionBox(qt.box,C.get("icon-ignore-placement"),S.bucketInstanceId,nn,se.ID),xr&&(Pe&&this.collisionIndex.insertCollisionCircles(xr.circles,C.get("text-ignore-placement"),S.bucketInstanceId,Fr,se.ID),y)){const gn=S.bucketInstanceId;let Qr=this.collisionCircleArrays[gn];Qr===void 0&&(Qr=this.collisionCircleArrays[gn]=new np);for(let Or=0;Or<xr.circles.length;Or+=4)Qr.circles.push(xr.circles[Or+0]),Qr.circles.push(xr.circles[Or+1]),Qr.circles.push(xr.circles[Or+2]),Qr.circles.push(xr.collisionDetected?1:0)}const Na=S.projection.name!=="globe";Le=Le&&(Na||!ct),Ne=Ne&&(Na||!Ft),this.placements[st]=new Nl(Pe||Le,je||Ne,ot||S.justReloaded),f[st]=!0};if(ke){const Oe=S.getSortedSymbolIndexes(this.transform.angle);for(let rt=Oe.length-1;rt>=0;--rt){const We=Oe[rt];yt(S.symbolInstances.get(We),We,S.collisionArrays[We])}}else for(let Oe=l.symbolInstanceStart;Oe<l.symbolInstanceEnd;Oe++)yt(S.symbolInstances.get(Oe),Oe,S.collisionArrays[Oe]);if(y&&S.bucketInstanceId in this.collisionCircleArrays){const Oe=this.collisionCircleArrays[S.bucketInstanceId];o.invert(Oe.invProjMatrix,I),Oe.viewportMatrix=this.collisionIndex.getViewportMatrix()}S.justReloaded=!1}markUsedJustification(l,f,y,x){const{leftJustifiedTextSymbolIndex:S,centerJustifiedTextSymbolIndex:C,rightJustifiedTextSymbolIndex:I,verticalPlacedTextSymbolIndex:z,crossTileID:V}=y,U=o.getAnchorJustification(f),Z=x===o.WritingMode.vertical?z:U==="left"?S:U==="center"?C:U==="right"?I:-1;S>=0&&(l.text.placedSymbolArray.get(S).crossTileID=Z>=0&&S!==Z?0:V),C>=0&&(l.text.placedSymbolArray.get(C).crossTileID=Z>=0&&C!==Z?0:V),I>=0&&(l.text.placedSymbolArray.get(I).crossTileID=Z>=0&&I!==Z?0:V),z>=0&&(l.text.placedSymbolArray.get(z).crossTileID=Z>=0&&z!==Z?0:V)}markUsedOrientation(l,f,y){const x=f===o.WritingMode.horizontal||f===o.WritingMode.horizontalOnly?f:0,S=f===o.WritingMode.vertical?f:0,{leftJustifiedTextSymbolIndex:C,centerJustifiedTextSymbolIndex:I,rightJustifiedTextSymbolIndex:z,verticalPlacedTextSymbolIndex:V}=y,U=l.text.placedSymbolArray;C>=0&&(U.get(C).placedOrientation=x),I>=0&&(U.get(I).placedOrientation=x),z>=0&&(U.get(z).placedOrientation=x),V>=0&&(U.get(V).placedOrientation=S)}commit(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;const f=this.prevPlacement;let y=!1;this.prevZoomAdjustment=f?f.zoomAdjustment(this.transform.zoom):0;const x=f?f.symbolFadeChange(l):1,S=f?f.opacities:{},C=f?f.variableOffsets:{},I=f?f.placedOrientations:{};for(const z in this.placements){const V=this.placements[z],U=S[z];U?(this.opacities[z]=new Zs(U,x,V.text,V.icon,null,V.clipped),y=y||V.text!==U.text.placed||V.icon!==U.icon.placed):(this.opacities[z]=new Zs(null,x,V.text,V.icon,V.skipFade,V.clipped),y=y||V.text||V.icon)}for(const z in S){const V=S[z];if(!this.opacities[z]){const U=new Zs(V,x,!1,!1);U.isHidden()||(this.opacities[z]=U,y=y||V.text.placed||V.icon.placed)}}for(const z in C)this.variableOffsets[z]||!this.opacities[z]||this.opacities[z].isHidden()||(this.variableOffsets[z]=C[z]);for(const z in I)this.placedOrientations[z]||!this.opacities[z]||this.opacities[z].isHidden()||(this.placedOrientations[z]=I[z]);y?this.lastPlacementChangeTime=l:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=f?f.lastPlacementChangeTime:l)}updateLayerOpacities(l,f){const y={};for(const x of f){const S=x.getBucket(l);S&&x.latestFeatureIndex&&l.id===S.layerIds[0]&&this.updateBucketOpacities(S,y,x.collisionBoxArray)}}updateBucketOpacities(l,f,y){l.hasTextData()&&l.text.opacityVertexArray.clear(),l.hasIconData()&&l.icon.opacityVertexArray.clear(),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();const x=l.layers[0].layout,S=!!l.layers[0].dynamicFilter(),C=new Zs(null,0,!1,!1,!0),I=x.get("text-allow-overlap"),z=x.get("icon-allow-overlap"),V=x.get("text-variable-anchor"),U=x.get("text-rotation-alignment")==="map",Z=x.get("text-pitch-alignment")==="map",te=x.get("icon-text-fit")!=="none",ne=new Zs(null,0,I&&(z||!l.hasIconData()||x.get("icon-optional")),z&&(I||!l.hasTextData()||x.get("text-optional")),!0);!l.collisionArrays&&y&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(y);const oe=(se,Q,fe)=>{for(let he=0;he<Q/4;he++)se.opacityVertexArray.emplaceBack(fe)};let ae=0;for(let se=0;se<l.symbolInstances.length;se++){const Q=l.symbolInstances.get(se),{numHorizontalGlyphVertices:fe,numVerticalGlyphVertices:he,crossTileID:me,numIconVertices:we}=Q;let ve=this.opacities[me];f[me]?ve=C:ve||(ve=ne,this.opacities[me]=ve),f[me]=!0;const Ee=fe>0||he>0,ke=we>0,Le=this.placedOrientations[me],Ne=Le===o.WritingMode.vertical,yt=Le===o.WritingMode.horizontal||Le===o.WritingMode.horizontalOnly;if(!Ee&&!ke||ve.isHidden()||ae++,Ee){const Oe=vh(ve.text);oe(l.text,fe,Ne?jl:Oe),oe(l.text,he,yt?jl:Oe);const rt=ve.text.isHidden(),{leftJustifiedTextSymbolIndex:We,centerJustifiedTextSymbolIndex:st,rightJustifiedTextSymbolIndex:$e,verticalPlacedTextSymbolIndex:Pe}=Q,je=l.text.placedSymbolArray,ot=rt||Ne?1:0;We>=0&&(je.get(We).hidden=ot),st>=0&&(je.get(st).hidden=ot),$e>=0&&(je.get($e).hidden=ot),Pe>=0&&(je.get(Pe).hidden=rt||yt?1:0);const ct=this.variableOffsets[me];ct&&this.markUsedJustification(l,ct.anchor,Q,Le);const Ft=this.placedOrientations[me];Ft&&(this.markUsedJustification(l,"left",Q,Ft),this.markUsedOrientation(l,Ft,Q))}if(ke){const Oe=vh(ve.icon),{placedIconSymbolIndex:rt,verticalPlacedIconSymbolIndex:We}=Q,st=l.icon.placedSymbolArray,$e=ve.icon.isHidden()?1:0;rt>=0&&(oe(l.icon,we,Ne?jl:Oe),st.get(rt).hidden=$e),We>=0&&(oe(l.icon,Q.numVerticalIconVertices,yt?jl:Oe),st.get(We).hidden=$e)}if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){const Oe=l.collisionArrays[se];if(Oe){let rt=new o.pointGeometry(0,0),We=!0;if(Oe.textBox||Oe.verticalTextBox){if(V){const $e=this.variableOffsets[me];$e?(rt=yh($e.anchor,$e.width,$e.height,$e.textOffset,$e.textScale),U&&rt._rotate(Z?this.transform.angle:-this.transform.angle)):We=!1}S&&(We=!ve.clipped),Oe.textBox&&ji(l.textCollisionBox.collisionVertexArray,ve.text.placed,!We||Ne,rt.x,rt.y),Oe.verticalTextBox&&ji(l.textCollisionBox.collisionVertexArray,ve.text.placed,!We||yt,rt.x,rt.y)}const st=We&&!!(!yt&&Oe.verticalIconBox);Oe.iconBox&&ji(l.iconCollisionBox.collisionVertexArray,ve.icon.placed,st,te?rt.x:0,te?rt.y:0),Oe.verticalIconBox&&ji(l.iconCollisionBox.collisionVertexArray,ve.icon.placed,!st,te?rt.x:0,te?rt.y:0)}}}if(l.fullyClipped=ae===0,l.sortFeatures(this.transform.angle),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.bucketInstanceId in this.collisionCircleArrays){const se=this.collisionCircleArrays[l.bucketInstanceId];l.placementInvProjMatrix=se.invProjMatrix,l.placementViewportMatrix=se.viewportMatrix,l.collisionCircleArray=se.circles,delete this.collisionCircleArrays[l.bucketInstanceId]}}symbolFadeChange(l){return this.fadeDuration===0?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(l){return Math.max(0,(this.transform.zoom-l)/1.5)}hasTransitions(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(l,f){const y=this.zoomAtLastRecencyCheck===f?1-this.zoomAdjustment(f):1;return this.zoomAtLastRecencyCheck=f,this.commitTime+this.fadeDuration*y>l}setStale(){this.stale=!0}}function ji(m,l,f,y,x){m.emplaceBack(l?1:0,f?1:0,y||0,x||0),m.emplaceBack(l?1:0,f?1:0,y||0,x||0),m.emplaceBack(l?1:0,f?1:0,y||0,x||0),m.emplaceBack(l?1:0,f?1:0,y||0,x||0)}const Uy=Math.pow(2,25),_h=Math.pow(2,24),Yn=Math.pow(2,17),Qc=Math.pow(2,16),ip=Math.pow(2,9),eu=Math.pow(2,8),pi=Math.pow(2,1);function vh(m){if(m.opacity===0&&!m.placed)return 0;if(m.opacity===1&&m.placed)return 4294967295;const l=m.placed?1:0,f=Math.floor(127*m.opacity);return f*Uy+l*_h+f*Yn+l*Qc+f*ip+l*eu+f*pi+l}const jl=0;class Ba{constructor(l){this._sortAcrossTiles=l.layout.get("symbol-z-order")!=="viewport-y"&&l.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(l,f,y,x,S){const C=this._bucketParts;for(;this._currentTileIndex<l.length;)if(f.getBucketParts(C,x,l[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,S())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,C.sort((I,z)=>I.sortKey-z.sortKey));this._currentPartIndex<C.length;){const I=C[this._currentPartIndex];if(f.placeLayerBucketPart(I,this._seenCrossTileIDs,y,I.symbolInstanceStart===0),this._currentPartIndex++,S())return!0}return!1}}class tu{constructor(l,f,y,x,S,C,I,z){this.placement=new eo(l,S,C,I,z),this._currentPlacementIndex=f.length-1,this._forceFullPlacement=y,this._showCollisionBoxes=x,this._done=!1}isDone(){return this._done}continuePlacement(l,f,y){const x=o.exported.now(),S=()=>{const C=o.exported.now()-x;return!this._forceFullPlacement&&C>2};for(;this._currentPlacementIndex>=0;){const C=f[l[this._currentPlacementIndex]],I=this.placement.collisionIndex.transform.zoom;if(C.type==="symbol"&&(!C.minzoom||C.minzoom<=I)&&(!C.maxzoom||C.maxzoom>I)){if(this._inProgressLayer||(this._inProgressLayer=new Ba(C)),this._inProgressLayer.continuePlacement(y[C.source],this.placement,this._showCollisionBoxes,C,S))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(l){return this.placement.commit(l),this.placement}}const xh=512/o.EXTENT/2;class ab{constructor(l,f,y){this.tileID=l,this.indexedSymbolInstances={},this.bucketInstanceId=y;for(let x=0;x<f.length;x++){const S=f.get(x),C=S.key;this.indexedSymbolInstances[C]||(this.indexedSymbolInstances[C]=[]),this.indexedSymbolInstances[C].push({crossTileID:S.crossTileID,coord:this.getScaledCoordinates(S,l)})}}getScaledCoordinates(l,f){const y=xh/Math.pow(2,f.canonical.z-this.tileID.canonical.z);return{x:Math.floor((f.canonical.x*o.EXTENT+l.tileAnchorX)*y),y:Math.floor((f.canonical.y*o.EXTENT+l.tileAnchorY)*y)}}findMatches(l,f,y){const x=this.tileID.canonical.z<f.canonical.z?1:Math.pow(2,this.tileID.canonical.z-f.canonical.z);for(let S=0;S<l.length;S++){const C=l.get(S);if(C.crossTileID)continue;const I=this.indexedSymbolInstances[C.key];if(!I)continue;const z=this.getScaledCoordinates(C,f);for(const V of I)if(Math.abs(V.coord.x-z.x)<=x&&Math.abs(V.coord.y-z.y)<=x&&!y[V.crossTileID]){y[V.crossTileID]=!0,C.crossTileID=V.crossTileID;break}}}}class op{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class Ul{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(l){const f=Math.round((l-this.lng)/360);if(f!==0)for(const y in this.indexes){const x=this.indexes[y],S={};for(const C in x){const I=x[C];I.tileID=I.tileID.unwrapTo(I.tileID.wrap+f),S[I.tileID.key]=I}this.indexes[y]=S}this.lng=l}addBucket(l,f,y){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===f.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(let S=0;S<f.symbolInstances.length;S++)f.symbolInstances.get(S).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]={});const x=this.usedCrossTileIDs[l.overscaledZ];for(const S in this.indexes){const C=this.indexes[S];if(Number(S)>l.overscaledZ)for(const I in C){const z=C[I];z.tileID.isChildOf(l)&&z.findMatches(f.symbolInstances,l,x)}else{const I=C[l.scaledTo(Number(S)).key];I&&I.findMatches(f.symbolInstances,l,x)}}for(let S=0;S<f.symbolInstances.length;S++){const C=f.symbolInstances.get(S);C.crossTileID||(C.crossTileID=y.generate(),x[C.crossTileID]=!0)}return this.indexes[l.overscaledZ]===void 0&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new ab(l,f.symbolInstances,f.bucketInstanceId),!0}removeBucketCrossTileIDs(l,f){for(const y in f.indexedSymbolInstances)for(const x of f.indexedSymbolInstances[y])delete this.usedCrossTileIDs[l][x.crossTileID]}removeStaleBuckets(l){let f=!1;for(const y in this.indexes){const x=this.indexes[y];for(const S in x)l[x[S].bucketInstanceId]||(this.removeBucketCrossTileIDs(y,x[S]),delete x[S],f=!0)}return f}}class Vy{constructor(){this.layerIndexes={},this.crossTileIDs=new op,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(l,f,y,x){let S=this.layerIndexes[l.id];S===void 0&&(S=this.layerIndexes[l.id]=new Ul);let C=!1;const I={};x.name!=="globe"&&S.handleWrapJump(y);for(const z of f){const V=z.getBucket(l);V&&l.id===V.layerIds[0]&&(V.bucketInstanceId||(V.bucketInstanceId=++this.maxBucketInstanceId),S.addBucket(z.tileID,V,this.crossTileIDs)&&(C=!0),I[V.bucketInstanceId]=!0)}return S.removeStaleBuckets(I)&&(C=!0),C}pruneUnusedLayers(l){const f={};l.forEach(y=>{f[y]=!0});for(const y in this.layerIndexes)f[y]||delete this.layerIndexes[y]}}const ru=(m,l)=>o.emitValidationErrors(m,l&&l.filter(f=>f.identifier!=="source.canvas")),Vl=o.pick(Jt,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setProjection"]),us=o.pick(Jt,["setCenter","setZoom","setBearing","setPitch"]),bh={version:8,layers:[],sources:{}},hs={fill:!0,line:!0,background:!0,hillshade:!0,raster:!0};class Ao extends o.Evented{constructor(l,f={}){super(),this.map=l,this.dispatcher=new Vt(tr(),this),this.imageManager=new Ce,this.imageManager.setEventedParent(this),this.glyphManager=new o.GlyphManager(l._requestManager,f.localFontFamily?o.LocalGlyphMode.all:f.localIdeographFontFamily?o.LocalGlyphMode.ideographs:o.LocalGlyphMode.none,f.localFontFamily||f.localIdeographFontFamily),this.crossTileSymbolIndex=new Vy,this._layers={},this._num3DLayers=0,this._numSymbolLayers=0,this._numCircleLayers=0,this._serializedLayers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._availableImages=[],this._order=[],this._drapedFirstOrder=[],this._markersNeedUpdate=!1,this._resetUpdates(),this.dispatcher.broadcast("setReferrer",o.getReferrer());const y=this;this._rtlTextPluginCallback=Ao.registerForPluginStateChange(x=>{y.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:x.pluginStatus,pluginURL:x.pluginURL},(S,C)=>{if(o.triggerPluginCompletionEvent(S),C&&C.every(I=>I))for(const I in y._sourceCaches){const z=y._sourceCaches[I],V=z.getSource().type;V!=="vector"&&V!=="geojson"||z.reload()}})}),this.on("data",x=>{if(x.dataType!=="source"||x.sourceDataType!=="metadata")return;const S=this.getSource(x.sourceId);if(S&&S.vectorLayerIds)for(const C in this._layers){const I=this._layers[C];I.source===S.id&&this._validateLayer(I)}})}loadURL(l,f={}){this.fire(new o.Event("dataloading",{dataType:"style"}));const y=typeof f.validate=="boolean"?f.validate:!o.isMapboxURL(l);l=this.map._requestManager.normalizeStyleURL(l,f.accessToken);const x=this.map._requestManager.transformRequest(l,o.ResourceType.Style);this._request=o.getJSON(x,(S,C)=>{this._request=null,S?this.fire(new o.ErrorEvent(S)):C&&this._load(C,y)})}loadJSON(l,f={}){this.fire(new o.Event("dataloading",{dataType:"style"})),this._request=o.exported.frame(()=>{this._request=null,this._load(l,f.validate!==!1)})}loadEmpty(){this.fire(new o.Event("dataloading",{dataType:"style"})),this._load(bh,!1)}_updateLayerCount(l,f){const y=f?1:-1;l.is3D()&&(this._num3DLayers+=y),l.type==="circle"&&(this._numCircleLayers+=y),l.type==="symbol"&&(this._numSymbolLayers+=y)}_load(l,f){if(f&&ru(this,o.validateStyle(l)))return;this._loaded=!0,this.stylesheet=o.clone$1(l),this._updateMapProjection();for(const x in l.sources)this.addSource(x,l.sources[x],{validate:!1});this._changed=!1,l.sprite?this._loadSprite(l.sprite):(this.imageManager.setLoaded(!0),this.dispatcher.broadcast("spriteLoaded",!0)),this.glyphManager.setURL(l.glyphs);const y=zr(this.stylesheet.layers);this._order=y.map(x=>x.id),this._layers={},this._serializedLayers={};for(const x of y){const S=o.createStyleLayer(x);S.setEventedParent(this,{layer:{id:S.id}}),this._layers[S.id]=S,this._serializedLayers[S.id]=S.serialize(),this._updateLayerCount(S,!0)}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new ut(this.stylesheet.light),this.stylesheet.terrain&&!this.terrainSetForDrapingOnly()&&this._createTerrain(this.stylesheet.terrain,1),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this._updateDrapeFirstLayers(),this.fire(new o.Event("data",{dataType:"style"})),this.fire(new o.Event("style.load"))}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}setProjection(l){l?this.stylesheet.projection=l:delete this.stylesheet.projection,this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?this.getTerrain()||this.stylesheet.terrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null))}_updateMapProjection(){this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.stylesheet.projection)}_loadSprite(l){this._spriteRequest=function(f,y,x){let S,C,I;const z=o.exported.devicePixelRatio>1?"@2x":"";let V=o.getJSON(y.transformRequest(y.normalizeSpriteURL(f,z,".json"),o.ResourceType.SpriteJSON),(te,ne)=>{V=null,I||(I=te,S=ne,Z())}),U=o.getImage(y.transformRequest(y.normalizeSpriteURL(f,z,".png"),o.ResourceType.SpriteImage),(te,ne)=>{U=null,I||(I=te,C=ne,Z())});function Z(){if(I)x(I);else if(S&&C){const te=o.exported.getImageData(C),ne={};for(const oe in S){const{width:ae,height:se,x:Q,y:fe,sdf:he,pixelRatio:me,stretchX:we,stretchY:ve,content:Ee}=S[oe],ke=new o.RGBAImage({width:ae,height:se});o.RGBAImage.copy(te,ke,{x:Q,y:fe},{x:0,y:0},{width:ae,height:se}),ne[oe]={data:ke,pixelRatio:me,sdf:he,stretchX:we,stretchY:ve,content:Ee}}x(null,ne)}}return{cancel(){V&&(V.cancel(),V=null),U&&(U.cancel(),U=null)}}}(l,this.map._requestManager,(f,y)=>{if(this._spriteRequest=null,f)this.fire(new o.ErrorEvent(f));else if(y)for(const x in y)this.imageManager.addImage(x,y[x]);this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),this.dispatcher.broadcast("setImages",this._availableImages),this.dispatcher.broadcast("spriteLoaded",!0),this.fire(new o.Event("data",{dataType:"style"}))})}_validateLayer(l){const f=this.getSource(l.source);if(!f)return;const y=l.sourceLayer;y&&(f.type==="geojson"||f.vectorLayerIds&&f.vectorLayerIds.indexOf(y)===-1)&&this.fire(new o.ErrorEvent(new Error(`Source layer "${y}" does not exist on source "${f.id}" as specified by style layer "${l.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const l in this._sourceCaches)if(!this._sourceCaches[l].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeLayers(l){const f=[];for(const y of l){const x=this._layers[y];x.type!=="custom"&&f.push(x.serialize())}return f}hasTransitions(){if(this.light&&this.light.hasTransition()||this.fog&&this.fog.hasTransition())return!0;for(const l in this._sourceCaches)if(this._sourceCaches[l].hasTransition())return!0;for(const l in this._layers)if(this._layers[l].hasTransition())return!0;return!1}get order(){return this.map._optimizeForTerrain&&this.terrain?this._drapedFirstOrder:this._order}isLayerDraped(l){return!!this.terrain&&(typeof l.isLayerDraped=="function"?l.isLayerDraped():hs[l.type])}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}update(l){if(!this._loaded)return;const f=this._changed;if(this._changed){const x=Object.keys(this._updatedLayers),S=Object.keys(this._removedLayers);(x.length||S.length)&&this._updateWorkerLayers(x,S);for(const C in this._updatedSources){const I=this._updatedSources[C];I==="reload"?this._reloadSource(C):I==="clear"&&this._clearSource(C)}this._updateTilesForChangedImages();for(const C in this._updatedPaintProps)this._layers[C].updateTransitions(l);this.light.updateTransitions(l),this.fog&&this.fog.updateTransitions(l),this._resetUpdates()}const y={};for(const x in this._sourceCaches){const S=this._sourceCaches[x];y[x]=S.used,S.used=!1}for(const x of this._order){const S=this._layers[x];if(S.recalculate(l,this._availableImages),!S.isHidden(l.zoom)){const I=this._getLayerSourceCache(S);I&&(I.used=!0)}const C=this.map.painter;if(C){const I=S.getProgramIds();if(!I)continue;const z=S.getProgramConfiguration(l.zoom);for(const V of I)C.useProgram(V,z)}}for(const x in y){const S=this._sourceCaches[x];y[x]!==S.used&&S.getSource().fire(new o.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:S.getSource().id}))}this.light.recalculate(l),this.terrain&&this.terrain.recalculate(l),this.fog&&this.fog.recalculate(l),this.z=l.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),f&&this.fire(new o.Event("data",{dataType:"style"}))}_updateTilesForChangedImages(){const l=Object.keys(this._changedImages);if(l.length){for(const f in this._sourceCaches)this._sourceCaches[f].reloadTilesForDependencies(["icons","patterns"],l);this._changedImages={}}}_updateWorkerLayers(l,f){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(l),removedIds:f})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}}setState(l){if(this._checkLoaded(),ru(this,o.validateStyle(l)))return!1;(l=o.clone$1(l)).layers=zr(l.layers);const f=function(x,S){if(!x)return[{command:Jt.setStyle,args:[S]}];let C=[];try{if(!v(x.version,S.version))return[{command:Jt.setStyle,args:[S]}];v(x.center,S.center)||C.push({command:Jt.setCenter,args:[S.center]}),v(x.zoom,S.zoom)||C.push({command:Jt.setZoom,args:[S.zoom]}),v(x.bearing,S.bearing)||C.push({command:Jt.setBearing,args:[S.bearing]}),v(x.pitch,S.pitch)||C.push({command:Jt.setPitch,args:[S.pitch]}),v(x.sprite,S.sprite)||C.push({command:Jt.setSprite,args:[S.sprite]}),v(x.glyphs,S.glyphs)||C.push({command:Jt.setGlyphs,args:[S.glyphs]}),v(x.transition,S.transition)||C.push({command:Jt.setTransition,args:[S.transition]}),v(x.light,S.light)||C.push({command:Jt.setLight,args:[S.light]}),v(x.fog,S.fog)||C.push({command:Jt.setFog,args:[S.fog]}),v(x.projection,S.projection)||C.push({command:Jt.setProjection,args:[S.projection]});const I={},z=[];(function(Z,te,ne,oe){let ae;for(ae in te=te||{},Z=Z||{})Z.hasOwnProperty(ae)&&(te.hasOwnProperty(ae)||Wr(ae,ne,oe));for(ae in te){if(!te.hasOwnProperty(ae))continue;const se=te[ae];Z.hasOwnProperty(ae)?v(Z[ae],se)||(Z[ae].type==="geojson"&&se.type==="geojson"&&La(Z,te,ae)?ne.push({command:Jt.setGeoJSONSourceData,args:[ae,se.data]}):ls(ae,te,ne,oe)):qr(ae,te,ne)}})(x.sources,S.sources,z,I);const V=[];x.layers&&x.layers.forEach(Z=>{Z.source&&I[Z.source]?C.push({command:Jt.removeLayer,args:[Z.id]}):V.push(Z)});let U=x.terrain;U&&I[U.source]&&(C.push({command:Jt.setTerrain,args:[void 0]}),U=void 0),C=C.concat(z),v(U,S.terrain)||C.push({command:Jt.setTerrain,args:[S.terrain]}),function(Z,te,ne){te=te||[];const oe=(Z=Z||[]).map(za),ae=te.map(za),se=Z.reduce(Un,{}),Q=te.reduce(Un,{}),fe=oe.slice(),he=Object.create(null);let me,we,ve,Ee,ke,Le,Ne;for(me=0,we=0;me<oe.length;me++)ve=oe[me],Q.hasOwnProperty(ve)?we++:(ne.push({command:Jt.removeLayer,args:[ve]}),fe.splice(fe.indexOf(ve,we),1));for(me=0,we=0;me<ae.length;me++)ve=ae[ae.length-1-me],fe[fe.length-1-me]!==ve&&(se.hasOwnProperty(ve)?(ne.push({command:Jt.removeLayer,args:[ve]}),fe.splice(fe.lastIndexOf(ve,fe.length-we),1)):we++,Le=fe[fe.length-me],ne.push({command:Jt.addLayer,args:[Q[ve],Le]}),fe.splice(fe.length-me,0,ve),he[ve]=!0);for(me=0;me<ae.length;me++)if(ve=ae[me],Ee=se[ve],ke=Q[ve],!he[ve]&&!v(Ee,ke))if(v(Ee.source,ke.source)&&v(Ee["source-layer"],ke["source-layer"])&&v(Ee.type,ke.type)){for(Ne in Xe(Ee.layout,ke.layout,ne,ve,null,Jt.setLayoutProperty),Xe(Ee.paint,ke.paint,ne,ve,null,Jt.setPaintProperty),v(Ee.filter,ke.filter)||ne.push({command:Jt.setFilter,args:[ve,ke.filter]}),v(Ee.minzoom,ke.minzoom)&&v(Ee.maxzoom,ke.maxzoom)||ne.push({command:Jt.setLayerZoomRange,args:[ve,ke.minzoom,ke.maxzoom]}),Ee)Ee.hasOwnProperty(Ne)&&Ne!=="layout"&&Ne!=="paint"&&Ne!=="filter"&&Ne!=="metadata"&&Ne!=="minzoom"&&Ne!=="maxzoom"&&(Ne.indexOf("paint.")===0?Xe(Ee[Ne],ke[Ne],ne,ve,Ne.slice(6),Jt.setPaintProperty):v(Ee[Ne],ke[Ne])||ne.push({command:Jt.setLayerProperty,args:[ve,Ne,ke[Ne]]}));for(Ne in ke)ke.hasOwnProperty(Ne)&&!Ee.hasOwnProperty(Ne)&&Ne!=="layout"&&Ne!=="paint"&&Ne!=="filter"&&Ne!=="metadata"&&Ne!=="minzoom"&&Ne!=="maxzoom"&&(Ne.indexOf("paint.")===0?Xe(Ee[Ne],ke[Ne],ne,ve,Ne.slice(6),Jt.setPaintProperty):v(Ee[Ne],ke[Ne])||ne.push({command:Jt.setLayerProperty,args:[ve,Ne,ke[Ne]]}))}else ne.push({command:Jt.removeLayer,args:[ve]}),Le=fe[fe.lastIndexOf(ve)+1],ne.push({command:Jt.addLayer,args:[ke,Le]})}(V,S.layers,C)}catch(I){console.warn("Unable to compute style diff:",I),C=[{command:Jt.setStyle,args:[S]}]}return C}(this.serialize(),l).filter(x=>!(x.command in us));if(f.length===0)return!1;const y=f.filter(x=>!(x.command in Vl));if(y.length>0)throw new Error(`Unimplemented: ${y.map(x=>x.command).join(", ")}.`);return f.forEach(x=>{x.command!=="setTransition"&&x.command!=="setProjection"&&this[x.command].apply(this,x.args)}),this.stylesheet=l,this._updateMapProjection(),!0}addImage(l,f){return this.getImage(l)?this.fire(new o.ErrorEvent(new Error("An image with this name already exists."))):(this.imageManager.addImage(l,f),this._afterImageUpdated(l),this)}updateImage(l,f){this.imageManager.updateImage(l,f)}getImage(l){return this.imageManager.getImage(l)}removeImage(l){return this.getImage(l)?(this.imageManager.removeImage(l),this._afterImageUpdated(l),this):this.fire(new o.ErrorEvent(new Error("No image with this name exists.")))}_afterImageUpdated(l){this._availableImages=this.imageManager.listImages(),this._changedImages[l]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new o.Event("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addSource(l,f,y={}){if(this._checkLoaded(),this.getSource(l)!==void 0)throw new Error("There is already a source with this ID");if(!f.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(f).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(f.type)>=0&&this._validate(o.validateSource,`sources.${l}`,f,null,y))return;this.map&&this.map._collectResourceTiming&&(f.collectResourceTiming=!0);const x=Ae(l,f,this.dispatcher,this);x.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(l),source:x.serialize(),sourceId:l}));const S=C=>{const I=(C?"symbol:":"other:")+l,z=this._sourceCaches[I]=new o.SourceCache(I,x,C);(C?this._symbolSourceCaches:this._otherSourceCaches)[l]=z,z.style=this,z.onAdd(this.map)};S(!1),f.type!=="vector"&&f.type!=="geojson"||S(!0),x.onAdd&&x.onAdd(this.map),this._changed=!0}removeSource(l){this._checkLoaded();const f=this.getSource(l);if(!f)throw new Error("There is no source with this ID");for(const x in this._layers)if(this._layers[x].source===l)return this.fire(new o.ErrorEvent(new Error(`Source "${l}" cannot be removed while layer "${x}" is using it.`)));if(this.terrain&&this.terrain.get().source===l)return this.fire(new o.ErrorEvent(new Error(`Source "${l}" cannot be removed while terrain is using it.`)));const y=this._getSourceCaches(l);for(const x of y)delete this._sourceCaches[x.id],delete this._updatedSources[x.id],x.fire(new o.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:x.getSource().id})),x.setEventedParent(null),x.clearTiles();return delete this._otherSourceCaches[l],delete this._symbolSourceCaches[l],f.setEventedParent(null),f.onRemove&&f.onRemove(this.map),this._changed=!0,this}setGeoJSONSourceData(l,f){this._checkLoaded(),this.getSource(l).setData(f),this._changed=!0}getSource(l){const f=this._getSourceCache(l);return f&&f.getSource()}_getSources(){const l=[];for(const f in this._otherSourceCaches){const y=this._getSourceCache(f);y&&l.push(y.getSource())}return l}addLayer(l,f,y={}){this._checkLoaded();const x=l.id;if(this.getLayer(x))return void this.fire(new o.ErrorEvent(new Error(`Layer with id "${x}" already exists on this map`)));let S;if(l.type==="custom"){if(ru(this,o.validateCustomStyleLayer(l)))return;S=o.createStyleLayer(l)}else{if(typeof l.source=="object"&&(this.addSource(x,l.source),l=o.clone$1(l),l=o.extend(l,{source:x})),this._validate(o.validateLayer,`layers.${x}`,l,{arrayIndex:-1},y))return;S=o.createStyleLayer(l),this._validateLayer(S),S.setEventedParent(this,{layer:{id:x}}),this._serializedLayers[S.id]=S.serialize(),this._updateLayerCount(S,!0)}const C=f?this._order.indexOf(f):this._order.length;if(f&&C===-1)return void this.fire(new o.ErrorEvent(new Error(`Layer with id "${f}" does not exist on this map.`)));this._order.splice(C,0,x),this._layerOrderChanged=!0,this._layers[x]=S;const I=this._getLayerSourceCache(S);if(this._removedLayers[x]&&S.source&&I&&S.type!=="custom"){const z=this._removedLayers[x];delete this._removedLayers[x],z.type!==S.type?this._updatedSources[S.source]="clear":(this._updatedSources[S.source]="reload",I.pause())}this._updateLayer(S),S.onAdd&&S.onAdd(this.map),this._updateDrapeFirstLayers()}moveLayer(l,f){if(this._checkLoaded(),this._changed=!0,!this._layers[l])return void this.fire(new o.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be moved.`)));if(l===f)return;const y=this._order.indexOf(l);this._order.splice(y,1);const x=f?this._order.indexOf(f):this._order.length;f&&x===-1?this.fire(new o.ErrorEvent(new Error(`Layer with id "${f}" does not exist on this map.`))):(this._order.splice(x,0,l),this._layerOrderChanged=!0,this._updateDrapeFirstLayers())}removeLayer(l){this._checkLoaded();const f=this._layers[l];if(!f)return void this.fire(new o.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be removed.`)));f.setEventedParent(null),this._updateLayerCount(f,!1);const y=this._order.indexOf(l);this._order.splice(y,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[l]=f,delete this._layers[l],delete this._serializedLayers[l],delete this._updatedLayers[l],delete this._updatedPaintProps[l],f.onRemove&&f.onRemove(this.map),this._updateDrapeFirstLayers()}getLayer(l){return this._layers[l]}hasLayer(l){return l in this._layers}hasLayerType(l){for(const f in this._layers)if(this._layers[f].type===l)return!0;return!1}setLayerZoomRange(l,f,y){this._checkLoaded();const x=this.getLayer(l);x?x.minzoom===f&&x.maxzoom===y||(f!=null&&(x.minzoom=f),y!=null&&(x.maxzoom=y),this._updateLayer(x)):this.fire(new o.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot have zoom extent.`)))}setFilter(l,f,y={}){this._checkLoaded();const x=this.getLayer(l);if(x){if(!v(x.filter,f))return f==null?(x.filter=void 0,void this._updateLayer(x)):void(this._validate(o.validateFilter,`layers.${x.id}.filter`,f,{layerType:x.type},y)||(x.filter=o.clone$1(f),this._updateLayer(x)))}else this.fire(new o.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be filtered.`)))}getFilter(l){const f=this.getLayer(l);return f&&o.clone$1(f.filter)}setLayoutProperty(l,f,y,x={}){this._checkLoaded();const S=this.getLayer(l);S?v(S.getLayoutProperty(f),y)||(S.setLayoutProperty(f,y,x),this._updateLayer(S)):this.fire(new o.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be styled.`)))}getLayoutProperty(l,f){const y=this.getLayer(l);if(y)return y.getLayoutProperty(f);this.fire(new o.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style.`)))}setPaintProperty(l,f,y,x={}){this._checkLoaded();const S=this.getLayer(l);S?v(S.getPaintProperty(f),y)||(S.setPaintProperty(f,y,x)&&this._updateLayer(S),this._changed=!0,this._updatedPaintProps[l]=!0):this.fire(new o.ErrorEvent(new Error(`The layer '${l}' does not exist in the map's style and cannot be styled.`)))}getPaintProperty(l,f){const y=this.getLayer(l);return y&&y.getPaintProperty(f)}setFeatureState(l,f){this._checkLoaded();const y=l.source,x=l.sourceLayer,S=this.getSource(y);if(!S)return void this.fire(new o.ErrorEvent(new Error(`The source '${y}' does not exist in the map's style.`)));const C=S.type;if(C==="geojson"&&x)return void this.fire(new o.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(C==="vector"&&!x)return void this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));l.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided.")));const I=this._getSourceCaches(y);for(const z of I)z.setFeatureState(x,l.id,f)}removeFeatureState(l,f){this._checkLoaded();const y=l.source,x=this.getSource(y);if(!x)return void this.fire(new o.ErrorEvent(new Error(`The source '${y}' does not exist in the map's style.`)));const S=x.type,C=S==="vector"?l.sourceLayer:void 0;if(S==="vector"&&!C)return void this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")));if(f&&typeof l.id!="string"&&typeof l.id!="number")return void this.fire(new o.ErrorEvent(new Error("A feature id is required to remove its specific state property.")));const I=this._getSourceCaches(y);for(const z of I)z.removeFeatureState(C,l.id,f)}getFeatureState(l){this._checkLoaded();const f=l.source,y=l.sourceLayer,x=this.getSource(f);if(x){if(x.type!=="vector"||y)return l.id===void 0&&this.fire(new o.ErrorEvent(new Error("The feature id parameter must be provided."))),this._getSourceCaches(f)[0].getFeatureState(y,l.id);this.fire(new o.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new o.ErrorEvent(new Error(`The source '${f}' does not exist in the map's style.`)))}getTransition(){return o.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){const l={};for(const f in this._sourceCaches){const y=this._sourceCaches[f].getSource();l[y.id]||(l[y.id]=y.serialize())}return o.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,terrain:this.getTerrain()||void 0,fog:this.stylesheet.fog,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:l,layers:this._serializeLayers(this._order)},f=>f!==void 0)}_updateLayer(l){this._updatedLayers[l.id]=!0;const f=this._getLayerSourceCache(l);l.source&&!this._updatedSources[l.source]&&f&&f.getSource().type!=="raster"&&(this._updatedSources[l.source]="reload",f.pause()),this._changed=!0,l.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(l){const f=C=>this._layers[C].type==="fill-extrusion",y={},x=[];for(let C=this._order.length-1;C>=0;C--){const I=this._order[C];if(f(I)){y[I]=C;for(const z of l){const V=z[I];if(V)for(const U of V)x.push(U)}}}x.sort((C,I)=>I.intersectionZ-C.intersectionZ);const S=[];for(let C=this._order.length-1;C>=0;C--){const I=this._order[C];if(f(I))for(let z=x.length-1;z>=0;z--){const V=x[z].feature;if(y[V.layer.id]<C)break;S.push(V),x.pop()}else for(const z of l){const V=z[I];if(V)for(const U of V)S.push(U.feature)}}return S}queryRenderedFeatures(l,f,y){f&&f.filter&&this._validate(o.validateFilter,"queryRenderedFeatures.filter",f.filter,null,f);const x={};if(f&&f.layers){if(!Array.isArray(f.layers))return this.fire(new o.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(const z of f.layers){const V=this._layers[z];if(!V)return this.fire(new o.ErrorEvent(new Error(`The layer '${z}' does not exist in the map's style and cannot be queried for features.`))),[];x[V.source]=!0}}const S=[];f.availableImages=this._availableImages;const C=f&&f.layers?f.layers.some(z=>{const V=this.getLayer(z);return V&&V.is3D()}):this.has3DLayers(),I=hr.createFromScreenPoints(l,y);for(const z in this._sourceCaches){const V=this._sourceCaches[z].getSource().id;f.layers&&!x[V]||S.push(De(this._sourceCaches[z],this._layers,this._serializedLayers,I,f,y,C,!!this.map._showQueryGeometry))}return this.placement&&S.push(function(z,V,U,Z,te,ne,oe){const ae={},se=ne.queryRenderedSymbols(Z),Q=[];for(const fe of Object.keys(se).map(Number))Q.push(oe[fe]);Q.sort(Ct);for(const fe of Q){const he=fe.featureIndex.lookupSymbolFeatures(se[fe.bucketInstanceId],V,fe.bucketIndex,fe.sourceLayerIndex,te.filter,te.layers,te.availableImages,z);for(const me in he){const we=ae[me]=ae[me]||[],ve=he[me];ve.sort((Ee,ke)=>{const Le=fe.featureSortOrder;if(Le){const Ne=Le.indexOf(Ee.featureIndex);return Le.indexOf(ke.featureIndex)-Ne}return ke.featureIndex-Ee.featureIndex});for(const Ee of ve)we.push(Ee)}}for(const fe in ae)ae[fe].forEach(he=>{const me=he.feature,we=U(z[fe]);if(!we)return;const ve=we.getFeatureState(me.layer["source-layer"],me.id);me.source=me.layer.source,me.layer["source-layer"]&&(me.sourceLayer=me.layer["source-layer"]),me.state=ve});return ae}(this._layers,this._serializedLayers,this._getLayerSourceCache.bind(this),I.screenGeometry,f,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(S)}querySourceFeatures(l,f){f&&f.filter&&this._validate(o.validateFilter,"querySourceFeatures.filter",f.filter,null,f);const y=this._getSourceCaches(l);let x=[];for(const S of y)x=x.concat(at(S,f));return x}addSourceType(l,f,y){return Ao.getSourceType(l)?y(new Error(`A source type called "${l}" already exists.`)):(Ao.setSourceType(l,f),f.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:l,url:f.workerSourceURL},y):y(null,null))}getLight(){return this.light.getLight()}setLight(l,f={}){this._checkLoaded();const y=this.light.getLight();let x=!1;for(const C in l)if(!v(l[C],y[C])){x=!0;break}if(!x)return;const S=this._setTransitionParameters({duration:300,delay:0});this.light.setLight(l,f),this.light.updateTransitions(S)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}setTerrain(l,f=1){if(this._checkLoaded(),!l)return delete this.terrain,delete this.stylesheet.terrain,this.dispatcher.broadcast("enableTerrain",!1),this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);let y=l;if(f===1){if(typeof y.source=="object"){const x="terrain-dem-src";this.addSource(x,y.source),y=o.clone$1(y),y=o.extend(y,{source:x})}if(this._validate(o.validateTerrain,"terrain",y))return}if(!this.terrain||this.terrain&&f!==this.terrain.drapeRenderMode){if(!y)return;this._createTerrain(y,f)}else{const x=this.terrain,S=x.get();for(const C of Object.keys(o.spec.terrain))!y.hasOwnProperty(C)&&o.spec.terrain[C].default&&(y[C]=o.spec.terrain[C].default);for(const C in y)if(!v(y[C],S[C])){x.set(y),this.stylesheet.terrain=y;const I=this._setTransitionParameters({duration:0});x.updateTransitions(I);break}}this._updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(l){const f=this.fog=new zt(l,this.map.transform);this.stylesheet.fog=l;const y=this._setTransitionParameters({duration:0});f.updateTransitions(y)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const l of this.map._markers)l._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(l){if(this._checkLoaded(),!l)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const f=this.fog,y=f.get();Object.keys(l).length===0&&f.set(l);for(const x in l)if(!v(l[x],y[x])){f.set(l),this.stylesheet.fog=l;const S=this._setTransitionParameters({duration:0});f.updateTransitions(S);break}}else this._createFog(l);this._markersNeedUpdate=!0}_setTransitionParameters(l){return{now:o.exported.now(),transition:o.extend(l,this.stylesheet.transition)}}_updateDrapeFirstLayers(){if(!this.map._optimizeForTerrain||!this.terrain)return;const l=this._order.filter(y=>this.isLayerDraped(this._layers[y])),f=this._order.filter(y=>!this.isLayerDraped(this._layers[y]));this._drapedFirstOrder=[],this._drapedFirstOrder.push(...l),this._drapedFirstOrder.push(...f)}_createTerrain(l,f){const y=this.terrain=new kt(l,f);this.stylesheet.terrain=l,this.dispatcher.broadcast("enableTerrain",!this.terrainSetForDrapingOnly()),this._force3DLayerUpdate();const x=this._setTransitionParameters({duration:0});y.updateTransitions(x)}_force3DLayerUpdate(){for(const l in this._layers){const f=this._layers[l];f.type==="fill-extrusion"&&this._updateLayer(f)}}_forceSymbolLayerUpdate(){for(const l in this._layers){const f=this._layers[l];f.type==="symbol"&&this._updateLayer(f)}}_validate(l,f,y,x,S={}){return(!S||S.validate!==!1)&&ru(this,l.call(o.validateStyle,o.extend({key:f,style:this.serialize(),value:y,styleSpec:o.spec},x)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),o.evented.off("pluginStateChange",this._rtlTextPluginCallback);for(const l in this._layers)this._layers[l].setEventedParent(null);for(const l in this._sourceCaches)this._sourceCaches[l].clearTiles(),this._sourceCaches[l].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()}_clearSource(l){const f=this._getSourceCaches(l);for(const y of f)y.clearTiles()}_reloadSource(l){const f=this._getSourceCaches(l);for(const y of f)y.resume(),y.reload()}_reloadSources(){for(const l of this._getSources())l.reload&&l.reload()}_updateSources(l){for(const f in this._sourceCaches)this._sourceCaches[f].update(l)}_generateCollisionBoxes(){for(const l in this._sourceCaches){const f=this._sourceCaches[l];f.resume(),f.reload()}}_updatePlacement(l,f,y,x,S=!1){let C=!1,I=!1;const z={};for(const V of this._order){const U=this._layers[V];if(U.type!=="symbol")continue;if(!z[U.source]){const te=this._getLayerSourceCache(U);if(!te)continue;z[U.source]=te.getRenderableIds(!0).map(ne=>te.getTileByID(ne)).sort((ne,oe)=>oe.tileID.overscaledZ-ne.tileID.overscaledZ||(ne.tileID.isLessThan(oe.tileID)?-1:1))}const Z=this.crossTileSymbolIndex.addLayer(U,z[U.source],l.center.lng,l.projection);C=C||Z}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),S=S||this._layerOrderChanged||y===0,this._layerOrderChanged&&this.fire(new o.Event("neworder")),(S||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(o.exported.now(),l.zoom))&&(this.pauseablePlacement=new tu(l,this._order,S,f,y,x,this.placement,this.fog&&l.projection.supportsFog?this.fog.state:null),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,z),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(o.exported.now()),I=!0),C&&this.pauseablePlacement.placement.setStale()),I||C)for(const V of this._order){const U=this._layers[V];U.type==="symbol"&&this.placement.updateLayerOpacities(U,z[U.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(o.exported.now())}_releaseSymbolFadeTiles(){for(const l in this._sourceCaches)this._sourceCaches[l].releaseSymbolFadeTiles()}getImages(l,f,y){this.imageManager.getImages(f.icons,y),this._updateTilesForChangedImages();const x=S=>{S&&S.setDependencies(f.tileID.key,f.type,f.icons)};x(this._otherSourceCaches[f.source]),x(this._symbolSourceCaches[f.source])}getGlyphs(l,f,y){this.glyphManager.getGlyphs(f.stacks,y)}getResource(l,f,y){return o.makeRequest(f,y)}_getSourceCache(l){return this._otherSourceCaches[l]}_getLayerSourceCache(l){return l.type==="symbol"?this._symbolSourceCaches[l.source]:this._otherSourceCaches[l.source]}_getSourceCaches(l){const f=[];return this._otherSourceCaches[l]&&f.push(this._otherSourceCaches[l]),this._symbolSourceCaches[l]&&f.push(this._symbolSourceCaches[l]),f}_isSourceCacheLoaded(l){const f=this._getSourceCaches(l);return f.length===0?(this.fire(new o.ErrorEvent(new Error(`There is no source with ID '${l}'`))),!1):f.every(y=>y.loaded())}has3DLayers(){return this._num3DLayers>0}hasSymbolLayers(){return this._numSymbolLayers>0}hasCircleLayers(){return this._numCircleLayers>0}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Ao.getSourceType=function(m){return Ie[m]},Ao.setSourceType=function(m,l){Ie[m]=l},Ao.registerForPluginStateChange=o.registerForPluginStateChange;var nu=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#define EXTENT 8192.0
#define HALF_PI PI/2.0
#define QUARTER_PI PI/4.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0`,Gy="attribute highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;varying highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",qy=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}
#ifdef TERRAIN
#ifdef TERRAIN_DEM_FLOAT_FORMAT
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;
#else
uniform sampler2D u_dem;uniform sampler2D u_dem_prev;
#endif
uniform vec4 u_dem_unpack;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;uniform sampler2D u_depth;uniform vec2 u_depth_size_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float decodeElevation(vec4 v) {return dot(vec4(v.xyz*255.0,-1.0),u_dem_unpack);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem,pos));
#ifdef TERRAIN_DEM_NEAREST_FILTER
return u_exaggeration*tl;
#endif
float tr=decodeElevation(texture2D(u_dem,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture2D(u_dem_prev,pos).a;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=decodeElevation(texture2D(u_dem_prev,pos));float tr=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,0.0)));float bl=decodeElevation(texture2D(u_dem_prev,pos+vec2(0.0,dd)));float br=decodeElevation(texture2D(u_dem_prev,pos+vec2(dd,dd)));return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;float depth=unpack_depth(texture2D(u_depth,(coord.xy+1.0)*0.5));return coord.z > depth+0.0005;}float occlusionFade(vec4 frag) {vec3 coord=frag.xyz/frag.w;vec3 df=vec3(5.0*u_depth_size_inv,0.0);vec2 uv=0.5*coord.xy+0.5;vec4 depth=vec4(
unpack_depth(texture2D(u_depth,uv-df.xz)),unpack_depth(texture2D(u_depth,uv+df.xz)),unpack_depth(texture2D(u_depth,uv-df.zy)),unpack_depth(texture2D(u_depth,uv+df.zy))
);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z-0.001)-depth),0.0,1.0));}vec4 fourSample(vec2 pos,vec2 off) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
float tl=texture2D(u_dem,pos).a;float tr=texture2D(u_dem,pos+vec2(off.x,0.0)).a;float bl=texture2D(u_dem,pos+vec2(0.0,off.y)).a;float br=texture2D(u_dem,pos+off).a;
#else
vec4 demtl=vec4(texture2D(u_dem,pos).xyz*255.0,-1.0);float tl=dot(demtl,u_dem_unpack);vec4 demtr=vec4(texture2D(u_dem,pos+vec2(off.x,0.0)).xyz*255.0,-1.0);float tr=dot(demtr,u_dem_unpack);vec4 dembl=vec4(texture2D(u_dem,pos+vec2(0.0,off.y)).xyz*255.0,-1.0);float bl=dot(dembl,u_dem_unpack);vec4 dembr=vec4(texture2D(u_dem,pos+off).xyz*255.0,-1.0);float br=dot(dembr,u_dem_unpack);
#endif
return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }bool isOccluded(vec4 frag) { return false; }float occlusionFade(vec4 frag) { return 1.0; }
#endif`,wh=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;varying vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,Wy=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump float u_fog_temporal_offset;varying vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,opacity);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec3 fog_dither(vec3 color) {vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`;let ap={},sp={};const Gl=[];Xs(nu,Gl),Xs(qy,Gl),Xs(wh,Gl),Xs(Wy,Gl),ap=$r("",qy),sp=$r(Wy,wh);const Hy=$r(`
#if __VERSION__ >=300
#define varying in
#define gl_FragColor glFragColor
#define texture2D texture
#define textureCube texture
out vec4 glFragColor;
#endif
highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}`,`
#if __VERSION__ >=300
#define attribute in
#define varying out
#define texture2D texture
#endif
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);//Normalized device coordinate that is not rendered.`),Sh=nu,Eh=`
#ifdef GL_ES
precision mediump float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`;var lp={background:$r(`uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
varying vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform vec4 u_color;varying vec4 v_color;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(u_color);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:$r(`uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos;void main() {vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:$r(`varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
gl_FragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec3 v_data;varying float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:$r("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:$r(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {gl_FragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:$r(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:$r("varying float v_placed;varying float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);gl_FragColor =mix(red,blue,step(0.5,v_placed))*0.5;gl_FragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`attribute vec3 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;attribute float a_size_scale;attribute vec2 a_padding;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*elevation(a_anchor_pos),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:$r("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}",`attribute vec2 a_pos_2f;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:$r("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}",`attribute vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;
#endif
varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:$r(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutline:$r(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:$r(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;varying vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:$r(`uniform vec2 u_texsize;uniform sampler2D u_image;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:$r(`varying vec4 v_color;
#ifdef RENDER_SHADOWS
varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
void main() {
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
vec3 normal=v_normal;
#endif
float z;vec4 color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);color=mix(v_color,v_roof_color,z);
#else
color=v_color;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);color.rgb=color.rgb*shade;
#endif
#ifdef RENDER_SHADOWS
#ifdef ZERO_ROOF_RADIUS
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#endif
color.xyz=shadowed_color_normal(color.xyz,normalize(normal),v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec4 v_color;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying highp vec4 v_pos_light_view_0;varying highp vec4 v_pos_light_view_1;varying float v_depth;
#endif
#ifdef ZERO_ROOF_RADIUS
varying vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
varying highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS)
v_normal=normal;
#endif
base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele;vec3 pos;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
v_pos_light_view_0=u_light_matrix_0*vec4(pos,1);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1);v_depth=gl_Position.w;
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}v_color=vec4(0.0,0.0,0.0,1.0);
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting(color,NdotL);
#else
v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_color*=u_opacity;
#ifdef ZERO_ROOF_RADIUS
v_roof_color=vec4(0.0,0.0,0.0,1.0);
#ifdef LIGHTING_3D_MODE
v_roof_color=apply_lighting(color,calculate_NdotL(vec3(0.0,0.0,1.0)));
#else
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));
#endif
v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionPattern:$r(`uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
varying vec2 v_pos;varying vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 imagecoord=mod(v_pos,1.0);vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);vec4 out_color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,v_NdotL)*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
gl_FragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec4 a_pos_normal_ed;attribute vec2 a_centroid_pos;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_pos_3;attribute vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
varying vec2 v_pos;varying vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;varying vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
varying float v_NdotL;
#endif
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool flat_roof=centroid_pos.x !=0.0 && t > 0.0;ele=elevation(pos_nx.xy);c_ele=flat_roof ? centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos) : ele;h=flat_roof ? max(c_ele+height,ele+base+2.0) : ele+(t > 0.0 ? height : base==0.0 ?-5.0 : base);p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float hidden=float(centroid_pos.x==0.0 && centroid_pos.y==1.0);gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_NdotL=NdotL;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),hillshadePrepare:$r(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
return texture2D(u_image,coord).a/4.0;
#else
vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;
#endif
}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:$r(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
gl_FragColor=apply_lighting(gl_FragColor);
#endif
#ifdef FOG
gl_FragColor=fog_dither(fog_apply_premultiplied(gl_FragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:$r(`uniform lowp float u_device_pixel_ratio;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
uniform float u_border_width;uniform vec4 u_border_color;float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture2D(u_dash_image,v_tex).a;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;alpha*=linearstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture2D(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trimmed=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {if (line_progress <=trim_end && line_progress >=trim_start) {out_color=vec4(0,0,0,0);trimmed=0.0;}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef RENDER_LINE_ALPHA_DISCARD
if (alpha < u_alpha_discard_threshold) {discard;}
#endif
#ifdef RENDER_LINE_BORDER
float edgeBlur=(u_border_width+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);
#ifdef RENDER_LINE_BORDER_AUTO
float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}
#else
out_color.rgb=mix(u_border_color.rgb*u_border_color.a*trimmed,out_color.rgb,smoothAlpha);
#endif
}
#endif
gl_FragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define EXTRUDE_SCALE 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
attribute highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
attribute float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec4 v_uv;
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;varying vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/floorwidth,(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),linePattern:$r(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;vec2 pattern_size=vec2(display_size.x/u_tile_units_to_pixels,display_size.y);float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x=mod(v_linesofar/pattern_size.x*aspect,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));vec4 color=texture2D(u_image,pos);
#ifdef LIGHTING_3D_MODE
color=apply_lighting(color);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_linesofar;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist*u_pixels_to_tile_units,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude;
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#else
v_gamma_scale=1.0;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),raster:$r(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply(out_color,v_fog_pos));
#endif
gl_FragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {float w=1.0+dot(a_texture_pos,u_perspective_transform);gl_Position=u_matrix*vec4(a_pos*w,0,w);v_pos0=a_texture_pos/8192.0;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),symbolIcon:$r(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetProjected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetProjected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetProjected_point.xy/offsetProjected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change))*projection_transition_fade;}`),symbolSDF:$r(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_pixeloffset;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);
#endif
vec2 a=projected_point.xy/projected_point.w;vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade);}`),symbolTextAndIcon:$r(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec4 a_pos_offset;attribute vec4 a_tex_size;attribute vec4 a_projected_pos;attribute float a_fade_opacity;
#ifdef PROJECTION_GLOBE_VIEW
attribute vec3 a_globe_anchor;attribute vec3 a_globe_normal;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;vec3 h=elevationVector(tile_anchor)*elevation(tile_anchor);float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos=mix_globe_mercator(a_globe_anchor+h,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offset_projected_point=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projected_point.xy/projected_point.w;vec2 b=offset_projected_point.xy/offset_projected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*font_scale);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
float occlusion_fade=occlusionFade(projected_point)*globe_occlusion_fade;
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,float(projected_point.w <=0.0 || occlusion_fade==0.0));
#endif
float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity*projection_transition_fade,is_sdf);}`),terrainRaster:$r(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
void main() {vec4 color=texture2D(u_image0,v_pos0);
#ifdef RENDER_SHADOWS
color.xyz=shadowed_color(color.xyz,v_pos_light_view_0,v_pos_light_view_1,v_depth);
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_skirt_height;attribute vec2 a_pos;varying vec2 v_pos0;
#ifdef FOG
varying float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;varying vec4 v_pos_light_view_0;varying vec4 v_pos_light_view_1;varying float v_depth;
#endif
const float wireframeOffset=0.00015;void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;
#ifdef TERRAIN_WIREFRAME
elevation+=wireframeOffset;
#endif
v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);v_depth=gl_Position.w;
#endif
}`),terrainDepth:$r(`#ifdef GL_ES
precision highp float;
#endif
varying float v_depth;void main() {gl_FragColor=pack_depth(v_depth);}`,"uniform mat4 u_matrix;attribute vec2 a_pos;varying float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}"),skybox:$r(`
varying lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=textureCube(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);gl_FragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Gy),skyboxGradient:$r(`varying highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture2D(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,Gy),skyboxCapture:$r(`
varying highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;
#ifdef GL_ES
precision highp float;
#endif
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;gl_FragColor=vec4(color,1.0);}`,"attribute highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;varying highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:$r(`uniform sampler2D u_image0;varying vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture2D(u_image0,v_pos0);color=vec4(raster.rgb*antialias,raster.a*antialias);
#else
color=texture2D(u_image0,v_pos0);
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
gl_FragColor=color;
#ifdef TERRAIN_WIREFRAME
gl_FragColor=vec4(1.0,0.0,0.0,0.8);
#endif
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
attribute vec3 a_globe_pos;attribute vec2 a_uv;
#else
attribute vec2 a_pos;
#endif
varying vec2 v_pos0;const float wireframeOffset=1e3;float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(QUARTER_PI+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);
#ifdef TERRAIN_WIREFRAME
height+=wireframeOffset;
#endif
globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:$r(`uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec3 u_start_color;uniform vec4 u_color;uniform vec4 u_space_color;uniform vec4 u_high_color;uniform float u_star_intensity;uniform float u_star_size;uniform float u_star_density;uniform float u_horizon_angle;uniform mat4 u_rotation_matrix;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;highp float random(highp vec3 p) {p=fract(p*vec3(23.2342,97.1231,91.2342));p+=dot(p.zxy,p.yxz+123.1234);return fract(p.x*p.y);}float stars(vec3 p,float scale,vec2 offset) {vec2 uv_scale=(u_viewport/u_star_size)*scale;vec3 position=vec3(p.xy*uv_scale+offset*u_viewport,p.z);vec3 q=fract(position)-0.5;vec3 id=floor(position);float random_visibility=step(random(id),u_star_density);float circle=smoothstep(0.5+u_star_intensity,0.5,length(q));return circle*random_visibility;}void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {discard;return;}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(dot(dir,horizon_dir)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;float closest_point_to_center=length(closest_point-u_globe_pos);float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c =mix(color_stop_2,c2,t);float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);vec2 uv=gl_FragCoord.xy/u_viewport-0.5;float aspect_ratio=u_viewport.x/u_viewport.y;vec4 uv_dir=vec4(normalize(vec3(uv.x*aspect_ratio,uv.y,1.0)),1.0);uv_dir=u_rotation_matrix*uv_dir;vec3 n=abs(uv_dir.xyz);vec2 uv_remap=(n.x > n.y && n.x > n.z) ? uv_dir.yz/uv_dir.x:
(n.y > n.x && n.y > n.z) ? uv_dir.zx/uv_dir.y:
uv_dir.xy/uv_dir.z;uv_remap.x/=aspect_ratio;vec3 D=vec3(uv_remap,1.0);highp float star_field=0.0;if (u_star_intensity > 0.0) {star_field+=stars(D,1.2,vec2(0.0,0.0));star_field+=stars(D,1.0,vec2(1.0,0.0));star_field+=stars(D,0.8,vec2(0.0,1.0));star_field+=stars(D,0.6,vec2(1.0,1.0));star_field*=(1.0-pow(t,0.25+(1.0-u_high_color.a)*0.75));c+=star_field*alpha_2;}c=dither(c,gl_FragCoord.xy+u_temporal_offset);gl_FragColor=vec4(c,a);}`,`attribute vec3 a_pos;attribute vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;varying highp vec3 v_ray_dir;varying highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`)};function Xs(m,l){const f=m.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let y of f)if(y=y.trim(),y[0]==="#"&&y.includes("if")&&!y.includes("endif")){y=y.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const x=y.split(" ");for(const S of x)l.includes(S)||l.push(S)}}function $r(m,l){const f=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,y=l.match(/attribute (highp |mediump |lowp )?([\w]+) ([\w]+)/g),x={},S=[...Gl];return Xs(m,S),Xs(l,S),{fragmentSource:m=m.replace(f,(C,I,z,V,U)=>(x[U]=!0,I==="define"?`
#ifndef HAS_UNIFORM_u_${U}
varying ${z} ${V} ${U};
#else
uniform ${z} ${V} u_${U};
#endif
`:`
#ifdef HAS_UNIFORM_u_${U}
    ${z} ${V} ${U} = u_${U};
#endif
`)),vertexSource:l=l.replace(f,(C,I,z,V,U)=>{const Z=V==="float"?"vec2":"vec4",te=U.match(/color/)?"color":Z;return x[U]?I==="define"?`
#ifndef HAS_UNIFORM_u_${U}
uniform lowp float u_${U}_t;
attribute ${z} ${Z} a_${U};
varying ${z} ${V} ${U};
#else
uniform ${z} ${V} u_${U};
#endif
`:te==="vec4"?`
#ifndef HAS_UNIFORM_u_${U}
    ${U} = a_${U};
#else
    ${z} ${V} ${U} = u_${U};
#endif
`:`
#ifndef HAS_UNIFORM_u_${U}
    ${U} = unpack_mix_${te}(a_${U}, u_${U}_t);
#else
    ${z} ${V} ${U} = u_${U};
#endif
`:I==="define"?`
#ifndef HAS_UNIFORM_u_${U}
uniform lowp float u_${U}_t;
attribute ${z} ${Z} a_${U};
#else
uniform ${z} ${V} u_${U};
#endif
`:te==="vec4"?`
#ifndef HAS_UNIFORM_u_${U}
    ${z} ${V} ${U} = a_${U};
#else
    ${z} ${V} ${U} = u_${U};
#endif
`:`
#ifndef HAS_UNIFORM_u_${U}
    ${z} ${V} ${U} = unpack_mix_${te}(a_${U}, u_${U}_t);
#else
    ${z} ${V} ${U} = u_${U};
#endif
`}),staticAttributes:y,usedDefines:S}}class iu{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(l,f,y,x,S,C,I){this.context=l;let z=this.boundPaintVertexBuffers.length!==x.length;for(let U=0;!z&&U<x.length;U++)this.boundPaintVertexBuffers[U]!==x[U]&&(z=!0);let V=this.boundDynamicVertexBuffers.length!==I.length;for(let U=0;!V&&U<I.length;U++)this.boundDynamicVertexBuffers[U]!==I[U]&&(V=!0);if(!l.extVertexArrayObject||!this.vao||this.boundProgram!==f||this.boundLayoutVertexBuffer!==y||z||V||this.boundIndexBuffer!==S||this.boundVertexOffset!==C)this.freshBind(f,y,x,S,C,I);else{l.bindVertexArrayOES.set(this.vao);for(const U of I)U&&U.bind();S&&S.dynamicDraw&&S.bind()}}freshBind(l,f,y,x,S,C){let I;const z=l.numAttributes,V=this.context,U=V.gl;if(V.extVertexArrayObject)this.vao&&this.destroy(),this.vao=V.extVertexArrayObject.createVertexArrayOES(),V.bindVertexArrayOES.set(this.vao),I=0,this.boundProgram=l,this.boundLayoutVertexBuffer=f,this.boundPaintVertexBuffers=y,this.boundIndexBuffer=x,this.boundVertexOffset=S,this.boundDynamicVertexBuffers=C;else{I=V.currentNumAttributes||0;for(let Z=z;Z<I;Z++)U.disableVertexAttribArray(Z)}f.enableAttributes(U,l),f.bind(),f.setVertexAttribPointers(U,l,S);for(const Z of y)Z.enableAttributes(U,l),Z.bind(),Z.setVertexAttribPointers(U,l,S);for(const Z of C)Z&&(Z.enableAttributes(U,l),Z.bind(),Z.setVertexAttribPointers(U,l,S));x&&x.bind(),V.currentNumAttributes=z}destroy(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)}}function cp(m,l){const f=Math.pow(2,l.canonical.z),y=l.canonical.y;return[new o.MercatorCoordinate(0,y/f).toLngLat().lat,new o.MercatorCoordinate(0,(y+1)/f).toLngLat().lat]}function ou(m,l,f,y,x,S,C){const I=m.context,z=I.gl,V=f.fbo;if(!V)return;m.prepareDrawTile();const U=m.useProgram("hillshade");I.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,V.colorAttachment.get());const Z=((ae,se,Q,fe)=>{const he=Q.paint.get("hillshade-shadow-color"),me=Q.paint.get("hillshade-highlight-color"),we=Q.paint.get("hillshade-accent-color");let ve=Q.paint.get("hillshade-illumination-direction")*(Math.PI/180);Q.paint.get("hillshade-illumination-anchor")==="viewport"&&(ve-=ae.transform.angle);const Ee=!ae.options.moving;return{u_matrix:fe||ae.transform.calculateProjMatrix(se.tileID.toUnwrapped(),Ee),u_image:0,u_latrange:cp(0,se.tileID),u_light:[Q.paint.get("hillshade-exaggeration"),ve],u_shadow:he,u_highlight:me,u_accent:we}})(m,f,y,m.terrain?l.projMatrix:null);m.prepareDrawProgram(I,U,l.toUnwrapped());const{tileBoundsBuffer:te,tileBoundsIndexBuffer:ne,tileBoundsSegments:oe}=m.getTileBoundsBuffers(f);U.draw(I,z.TRIANGLES,x,S,C,o.CullFaceMode.disabled,Z,y.id,te,ne,oe)}function au(m,l,f){if(!l.needsDEMTextureUpload)return;const y=m.context,x=y.gl;y.pixelStoreUnpackPremultiplyAlpha.set(!1),l.demTexture=l.demTexture||m.getTileTexture(f.stride);const S=f.getPixels();l.demTexture?l.demTexture.update(S,{premultiply:!1}):l.demTexture=new o.Texture(y,S,x.RGBA,{premultiply:!1}),l.needsDEMTextureUpload=!1}function Th(m,l,f,y,x,S){const C=m.context,I=C.gl;if(!l.dem)return;const z=l.dem;if(C.activeTexture.set(I.TEXTURE1),au(m,l,z),!l.demTexture)return;l.demTexture.bind(I.NEAREST,I.CLAMP_TO_EDGE);const V=z.dim;C.activeTexture.set(I.TEXTURE0);let U=l.fbo;if(!U){const oe=new o.Texture(C,{width:V,height:V,data:null},I.RGBA);oe.bind(I.LINEAR,I.CLAMP_TO_EDGE),U=l.fbo=C.createFramebuffer(V,V,!0),U.colorAttachment.set(oe.texture)}C.bindFramebuffer.set(U.framebuffer),C.viewport.set([0,0,V,V]);const{tileBoundsBuffer:Z,tileBoundsIndexBuffer:te,tileBoundsSegments:ne}=m.getMercatorTileBoundsBuffers();m.useProgram("hillshadePrepare").draw(C,I.TRIANGLES,y,x,S,o.CullFaceMode.disabled,((oe,ae)=>{const se=ae.stride,Q=o.create();return o.ortho(Q,0,o.EXTENT,-o.EXTENT,0,0,1),o.translate(Q,Q,[0,-o.EXTENT,0]),{u_matrix:Q,u_image:1,u_dimension:[se,se],u_zoom:oe.overscaledZ,u_unpack:ae.unpackVector}})(l.tileID,z),f.id,Z,te,ne),l.needsHillshadePrepare=!1}const Ah=m=>({u_matrix:new o.UniformMatrix4f(m),u_image0:new o.Uniform1i(m),u_skirt_height:new o.Uniform1f(m)}),up=(m,l)=>({u_matrix:m,u_image0:0,u_skirt_height:l}),Mh=(m,l,f,y,x,S,C,I,z,V,U,Z,te,ne,oe)=>({u_proj_matrix:Float32Array.from(m),u_globe_matrix:l,u_normalize_matrix:Float32Array.from(y),u_merc_matrix:f,u_zoom_transition:x,u_merc_center:S,u_image0:0,u_frustum_tl:C,u_frustum_tr:I,u_frustum_br:z,u_frustum_bl:V,u_globe_pos:U,u_globe_radius:Z,u_viewport:te,u_grid_matrix:oe?Float32Array.from(oe):new Float32Array(9),u_skirt_height:ne});function hp(m,l){return m!=null&&l!=null&&!(!m.hasData()||!l.hasData())&&m.demTexture!=null&&l.demTexture!=null&&m.tileID.key!==l.tileID.key}const fs=new class{constructor(){this.operations={}}newMorphing(m,l,f,y,x){if(m in this.operations){const S=this.operations[m];S.to.tileID.key!==f.tileID.key&&(S.queued=f)}else this.operations[m]={startTime:y,phase:0,duration:x,from:l,to:f,queued:null}}getMorphValuesForProxy(m){if(!(m in this.operations))return null;const l=this.operations[m];return{from:l.from,to:l.to,phase:l.phase}}update(m){for(const l in this.operations){const f=this.operations[l];for(f.phase=(m-f.startTime)/f.duration;f.phase>=1||!this._validOp(f);)if(!this._nextOp(f,m)){delete this.operations[l];break}}}_nextOp(m,l){return!!m.queued&&(m.from=m.to,m.to=m.queued,m.queued=null,m.phase=0,m.startTime=l,!0)}_validOp(m){return m.from.hasData()&&m.to.hasData()}},Ks={0:null,1:"TERRAIN_VERTEX_MORPHING",2:"TERRAIN_WIREFRAME"};function Ch(m){return 6*Math.pow(1.5,22-m)}function fp(m,l){const f=1<<m.z;return!l&&(m.x===0||m.x===f-1)||m.y===0||m.y===f-1}const Pr=m=>({u_matrix:m});function su(m,l,f,y,x){if(x>0){const S=o.exported.now(),C=(S-m.timeAdded)/x,I=l?(S-l.timeAdded)/x:-1,z=f.getSource(),V=y.coveringZoomLevel({tileSize:z.tileSize,roundZoom:z.roundZoom}),U=!l||Math.abs(l.tileID.overscaledZ-V)>Math.abs(m.tileID.overscaledZ-V),Z=U&&m.refreshedUponExpiration?1:o.clamp(U?C:1-I,0,1);return m.refreshedUponExpiration&&C>=1&&(m.refreshedUponExpiration=!1),l?{opacity:1,mix:1-Z}:{opacity:Z,mix:0}}return{opacity:1,mix:0}}class Zy extends o.SourceCache{constructor(l){const f={type:"raster-dem",maxzoom:l.transform.maxZoom},y=new Vt(tr(),null),x=Ae("mock-dem",f,y,l.style);super("mock-dem",x,!1),x.setEventedParent(this),this._sourceLoaded=!0}_loadTile(l,f){l.state="loaded",f(null)}}class Xy extends o.SourceCache{constructor(l){const f=Ae("proxy",{type:"geojson",maxzoom:l.transform.maxZoom},new Vt(tr(),null),l.style);super("proxy",f,!1),f.setEventedParent(this),this.map=this.getSource().map=l,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(l,f,y){if(l.freezeTileCoverage)return;this.transform=l;const x=l.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((S,C)=>{if(S[C.key]="",!this._tiles[C.key]){const I=new o.Tile(C,this._source.tileSize*C.overscaleFactor(),l.tileZoom);I.state="loaded",this._tiles[C.key]=I}return S},{});for(const S in this._tiles)S in x||(this.freeFBO(S),this._tiles[S].unloadVectorData(),delete this._tiles[S])}freeFBO(l){const f=this.proxyCachedFBO[l];if(f!==void 0){const y=Object.values(f);this.renderCachePool.push(...y),delete this.proxyCachedFBO[l]}}deallocRenderCache(){this.renderCache.forEach(l=>l.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class dp extends o.OverscaledTileID{constructor(l,f,y){super(l.overscaledZ,l.wrap,l.canonical.z,l.canonical.x,l.canonical.y),this.proxyTileKey=f,this.projMatrix=y}}class pp extends o.Elevation{constructor(l,f){super(),this.painter=l,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[y,x,S]=function(z){const V=new o.StructArrayLayout2i4,U=new o.StructArrayLayout3ui6,Z=131;V.reserve(17161),U.reserve(33800);const te=o.EXTENT/128,ne=o.EXTENT+te/2,oe=ne+te;for(let se=-te;se<oe;se+=te)for(let Q=-te;Q<oe;Q+=te){const fe=Q<0||Q>ne||se<0||se>ne?24575:0,he=o.clamp(Math.round(Q),0,o.EXTENT),me=o.clamp(Math.round(se),0,o.EXTENT);V.emplaceBack(he+fe,me)}const ae=(se,Q)=>{const fe=Q*Z+se;U.emplaceBack(fe+1,fe,fe+Z),U.emplaceBack(fe+Z,fe+Z+1,fe+1)};for(let se=1;se<129;se++)for(let Q=1;Q<129;Q++)ae(Q,se);return[0,129].forEach(se=>{for(let Q=0;Q<130;Q++)ae(Q,se),ae(se,Q)}),[V,U,32768]}(),C=l.context;this.gridBuffer=C.createVertexBuffer(y,o.posAttributes.members),this.gridIndexBuffer=C.createIndexBuffer(x),this.gridSegments=o.SegmentVector.simpleSegment(0,0,y.length,x.length),this.gridNoSkirtSegments=o.SegmentVector.simpleSegment(0,0,y.length,S),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new Xy(f.map),this.orthoMatrix=o.create(),o.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,o.EXTENT,0,o.EXTENT,0,1);const I=C.gl;this._overlapStencilMode=new o.StencilMode({func:I.GEQUAL,mask:255},0,255,I.KEEP,I.KEEP,I.REPLACE),this._previousZoom=l.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=f,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Zy(f.map)}set style(l){l.on("data",this._onStyleDataEvent.bind(this)),l.on("neworder",this._checkRenderCacheEfficiency.bind(this)),this._style=l,this._checkRenderCacheEfficiency(),this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(l,f,y){if(l&&l.terrain){this._style!==l&&(this.style=l),this.enabled=!0;const x=l.terrain.properties;this.sourceCache=l.terrain.drapeRenderMode===0?this._mockSourceCache:l._getSourceCache(x.get("source")),this._exaggeration=x.get("exaggeration");const S=()=>{this.sourceCache.used&&o.warnOnce(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const C=this.getScaledDemTileSize();this.sourceCache.update(f,C,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,S(),this._initializing=!0),S(),f.updateElevation(!0,y),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(f),this._emptyDEMTextureDirty=!0}else this._disable()}resetTileLookupCache(l){this._findCoveringTileCache[l]={}}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_checkRenderCacheEfficiency(){const l=this.renderCacheEfficiency(this._style);this._style.map._optimizeForTerrain||l.efficiency!==100&&o.warnOnce(`Terrain render cache efficiency is not optimal (${l.efficiency}%) and performance
                may be affected negatively, consider placing all background, fill and line layers before layer
                with id '${l.firstUndrapedLayer}' or create a map using optimizeForTerrain: true option.`)}_onStyleDataEvent(l){l.coord&&l.dataType==="source"?this._clearRenderCacheForTile(l.sourceCacheId,l.coord):l.dataType==="style"&&(this._invalidateRenderCache=!0)}_disable(){if(this.enabled&&(this.enabled=!1,this._sharedDepthStencil=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const l in this._style._sourceCaches)this._style._sourceCaches[l].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this._emptyDepthBufferTexture&&this._emptyDepthBufferTexture.destroy(),this.pool.forEach(l=>l.fb.destroy()),this.pool=[],this._depthFBO&&(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0)}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this._exaggeration}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const l=2*this.proxySourceCache.getSource().tileSize;return[l,l]}set useVertexMorphing(l){this._useVertexMorphing=l}updateTileBinding(l){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const f=this.proxySourceCache,y=this.painter.transform;this._initializing&&(this._initializing=y._centerAltitude===0&&this.getAtPointOrZero(o.MercatorCoordinate.fromLngLat(y.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const x=this.proxyCoords=f.getIds().map(z=>{const V=f.getTileByID(z).tileID;return V.projMatrix=y.calculateProjMatrix(V.toUnwrapped()),V});(function(z,V){const U=V.transform.pointCoordinate(V.transform.getCameraPoint()),Z=new o.pointGeometry(U.x,U.y);z.sort((te,ne)=>{if(ne.overscaledZ-te.overscaledZ)return ne.overscaledZ-te.overscaledZ;const oe=new o.pointGeometry(te.canonical.x+(1<<te.canonical.z)*te.wrap,te.canonical.y),ae=new o.pointGeometry(ne.canonical.x+(1<<ne.canonical.z)*ne.wrap,ne.canonical.y),se=Z.mult(1<<te.canonical.z);return se.x-=.5,se.y-=.5,se.distSqr(oe)-se.distSqr(ae)})})(x,this.painter),this._previousZoom=y.zoom;const S=this.proxyToSource||{};this.proxyToSource={},x.forEach(z=>{this.proxyToSource[z.key]={}}),this.terrainTileForTile={};const C=this._style._sourceCaches;for(const z in C){const V=C[z];if(!V.used||(V!==this.sourceCache&&this.resetTileLookupCache(V.id),this._setupProxiedCoordsForOrtho(V,l[z],S),V.usedForTerrain))continue;const U=l[z];V.getSource().reparseOverscaled&&this._assignTerrainTiles(U)}this.proxiedCoords[f.id]=x.map(z=>new dp(z,z.key,this.orthoMatrix)),this._assignTerrainTiles(x),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(S),this.renderingToTexture=!1,this._updateTimestamp=o.exported.now();const I={};this._visibleDemTiles=[];for(const z of this.proxyCoords){const V=this.terrainTileForTile[z.key];if(!V)continue;const U=V.tileID.key;U in I||(this._visibleDemTiles.push(V),I[U]=U)}}_assignTerrainTiles(l){this._initializing||l.forEach(f=>{if(this.terrainTileForTile[f.key])return;const y=this._findTileCoveringTileID(f,this.sourceCache);y&&(this.terrainTileForTile[f.key]=y)})}_prepareDEMTextures(){const l=this.painter.context,f=l.gl;for(const y in this.terrainTileForTile){const x=this.terrainTileForTile[y],S=x.dem;!S||x.demTexture&&!x.needsDEMTextureUpload||(l.activeTexture.set(f.TEXTURE1),au(this.painter,x,S))}}_prepareDemTileUniforms(l,f,y,x){if(!f||f.demTexture==null)return!1;const S=l.tileID.canonical,C=Math.pow(2,f.tileID.canonical.z-S.z),I=x||"";return y[`u_dem_tl${I}`]=[S.x*C%1,S.y*C%1],y[`u_dem_scale${I}`]=C,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}get emptyDepthBufferTexture(){const l=this.painter.context,f=l.gl;if(!this._emptyDepthBufferTexture){const y=new o.RGBAImage({width:1,height:1},Uint8Array.of(255,255,255,255));this._emptyDepthBufferTexture=new o.Texture(l,y,f.RGBA,{premultiply:!1})}return this._emptyDepthBufferTexture}_getLoadedAreaMinimum(){let l=0;const f=this._visibleDemTiles.reduce((y,x)=>{if(!x.dem)return y;const S=x.dem.tree.minimums[0];return S>0&&l++,y+S},0);return l?f/l:0}_updateEmptyDEMTexture(){const l=this.painter.context,f=l.gl;l.activeTexture.set(f.TEXTURE2);const y=this._getLoadedAreaMinimum(),x=new o.RGBAImage({width:1,height:1},new Uint8Array(o.DEMData.pack(y,this.sourceCache.getSource().encoding)));this._emptyDEMTextureDirty=!1;let S=this._emptyDEMTexture;return S?S.update(x,{premultiply:!1}):S=this._emptyDEMTexture=new o.Texture(l,x,f.RGBA,{premultiply:!1}),S}setupElevationDraw(l,f,y){const x=this.painter.context,S=x.gl,C=(I=this.sourceCache.getSource().encoding,{u_dem:2,u_dem_prev:4,u_dem_unpack:o.DEMData.getUnpackVector(I),u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_exaggeration:0});var I;C.u_dem_size=this.sourceCache.getSource().tileSize,C.u_exaggeration=this.exaggeration();let z=null,V=null,U=1;if(y&&y.morphing&&this._useVertexMorphing){const Z=y.morphing.srcDemTile,te=y.morphing.dstDemTile;U=y.morphing.phase,Z&&te&&(this._prepareDemTileUniforms(l,Z,C,"_prev")&&(V=Z),this._prepareDemTileUniforms(l,te,C)&&(z=te))}if(V&&z?(x.activeTexture.set(S.TEXTURE2),z.demTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE,S.NEAREST),x.activeTexture.set(S.TEXTURE4),V.demTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE,S.NEAREST),C.u_dem_lerp=U):(z=this.terrainTileForTile[l.tileID.key],x.activeTexture.set(S.TEXTURE2),(this._prepareDemTileUniforms(l,z,C)?z.demTexture:this.emptyDEMTexture).bind(S.NEAREST,S.CLAMP_TO_EDGE)),x.activeTexture.set(S.TEXTURE3),y&&y.useDepthForOcclusion?(this._depthTexture&&this._depthTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE),this._depthFBO&&(C.u_depth_size_inv=[1/this._depthFBO.width,1/this._depthFBO.height])):(this.emptyDepthBufferTexture.bind(S.NEAREST,S.CLAMP_TO_EDGE),C.u_depth_size_inv=[1,1]),y&&y.useMeterToDem&&z){const Z=(1<<z.tileID.canonical.z)*o.mercatorZfromAltitude(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;C.u_meter_to_dem=Z}if(y&&y.labelPlaneMatrixInv&&(C.u_label_plane_matrix_inv=y.labelPlaneMatrixInv),f.setTerrainUniformValues(x,C),this.painter.transform.projection.name==="globe"){const Z=this.globeUniformValues(this.painter.transform,l.tileID.canonical,y&&y.useDenormalizedUpVectorScale);f.setGlobeUniformValues(x,Z)}}globeUniformValues(l,f,y){const x=l.projection;return{u_tile_tl_up:x.upVector(f,0,0),u_tile_tr_up:x.upVector(f,o.EXTENT,0),u_tile_br_up:x.upVector(f,o.EXTENT,o.EXTENT),u_tile_bl_up:x.upVector(f,0,o.EXTENT),u_tile_up_scale:y?o.globeMetersToEcef(1):x.upVectorScale(f,l.center.lat,l.worldSize).metersToTile}}renderToBackBuffer(l){const f=this.painter,y=this.painter.context;l.length!==0&&(y.bindFramebuffer.set(null),y.viewport.set([0,0,f.width,f.height]),f.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(x,S,C,I,z){if(x.transform.projection.name==="globe")(function(V,U,Z,te,ne){const oe=V.context,ae=oe.gl;let se,Q;const fe=V.options.showTerrainWireframe?2:0,he=V.transform,me=o.globeUseCustomAntiAliasing(V,oe,he),we=(st,$e)=>{if(Q===st)return;const Pe=[Ks[st],"PROJECTION_GLOBE_VIEW"];me&&Pe.push("CUSTOM_ANTIALIASING"),$e&&Pe.push(Ks[fe]),se=V.useProgram("globeRaster",null,Pe),Q=st},ve=V.colorModeForRenderPass(),Ee=new o.DepthMode(ae.LEQUAL,o.DepthMode.ReadWrite,V.depthRangeFor3D);fs.update(ne);const ke=o.calculateGlobeMercatorMatrix(he),Le=[o.mercatorXfromLng(he.center.lng),o.mercatorYfromLat(he.center.lat)],Ne=fe?[!1,!0]:[!1],yt=V.globeSharedBuffers,Oe=[he.width*o.exported.devicePixelRatio,he.height*o.exported.devicePixelRatio],rt=Float32Array.from(he.globeMatrix),We={useDenormalizedUpVectorScale:!0};if(Ne.forEach(st=>{const $e=V.transform,Pe=Ch($e.zoom)*U.exaggeration();Q=-1;const je=st?ae.LINES:ae.TRIANGLES;for(const ot of te){const ct=Z.getTile(ot),Ft=o.StencilMode.disabled,dr=U.prevTerrainTileForTile[ot.key],Lt=U.terrainTileForTile[ot.key];hp(dr,Lt)&&fs.newMorphing(ot.key,dr,Lt,ne,250),oe.activeTexture.set(ae.TEXTURE0),ct.texture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE);const It=fs.getMorphValuesForProxy(ot.key),Nt=It?1:0;It&&o.extend$1(We,{morphing:{srcDemTile:It.from,dstDemTile:It.to,phase:o.easeCubicInOut(It.phase)}});const xr=o.tileCornersToBounds(ot.canonical),qt=o.getLatitudinalLod(xr.getCenter().lat),Fr=o.getGridMatrix(ot.canonical,xr,qt,$e.worldSize/$e._pixelsPerMercatorPixel),Ur=o.globeNormalizeECEF(o.globeTileBounds(ot.canonical)),nn=Mh($e.projMatrix,rt,ke,Ur,o.globeToMercatorTransition($e.zoom),Le,$e.frustumCorners.TL,$e.frustumCorners.TR,$e.frustumCorners.BR,$e.frustumCorners.BL,$e.globeCenterInViewSpace,$e.globeRadius,Oe,Pe,Fr);if(we(Nt,st),U.setupElevationDraw(ct,se,We),V.prepareDrawProgram(oe,se,ot.toUnwrapped()),yt){const[Jr,Vn,to]=st?yt.getWirefameBuffers(V.context,qt):yt.getGridBuffers(qt,Pe!==0);se.draw(oe,je,Ee,Ft,ve,o.CullFaceMode.backCCW,nn,"globe_raster",Jr,Vn,to)}}}),yt){const st=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];me&&st.push("CUSTOM_ANTIALIASING"),se=V.useProgram("globeRaster",null,st);for(const $e of te){const{x:Pe,y:je,z:ot}=$e.canonical,ct=je===0,Ft=je===(1<<ot)-1,[dr,Lt,It,Nt]=yt.getPoleBuffers(ot);if(Nt&&(ct||Ft)){const xr=Z.getTile($e);oe.activeTexture.set(ae.TEXTURE0),xr.texture.bind(ae.LINEAR,ae.CLAMP_TO_EDGE);let qt=o.globePoleMatrixForTile(ot,Pe,he);const Fr=o.globeNormalizeECEF(o.globeTileBounds($e.canonical)),Ur=(nn,Jr)=>nn.draw(oe,ae.TRIANGLES,Ee,o.StencilMode.disabled,ve,o.CullFaceMode.disabled,Mh(he.projMatrix,qt,qt,Fr,0,Le,he.frustumCorners.TL,he.frustumCorners.TR,he.frustumCorners.BR,he.frustumCorners.BL,he.globeCenterInViewSpace,he.globeRadius,Oe,0),"globe_pole_raster",Jr,It,Nt);U.setupElevationDraw(xr,se,We),V.prepareDrawProgram(oe,se,$e.toUnwrapped()),ct&&Ur(se,dr),Ft&&(qt=o.scale(o.create(),qt,[1,-1,1]),Ur(se,Lt))}}}})(x,S,C,I,z);else{const V=x.context,U=V.gl;let Z,te;const ne=x.options.showTerrainWireframe?2:0,oe=(he,me)=>{if(te===he)return;const we=[Ks[he]];me&&we.push(Ks[ne]),Z=x.useProgram("terrainRaster",null,we),te=he},ae=x.colorModeForRenderPass(),se=new o.DepthMode(U.LEQUAL,o.DepthMode.ReadWrite,x.depthRangeFor3D);fs.update(z);const Q=x.transform,fe=Ch(Q.zoom)*S.exaggeration();(ne?[!1,!0]:[!1]).forEach(he=>{te=-1;const me=he?U.LINES:U.TRIANGLES,[we,ve]=he?S.getWirefameBuffer():[S.gridIndexBuffer,S.gridSegments];for(const Ee of I){const ke=C.getTile(Ee),Le=o.StencilMode.disabled,Ne=S.prevTerrainTileForTile[Ee.key],yt=S.terrainTileForTile[Ee.key];hp(Ne,yt)&&fs.newMorphing(Ee.key,Ne,yt,z,250),V.activeTexture.set(U.TEXTURE0),ke.texture.bind(U.LINEAR,U.CLAMP_TO_EDGE,U.LINEAR_MIPMAP_NEAREST);const Oe=fs.getMorphValuesForProxy(Ee.key),rt=Oe?1:0;let We;Oe&&(We={morphing:{srcDemTile:Oe.from,dstDemTile:Oe.to,phase:o.easeCubicInOut(Oe.phase)}});const st=up(Ee.projMatrix,fp(Ee.canonical,Q.renderWorldCopies)?fe/10:fe);oe(rt,he),S.setupElevationDraw(ke,Z,We),x.prepareDrawProgram(V,Z,Ee.toUnwrapped()),Z.draw(V,me,se,Le,ae,o.CullFaceMode.backCCW,st,"terrain_raster",S.gridBuffer,we,ve)}})}}(f,this,this.proxySourceCache,l,this._updateTimestamp),this.renderingToTexture=!0,f.gpuTimingDeferredRenderEnd(),l.splice(0,l.length))}renderBatch(l){if(this._drapedRenderBatches.length===0)return l+1;this.renderingToTexture=!0;const f=this.painter,y=this.painter.context,x=this.proxySourceCache,S=this.proxiedCoords[x.id],C=this._drapedRenderBatches.shift(),I=[],z=f.style.order;let V=0;for(const U of S){const Z=x.getTileByID(U.proxyTileKey),te=x.proxyCachedFBO[U.key]?x.proxyCachedFBO[U.key][l]:void 0,ne=te!==void 0?x.renderCache[te]:this.pool[V++],oe=te!==void 0;if(Z.texture=ne.tex,oe&&!ne.dirty){I.push(Z.tileID);continue}let ae;y.bindFramebuffer.set(ne.fb.framebuffer),this.renderedToTile=!1,ne.dirty&&(y.clear({color:o.Color.transparent,stencil:0}),ne.dirty=!1);for(let se=C.start;se<=C.end;++se){const Q=f.style._layers[z[se]];if(Q.isHidden(f.transform.zoom))continue;const fe=f.style._getLayerSourceCache(Q),he=fe?this.proxyToSource[U.key][fe.id]:[U];if(!he)continue;const me=he;y.viewport.set([0,0,ne.fb.width,ne.fb.height]),ae!==(fe?fe.id:null)&&(this._setupStencil(ne,he,Q,fe),ae=fe?fe.id:null),f.renderLayer(f,fe,Q,me)}this.renderedToTile?(ne.dirty=!0,I.push(Z.tileID)):oe||--V,V===5&&(V=0,this.renderToBackBuffer(I))}return this.renderToBackBuffer(I),this.renderingToTexture=!1,y.bindFramebuffer.set(null),y.viewport.set([0,0,f.width,f.height]),C.end+1}postRender(){}renderCacheEfficiency(l){const f=l.order.length;if(f===0)return{efficiency:100};let y,x=0,S=0,C=!1;for(let I=0;I<f;++I){const z=l._layers[l.order[I]];this._style.isLayerDraped(z)?(C&&++x,++S):C||(C=!0,y=z.id)}return S===0?{efficiency:100}:{efficiency:100*(1-x/S),firstUndrapedLayer:y}}getMinElevationBelowMSL(){let l=0;return this._visibleDemTiles.filter(f=>f.dem).forEach(f=>{l=Math.min(l,f.dem.tree.minimums[0])}),l===0?l:(l-30)*this._exaggeration}raycast(l,f,y){if(!this._visibleDemTiles)return null;const x=this._visibleDemTiles.filter(S=>S.dem).map(S=>{const C=S.tileID,I=1<<C.overscaledZ,{x:z,y:V}=C.canonical,U=z/I,Z=(z+1)/I,te=V/I,ne=(V+1)/I;return{minx:U,miny:te,maxx:Z,maxy:ne,t:S.dem.tree.raycastRoot(U,te,Z,ne,l,f,y),tile:S}});x.sort((S,C)=>(S.t!==null?S.t:Number.MAX_VALUE)-(C.t!==null?C.t:Number.MAX_VALUE));for(const S of x){if(S.t==null)return null;const C=S.tile.dem.tree.raycast(S.minx,S.miny,S.maxx,S.maxy,l,f,y);if(C!=null)return C}return null}_createFBO(){const l=this.painter.context,f=l.gl,y=this.drapeBufferSize;l.activeTexture.set(f.TEXTURE0);const x=new o.Texture(l,{width:y[0],height:y[1],data:null},f.RGBA);x.bind(f.LINEAR,f.CLAMP_TO_EDGE);const S=l.createFramebuffer(y[0],y[1],!1);return S.colorAttachment.set(x.texture),S.depthAttachment=new Ra(l,S.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=l.createRenderbuffer(l.gl.DEPTH_STENCIL,y[0],y[1]),this._stencilRef=0,S.depthAttachment.set(this._sharedDepthStencil),l.clear({stencil:0})):S.depthAttachment.set(this._sharedDepthStencil),l.extTextureFilterAnisotropic&&!l.extTextureFilterAnisotropicForceOff&&f.texParameterf(f.TEXTURE_2D,l.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,l.extTextureFilterAnisotropicMax),{fb:S,tex:x,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._style.light&&this._style.light.hasTransition())return!0;for(const l in this._style._sourceCaches)if(this._style._sourceCaches[l].hasTransition())return!0;return this._style.order.some(l=>{const f=this._style._layers[l],y=f.isHidden(this.painter.transform.zoom);return f.type==="custom"?!y&&f.shouldRedrape():!y&&f.hasTransition()})}_clearLineLayersFromRenderCache(){let l=!1;for(const y of this._style._getSources())if(y instanceof X){l=!0;break}if(!l)return;const f={};for(let y=0;y<this._style.order.length;++y){const x=this._style._layers[this._style.order[y]],S=this._style._getLayerSourceCache(x);if(S&&!f[S.id]&&!x.isHidden(this.painter.transform.zoom)&&x.type==="line"&&x.widthExpression()instanceof o.ZoomDependentExpression){f[S.id]=!0;for(const C of this.proxyCoords){const I=this.proxyToSource[C.key][S.id];if(I)for(const z of I)this._clearRenderCacheForTile(S.id,z)}}}}_clearRasterLayersFromRenderCache(){let l=!1;for(const y in this._style._sourceCaches)if(this._style._sourceCaches[y]._source instanceof J){l=!0;break}if(!l)return;const f={};for(let y=0;y<this._style.order.length;++y){const x=this._style._layers[this._style.order[y]],S=this._style._getLayerSourceCache(x);if(!S||f[S.id]||x.isHidden(this.painter.transform.zoom)||x.type!=="raster")continue;const C=x.paint.get("raster-fade-duration");for(const I of this.proxyCoords){const z=this.proxyToSource[I.key][S.id];if(z)for(const V of z){const U=su(S.getTile(V),S.findLoadedParent(V,0),S,this.painter.transform,C);(U.opacity!==1||U.mix!==0)&&this._clearRenderCacheForTile(S.id,V)}}}}_setupDrapedRenderBatches(){const l=this._style.order,f=l.length;if(f===0)return;const y=[];let x,S=0,C=this._style._layers[l[S]];for(;!this._style.isLayerDraped(C)&&C.isHidden(this.painter.transform.zoom)&&++S<f;)C=this._style._layers[l[S]];for(;S<f;++S){const I=this._style._layers[l[S]];I.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(I)?x===void 0&&(x=S):x!==void 0&&(y.push({start:x,end:S-1}),x=void 0))}x!==void 0&&y.push({start:x,end:S-1}),this._drapedRenderBatches=y}_setupRenderCache(l){const f=this.proxySourceCache;if(this._shouldDisableRenderCache()||this._invalidateRenderCache){if(this._invalidateRenderCache=!1,f.renderCache.length>f.renderCachePool.length){const C=Object.values(f.proxyCachedFBO);f.proxyCachedFBO={};for(let I=0;I<C.length;++I){const z=Object.values(C[I]);f.renderCachePool.push(...z)}}return}this._clearRasterLayersFromRenderCache();const y=this.proxyCoords,x=this._tilesDirty;for(let C=y.length-1;C>=0;C--){const I=y[C];if(f.getTileByID(I.key),f.proxyCachedFBO[I.key]!==void 0){const z=l[I.key],V=this.proxyToSource[I.key];let U=0;for(const Z in V){const te=V[Z],ne=z[Z];if(!ne||ne.length!==te.length||te.some((oe,ae)=>oe!==ne[ae]||x[Z]&&x[Z].hasOwnProperty(oe.key))){U=-1;break}++U}for(const Z in f.proxyCachedFBO[I.key])f.renderCache[f.proxyCachedFBO[I.key][Z]].dirty=U<0||U!==Object.values(z).length}}const S=[...this._drapedRenderBatches];S.sort((C,I)=>I.end-I.start-(C.end-C.start));for(const C of S)for(const I of y){if(f.proxyCachedFBO[I.key])continue;let z=f.renderCachePool.pop();z===void 0&&f.renderCache.length<50&&(z=f.renderCache.length,f.renderCache.push(this._createFBO())),z!==void 0&&(f.proxyCachedFBO[I.key]={},f.proxyCachedFBO[I.key][C.start]=z,f.renderCache[z].dirty=!0)}this._tilesDirty={}}_setupStencil(l,f,y,x){if(!x||!this._sourceTilesOverlap[x.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const S=this.painter.context,C=S.gl;if(f.length<=1)return void(this._overlapStencilType=!1);let I;if(y.isTileClipped())I=f.length,this._overlapStencilMode.test={func:C.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(f[0].overscaledZ>f[f.length-1].overscaledZ))return void(this._overlapStencilType=!1);I=1,this._overlapStencilMode.test={func:C.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+I>255&&(S.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=I,this._overlapStencilMode.ref=this._stencilRef,y.isTileClipped()&&this._renderTileClippingMasks(f,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(l){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[l.key]),this._overlapStencilMode):o.StencilMode.disabled}_renderTileClippingMasks(l,f){const y=this.painter,x=this.painter.context,S=x.gl;y._tileClippingMaskIDs={},x.setColorMode(o.ColorMode.disabled),x.setDepthMode(o.DepthMode.disabled);const C=y.useProgram("clippingMask");for(const I of l){const z=y._tileClippingMaskIDs[I.key]=--f;C.draw(x,S.TRIANGLES,o.DepthMode.disabled,new o.StencilMode({func:S.ALWAYS,mask:0},z,255,S.KEEP,S.KEEP,S.REPLACE),o.ColorMode.disabled,o.CullFaceMode.disabled,Pr(I.projMatrix),"$clipping",y.tileExtentBuffer,y.quadTriangleIndexBuffer,y.tileExtentSegments)}}pointCoordinate(l){const f=this.painter.transform;if(l.x<0||l.x>f.width||l.y<0||l.y>f.height)return null;const y=[l.x,l.y,1,1];o.transformMat4$1(y,y,f.pixelMatrixInverse),o.scale$1(y,y,1/y[3]),y[0]/=f.worldSize,y[1]/=f.worldSize;const x=f._camera.position,S=o.mercatorZfromAltitude(1,f.center.lat),C=[x[0],x[1],x[2]/S,0],I=o.subtract([],y.slice(0,3),C);o.normalize(I,I);const z=this.raycast(C,I,this._exaggeration);return z!==null&&z?(o.scaleAndAdd(C,C,I,z),C[3]=C[2],C[2]*=S,C):null}drawDepth(){const l=this.painter,f=l.context,y=this.proxySourceCache,x=Math.ceil(l.width),S=Math.ceil(l.height);if(!this._depthFBO||this._depthFBO.width===x&&this._depthFBO.height===S||(this._depthFBO.destroy(),this._depthFBO=void 0,this._depthTexture=void 0),!this._depthFBO){const C=f.gl,I=f.createFramebuffer(x,S,!0);f.activeTexture.set(C.TEXTURE0);const z=new o.Texture(f,{width:x,height:S,data:null},C.RGBA);z.bind(C.NEAREST,C.CLAMP_TO_EDGE),I.colorAttachment.set(z.texture);const V=f.createRenderbuffer(f.gl.DEPTH_COMPONENT16,x,S);I.depthAttachment.set(V),this._depthFBO=I,this._depthTexture=z}f.bindFramebuffer.set(this._depthFBO.framebuffer),f.viewport.set([0,0,x,S]),function(C,I,z,V){if(C.transform.projection.name==="globe")return;const U=C.context,Z=U.gl;U.clear({depth:1});const te=C.useProgram("terrainDepth"),ne=new o.DepthMode(Z.LESS,o.DepthMode.ReadWrite,C.depthRangeFor3D);for(const oe of V){const ae=z.getTile(oe),se=up(oe.projMatrix,0);I.setupElevationDraw(ae,te),te.draw(U,Z.TRIANGLES,ne,o.StencilMode.disabled,o.ColorMode.unblended,o.CullFaceMode.backCCW,se,"terrain_depth",I.gridBuffer,I.gridIndexBuffer,I.gridNoSkirtSegments)}}(l,this,y,this.proxyCoords)}_setupProxiedCoordsForOrtho(l,f,y){if(l.getSource()instanceof Se)return this._setupProxiedCoordsForImageSource(l,f,y);this._findCoveringTileCache[l.id]=this._findCoveringTileCache[l.id]||{};const x=this.proxiedCoords[l.id]=[],S=this.proxyCoords;for(let I=0;I<S.length;I++){const z=S[I],V=this._findTileCoveringTileID(z,l);if(V){const U=this._createProxiedId(z,V,y[z.key]&&y[z.key][l.id]);x.push(U),this.proxyToSource[z.key][l.id]=[U]}}let C=!1;for(let I=0;I<f.length;I++){const z=l.getTile(f[I]);if(!z||!z.hasData())continue;const V=this._findTileCoveringTileID(z.tileID,this.proxySourceCache);if(V&&V.tileID.canonical.z!==z.tileID.canonical.z){const U=this.proxyToSource[V.tileID.key][l.id],Z=this._createProxiedId(V.tileID,z,y[V.tileID.key]&&y[V.tileID.key][l.id]);U?U.splice(U.length-1,0,Z):this.proxyToSource[V.tileID.key][l.id]=[Z],x.push(Z),C=!0}}this._sourceTilesOverlap[l.id]=C}_setupProxiedCoordsForImageSource(l,f,y){if(!l.getSource().loaded())return;const x=this.proxiedCoords[l.id]=[],S=this.proxyCoords,C=l.getSource(),I=new o.pointGeometry(C.tileID.x,C.tileID.y)._div(1<<C.tileID.z),z=C.coordinates.map(o.MercatorCoordinate.fromLngLat).reduce((U,Z)=>(U.min.x=Math.min(U.min.x,Z.x-I.x),U.min.y=Math.min(U.min.y,Z.y-I.y),U.max.x=Math.max(U.max.x,Z.x-I.x),U.max.y=Math.max(U.max.y,Z.y-I.y),U),{min:new o.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE),max:new o.pointGeometry(-Number.MAX_VALUE,-Number.MAX_VALUE)}),V=(U,Z)=>{const te=U.wrap+U.canonical.x/(1<<U.canonical.z),ne=U.canonical.y/(1<<U.canonical.z),oe=o.EXTENT/(1<<U.canonical.z),ae=Z.wrap+Z.canonical.x/(1<<Z.canonical.z),se=Z.canonical.y/(1<<Z.canonical.z);return te+oe<ae+z.min.x||te>ae+z.max.x||ne+oe<se+z.min.y||ne>se+z.max.y};for(let U=0;U<S.length;U++){const Z=S[U];for(let te=0;te<f.length;te++){const ne=l.getTile(f[te]);if(!ne||!ne.hasData()||V(Z,ne.tileID))continue;const oe=this._createProxiedId(Z,ne,y[Z.key]&&y[Z.key][l.id]),ae=this.proxyToSource[Z.key][l.id];ae?ae.push(oe):this.proxyToSource[Z.key][l.id]=[oe],x.push(oe)}}}_createProxiedId(l,f,y){let x=this.orthoMatrix;if(y){const S=y.find(C=>C.key===f.tileID.key);if(S)return S}if(f.tileID.key!==l.key){const S=l.canonical.z-f.tileID.canonical.z;let C,I,z;x=o.create();const V=f.tileID.wrap-l.wrap<<l.overscaledZ;S>0?(C=o.EXTENT>>S,I=C*((f.tileID.canonical.x<<S)-l.canonical.x+V),z=C*((f.tileID.canonical.y<<S)-l.canonical.y)):(C=o.EXTENT<<-S,I=o.EXTENT*(f.tileID.canonical.x-(l.canonical.x+V<<-S)),z=o.EXTENT*(f.tileID.canonical.y-(l.canonical.y<<-S))),o.ortho(x,0,C,0,C,0,1),o.translate(x,x,[I,z,0])}return new dp(f.tileID,l.key,x)}_findTileCoveringTileID(l,f){let y=f.getTile(l);if(y&&y.hasData())return y;const x=this._findCoveringTileCache[f.id],S=x[l.key];if(y=S?f.getTileByID(S):null,y&&y.hasData()||S===null)return y;let C=y?y.tileID:l,I=C.overscaledZ;const z=f.getSource().minzoom,V=[];if(!S){const Z=f.getSource().maxzoom;if(l.canonical.z>=Z){const te=l.canonical.z-Z;f.getSource().reparseOverscaled?(I=Math.max(l.canonical.z+2,f.transform.tileZoom),C=new o.OverscaledTileID(I,l.wrap,Z,l.canonical.x>>te,l.canonical.y>>te)):te!==0&&(I=Z,C=new o.OverscaledTileID(I,l.wrap,Z,l.canonical.x>>te,l.canonical.y>>te))}C.key!==l.key&&(V.push(C.key),y=f.getTile(C))}const U=Z=>{V.forEach(te=>{x[te]=Z}),V.length=0};for(I-=1;I>=z&&(!y||!y.hasData());I--){y&&U(y.tileID.key);const Z=C.calculateScaledKey(I);if(y=f.getTileByID(Z),y&&y.hasData())break;const te=x[Z];if(te===null)break;te===void 0?V.push(Z):y=f.getTileByID(te)}return U(y?y.tileID.key:null),y&&y.hasData()?y:null}findDEMTileFor(l){return this.enabled?this._findTileCoveringTileID(l,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(l,f){let y=this._tilesDirty[l];y||(y=this._tilesDirty[l]={}),y[f.key]=!0}getWirefameBuffer(){if(!this.wireframeSegments){const l=function(f){let y=0;const x=new o.StructArrayLayout2ui4,S=131;for(let C=1;C<129;C++){for(let I=1;I<129;I++)y=C*S+I,x.emplaceBack(y,y+1),x.emplaceBack(y,y+S),x.emplaceBack(y+1,y+S),C===128&&x.emplaceBack(y+S,y+S+1);x.emplaceBack(y+1,y+1+S)}return x}();this.wireframeIndexBuffer=this.painter.context.createIndexBuffer(l),this.wireframeSegments=o.SegmentVector.simpleSegment(0,0,this.gridBuffer.length,l.length)}return[this.wireframeIndexBuffer,this.wireframeSegments]}}class mp{static cacheKey(l,f,y,x){let S=`${f}${x?x.cacheKey:""}`;for(const C of y)l.usedDefines.includes(C)&&(S+=`/${C}`);return S}constructor(l,f,y,x,S,C){const I=l.gl;this.program=I.createProgram();const z=function(Q){const fe=[];for(let he=0;he<Q.length;he++){if(Q[he]===null)continue;const me=Q[he].split(" ");fe.push(me.pop())}return fe}(y.staticAttributes),V=x?x.getBinderAttributes():[],U=z.concat(V);let Z=x?x.defines():[];Z=Z.concat(C.map(Q=>`#define ${Q}`));const te=l.isWebGL2?`#version 300 es
`:"",ne=te+Z.concat(l.extStandardDerivatives&&te.length===0?`#extension GL_OES_standard_derivatives : enable
`.concat(Eh):Eh,Eh,Sh,Hy.fragmentSource,sp.fragmentSource,y.fragmentSource).join(`
`),oe=te+Z.concat(`
#ifdef GL_ES
precision highp float;
#else

#if !defined(lowp)
#define lowp
#endif

#if !defined(mediump)
#define mediump
#endif

#if !defined(highp)
#define highp
#endif

#endif`,Sh,Hy.vertexSource,sp.vertexSource,ap.vertexSource,y.vertexSource).join(`
`),ae=I.createShader(I.FRAGMENT_SHADER);if(I.isContextLost())return void(this.failedToCreate=!0);I.shaderSource(ae,ne),I.compileShader(ae),I.attachShader(this.program,ae);const se=I.createShader(I.VERTEX_SHADER);if(I.isContextLost())this.failedToCreate=!0;else{I.shaderSource(se,oe),I.compileShader(se),I.attachShader(this.program,se),this.attributes={},this.numAttributes=U.length;for(let Q=0;Q<this.numAttributes;Q++)U[Q]&&(I.bindAttribLocation(this.program,Q,U[Q]),this.attributes[U[Q]]=Q);I.linkProgram(this.program),I.deleteShader(se),I.deleteShader(ae),this.fixedUniforms=S(l),this.binderUniforms=x?x.getUniforms(l):[],C.includes("TERRAIN")&&(this.terrainUniforms=(Q=>({u_dem:new o.Uniform1i(Q),u_dem_prev:new o.Uniform1i(Q),u_dem_unpack:new o.Uniform4f(Q),u_dem_tl:new o.Uniform2f(Q),u_dem_scale:new o.Uniform1f(Q),u_dem_tl_prev:new o.Uniform2f(Q),u_dem_scale_prev:new o.Uniform1f(Q),u_dem_size:new o.Uniform1f(Q),u_dem_lerp:new o.Uniform1f(Q),u_exaggeration:new o.Uniform1f(Q),u_depth:new o.Uniform1i(Q),u_depth_size_inv:new o.Uniform2f(Q),u_meter_to_dem:new o.Uniform1f(Q),u_label_plane_matrix_inv:new o.UniformMatrix4f(Q)}))(l)),C.includes("GLOBE")&&(this.globeUniforms=(Q=>({u_tile_tl_up:new o.Uniform3f(Q),u_tile_tr_up:new o.Uniform3f(Q),u_tile_br_up:new o.Uniform3f(Q),u_tile_bl_up:new o.Uniform3f(Q),u_tile_up_scale:new o.Uniform1f(Q)}))(l)),C.includes("FOG")&&(this.fogUniforms=(Q=>({u_fog_matrix:new o.UniformMatrix4f(Q),u_fog_range:new o.Uniform2f(Q),u_fog_color:new o.Uniform4f(Q),u_fog_horizon_blend:new o.Uniform1f(Q),u_fog_temporal_offset:new o.Uniform1f(Q),u_frustum_tl:new o.Uniform3f(Q),u_frustum_tr:new o.Uniform3f(Q),u_frustum_br:new o.Uniform3f(Q),u_frustum_bl:new o.Uniform3f(Q),u_globe_pos:new o.Uniform3f(Q),u_globe_radius:new o.Uniform1f(Q),u_globe_transition:new o.Uniform1f(Q),u_is_globe:new o.Uniform1i(Q),u_viewport:new o.Uniform2f(Q)}))(l))}}setTerrainUniformValues(l,f){if(!this.terrainUniforms)return;const y=this.terrainUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const x in f)y[x]&&y[x].set(this.program,x,f[x])}}setGlobeUniformValues(l,f){if(!this.globeUniforms)return;const y=this.globeUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const x in f)y[x]&&y[x].set(this.program,x,f[x])}}setFogUniformValues(l,f){if(!this.fogUniforms)return;const y=this.fogUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const x in f)y[x].set(this.program,x,f[x])}}draw(l,f,y,x,S,C,I,z,V,U,Z,te,ne,oe,ae){const se=l.gl;if(this.failedToCreate)return;l.program.set(this.program),l.setDepthMode(y),l.setStencilMode(x),l.setColorMode(S),l.setCullFace(C);for(const fe of Object.keys(this.fixedUniforms))this.fixedUniforms[fe].set(this.program,fe,I[fe]);oe&&oe.setUniforms(this.program,l,this.binderUniforms,te,{zoom:ne});const Q={[se.LINES]:2,[se.TRIANGLES]:3,[se.LINE_STRIP]:1}[f];for(const fe of Z.get()){const he=fe.vaos||(fe.vaos={});(he[z]||(he[z]=new iu)).bind(l,this,V,oe?oe.getPaintVertexBuffers():[],U,fe.vertexOffset,ae||[]),se.drawElements(f,fe.primitiveLength*Q,se.UNSIGNED_SHORT,fe.primitiveOffset*Q*2)}}}function Ky(m,l){const f=Math.pow(2,l.tileID.overscaledZ),y=l.tileSize*Math.pow(2,m.transform.tileZoom)/f,x=y*(l.tileID.canonical.x+l.tileID.wrap*f),S=y*l.tileID.canonical.y;return{u_image:0,u_texsize:l.imageAtlasTexture.size,u_tile_units_to_pixels:1/Zt(l,1,m.transform.tileZoom),u_pixel_coord_upper:[x>>16,S>>16],u_pixel_coord_lower:[65535&x,65535&S]}}const sb=o.create(),Ph=(m,l,f,y,x,S,C,I,z,V,U)=>{const Z=l.style.light,te=Z.properties.get("position"),ne=[te.x,te.y,te.z],oe=o.create$1();Z.properties.get("anchor")==="viewport"&&(o.fromRotation(oe,-l.transform.angle),o.transformMat3(ne,ne,oe));const ae=Z.properties.get("color"),se=l.transform,Q={u_matrix:m,u_lightpos:ne,u_lightintensity:Z.properties.get("intensity"),u_lightcolor:[ae.r,ae.g,ae.b],u_vertical_gradient:+f,u_opacity:y,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:sb,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_ao:x,u_edge_radius:S};return se.projection.name==="globe"&&(Q.u_tile_id=[C.canonical.x,C.canonical.y,1<<C.canonical.z],Q.u_zoom_transition=z,Q.u_inv_rot_matrix=U,Q.u_merc_center=V,Q.u_up_dir=se.projection.upVector(new o.CanonicalTileID(0,0,0),V[0]*o.EXTENT,V[1]*o.EXTENT),Q.u_height_lift=I),Q},gp=(m,l,f,y,x,S,C,I,z,V,U,Z)=>{const te=Ph(m,l,f,y,x,S,C,z,V,U,Z),ne={u_height_factor:-Math.pow(2,C.overscaledZ)/I.tileSize/8};return o.extend(te,Ky(l,I),ne)},Ih=m=>({u_matrix:m}),kh=(m,l,f)=>o.extend(Ih(m),Ky(l,f)),Yy=(m,l)=>({u_matrix:m,u_world:l}),Jy=(m,l,f,y)=>o.extend(kh(m,l,f),{u_world:y}),lb=o.create(),lu=(m,l,f,y,x,S)=>{const C=m.transform,I=C.projection.name==="globe";let z;if(S.paint.get("circle-pitch-alignment")==="map")if(I){const U=o.globePixelsToTileUnits(C.zoom,l.canonical)*C._pixelsPerMercatorPixel;z=Float32Array.from([U,0,0,U])}else z=C.calculatePixelsToTileUnitsMatrix(f);else z=new Float32Array([C.pixelsToGLUnits[0],0,0,C.pixelsToGLUnits[1]]);const V={u_camera_to_center_distance:C.cameraToCenterDistance,u_matrix:m.translatePosMatrix(l.projMatrix,f,S.paint.get("circle-translate"),S.paint.get("circle-translate-anchor")),u_device_pixel_ratio:o.exported.devicePixelRatio,u_extrude_scale:z,u_inv_rot_matrix:lb,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(I){V.u_inv_rot_matrix=y,V.u_merc_center=x,V.u_tile_id=[l.canonical.x,l.canonical.y,1<<l.canonical.z],V.u_zoom_transition=o.globeToMercatorTransition(C.zoom);const U=x[0]*o.EXTENT,Z=x[1]*o.EXTENT;V.u_up_dir=C.projection.upVector(new o.CanonicalTileID(0,0,0),U,Z)}return V},cu=m=>{const l=[];return m.paint.get("circle-pitch-alignment")==="map"&&l.push("PITCH_WITH_MAP"),m.paint.get("circle-pitch-scale")==="map"&&l.push("SCALE_WITH_MAP"),l},Qy=(m,l,f,y)=>{const x=o.EXTENT/f.tileSize;return{u_matrix:m,u_camera_to_center_distance:l.getCameraToCenterDistance(y),u_extrude_scale:[l.pixelsToGLUnits[0]/x,l.pixelsToGLUnits[1]/x]}},uu=(m,l,f=1)=>({u_matrix:m,u_color:l,u_overlay:0,u_overlay_scale:f}),yp=o.create(),ua=(m,l,f,y,x,S,C)=>{const I=m.transform,z=I.projection.name==="globe",V=z?o.globePixelsToTileUnits(I.zoom,l.canonical)*I._pixelsPerMercatorPixel:Zt(f,1,S),U={u_matrix:l.projMatrix,u_extrude_scale:V,u_intensity:C,u_inv_rot_matrix:yp,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(z){U.u_inv_rot_matrix=y,U.u_merc_center=x,U.u_tile_id=[l.canonical.x,l.canonical.y,1<<l.canonical.z],U.u_zoom_transition=o.globeToMercatorTransition(I.zoom);const Z=x[0]*o.EXTENT,te=x[1]*o.EXTENT;U.u_up_dir=I.projection.upVector(new o.CanonicalTileID(0,0,0),Z,te)}return U},_p=(m,l,f,y,x,S,C)=>{const I=m.transform,z=I.calculatePixelsToTileUnitsMatrix(l);return{u_matrix:vp(m,l,f,y),u_pixels_to_tile_units:z,u_device_pixel_ratio:S,u_units_to_pixels:[1/I.pixelsToGLUnits[0],1/I.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:x,u_texsize:Dh(f)?l.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:Oh(l,m.transform),u_alpha_discard_threshold:0,u_trim_offset:C}},e_=(m,l,f,y,x)=>{const S=m.transform;return{u_matrix:vp(m,l,f,y),u_texsize:l.imageAtlasTexture.size,u_pixels_to_tile_units:S.calculatePixelsToTileUnitsMatrix(l),u_device_pixel_ratio:x,u_image:0,u_tile_units_to_pixels:Oh(l,S),u_units_to_pixels:[1/S.pixelsToGLUnits[0],1/S.pixelsToGLUnits[1]],u_alpha_discard_threshold:0}};function Oh(m,l){return 1/Zt(m,1,l.tileZoom)}function vp(m,l,f,y){return m.translatePosMatrix(y||l.tileID.projMatrix,l,f.paint.get("line-translate"),f.paint.get("line-translate-anchor"))}function Dh(m){const l=m.paint.get("line-dasharray").value;return l.value||l.kind!=="constant"}const cb=(m,l,f,y,x,S)=>{return{u_matrix:m,u_tl_parent:l,u_scale_parent:f,u_fade_t:y.mix,u_opacity:y.opacity*x.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:x.paint.get("raster-brightness-min"),u_brightness_high:x.paint.get("raster-brightness-max"),u_saturation_factor:(I=x.paint.get("raster-saturation"),I>0?1-1/(1.001-I):-I),u_contrast_factor:(C=x.paint.get("raster-contrast"),C>0?1/(1-C):1+C),u_spin_weights:xp(x.paint.get("raster-hue-rotate")),u_perspective_transform:S};var C,I};function xp(m){m*=Math.PI/180;const l=Math.sin(m),f=Math.cos(m);return[(2*f+1)/3,(-Math.sqrt(3)*l-f+1)/3,(Math.sqrt(3)*l-f+1)/3]}const t_=o.create(),hu=(m,l,f,y,x,S,C,I,z,V,U,Z,te,ne,oe,ae)=>{const se=x.transform,Q={u_is_size_zoom_constant:+(m==="constant"||m==="source"),u_is_size_feature_constant:+(m==="constant"||m==="camera"),u_size_t:l?l.uSizeT:0,u_size:l?l.uSize:0,u_camera_to_center_distance:se.cameraToCenterDistance,u_rotate_symbol:+f,u_aspect_ratio:se.width/se.height,u_fade_change:x.options.fadeDuration?x.symbolFadeChange:1,u_matrix:S,u_label_plane_matrix:C,u_coord_matrix:I,u_is_text:+z,u_pitch_with_map:+y,u_texsize:V,u_texture:0,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:t_,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:t_,u_up_vector:[0,-1,0]};return ae.name==="globe"&&(Q.u_tile_id=[U.canonical.x,U.canonical.y,1<<U.canonical.z],Q.u_zoom_transition=Z,Q.u_inv_rot_matrix=ne,Q.u_merc_center=te,Q.u_camera_forward=se._camera.forward(),Q.u_ecef_origin=o.globeECEFOrigin(se.globeMatrix,U.toUnwrapped()),Q.u_tile_matrix=Float32Array.from(se.globeMatrix),Q.u_up_vector=oe),Q},r_=(m,l,f,y,x,S,C,I,z,V,U,Z,te,ne,oe,ae,se)=>o.extend(hu(m,l,f,y,x,S,C,I,z,V,Z,te,ne,oe,ae,se),{u_gamma_scale:y?x.transform.cameraToCenterDistance*Math.cos(x.terrain?0:x.transform._pitch):1,u_device_pixel_ratio:o.exported.devicePixelRatio,u_is_halo:+U}),bp=(m,l,f,y,x,S,C,I,z,V,U,Z,te,ne,oe,ae)=>o.extend(r_(m,l,f,y,x,S,C,I,!0,z,!0,U,Z,te,ne,oe,ae),{u_texsize_icon:V,u_texture_icon:1}),ub=(m,l,f)=>({u_matrix:m,u_opacity:l,u_color:f}),wp=(m,l,f,y,x)=>o.extend(function(S,C,I){const z=C.imageManager.getPattern(S.toString()),{width:V,height:U}=C.imageManager.getPixelSize(),Z=Math.pow(2,I.tileID.overscaledZ),te=I.tileSize*Math.pow(2,C.transform.tileZoom)/Z,ne=te*(I.tileID.canonical.x+I.tileID.wrap*Z),oe=te*I.tileID.canonical.y;return{u_image:0,u_pattern_tl:z.tl,u_pattern_br:z.br,u_texsize:[V,U],u_pattern_size:z.displaySize,u_tile_units_to_pixels:1/Zt(I,1,C.transform.tileZoom),u_pixel_coord_upper:[ne>>16,oe>>16],u_pixel_coord_lower:[65535&ne,65535&oe]}}(y,f,x),{u_matrix:m,u_opacity:l}),hb={fillExtrusion:m=>({u_matrix:new o.UniformMatrix4f(m),u_lightpos:new o.Uniform3f(m),u_lightintensity:new o.Uniform1f(m),u_lightcolor:new o.Uniform3f(m),u_vertical_gradient:new o.Uniform1f(m),u_opacity:new o.Uniform1f(m),u_edge_radius:new o.Uniform1f(m),u_ao:new o.Uniform2f(m),u_tile_id:new o.Uniform3f(m),u_zoom_transition:new o.Uniform1f(m),u_inv_rot_matrix:new o.UniformMatrix4f(m),u_merc_center:new o.Uniform2f(m),u_up_dir:new o.Uniform3f(m),u_height_lift:new o.Uniform1f(m)}),fillExtrusionPattern:m=>({u_matrix:new o.UniformMatrix4f(m),u_lightpos:new o.Uniform3f(m),u_lightintensity:new o.Uniform1f(m),u_lightcolor:new o.Uniform3f(m),u_vertical_gradient:new o.Uniform1f(m),u_height_factor:new o.Uniform1f(m),u_edge_radius:new o.Uniform1f(m),u_ao:new o.Uniform2f(m),u_tile_id:new o.Uniform3f(m),u_zoom_transition:new o.Uniform1f(m),u_inv_rot_matrix:new o.UniformMatrix4f(m),u_merc_center:new o.Uniform2f(m),u_up_dir:new o.Uniform3f(m),u_height_lift:new o.Uniform1f(m),u_image:new o.Uniform1i(m),u_texsize:new o.Uniform2f(m),u_pixel_coord_upper:new o.Uniform2f(m),u_pixel_coord_lower:new o.Uniform2f(m),u_tile_units_to_pixels:new o.Uniform1f(m),u_opacity:new o.Uniform1f(m)}),fill:m=>({u_matrix:new o.UniformMatrix4f(m)}),fillPattern:m=>({u_matrix:new o.UniformMatrix4f(m),u_image:new o.Uniform1i(m),u_texsize:new o.Uniform2f(m),u_pixel_coord_upper:new o.Uniform2f(m),u_pixel_coord_lower:new o.Uniform2f(m),u_tile_units_to_pixels:new o.Uniform1f(m)}),fillOutline:m=>({u_matrix:new o.UniformMatrix4f(m),u_world:new o.Uniform2f(m)}),fillOutlinePattern:m=>({u_matrix:new o.UniformMatrix4f(m),u_world:new o.Uniform2f(m),u_image:new o.Uniform1i(m),u_texsize:new o.Uniform2f(m),u_pixel_coord_upper:new o.Uniform2f(m),u_pixel_coord_lower:new o.Uniform2f(m),u_tile_units_to_pixels:new o.Uniform1f(m)}),circle:m=>({u_camera_to_center_distance:new o.Uniform1f(m),u_extrude_scale:new o.UniformMatrix2f(m),u_device_pixel_ratio:new o.Uniform1f(m),u_matrix:new o.UniformMatrix4f(m),u_inv_rot_matrix:new o.UniformMatrix4f(m),u_merc_center:new o.Uniform2f(m),u_tile_id:new o.Uniform3f(m),u_zoom_transition:new o.Uniform1f(m),u_up_dir:new o.Uniform3f(m)}),collisionBox:m=>({u_matrix:new o.UniformMatrix4f(m),u_camera_to_center_distance:new o.Uniform1f(m),u_extrude_scale:new o.Uniform2f(m)}),collisionCircle:m=>({u_matrix:new o.UniformMatrix4f(m),u_inv_matrix:new o.UniformMatrix4f(m),u_camera_to_center_distance:new o.Uniform1f(m),u_viewport_size:new o.Uniform2f(m)}),debug:m=>({u_color:new o.UniformColor(m),u_matrix:new o.UniformMatrix4f(m),u_overlay:new o.Uniform1i(m),u_overlay_scale:new o.Uniform1f(m)}),clippingMask:m=>({u_matrix:new o.UniformMatrix4f(m)}),heatmap:m=>({u_extrude_scale:new o.Uniform1f(m),u_intensity:new o.Uniform1f(m),u_matrix:new o.UniformMatrix4f(m),u_inv_rot_matrix:new o.UniformMatrix4f(m),u_merc_center:new o.Uniform2f(m),u_tile_id:new o.Uniform3f(m),u_zoom_transition:new o.Uniform1f(m),u_up_dir:new o.Uniform3f(m)}),heatmapTexture:m=>({u_image:new o.Uniform1i(m),u_color_ramp:new o.Uniform1i(m),u_opacity:new o.Uniform1f(m)}),hillshade:m=>({u_matrix:new o.UniformMatrix4f(m),u_image:new o.Uniform1i(m),u_latrange:new o.Uniform2f(m),u_light:new o.Uniform2f(m),u_shadow:new o.UniformColor(m),u_highlight:new o.UniformColor(m),u_accent:new o.UniformColor(m)}),hillshadePrepare:m=>({u_matrix:new o.UniformMatrix4f(m),u_image:new o.Uniform1i(m),u_dimension:new o.Uniform2f(m),u_zoom:new o.Uniform1f(m),u_unpack:new o.Uniform4f(m)}),line:m=>({u_matrix:new o.UniformMatrix4f(m),u_pixels_to_tile_units:new o.UniformMatrix2f(m),u_device_pixel_ratio:new o.Uniform1f(m),u_units_to_pixels:new o.Uniform2f(m),u_dash_image:new o.Uniform1i(m),u_gradient_image:new o.Uniform1i(m),u_image_height:new o.Uniform1f(m),u_texsize:new o.Uniform2f(m),u_tile_units_to_pixels:new o.Uniform1f(m),u_alpha_discard_threshold:new o.Uniform1f(m),u_trim_offset:new o.Uniform2f(m)}),linePattern:m=>({u_matrix:new o.UniformMatrix4f(m),u_texsize:new o.Uniform2f(m),u_pixels_to_tile_units:new o.UniformMatrix2f(m),u_device_pixel_ratio:new o.Uniform1f(m),u_image:new o.Uniform1i(m),u_units_to_pixels:new o.Uniform2f(m),u_tile_units_to_pixels:new o.Uniform1f(m),u_alpha_discard_threshold:new o.Uniform1f(m)}),raster:m=>({u_matrix:new o.UniformMatrix4f(m),u_tl_parent:new o.Uniform2f(m),u_scale_parent:new o.Uniform1f(m),u_fade_t:new o.Uniform1f(m),u_opacity:new o.Uniform1f(m),u_image0:new o.Uniform1i(m),u_image1:new o.Uniform1i(m),u_brightness_low:new o.Uniform1f(m),u_brightness_high:new o.Uniform1f(m),u_saturation_factor:new o.Uniform1f(m),u_contrast_factor:new o.Uniform1f(m),u_spin_weights:new o.Uniform3f(m),u_perspective_transform:new o.Uniform2f(m)}),symbolIcon:m=>({u_is_size_zoom_constant:new o.Uniform1i(m),u_is_size_feature_constant:new o.Uniform1i(m),u_size_t:new o.Uniform1f(m),u_size:new o.Uniform1f(m),u_camera_to_center_distance:new o.Uniform1f(m),u_rotate_symbol:new o.Uniform1i(m),u_aspect_ratio:new o.Uniform1f(m),u_fade_change:new o.Uniform1f(m),u_matrix:new o.UniformMatrix4f(m),u_label_plane_matrix:new o.UniformMatrix4f(m),u_coord_matrix:new o.UniformMatrix4f(m),u_is_text:new o.Uniform1i(m),u_pitch_with_map:new o.Uniform1i(m),u_texsize:new o.Uniform2f(m),u_tile_id:new o.Uniform3f(m),u_zoom_transition:new o.Uniform1f(m),u_inv_rot_matrix:new o.UniformMatrix4f(m),u_merc_center:new o.Uniform2f(m),u_camera_forward:new o.Uniform3f(m),u_tile_matrix:new o.UniformMatrix4f(m),u_up_vector:new o.Uniform3f(m),u_ecef_origin:new o.Uniform3f(m),u_texture:new o.Uniform1i(m)}),symbolSDF:m=>({u_is_size_zoom_constant:new o.Uniform1i(m),u_is_size_feature_constant:new o.Uniform1i(m),u_size_t:new o.Uniform1f(m),u_size:new o.Uniform1f(m),u_camera_to_center_distance:new o.Uniform1f(m),u_rotate_symbol:new o.Uniform1i(m),u_aspect_ratio:new o.Uniform1f(m),u_fade_change:new o.Uniform1f(m),u_matrix:new o.UniformMatrix4f(m),u_label_plane_matrix:new o.UniformMatrix4f(m),u_coord_matrix:new o.UniformMatrix4f(m),u_is_text:new o.Uniform1i(m),u_pitch_with_map:new o.Uniform1i(m),u_texsize:new o.Uniform2f(m),u_texture:new o.Uniform1i(m),u_gamma_scale:new o.Uniform1f(m),u_device_pixel_ratio:new o.Uniform1f(m),u_tile_id:new o.Uniform3f(m),u_zoom_transition:new o.Uniform1f(m),u_inv_rot_matrix:new o.UniformMatrix4f(m),u_merc_center:new o.Uniform2f(m),u_camera_forward:new o.Uniform3f(m),u_tile_matrix:new o.UniformMatrix4f(m),u_up_vector:new o.Uniform3f(m),u_ecef_origin:new o.Uniform3f(m),u_is_halo:new o.Uniform1i(m)}),symbolTextAndIcon:m=>({u_is_size_zoom_constant:new o.Uniform1i(m),u_is_size_feature_constant:new o.Uniform1i(m),u_size_t:new o.Uniform1f(m),u_size:new o.Uniform1f(m),u_camera_to_center_distance:new o.Uniform1f(m),u_rotate_symbol:new o.Uniform1i(m),u_aspect_ratio:new o.Uniform1f(m),u_fade_change:new o.Uniform1f(m),u_matrix:new o.UniformMatrix4f(m),u_label_plane_matrix:new o.UniformMatrix4f(m),u_coord_matrix:new o.UniformMatrix4f(m),u_is_text:new o.Uniform1i(m),u_pitch_with_map:new o.Uniform1i(m),u_texsize:new o.Uniform2f(m),u_texsize_icon:new o.Uniform2f(m),u_texture:new o.Uniform1i(m),u_texture_icon:new o.Uniform1i(m),u_gamma_scale:new o.Uniform1f(m),u_device_pixel_ratio:new o.Uniform1f(m),u_is_halo:new o.Uniform1i(m)}),background:m=>({u_matrix:new o.UniformMatrix4f(m),u_opacity:new o.Uniform1f(m),u_color:new o.UniformColor(m)}),backgroundPattern:m=>({u_matrix:new o.UniformMatrix4f(m),u_opacity:new o.Uniform1f(m),u_image:new o.Uniform1i(m),u_pattern_tl:new o.Uniform2f(m),u_pattern_br:new o.Uniform2f(m),u_texsize:new o.Uniform2f(m),u_pattern_size:new o.Uniform2f(m),u_pixel_coord_upper:new o.Uniform2f(m),u_pixel_coord_lower:new o.Uniform2f(m),u_tile_units_to_pixels:new o.Uniform1f(m)}),terrainRaster:Ah,terrainDepth:Ah,skybox:m=>({u_matrix:new o.UniformMatrix4f(m),u_sun_direction:new o.Uniform3f(m),u_cubemap:new o.Uniform1i(m),u_opacity:new o.Uniform1f(m),u_temporal_offset:new o.Uniform1f(m)}),skyboxGradient:m=>({u_matrix:new o.UniformMatrix4f(m),u_color_ramp:new o.Uniform1i(m),u_center_direction:new o.Uniform3f(m),u_radius:new o.Uniform1f(m),u_opacity:new o.Uniform1f(m),u_temporal_offset:new o.Uniform1f(m)}),skyboxCapture:m=>({u_matrix_3f:new o.UniformMatrix3f(m),u_sun_direction:new o.Uniform3f(m),u_sun_intensity:new o.Uniform1f(m),u_color_tint_r:new o.Uniform4f(m),u_color_tint_m:new o.Uniform4f(m),u_luminance:new o.Uniform1f(m)}),globeRaster:m=>({u_proj_matrix:new o.UniformMatrix4f(m),u_globe_matrix:new o.UniformMatrix4f(m),u_normalize_matrix:new o.UniformMatrix4f(m),u_merc_matrix:new o.UniformMatrix4f(m),u_zoom_transition:new o.Uniform1f(m),u_merc_center:new o.Uniform2f(m),u_image0:new o.Uniform1i(m),u_grid_matrix:new o.UniformMatrix3f(m),u_skirt_height:new o.Uniform1f(m),u_frustum_tl:new o.Uniform3f(m),u_frustum_tr:new o.Uniform3f(m),u_frustum_br:new o.Uniform3f(m),u_frustum_bl:new o.Uniform3f(m),u_globe_pos:new o.Uniform3f(m),u_globe_radius:new o.Uniform1f(m),u_viewport:new o.Uniform2f(m)}),globeAtmosphere:m=>({u_frustum_tl:new o.Uniform3f(m),u_frustum_tr:new o.Uniform3f(m),u_frustum_br:new o.Uniform3f(m),u_frustum_bl:new o.Uniform3f(m),u_horizon:new o.Uniform1f(m),u_transition:new o.Uniform1f(m),u_fadeout_range:new o.Uniform1f(m),u_color:new o.Uniform4f(m),u_high_color:new o.Uniform4f(m),u_space_color:new o.Uniform4f(m),u_star_intensity:new o.Uniform1f(m),u_star_density:new o.Uniform1f(m),u_star_size:new o.Uniform1f(m),u_temporal_offset:new o.Uniform1f(m),u_horizon_angle:new o.Uniform1f(m),u_rotation_matrix:new o.UniformMatrix4f(m)})};let Ys;function n_(m,l,f,y,x,S,C){const I=m.context,z=I.gl,V=m.transform,U=m.useProgram("collisionBox"),Z=[];let te=0,ne=0;for(let me=0;me<y.length;me++){const we=y[me],ve=l.getTile(we),Ee=ve.getBucket(f);if(!Ee)continue;const ke=rp(we,Ee,V);let Le=ke;x[0]===0&&x[1]===0||(Le=m.translatePosMatrix(ke,ve,x,S));const Ne=C?Ee.textCollisionBox:Ee.iconCollisionBox,yt=Ee.collisionCircleArray;if(yt.length>0){const Oe=o.create(),rt=Le;o.mul(Oe,Ee.placementInvProjMatrix,V.glCoordMatrix),o.mul(Oe,Oe,Ee.placementViewportMatrix),Z.push({circleArray:yt,circleOffset:ne,transform:rt,invTransform:Oe,projection:Ee.getProjection()}),te+=yt.length/4,ne=te}Ne&&(m.terrain&&m.terrain.setupElevationDraw(ve,U),U.draw(I,z.LINES,o.DepthMode.disabled,o.StencilMode.disabled,m.colorModeForRenderPass(),o.CullFaceMode.disabled,Qy(Le,V,ve,Ee.getProjection()),f.id,Ne.layoutVertexBuffer,Ne.indexBuffer,Ne.segments,null,V.zoom,null,[Ne.collisionVertexBuffer,Ne.collisionVertexBufferExt]))}if(!C||!Z.length)return;const oe=m.useProgram("collisionCircle"),ae=new o.StructArrayLayout2f1f2i16;ae.resize(4*te),ae._trim();let se=0;for(const me of Z)for(let we=0;we<me.circleArray.length/4;we++){const ve=4*we,Ee=me.circleArray[ve+0],ke=me.circleArray[ve+1],Le=me.circleArray[ve+2],Ne=me.circleArray[ve+3];ae.emplace(se++,Ee,ke,Le,Ne,0),ae.emplace(se++,Ee,ke,Le,Ne,1),ae.emplace(se++,Ee,ke,Le,Ne,2),ae.emplace(se++,Ee,ke,Le,Ne,3)}(!Ys||Ys.length<2*te)&&(Ys=function(me){const we=2*me,ve=new o.StructArrayLayout3ui6;ve.resize(we),ve._trim();for(let Ee=0;Ee<we;Ee++){const ke=6*Ee;ve.uint16[ke+0]=4*Ee+0,ve.uint16[ke+1]=4*Ee+1,ve.uint16[ke+2]=4*Ee+2,ve.uint16[ke+3]=4*Ee+2,ve.uint16[ke+4]=4*Ee+3,ve.uint16[ke+5]=4*Ee+0}return ve}(te));const Q=I.createIndexBuffer(Ys,!0),fe=I.createVertexBuffer(ae,o.collisionCircleLayout.members,!0);for(const me of Z){const we={u_matrix:me.transform,u_inv_matrix:me.invTransform,u_camera_to_center_distance:(he=V).getCameraToCenterDistance(me.projection),u_viewport_size:[he.width,he.height]};oe.draw(I,z.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,m.colorModeForRenderPass(),o.CullFaceMode.disabled,we,f.id,fe,Q,o.SegmentVector.simpleSegment(0,2*me.circleOffset,me.circleArray.length,me.circleArray.length/2),null,V.zoom)}var he;fe.destroy(),Q.destroy()}const Sp=o.create();function i_({width:m,height:l,anchor:f,textOffset:y,textScale:x},S){const{horizontalAlign:C,verticalAlign:I}=o.getAnchorAlignment(f),z=-(C-.5)*m,V=-(I-.5)*l,U=o.evaluateVariableOffset(f,y);return new o.pointGeometry((z/x+U[0])*S,(V/x+U[1])*S)}function ql(m,l,f,y,x,S,C,I,z,V,U){const Z=m.text.placedSymbolArray,te=m.text.dynamicLayoutVertexArray,ne=m.icon.dynamicLayoutVertexArray,oe={},ae=m.getProjection(),se=gh(I,ae,S),Q=S.elevation,fe=ae.upVectorScale(I.canonical,S.center.lat,S.worldSize).metersToTile;te.clear();for(let he=0;he<Z.length;he++){const me=Z.get(he),{tileAnchorX:we,tileAnchorY:ve,numGlyphs:Ee}=me,ke=m.allowVerticalPlacement&&!me.placedOrientation,Le=me.hidden||!me.crossTileID||ke?null:y[me.crossTileID];if(Le){let Ne=0,yt=0,Oe=0;if(Q){const Ft=Q?Q.getAtTileOffset(I,we,ve):0,[dr,Lt,It]=ae.upVector(I.canonical,we,ve);Ne=Ft*dr*fe,yt=Ft*Lt*fe,Oe=Ft*It*fe}let[rt,We,st,$e]=wt(me.projectedAnchorX+Ne,me.projectedAnchorY+yt,me.projectedAnchorZ+Oe,f?se:C);const Pe=Er(S.getCameraToCenterDistance(ae),$e);let je=x.evaluateSizeForFeature(m.textSizeData,V,me)*Pe/o.ONE_EM;f&&(je*=m.tilePixelRatio/z);const ot=i_(Le,je);f?({x:rt,y:We,z:st}=ae.projectTilePoint(we+ot.x,ve+ot.y,I.canonical),[rt,We,st]=wt(rt+Ne,We+yt,st+Oe,C)):(l&&ot._rotate(-S.angle),rt+=ot.x,We+=ot.y,st=0);const ct=m.allowVerticalPlacement&&me.placedOrientation===o.WritingMode.vertical?Math.PI/2:0;for(let Ft=0;Ft<Ee;Ft++)o.addDynamicAttributes(te,rt,We,st,ct);U&&me.associatedIconIndex>=0&&(oe[me.associatedIconIndex]={x:rt,y:We,z:st,angle:ct})}else rn(Ee,te)}if(U){ne.clear();const he=m.icon.placedSymbolArray;for(let me=0;me<he.length;me++){const we=he.get(me),{numGlyphs:ve}=we,Ee=oe[me];if(we.hidden||!Ee)rn(ve,ne);else{const{x:ke,y:Le,z:Ne,angle:yt}=Ee;for(let Oe=0;Oe<ve;Oe++)o.addDynamicAttributes(ne,ke,Le,Ne,yt)}}m.icon.dynamicLayoutVertexBuffer.updateData(ne)}m.text.dynamicLayoutVertexBuffer.updateData(te)}function fb(m,l,f){return f.iconsInText&&l?"symbolTextAndIcon":m?"symbolSDF":"symbolIcon"}function o_(m,l,f,y,x,S,C,I,z,V,U,Z){const te=m.context,ne=te.gl,oe=m.transform,ae=I==="map",se=z==="map",Q=ae&&f.layout.get("symbol-placement")!=="point",fe=ae&&!se&&!Q,he=f.layout.get("symbol-sort-key").constantOr(1)!==void 0;let me=!1;const we=m.depthModeForSublayer(0,o.DepthMode.ReadOnly),ve=[o.mercatorXfromLng(oe.center.lng),o.mercatorYfromLat(oe.center.lat)],Ee=f.layout.get("text-variable-anchor"),ke=oe.projection.name==="globe",Le=[],Ne=[0,-1,0];let yt=Ne;!ke&&!oe.mercatorFromTransition||ae||(yt=function(Oe){const rt=Oe._camera.getWorldToCamera(Oe.worldSize,1),We=o.multiply([],rt,Oe.globeMatrix);o.invert(We,We);const st=[0,0,0],$e=[0,1,0,0];return o.transformMat4$1($e,$e,We),st[0]=$e[0],st[1]=$e[1],st[2]=$e[2],o.normalize(st,st),st}(oe));for(const Oe of y){const rt=l.getTile(Oe),We=rt.getBucket(f);if(!We||We.projection.name==="mercator"&&ke)continue;const st=x?We.text:We.icon;if(!st||We.fullyClipped||!st.segments.get().length)continue;const $e=st.programConfigurations.get(f.id),Pe=x||We.sdfIcons,je=x?We.textSizeData:We.iconSizeData,ot=se||oe.pitch!==0,ct=o.evaluateSizeForZoom(je,oe.zoom);let Ft,dr,Lt,It,Nt=[0,0],xr=null;if(x){if(dr=rt.glyphAtlasTexture,Lt=ne.LINEAR,Ft=rt.glyphAtlasTexture.size,We.iconsInText){Nt=rt.imageAtlasTexture.size,xr=rt.imageAtlasTexture;const go=je.kind==="composite"||je.kind==="camera";It=ot||m.options.rotating||m.options.zooming||go?ne.LINEAR:ne.NEAREST}}else{const go=f.layout.get("icon-size").constantOr(0)!==1||We.iconsNeedLinear;dr=rt.imageAtlasTexture,Lt=Pe||m.options.rotating||m.options.zooming||go||ot?ne.LINEAR:ne.NEAREST,Ft=rt.imageAtlasTexture.size}const qt=We.projection.name==="globe",Fr=qt?yt:Ne,Ur=qt?o.globeToMercatorTransition(oe.zoom):0,nn=gh(Oe,We.getProjection(),oe),Jr=oe.calculatePixelsToTileUnitsMatrix(rt),Vn=zl(nn,rt.tileID.canonical,se,ae,oe,We.getProjection(),Jr),to=m.terrain&&se&&Q?o.invert(o.create(),Vn):Sp,Go=Bl(nn,rt.tileID.canonical,se,ae,oe,We.getProjection(),Jr),Na=Ee&&We.hasTextData(),gn=f.layout.get("icon-text-fit")!=="none"&&Na&&We.hasIconData();if(Q){const go=oe.elevation,Co=go?go.getAtTileOffsetFunc(Oe,oe.center.lat,oe.worldSize,We.getProjection()):null,ja=Ny(nn,rt.tileID.canonical,se,ae,oe,We.getProjection(),Jr);ca(We,nn,m,x,ja,Go,se,V,Co,Oe)}const Qr=Q||x&&Ee||gn,Or=m.translatePosMatrix(nn,rt,S,C),Pn=Qr?Sp:Vn,Mi=m.translatePosMatrix(Go,rt,S,C,!0),hn=We.getProjection().createInversionMatrix(oe,Oe.canonical),Ci=[];m.terrainRenderModeElevated()&&se&&Ci.push("PITCH_WITH_MAP_TERRAIN"),qt&&Ci.push("PROJECTION_GLOBE_VIEW"),Qr&&Ci.push("PROJECTED_POS_ON_VIEWPORT");const Pi=Pe&&f.paint.get(x?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let ps;ps=Pe?We.iconsInText?bp(je.kind,ct,fe,se,m,Or,Pn,Mi,Ft,Nt,Oe,Ur,ve,hn,Fr,We.getProjection()):r_(je.kind,ct,fe,se,m,Or,Pn,Mi,x,Ft,!0,Oe,Ur,ve,hn,Fr,We.getProjection()):hu(je.kind,ct,fe,se,m,Or,Pn,Mi,x,Ft,Oe,Ur,ve,hn,Fr,We.getProjection());const rc={program:m.useProgram(fb(Pe,x,We),$e,Ci),buffers:st,uniformValues:ps,atlasTexture:dr,atlasTextureIcon:xr,atlasInterpolation:Lt,atlasInterpolationIcon:It,isSDF:Pe,hasHalo:Pi,tile:rt,labelPlaneMatrixInv:to};if(he&&We.canOverlap){me=!0;const go=st.segments.get();for(const Co of go)Le.push({segments:new o.SegmentVector([Co]),sortKey:Co.sortKey,state:rc})}else Le.push({segments:st.segments,sortKey:0,state:rc})}me&&Le.sort((Oe,rt)=>Oe.sortKey-rt.sortKey);for(const Oe of Le){const rt=Oe.state;if(m.terrain&&m.terrain.setupElevationDraw(rt.tile,rt.program,{useDepthForOcclusion:!ke,labelPlaneMatrixInv:rt.labelPlaneMatrixInv}),te.activeTexture.set(ne.TEXTURE0),rt.atlasTexture.bind(rt.atlasInterpolation,ne.CLAMP_TO_EDGE),rt.atlasTextureIcon&&(te.activeTexture.set(ne.TEXTURE1),rt.atlasTextureIcon&&rt.atlasTextureIcon.bind(rt.atlasInterpolationIcon,ne.CLAMP_TO_EDGE)),rt.isSDF){const We=rt.uniformValues;rt.hasHalo&&(We.u_is_halo=1,a_(rt.buffers,Oe.segments,f,m,rt.program,we,U,Z,We)),We.u_is_halo=0}a_(rt.buffers,Oe.segments,f,m,rt.program,we,U,Z,rt.uniformValues)}}function a_(m,l,f,y,x,S,C,I,z){const V=y.context,U=[m.dynamicLayoutVertexBuffer,m.opacityVertexBuffer,m.globeExtVertexBuffer];x.draw(V,V.gl.TRIANGLES,S,C,I,o.CullFaceMode.disabled,z,f.id,m.layoutVertexBuffer,m.indexBuffer,l,f.paint,y.transform.zoom,m.programConfigurations.get(f.id),U)}function s_(m,l,f,y,x,S,C){const I=m.context.gl,z=f.paint.get("fill-pattern"),V=z&&z.constantOr(1);let U,Z,te,ne,oe;C?(Z=V&&!f.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",U=I.LINES):(Z=V?"fillPattern":"fill",U=I.TRIANGLES);for(const ae of y){const se=l.getTile(ae);if(V&&!se.patternsLoaded())continue;const Q=se.getBucket(f);if(!Q)continue;m.prepareDrawTile();const fe=Q.programConfigurations.get(f.id),he=m.useProgram(Z,fe);V&&(m.context.activeTexture.set(I.TEXTURE0),se.imageAtlasTexture.bind(I.LINEAR,I.CLAMP_TO_EDGE),fe.updatePaintBuffers());const me=z.constantOr(null);if(me&&se.imageAtlas){const ve=se.imageAtlas.patternPositions[me.toString()];ve&&fe.setConstantPatternPositions(ve)}const we=m.translatePosMatrix(ae.projMatrix,se,f.paint.get("fill-translate"),f.paint.get("fill-translate-anchor"));if(C){ne=Q.indexBuffer2,oe=Q.segments2;const ve=m.terrain&&m.terrain.renderingToTexture?m.terrain.drapeBufferSize:[I.drawingBufferWidth,I.drawingBufferHeight];te=Z==="fillOutlinePattern"&&V?Jy(we,m,se,ve):Yy(we,ve)}else ne=Q.indexBuffer,oe=Q.segments,te=V?kh(we,m,se):Ih(we);m.prepareDrawProgram(m.context,he,ae.toUnwrapped()),he.draw(m.context,U,x,m.stencilModeForClipping(ae),S,o.CullFaceMode.disabled,te,f.id,Q.layoutVertexBuffer,ne,oe,f.paint,m.transform.zoom,fe)}}function Ep(m,l,f,y,x,S,C){const I=m.context,z=I.gl,V=m.transform,U=f.paint.get("fill-extrusion-pattern"),Z=U.constantOr(1),te=f.paint.get("fill-extrusion-opacity"),ne=[f.paint.get("fill-extrusion-ambient-occlusion-intensity"),f.paint.get("fill-extrusion-ambient-occlusion-radius")],oe=f.layout.get("fill-extrusion-edge-radius"),ae=V.projection.name==="globe"?o.fillExtrusionHeightLift():0,se=V.projection.name==="globe",Q=se?o.globeToMercatorTransition(V.zoom):0,fe=[o.mercatorXfromLng(V.center.lng),o.mercatorYfromLat(V.center.lat)],he=[];se&&he.push("PROJECTION_GLOBE_VIEW"),ne[0]>0&&he.push("FAUX_AO");for(const me of y){const we=l.getTile(me),ve=we.getBucket(f);if(!ve||ve.projection.name!==V.projection.name)continue;const Ee=ve.programConfigurations.get(f.id),ke=m.useProgram(Z?"fillExtrusionPattern":"fillExtrusion",Ee,he);if(m.terrain){const st=m.terrain;if(m.style.terrainSetForDrapingOnly())st.setupElevationDraw(we,ke,{useMeterToDem:!0});else{if(!ve.enableTerrain)continue;if(st.setupElevationDraw(we,ke,{useMeterToDem:!0}),db(I,l,me,ve,f,st),!ve.centroidVertexBuffer){const $e=ke.attributes.a_centroid_pos;$e!==void 0&&z.vertexAttrib2f($e,0,0)}}}Z&&(m.context.activeTexture.set(z.TEXTURE0),we.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),Ee.updatePaintBuffers());const Le=U.constantOr(null);if(Le&&we.imageAtlas){const st=we.imageAtlas.patternPositions[Le.toString()];st&&Ee.setConstantPatternPositions(st)}const Ne=m.translatePosMatrix(me.projMatrix,we,f.paint.get("fill-extrusion-translate"),f.paint.get("fill-extrusion-translate-anchor")),yt=V.projection.createInversionMatrix(V,me.canonical),Oe=f.paint.get("fill-extrusion-vertical-gradient"),rt=Z?gp(Ne,m,Oe,te,ne,oe,me,we,ae,Q,fe,yt):Ph(Ne,m,Oe,te,ne,oe,me,ae,Q,fe,yt);m.prepareDrawProgram(I,ke,me.toUnwrapped());const We=[];m.terrain&&We.push(ve.centroidVertexBuffer),se&&We.push(ve.layoutVertexExtBuffer),ke.draw(I,I.gl.TRIANGLES,x,S,C,o.CullFaceMode.backCCW,rt,f.id,ve.layoutVertexBuffer,ve.indexBuffer,ve.segments,f.paint,m.transform.zoom,Ee,We)}}function db(m,l,f,y,x,S){const C=[Q=>{let fe=Q.canonical.x-1,he=Q.wrap;return fe<0&&(fe=(1<<Q.canonical.z)-1,he--),new o.OverscaledTileID(Q.overscaledZ,he,Q.canonical.z,fe,Q.canonical.y)},Q=>{let fe=Q.canonical.x+1,he=Q.wrap;return fe===1<<Q.canonical.z&&(fe=0,he++),new o.OverscaledTileID(Q.overscaledZ,he,Q.canonical.z,fe,Q.canonical.y)},Q=>new o.OverscaledTileID(Q.overscaledZ,Q.wrap,Q.canonical.z,Q.canonical.x,(Q.canonical.y===0?1<<Q.canonical.z:Q.canonical.y)-1),Q=>new o.OverscaledTileID(Q.overscaledZ,Q.wrap,Q.canonical.z,Q.canonical.x,Q.canonical.y===(1<<Q.canonical.z)-1?0:Q.canonical.y+1)],I=Q=>{const fe=l.getSource().minzoom,he=we=>{const ve=l.getTileByID(we);if(ve&&ve.hasData())return ve.getBucket(x)},me=[0,-1,1];for(const we of me){if(Q.overscaledZ+we<fe)continue;const ve=he(Q.calculateScaledKey(Q.overscaledZ+we));if(ve)return ve}},z=[0,0,0],V=(Q,fe)=>(z[0]=Math.min(Q.min.y,fe.min.y),z[1]=Math.max(Q.max.y,fe.max.y),z[2]=o.EXTENT-fe.min.x>Q.max.x?fe.min.x-o.EXTENT:Q.max.x,z),U=(Q,fe)=>(z[0]=Math.min(Q.min.x,fe.min.x),z[1]=Math.max(Q.max.x,fe.max.x),z[2]=o.EXTENT-fe.min.y>Q.max.y?fe.min.y-o.EXTENT:Q.max.y,z),Z=[(Q,fe)=>V(Q,fe),(Q,fe)=>V(fe,Q),(Q,fe)=>U(Q,fe),(Q,fe)=>U(fe,Q)],te=new o.pointGeometry(0,0);let ne,oe,ae;const se=(Q,fe,he,me,we)=>{const ve=[[me?he:Q,me?Q:he,0],[me?he:fe,me?fe:he,0]],Ee=we<0?o.EXTENT+we:we,ke=[me?Ee:(Q+fe)/2,me?(Q+fe)/2:Ee,0];return he===0&&we<0||he!==0&&we>0?S.getForTilePoints(ae,[ke],!0,oe):ve.push(ke),S.getForTilePoints(f,ve,!0,ne),Math.max(ve[0][2],ve[1][2],ke[2])/S.exaggeration()};for(let Q=0;Q<4;Q++){const fe=(Q<2?1:5)-Q,he=y.borders[Q];if(he.length===0)continue;const me=ae=C[Q](f),we=I(me);if(!(we&&we instanceof o.FillExtrusionBucket&&we.enableTerrain)||y.borderDoneWithNeighborZ[Q]===we.canonical.z&&we.borderDoneWithNeighborZ[fe]===y.canonical.z||(oe=S.findDEMTileFor(me),!oe||!oe.dem))continue;if(!ne){const Le=S.findDEMTileFor(f);if(!Le||!Le.dem)return;ne=Le}const ve=we.borders[fe];let Ee=0;const ke=we.borderDoneWithNeighborZ[fe]!==y.canonical.z;if(y.canonical.z===we.canonical.z){for(let Le=0;Le<he.length;Le++){const Ne=y.featuresOnBorder[he[Le]],yt=Ne.borders[Q];let Oe;for(;Ee<ve.length&&(Oe=we.featuresOnBorder[ve[Ee]],!(Oe.borders[fe][1]>yt[0]+3));)ke&&we.encodeCentroid(void 0,Oe,!1),Ee++;if(Oe&&Ee<ve.length){const rt=Ee;let We=0;for(;!(Oe.borders[fe][0]>yt[1]-3)&&(We++,++Ee!==ve.length);)Oe=we.featuresOnBorder[ve[Ee]];if(Oe=we.featuresOnBorder[ve[rt]],Ne.intersectsCount()>1||Oe.intersectsCount()>1||We!==1){We!==1&&(Ee=rt),y.encodeCentroid(void 0,Ne,!1),ke&&we.encodeCentroid(void 0,Oe,!1);continue}const st=Z[Q](Ne,Oe),$e=Q%2?o.EXTENT-1:0;te.x=se(st[0],Math.min(o.EXTENT-1,st[1]),$e,Q<2,st[2]),te.y=0,y.encodeCentroid(te,Ne,!1),ke&&we.encodeCentroid(te,Oe,!1)}else y.encodeCentroid(void 0,Ne,!1)}y.borderDoneWithNeighborZ[Q]=we.canonical.z,y.needsCentroidUpdate=!0,ke&&(we.borderDoneWithNeighborZ[fe]=y.canonical.z,we.needsCentroidUpdate=!0)}else{for(const Le of he)y.encodeCentroid(void 0,y.featuresOnBorder[Le],!1);if(ke){for(const Le of ve)we.encodeCentroid(void 0,we.featuresOnBorder[Le],!1);we.borderDoneWithNeighborZ[fe]=y.canonical.z,we.needsCentroidUpdate=!0}y.borderDoneWithNeighborZ[Q]=we.canonical.z,y.needsCentroidUpdate=!0}}(y.needsCentroidUpdate||!y.centroidVertexBuffer&&y.centroidVertexArray.length!==0)&&y.uploadCentroid(m)}const Tp=new o.Color(1,0,0,1),Ap=new o.Color(0,1,0,1),l_=new o.Color(0,0,1,1),c_=new o.Color(1,0,1,1),u_=new o.Color(0,1,1,1);function Mp(m,l,f){const y=m.context,x=m.transform,S=y.gl,C=x.projection.name==="globe",I=C?["PROJECTION_GLOBE_VIEW"]:null;let z=f.projMatrix;if(C&&o.globeToMercatorTransition(x.zoom)>0){const Ne=o.transitionTileAABBinECEF(f.canonical,x),yt=o.globeDenormalizeECEF(Ne);z=o.multiply(new Float32Array(16),x.globeMatrix,yt),o.multiply(z,x.projMatrix,z)}const V=m.useProgram("debug",null,I),U=l.getTileByID(f.key);m.terrain&&m.terrain.setupElevationDraw(U,V);const Z=o.DepthMode.disabled,te=o.StencilMode.disabled,ne=m.colorModeForRenderPass(),oe="$debug";y.activeTexture.set(S.TEXTURE0),m.emptyTexture.bind(S.LINEAR,S.CLAMP_TO_EDGE),C?U._makeGlobeTileDebugBuffers(m.context,x):U._makeDebugTileBoundsBuffers(m.context,x.projection);const ae=U._tileDebugBuffer||m.debugBuffer,se=U._tileDebugIndexBuffer||m.debugIndexBuffer,Q=U._tileDebugSegments||m.debugSegments;V.draw(y,S.LINE_STRIP,Z,te,ne,o.CullFaceMode.disabled,uu(z,o.Color.red),oe,ae,se,Q,null,null,null,[U._globeTileDebugBorderBuffer]);const fe=U.latestRawTileData,he=Math.floor((fe&&fe.byteLength||0)/1024),me=l.getTile(f).tileSize,we=512/Math.min(me,512)*(f.overscaledZ/x.zoom)*.5;let ve=f.canonical.toString();f.overscaledZ!==f.canonical.z&&(ve+=` => ${f.overscaledZ}`),ve+=` ${he}kb`,function(Ne,yt){Ne.initDebugOverlayCanvas();const Oe=Ne.debugOverlayCanvas,rt=Ne.context.gl,We=Ne.debugOverlayCanvas.getContext("2d");We.clearRect(0,0,Oe.width,Oe.height),We.shadowColor="white",We.shadowBlur=2,We.lineWidth=1.5,We.strokeStyle="white",We.textBaseline="top",We.font="bold 36px Open Sans, sans-serif",We.fillText(yt,5,5),We.strokeText(yt,5,5),Ne.debugOverlayTexture.update(Oe),Ne.debugOverlayTexture.bind(rt.LINEAR,rt.CLAMP_TO_EDGE)}(m,ve);const Ee=U._tileDebugTextBuffer||m.debugBuffer,ke=U._tileDebugTextIndexBuffer||m.quadTriangleIndexBuffer,Le=U._tileDebugTextSegments||m.debugSegments;V.draw(y,S.TRIANGLES,Z,te,o.ColorMode.alphaBlended,o.CullFaceMode.disabled,uu(z,o.Color.transparent,we),oe,Ee,ke,Le,null,null,null,[U._globeTileDebugTextBuffer])}function ds(m,l,f,y){fu(m,0,l+f/2,m.transform.width,f,y)}function Wl(m,l,f,y){fu(m,l-f/2,0,f,m.transform.height,y)}function fu(m,l,f,y,x,S){const C=m.context,I=C.gl;I.enable(I.SCISSOR_TEST),I.scissor(l*o.exported.devicePixelRatio,f*o.exported.devicePixelRatio,y*o.exported.devicePixelRatio,x*o.exported.devicePixelRatio),C.clear({color:S}),I.disable(I.SCISSOR_TEST)}const Hl=o.createLayout([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:Zl}=Hl;function $a(m,l,f,y){m.emplaceBack(l,f,y)}class Rh{constructor(l){this.vertexArray=new o.StructArrayLayout3f12,this.indices=new o.StructArrayLayout3ui6,$a(this.vertexArray,-1,-1,1),$a(this.vertexArray,1,-1,1),$a(this.vertexArray,-1,1,1),$a(this.vertexArray,1,1,1),$a(this.vertexArray,-1,-1,-1),$a(this.vertexArray,1,-1,-1),$a(this.vertexArray,-1,1,-1),$a(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=l.createVertexBuffer(this.vertexArray,Zl),this.indexBuffer=l.createIndexBuffer(this.indices),this.segment=o.SegmentVector.simpleSegment(0,0,36,12)}}function Ar(m,l,f,y,x,S){const C=m.gl,I=l.paint.get("sky-atmosphere-color"),z=l.paint.get("sky-atmosphere-halo-color"),V=l.paint.get("sky-atmosphere-sun-intensity"),U=((Z,te,ne,oe,ae)=>({u_matrix_3f:Z,u_sun_direction:te,u_sun_intensity:ne,u_color_tint_r:[oe.r,oe.g,oe.b,oe.a],u_color_tint_m:[ae.r,ae.g,ae.b,ae.a],u_luminance:5e-5}))(o.fromMat4(o.create$1(),y),x,V,I,z);C.framebufferTexture2D(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.TEXTURE_CUBE_MAP_POSITIVE_X+S,l.skyboxTexture,0),f.draw(m,C.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,o.ColorMode.unblended,o.CullFaceMode.frontCW,U,"skyboxCapture",l.skyboxGeometry.vertexBuffer,l.skyboxGeometry.indexBuffer,l.skyboxGeometry.segment)}const Lh=o.createLayout([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class pb{constructor(l){const f=new o.StructArrayLayout5f20;f.emplaceBack(-1,1,1,0,0),f.emplaceBack(1,1,1,1,0),f.emplaceBack(1,-1,1,1,1),f.emplaceBack(-1,-1,1,0,1);const y=new o.StructArrayLayout3ui6;y.emplaceBack(0,1,2),y.emplaceBack(2,3,0),this.vertexBuffer=l.createVertexBuffer(f,Lh.members),this.indexBuffer=l.createIndexBuffer(y),this.segments=o.SegmentVector.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Cp={symbol:function(m,l,f,y,x){if(m.renderPass!=="translucent")return;const S=o.StencilMode.disabled,C=m.colorModeForRenderPass();f.layout.get("text-variable-anchor")&&function(I,z,V,U,Z,te,ne){const oe=z.transform,ae=Z==="map",se=te==="map";for(const Q of I){const fe=U.getTile(Q),he=fe.getBucket(V);if(!he||!he.text||!he.text.segments.get().length)continue;const me=o.evaluateSizeForZoom(he.textSizeData,oe.zoom),we=gh(Q,he.getProjection(),oe),ve=oe.calculatePixelsToTileUnitsMatrix(fe),Ee=zl(we,fe.tileID.canonical,se,ae,oe,he.getProjection(),ve),ke=V.layout.get("icon-text-fit")!=="none"&&he.hasIconData();if(me){const Le=Math.pow(2,oe.zoom-fe.tileID.overscaledZ);ql(he,ae,se,ne,o.symbolSize,oe,Ee,Q,Le,me,ke)}}}(y,m,f,l,f.layout.get("text-rotation-alignment"),f.layout.get("text-pitch-alignment"),x),f.paint.get("icon-opacity").constantOr(1)!==0&&o_(m,l,f,y,!1,f.paint.get("icon-translate"),f.paint.get("icon-translate-anchor"),f.layout.get("icon-rotation-alignment"),f.layout.get("icon-pitch-alignment"),f.layout.get("icon-keep-upright"),S,C),f.paint.get("text-opacity").constantOr(1)!==0&&o_(m,l,f,y,!0,f.paint.get("text-translate"),f.paint.get("text-translate-anchor"),f.layout.get("text-rotation-alignment"),f.layout.get("text-pitch-alignment"),f.layout.get("text-keep-upright"),S,C),l.map.showCollisionBoxes&&(n_(m,l,f,y,f.paint.get("text-translate"),f.paint.get("text-translate-anchor"),!0),n_(m,l,f,y,f.paint.get("icon-translate"),f.paint.get("icon-translate-anchor"),!1))},circle:function(m,l,f,y){if(m.renderPass!=="translucent")return;const x=f.paint.get("circle-opacity"),S=f.paint.get("circle-stroke-width"),C=f.paint.get("circle-stroke-opacity"),I=f.layout.get("circle-sort-key").constantOr(1)!==void 0;if(x.constantOr(1)===0&&(S.constantOr(1)===0||C.constantOr(1)===0))return;const z=m.context,V=z.gl,U=m.transform,Z=m.depthModeForSublayer(0,o.DepthMode.ReadOnly),te=o.StencilMode.disabled,ne=m.colorModeForRenderPass(),oe=U.projection.name==="globe",ae=[o.mercatorXfromLng(U.center.lng),o.mercatorYfromLat(U.center.lat)],se=[];for(let fe=0;fe<y.length;fe++){const he=y[fe],me=l.getTile(he),we=me.getBucket(f);if(!we||we.projection.name!==U.projection.name)continue;const ve=we.programConfigurations.get(f.id),Ee=cu(f);oe&&Ee.push("PROJECTION_GLOBE_VIEW");const ke=m.useProgram("circle",ve,Ee),Le=we.layoutVertexBuffer,Ne=we.globeExtVertexBuffer,yt=we.indexBuffer,Oe=U.projection.createInversionMatrix(U,he.canonical),rt={programConfiguration:ve,program:ke,layoutVertexBuffer:Le,globeExtVertexBuffer:Ne,indexBuffer:yt,uniformValues:lu(m,he,me,Oe,ae,f),tile:me};if(I){const We=we.segments.get();for(const st of We)se.push({segments:new o.SegmentVector([st]),sortKey:st.sortKey,state:rt})}else se.push({segments:we.segments,sortKey:0,state:rt})}I&&se.sort((fe,he)=>fe.sortKey-he.sortKey);const Q={useDepthForOcclusion:!oe};for(const fe of se){const{programConfiguration:he,program:me,layoutVertexBuffer:we,globeExtVertexBuffer:ve,indexBuffer:Ee,uniformValues:ke,tile:Le}=fe.state,Ne=fe.segments;m.terrain&&m.terrain.setupElevationDraw(Le,me,Q),m.prepareDrawProgram(z,me,Le.tileID.toUnwrapped()),me.draw(z,V.TRIANGLES,Z,te,ne,o.CullFaceMode.disabled,ke,f.id,we,Ee,Ne,f.paint,U.zoom,he,[ve])}},heatmap:function(m,l,f,y){if(f.paint.get("heatmap-opacity")!==0)if(m.renderPass==="offscreen"){const x=m.context,S=x.gl,C=o.StencilMode.disabled,I=new o.ColorMode([S.ONE,S.ONE],o.Color.transparent,[!0,!0,!0,!0]);(function(ne,oe,ae,se){const Q=ne.gl,fe=oe.width*se,he=oe.height*se;ne.activeTexture.set(Q.TEXTURE1),ne.viewport.set([0,0,fe,he]);let me=ae.heatmapFbo;if(!me||me&&(me.width!==fe||me.height!==he)){me&&me.destroy();const we=Q.createTexture();Q.bindTexture(Q.TEXTURE_2D,we),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_WRAP_S,Q.CLAMP_TO_EDGE),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_WRAP_T,Q.CLAMP_TO_EDGE),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_MIN_FILTER,Q.LINEAR),Q.texParameteri(Q.TEXTURE_2D,Q.TEXTURE_MAG_FILTER,Q.LINEAR),me=ae.heatmapFbo=ne.createFramebuffer(fe,he,!1),function(ve,Ee,ke,Le,Ne,yt){const Oe=ve.gl;Oe.texImage2D(Oe.TEXTURE_2D,0,ve.isWebGL2&&ve.extRenderToTextureHalfFloat?Oe.RGBA16F:Oe.RGBA,Ne,yt,0,Oe.RGBA,ve.extRenderToTextureHalfFloat?ve.isWebGL2?Oe.HALF_FLOAT:ve.extTextureHalfFloat.HALF_FLOAT_OES:Oe.UNSIGNED_BYTE,null),Le.colorAttachment.set(ke)}(ne,0,we,me,fe,he)}else Q.bindTexture(Q.TEXTURE_2D,me.colorAttachment.get()),ne.bindFramebuffer.set(me.framebuffer)})(x,m,f,m.transform.projection.name==="globe"?.5:.25),x.clear({color:o.Color.transparent});const z=m.transform,V=z.projection.name==="globe",U=V?["PROJECTION_GLOBE_VIEW"]:null,Z=V?o.CullFaceMode.frontCCW:o.CullFaceMode.disabled,te=[o.mercatorXfromLng(z.center.lng),o.mercatorYfromLat(z.center.lat)];for(let ne=0;ne<y.length;ne++){const oe=y[ne];if(l.hasRenderableParent(oe))continue;const ae=l.getTile(oe),se=ae.getBucket(f);if(!se||se.projection.name!==z.projection.name)continue;const Q=se.programConfigurations.get(f.id),fe=m.useProgram("heatmap",Q,U),{zoom:he}=m.transform;m.terrain&&m.terrain.setupElevationDraw(ae,fe),m.prepareDrawProgram(x,fe,oe.toUnwrapped());const me=z.projection.createInversionMatrix(z,oe.canonical);fe.draw(x,S.TRIANGLES,o.DepthMode.disabled,C,I,Z,ua(m,oe,ae,me,te,he,f.paint.get("heatmap-intensity")),f.id,se.layoutVertexBuffer,se.indexBuffer,se.segments,f.paint,m.transform.zoom,Q,V?[se.globeExtVertexBuffer]:null)}x.viewport.set([0,0,m.width,m.height])}else m.renderPass==="translucent"&&(m.context.setColorMode(m.colorModeForRenderPass()),function(x,S){const C=x.context,I=C.gl,z=S.heatmapFbo;if(!z)return;C.activeTexture.set(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,z.colorAttachment.get()),C.activeTexture.set(I.TEXTURE1);let V=S.colorRampTexture;V||(V=S.colorRampTexture=new o.Texture(C,S.colorRamp,I.RGBA)),V.bind(I.LINEAR,I.CLAMP_TO_EDGE),x.useProgram("heatmapTexture").draw(C,I.TRIANGLES,o.DepthMode.disabled,o.StencilMode.disabled,x.colorModeForRenderPass(),o.CullFaceMode.disabled,((U,Z,te,ne)=>({u_image:0,u_color_ramp:1,u_opacity:Z.paint.get("heatmap-opacity")}))(0,S),S.id,x.viewportBuffer,x.quadTriangleIndexBuffer,x.viewportSegments,S.paint,x.transform.zoom)}(m,f))},line:function(m,l,f,y){if(m.renderPass!=="translucent")return;const x=f.paint.get("line-opacity"),S=f.paint.get("line-width");if(x.constantOr(1)===0||S.constantOr(1)===0)return;const C=m.depthModeForSublayer(0,o.DepthMode.ReadOnly),I=m.colorModeForRenderPass(),z=m.terrain&&m.terrain.renderingToTexture?1:o.exported.devicePixelRatio,V=f.paint.get("line-dasharray"),U=V.constantOr(1),Z=f.layout.get("line-cap"),te=f.paint.get("line-pattern"),ne=te.constantOr(1),oe=f.paint.get("line-gradient"),ae=ne?"linePattern":"line",se=m.context,Q=se.gl,fe=(me=>{const we=[];Dh(me)&&we.push("RENDER_LINE_DASH"),me.paint.get("line-gradient")&&we.push("RENDER_LINE_GRADIENT");const ve=me.paint.get("line-trim-offset");ve[0]===0&&ve[1]===0||we.push("RENDER_LINE_TRIM_OFFSET");const Ee=me.paint.get("line-pattern").constantOr(1),ke=me.paint.get("line-opacity").constantOr(1)!==1;return!Ee&&ke&&we.push("RENDER_LINE_ALPHA_DISCARD"),we})(f);let he=fe.includes("RENDER_LINE_ALPHA_DISCARD");m.terrain&&m.terrain.clipOrMaskOverlapStencilType()&&(he=!1);for(const me of y){const we=l.getTile(me);if(ne&&!we.patternsLoaded())continue;const ve=we.getBucket(f);if(!ve)continue;m.prepareDrawTile();const Ee=ve.programConfigurations.get(f.id),ke=m.useProgram(ae,Ee,fe),Le=te.constantOr(null);if(Le&&we.imageAtlas){const Pe=we.imageAtlas.patternPositions[Le.toString()];Pe&&Ee.setConstantPatternPositions(Pe)}const Ne=V.constantOr(null),yt=Z.constantOr(null);if(!ne&&Ne&&yt&&we.lineAtlas){const Pe=we.lineAtlas.getDash(Ne,yt);Pe&&Ee.setConstantPatternPositions(Pe)}let[Oe,rt]=f.paint.get("line-trim-offset");(yt==="round"||yt==="square")&&Oe!==rt&&(Oe===0&&(Oe-=1),rt===1&&(rt+=1));const We=m.terrain?me.projMatrix:null,st=ne?e_(m,we,f,We,z):_p(m,we,f,We,ve.lineClipsArray.length,z,[Oe,rt]);if(oe){const Pe=ve.gradients[f.id];let je=Pe.texture;if(f.gradientVersion!==Pe.version){let ot=256;if(f.stepInterpolant){const ct=l.getSource().maxzoom,Ft=me.canonical.z===ct?Math.ceil(1<<m.transform.maxZoom-me.canonical.z):1;ot=o.clamp(o.nextPowerOfTwo(ve.maxLineLength/o.EXTENT*1024*Ft),256,se.maxTextureSize)}Pe.gradient=o.renderColorRamp({expression:f.gradientExpression(),evaluationKey:"lineProgress",resolution:ot,image:Pe.gradient||void 0,clips:ve.lineClipsArray}),Pe.texture?Pe.texture.update(Pe.gradient):Pe.texture=new o.Texture(se,Pe.gradient,Q.RGBA),Pe.version=f.gradientVersion,je=Pe.texture}se.activeTexture.set(Q.TEXTURE1),je.bind(f.stepInterpolant?Q.NEAREST:Q.LINEAR,Q.CLAMP_TO_EDGE)}U&&(se.activeTexture.set(Q.TEXTURE0),we.lineAtlasTexture.bind(Q.LINEAR,Q.REPEAT),Ee.updatePaintBuffers()),ne&&(se.activeTexture.set(Q.TEXTURE0),we.imageAtlasTexture.bind(Q.LINEAR,Q.CLAMP_TO_EDGE),Ee.updatePaintBuffers()),m.prepareDrawProgram(se,ke,me.toUnwrapped());const $e=Pe=>{ke.draw(se,Q.TRIANGLES,C,Pe,I,o.CullFaceMode.disabled,st,f.id,ve.layoutVertexBuffer,ve.indexBuffer,ve.segments,f.paint,m.transform.zoom,Ee,[ve.layoutVertexBuffer2])};if(he){const Pe=m.stencilModeForClipping(me).ref;Pe===0&&m.terrain&&se.clear({stencil:0});const je={func:Q.EQUAL,mask:255};st.u_alpha_discard_threshold=.8,$e(new o.StencilMode(je,Pe,255,Q.KEEP,Q.KEEP,Q.INVERT)),st.u_alpha_discard_threshold=0,$e(new o.StencilMode(je,Pe,255,Q.KEEP,Q.KEEP,Q.KEEP))}else $e(m.stencilModeForClipping(me))}he&&(m.resetStencilClippingMasks(),m.terrain&&se.clear({stencil:0}))},fill:function(m,l,f,y){const x=f.paint.get("fill-color"),S=f.paint.get("fill-opacity");if(S.constantOr(1)===0)return;const C=m.colorModeForRenderPass(),I=f.paint.get("fill-pattern"),z=m.opaquePassEnabledForLayer()&&!I.constantOr(1)&&x.constantOr(o.Color.transparent).a===1&&S.constantOr(0)===1?"opaque":"translucent";if(m.renderPass===z){const V=m.depthModeForSublayer(1,m.renderPass==="opaque"?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly);s_(m,l,f,y,V,C,!1)}if(m.renderPass==="translucent"&&f.paint.get("fill-antialias")){const V=m.depthModeForSublayer(f.getPaintProperty("fill-outline-color")?2:0,o.DepthMode.ReadOnly);s_(m,l,f,y,V,C,!0)}},"fill-extrusion":function(m,l,f,y){const x=f.paint.get("fill-extrusion-opacity");if(x!==0&&m.renderPass==="translucent"){const S=new o.DepthMode(m.context.gl.LEQUAL,o.DepthMode.ReadWrite,m.depthRangeFor3D);if(x!==1||f.paint.get("fill-extrusion-pattern").constantOr(1))Ep(m,l,f,y,S,o.StencilMode.disabled,o.ColorMode.disabled),Ep(m,l,f,y,S,m.stencilModeFor3D(),m.colorModeForRenderPass()),m.resetStencilClippingMasks();else{const C=m.colorModeForRenderPass();Ep(m,l,f,y,S,o.StencilMode.disabled,C)}}},hillshade:function(m,l,f,y){if(m.renderPass!=="offscreen"&&m.renderPass!=="translucent")return;const x=m.context,S=m.depthModeForSublayer(0,o.DepthMode.ReadOnly),C=m.colorModeForRenderPass(),I=m.terrain&&m.terrain.renderingToTexture,[z,V]=m.renderPass!=="translucent"||I?[{},y]:m.stencilConfigForOverlap(y);for(const U of V){const Z=l.getTile(U);if(Z.needsHillshadePrepare&&m.renderPass==="offscreen")Th(m,Z,f,S,o.StencilMode.disabled,C);else if(m.renderPass==="translucent"){const te=I&&m.terrain?m.terrain.stencilModeForRTTOverlap(U):z[U.overscaledZ];ou(m,U,Z,f,S,te,C)}}x.viewport.set([0,0,m.width,m.height]),m.resetStencilClippingMasks()},raster:function(m,l,f,y,x,S){if(m.renderPass!=="translucent"||f.paint.get("raster-opacity")===0||!y.length)return;const C=m.context,I=C.gl,z=l.getSource(),V=m.useProgram("raster"),U=m.colorModeForRenderPass(),Z=m.terrain&&m.terrain.renderingToTexture,[te,ne]=z instanceof Se||Z?[{},y]:m.stencilConfigForOverlap(y),oe=ne[ne.length-1].overscaledZ,ae=!m.options.moving;for(const se of ne){const Q=Z?o.DepthMode.disabled:m.depthModeForSublayer(se.overscaledZ-oe,f.paint.get("raster-opacity")===1?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly,I.LESS),fe=se.toUnwrapped(),he=l.getTile(se);if(Z&&(!he||!he.hasData()))continue;const me=Z?se.projMatrix:m.transform.calculateProjMatrix(fe,ae),we=m.terrain&&Z?m.terrain.stencilModeForRTTOverlap(se):te[se.overscaledZ],ve=S?0:f.paint.get("raster-fade-duration");he.registerFadeDuration(ve);const Ee=l.findLoadedParent(se,0),ke=su(he,Ee,l,m.transform,ve);let Le,Ne;m.terrain&&m.terrain.prepareDrawTile();const yt=f.paint.get("raster-resampling")==="nearest"?I.NEAREST:I.LINEAR;C.activeTexture.set(I.TEXTURE0),he.texture.bind(yt,I.CLAMP_TO_EDGE),C.activeTexture.set(I.TEXTURE1),Ee?(Ee.texture.bind(yt,I.CLAMP_TO_EDGE),Le=Math.pow(2,Ee.tileID.overscaledZ-he.tileID.overscaledZ),Ne=[he.tileID.canonical.x*Le%1,he.tileID.canonical.y*Le%1]):he.texture.bind(yt,I.CLAMP_TO_EDGE),he.texture.useMipmap&&C.extTextureFilterAnisotropic&&m.transform.pitch>20&&I.texParameterf(I.TEXTURE_2D,C.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,C.extTextureFilterAnisotropicMax);const Oe=cb(me,Ne||[0,0],Le||1,ke,f,z instanceof Se?z.perspectiveTransform:[0,0]);if(m.prepareDrawProgram(C,V,fe),z instanceof Se)z.boundsBuffer&&z.boundsSegments&&V.draw(C,I.TRIANGLES,Q,o.StencilMode.disabled,U,o.CullFaceMode.disabled,Oe,f.id,z.boundsBuffer,m.quadTriangleIndexBuffer,z.boundsSegments);else{const{tileBoundsBuffer:rt,tileBoundsIndexBuffer:We,tileBoundsSegments:st}=m.getTileBoundsBuffers(he);V.draw(C,I.TRIANGLES,Q,we,U,o.CullFaceMode.disabled,Oe,f.id,rt,We,st)}}m.resetStencilClippingMasks()},background:function(m,l,f,y){const x=f.paint.get("background-color"),S=f.paint.get("background-opacity");if(S===0)return;const C=m.context,I=C.gl,z=m.transform,V=z.tileSize,U=f.paint.get("background-pattern");if(m.isPatternMissing(U))return;const Z=!U&&x.a===1&&S===1&&m.opaquePassEnabledForLayer()?"opaque":"translucent";if(m.renderPass!==Z)return;const te=o.StencilMode.disabled,ne=m.depthModeForSublayer(0,Z==="opaque"?o.DepthMode.ReadWrite:o.DepthMode.ReadOnly),oe=m.colorModeForRenderPass(),ae=m.useProgram(U?"backgroundPattern":"background");let se,Q=y;Q||(se=m.getBackgroundTiles(),Q=Object.values(se).map(fe=>fe.tileID)),U&&(C.activeTexture.set(I.TEXTURE0),m.imageManager.bind(m.context));for(const fe of Q){const he=fe.toUnwrapped(),me=y?fe.projMatrix:m.transform.calculateProjMatrix(he);m.prepareDrawTile();const we=l?l.getTile(fe):se?se[fe.key]:new o.Tile(fe,V,z.zoom,m),ve=U?wp(me,S,m,U,{tileID:fe,tileSize:V}):ub(me,S,x);m.prepareDrawProgram(C,ae,he);const{tileBoundsBuffer:Ee,tileBoundsIndexBuffer:ke,tileBoundsSegments:Le}=m.getTileBoundsBuffers(we);ae.draw(C,I.TRIANGLES,ne,te,oe,o.CullFaceMode.disabled,ve,f.id,Ee,ke,Le)}},sky:function(m,l,f){const y=m.transform,x=y.projection.name==="mercator"||y.projection.name==="globe"?1:o.smoothstep(7,8,y.zoom),S=f.paint.get("sky-opacity")*x;if(S===0)return;const C=m.context,I=f.paint.get("sky-type"),z=new o.DepthMode(C.gl.LEQUAL,o.DepthMode.ReadOnly,[0,1]),V=m.frameCounter/1e3%1;I==="atmosphere"?m.renderPass==="offscreen"?f.needsSkyboxCapture(m)&&(function(U,Z,te,ne){const oe=U.context,ae=oe.gl;let se=Z.skyboxFbo;if(!se){se=Z.skyboxFbo=oe.createFramebuffer(32,32,!1),Z.skyboxGeometry=new Rh(oe),Z.skyboxTexture=oe.gl.createTexture(),ae.bindTexture(ae.TEXTURE_CUBE_MAP,Z.skyboxTexture),ae.texParameteri(ae.TEXTURE_CUBE_MAP,ae.TEXTURE_WRAP_S,ae.CLAMP_TO_EDGE),ae.texParameteri(ae.TEXTURE_CUBE_MAP,ae.TEXTURE_WRAP_T,ae.CLAMP_TO_EDGE),ae.texParameteri(ae.TEXTURE_CUBE_MAP,ae.TEXTURE_MIN_FILTER,ae.LINEAR),ae.texParameteri(ae.TEXTURE_CUBE_MAP,ae.TEXTURE_MAG_FILTER,ae.LINEAR);for(let me=0;me<6;++me)ae.texImage2D(ae.TEXTURE_CUBE_MAP_POSITIVE_X+me,0,ae.RGBA,32,32,0,ae.RGBA,ae.UNSIGNED_BYTE,null)}oe.bindFramebuffer.set(se.framebuffer),oe.viewport.set([0,0,32,32]);const Q=Z.getCenter(U,!0),fe=U.useProgram("skyboxCapture"),he=new Float64Array(16);o.identity(he),o.rotateY(he,he,.5*-Math.PI),Ar(oe,Z,fe,he,Q,0),o.identity(he),o.rotateY(he,he,.5*Math.PI),Ar(oe,Z,fe,he,Q,1),o.identity(he),o.rotateX(he,he,.5*-Math.PI),Ar(oe,Z,fe,he,Q,2),o.identity(he),o.rotateX(he,he,.5*Math.PI),Ar(oe,Z,fe,he,Q,3),o.identity(he),Ar(oe,Z,fe,he,Q,4),o.identity(he),o.rotateY(he,he,Math.PI),Ar(oe,Z,fe,he,Q,5),oe.viewport.set([0,0,U.width,U.height])}(m,f),f.markSkyboxValid(m)):m.renderPass==="sky"&&function(U,Z,te,ne,oe){const ae=U.context,se=ae.gl,Q=U.transform,fe=U.useProgram("skybox");ae.activeTexture.set(se.TEXTURE0),se.bindTexture(se.TEXTURE_CUBE_MAP,Z.skyboxTexture);const he=((me,we,ve,Ee,ke)=>({u_matrix:me,u_sun_direction:we,u_cubemap:0,u_opacity:Ee,u_temporal_offset:ke}))(Q.skyboxMatrix,Z.getCenter(U,!1),0,ne,oe);U.prepareDrawProgram(ae,fe),fe.draw(ae,se.TRIANGLES,te,o.StencilMode.disabled,U.colorModeForRenderPass(),o.CullFaceMode.backCW,he,"skybox",Z.skyboxGeometry.vertexBuffer,Z.skyboxGeometry.indexBuffer,Z.skyboxGeometry.segment)}(m,f,z,S,V):I==="gradient"&&m.renderPass==="sky"&&function(U,Z,te,ne,oe){const ae=U.context,se=ae.gl,Q=U.transform,fe=U.useProgram("skyboxGradient");Z.skyboxGeometry||(Z.skyboxGeometry=new Rh(ae)),ae.activeTexture.set(se.TEXTURE0);let he=Z.colorRampTexture;he||(he=Z.colorRampTexture=new o.Texture(ae,Z.colorRamp,se.RGBA)),he.bind(se.LINEAR,se.CLAMP_TO_EDGE);const me=((we,ve,Ee,ke,Le)=>({u_matrix:we,u_color_ramp:0,u_center_direction:ve,u_radius:o.degToRad(Ee),u_opacity:ke,u_temporal_offset:Le}))(Q.skyboxMatrix,Z.getCenter(U,!1),Z.paint.get("sky-gradient-radius"),ne,oe);U.prepareDrawProgram(ae,fe),fe.draw(ae,se.TRIANGLES,te,o.StencilMode.disabled,U.colorModeForRenderPass(),o.CullFaceMode.backCW,me,"skyboxGradient",Z.skyboxGeometry.vertexBuffer,Z.skyboxGeometry.indexBuffer,Z.skyboxGeometry.segment)}(m,f,z,S,V)},debug:function(m,l,f){for(let y=0;y<f.length;y++)Mp(m,l,f[y])},custom:function(m,l,f,y){const x=m.context,S=f.implementation;if(!m.transform.projection.unsupportedLayers||!m.transform.projection.unsupportedLayers.includes("custom")||m.terrain&&(m.terrain.renderingToTexture||m.renderPass==="offscreen")&&f.isLayerDraped()){if(m.renderPass==="offscreen"){const C=S.prerender;if(C){if(m.setCustomLayerDefaults(),x.setColorMode(m.colorModeForRenderPass()),m.transform.projection.name==="globe"){const I=m.transform.pointMerc;C.call(S,x.gl,m.transform.customLayerMatrix(),m.transform.getProjection(),m.transform.globeToMercatorMatrix(),o.globeToMercatorTransition(m.transform.zoom),[I.x,I.y],m.transform.pixelsPerMeterRatio)}else C.call(S,x.gl,m.transform.customLayerMatrix());x.setDirty(),m.setBaseState()}}else if(m.renderPass==="translucent"){if(m.terrain&&m.terrain.renderingToTexture){const I=S.renderToTile;if(I){const z=y[0].canonical,V=new o.MercatorCoordinate(z.x+y[0].wrap*(1<<z.z),z.y,z.z);x.setDepthMode(o.DepthMode.disabled),x.setStencilMode(o.StencilMode.disabled),x.setColorMode(m.colorModeForRenderPass()),m.setCustomLayerDefaults(),I.call(S,x.gl,V),x.setDirty(),m.setBaseState()}return}m.setCustomLayerDefaults(),x.setColorMode(m.colorModeForRenderPass()),x.setStencilMode(o.StencilMode.disabled);const C=S.renderingMode==="3d"?new o.DepthMode(m.context.gl.LEQUAL,o.DepthMode.ReadWrite,m.depthRangeFor3D):m.depthModeForSublayer(0,o.DepthMode.ReadOnly);if(x.setDepthMode(C),m.transform.projection.name==="globe"){const I=m.transform.pointMerc;S.render(x.gl,m.transform.customLayerMatrix(),m.transform.getProjection(),m.transform.globeToMercatorMatrix(),o.globeToMercatorTransition(m.transform.zoom),[I.x,I.y],m.transform.pixelsPerMeterRatio)}else S.render(x.gl,m.transform.customLayerMatrix());x.setDirty(),m.setBaseState(),x.bindFramebuffer.set(null)}}else o.warnOnce("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")}};class du{constructor(l,f,y=!1){this.context=new ce(l,y),this.transform=f,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.setup(),this.numSublayers=o.SourceCache.maxUnderzooming+o.SourceCache.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Vy,this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={}}updateTerrain(l,f){const y=!!l&&!!l.terrain&&this.transform.projection.supportsTerrain;if(!(y||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new pp(this,l));const x=this._terrain;this.transform.elevation=y?x:null,x.update(l,this.transform,f)}_updateFog(l){const f=l.fog;if(!f||this.transform.projection.name==="globe"||f.getOpacity(this.transform.pitch)<1||f.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[y,x]=f.getFovAdjustedRange(this.transform._fov);if(y>x)return void(this.transform.fogCullDistSq=null);const S=y+.78*(x-y);this.transform.fogCullDistSq=S*S}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled?this._terrain:null}resize(l,f){if(this.width=l*o.exported.devicePixelRatio,this.height=f*o.exported.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const y of this.style.order)this.style._layers[y].resize()}setup(){const l=this.context,f=new o.StructArrayLayout2i4;f.emplaceBack(0,0),f.emplaceBack(o.EXTENT,0),f.emplaceBack(0,o.EXTENT),f.emplaceBack(o.EXTENT,o.EXTENT),this.tileExtentBuffer=l.createVertexBuffer(f,o.posAttributes.members),this.tileExtentSegments=o.SegmentVector.simpleSegment(0,0,4,2);const y=new o.StructArrayLayout2i4;y.emplaceBack(0,0),y.emplaceBack(o.EXTENT,0),y.emplaceBack(0,o.EXTENT),y.emplaceBack(o.EXTENT,o.EXTENT),this.debugBuffer=l.createVertexBuffer(y,o.posAttributes.members),this.debugSegments=o.SegmentVector.simpleSegment(0,0,4,5);const x=new o.StructArrayLayout2i4;x.emplaceBack(-1,-1),x.emplaceBack(1,-1),x.emplaceBack(-1,1),x.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(x,o.posAttributes.members),this.viewportSegments=o.SegmentVector.simpleSegment(0,0,4,2);const S=new o.StructArrayLayout4i8;S.emplaceBack(0,0,0,0),S.emplaceBack(o.EXTENT,0,o.EXTENT,0),S.emplaceBack(0,o.EXTENT,0,o.EXTENT),S.emplaceBack(o.EXTENT,o.EXTENT,o.EXTENT,o.EXTENT),this.mercatorBoundsBuffer=l.createVertexBuffer(S,o.boundsAttributes.members),this.mercatorBoundsSegments=o.SegmentVector.simpleSegment(0,0,4,2);const C=new o.StructArrayLayout3ui6;C.emplaceBack(0,1,2),C.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(C);const I=new o.StructArrayLayout1ui2;for(const V of[0,1,3,2,0])I.emplaceBack(V);this.debugIndexBuffer=l.createIndexBuffer(I),this.emptyTexture=new o.Texture(l,new o.RGBAImage({width:1,height:1},Uint8Array.of(0,0,0,0)),l.gl.RGBA),this.identityMat=o.create();const z=this.context.gl;this.stencilClearMode=new o.StencilMode({func:z.ALWAYS,mask:0},0,255,z.ZERO,z.ZERO,z.ZERO),this.loadTimeStamps.push(o.window.performance.now()),this.atmosphereBuffer=new pb(this.context)}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(l){return l._makeTileBoundsBuffers(this.context,this.transform.projection),l._tileBoundsBuffer?{tileBoundsBuffer:l._tileBoundsBuffer,tileBoundsIndexBuffer:l._tileBoundsIndexBuffer,tileBoundsSegments:l._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const l=this.context,f=l.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.useProgram("clippingMask").draw(l,f.TRIANGLES,o.DepthMode.disabled,this.stencilClearMode,o.ColorMode.disabled,o.CullFaceMode.disabled,Pr(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(l,f,y){if(!f||this.currentStencilSource===f.id||!l.isTileClipped()||!y||y.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let I=!1;for(const z of y)if(this._tileClippingMaskIDs[z.key]===void 0){I=!0;break}if(!I)return}this.currentStencilSource=f.id;const x=this.context,S=x.gl;this.nextStencilID+y.length>256&&this.clearStencil(),x.setColorMode(o.ColorMode.disabled),x.setDepthMode(o.DepthMode.disabled);const C=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(const I of y){const z=f.getTile(I),V=this._tileClippingMaskIDs[I.key]=this.nextStencilID++,{tileBoundsBuffer:U,tileBoundsIndexBuffer:Z,tileBoundsSegments:te}=this.getTileBoundsBuffers(z);C.draw(x,S.TRIANGLES,o.DepthMode.disabled,new o.StencilMode({func:S.ALWAYS,mask:0},V,255,S.KEEP,S.KEEP,S.REPLACE),o.ColorMode.disabled,o.CullFaceMode.disabled,Pr(I.projMatrix),"$clipping",U,Z,te)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const l=this.nextStencilID++,f=this.context.gl;return new o.StencilMode({func:f.NOTEQUAL,mask:255},l,255,f.KEEP,f.KEEP,f.REPLACE)}stencilModeForClipping(l){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(l);const f=this.context.gl;return new o.StencilMode({func:f.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,f.KEEP,f.KEEP,f.REPLACE)}stencilConfigForOverlap(l){const f=this.context.gl,y=l.sort((C,I)=>I.overscaledZ-C.overscaledZ),x=y[y.length-1].overscaledZ,S=y[0].overscaledZ-x+1;if(S>1){this.currentStencilSource=void 0,this.nextStencilID+S>256&&this.clearStencil();const C={};for(let I=0;I<S;I++)C[I+x]=new o.StencilMode({func:f.GEQUAL,mask:255},I+this.nextStencilID,255,f.KEEP,f.KEEP,f.REPLACE);return this.nextStencilID+=S,[C,y]}return[{[x]:o.StencilMode.disabled},y]}colorModeForRenderPass(){const l=this.context.gl;return this._showOverdrawInspector?new o.ColorMode([l.CONSTANT_COLOR,l.ONE],new o.Color(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?o.ColorMode.unblended:o.ColorMode.alphaBlended}depthModeForSublayer(l,f,y){if(!this.opaquePassEnabledForLayer())return o.DepthMode.disabled;const x=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new o.DepthMode(y||this.context.gl.LEQUAL,f,[x,x])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(l,f){this.style=l,this.options=f,this.imageManager=l.imageManager,this.glyphManager=l.glyphManager,this.symbolFadeChange=l.placement.symbolFadeChange(o.exported.now()),this.imageManager.beginFrame();const y=this.style.order,x=this.style._sourceCaches;for(const V in x){const U=x[V];U.used&&U.prepare(this.context)}const S={},C={},I={};for(const V in x){const U=x[V];S[V]=U.getVisibleCoordinates(),C[V]=S[V].slice().reverse(),I[V]=U.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let V=0;V<y.length;V++)if(this.style._layers[y[V]].is3D()){this.opaquePassCutoff=V;break}if(this.terrain&&(this.terrain.updateTileBinding(I),this.opaquePassCutoff=0),this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new o.GlobeSharedBuffers(this.context)),!o.isMapAuthenticated(this.context.gl))return;this.renderPass="offscreen";for(const V of y){const U=this.style._layers[V],Z=l._getLayerSourceCache(U);if(!U.hasOffscreenPass()||U.isHidden(this.transform.zoom))continue;const te=Z?C[Z.id]:void 0;(U.type==="custom"||U.isSky()||te&&te.length)&&this.renderLayer(this,Z,U,te)}this.depthRangeFor3D=[0,1-(l.order.length+2)*this.numSublayers*this.depthEpsilon];const z=this.terrain;if(z&&(this.style.hasSymbolLayers()||this.style.hasCircleLayers())&&z.drawDepth(),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]),this.context.clear({color:f.showOverdrawInspector?o.Color.black:o.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=f.showOverdrawInspector,this.renderPass="opaque",!this.terrain)for(this.currentLayer=y.length-1;this.currentLayer>=0;this.currentLayer--){const V=this.style._layers[y[this.currentLayer]],U=l._getLayerSourceCache(V);if(V.isSky())continue;const Z=U?C[U.id]:void 0;this._renderTileClippingMasks(V,U,Z),this.renderLayer(this,U,V,Z)}if(this.style.fog&&this.transform.projection.supportsFog&&function(V,U){const Z=V.context,te=Z.gl,ne=V.transform,oe=new o.DepthMode(te.LEQUAL,o.DepthMode.ReadOnly,[0,1]),ae=V.useProgram("globeAtmosphere",null,ne.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"]),se=o.globeToMercatorTransition(ne.zoom),Q=U.properties.get("color").toArray01(),fe=U.properties.get("high-color").toArray01(),he=U.properties.get("space-color").toArray01PremultipliedAlpha(),me=o.identity$1([]);o.rotateY$1(me,me,-o.degToRad(ne._center.lng)),o.rotateX$1(me,me,o.degToRad(ne._center.lat)),o.rotateZ$1(me,me,ne.angle),o.rotateX$1(me,me,-ne._pitch);const we=o.fromQuat(new Float32Array(16),me),ve=o.mapValue(U.properties.get("star-intensity"),0,1,0,.25),Ee=5e-4,ke=o.mapValue(U.properties.get("horizon-blend"),0,1,Ee,.25),Le=o.globeUseCustomAntiAliasing(V,Z,ne)&&ke===Ee?ne.worldSize/(2*Math.PI*1.025)-1:ne.globeRadius,Ne=V.frameCounter/1e3%1,yt=o.length(ne.globeCenterInViewSpace),Oe=Math.sqrt(Math.pow(yt,2)-Math.pow(Le,2)),rt=Math.acos(Oe/yt),We=(($e,Pe,je,ot,ct,Ft,dr,Lt,It,Nt,xr,qt,Fr,Ur)=>({u_frustum_tl:$e,u_frustum_tr:Pe,u_frustum_br:je,u_frustum_bl:ot,u_horizon:ct,u_transition:Ft,u_fadeout_range:dr,u_color:Lt,u_high_color:It,u_space_color:Nt,u_star_intensity:xr,u_star_size:5*o.exported.devicePixelRatio,u_star_density:0,u_temporal_offset:qt,u_horizon_angle:Fr,u_rotation_matrix:Ur}))(ne.frustumCorners.TL,ne.frustumCorners.TR,ne.frustumCorners.BR,ne.frustumCorners.BL,ne.frustumCorners.horizon,se,ke,Q,fe,he,ve,Ne,rt,we);V.prepareDrawProgram(Z,ae);const st=V.atmosphereBuffer;st&&ae.draw(Z,te.TRIANGLES,oe,o.StencilMode.disabled,o.ColorMode.alphaBlended,o.CullFaceMode.backCW,We,"skybox",st.vertexBuffer,st.indexBuffer,st.segments)}(this,this.style.fog),this.renderPass="sky",(o.globeToMercatorTransition(this.transform.zoom)>0||this.transform.projection.name!=="globe")&&this.transform.isHorizonVisible())for(this.currentLayer=0;this.currentLayer<y.length;this.currentLayer++){const V=this.style._layers[y[this.currentLayer]],U=l._getLayerSourceCache(V);V.isSky()&&this.renderLayer(this,U,V,U?C[U.id]:void 0)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<y.length;){const V=this.style._layers[y[this.currentLayer]],U=l._getLayerSourceCache(V);if(V.isSky()){++this.currentLayer;continue}if(this.terrain&&this.style.isLayerDraped(V)){if(V.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer);continue}const Z=U?(V.type==="symbol"?I:C)[U.id]:void 0;this._renderTileClippingMasks(V,U,U?S[U.id]:void 0),this.renderLayer(this,U,V,Z),++this.currentLayer}if(this.terrain&&this.terrain.postRender(),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let V=null;o.values(this.style._layers).forEach(U=>{const Z=l._getLayerSourceCache(U);Z&&!U.isHidden(this.transform.zoom)&&(!V||V.getSource().maxzoom<Z.getSource().maxzoom)&&(V=Z)}),V&&this.options.showTileBoundaries&&Cp.debug(this,V,V.getVisibleCoordinates())}this.options.showPadding&&function(V){const U=V.transform.padding;ds(V,V.transform.height-(U.top||0),3,Tp),ds(V,U.bottom||0,3,Ap),Wl(V,U.left||0,3,l_),Wl(V,V.transform.width-(U.right||0),3,c_);const Z=V.transform.centerPoint;(function(te,ne,oe,ae){fu(te,ne-1,oe-10,2,20,ae),fu(te,ne-10,oe-1,20,2,ae)})(V,Z.x,V.transform.height-Z.y,u_)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(o.window.performance.now()),this.saveCanvasCopy())}renderLayer(l,f,y,x){y.isHidden(this.transform.zoom)||(y.type==="background"||y.type==="sky"||y.type==="custom"||x&&x.length)&&(this.id=y.id,this.gpuTimingStart(y),(!l.transform.projection.unsupportedLayers||!l.transform.projection.unsupportedLayers.includes(y.type)||l.terrain&&y.type==="custom")&&Cp[y.type](l,f,y,x,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(l){if(!this.options.gpuTiming)return;const f=this.context.extTimerQuery;let y=this.gpuTimers[l.id];y||(y=this.gpuTimers[l.id]={calls:0,cpuTime:0,query:f.createQueryEXT()}),y.calls++,f.beginQueryEXT(f.TIME_ELAPSED_EXT,y.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const l=this.context.extTimerQuery,f=l.createQueryEXT();this.deferredRenderGpuTimeQueries.push(f),l.beginQueryEXT(l.TIME_ELAPSED_EXT,f)}}gpuTimingDeferredRenderEnd(){if(!this.options.gpuTimingDeferredRender)return;const l=this.context.extTimerQuery;l.endQueryEXT(l.TIME_ELAPSED_EXT)}gpuTimingEnd(){if(!this.options.gpuTiming)return;const l=this.context.extTimerQuery;l.endQueryEXT(l.TIME_ELAPSED_EXT)}collectGpuTimers(){const l=this.gpuTimers;return this.gpuTimers={},l}collectDeferredRenderGpuQueries(){const l=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],l}queryGpuTimers(l){const f={};for(const y in l){const x=l[y],S=this.context.extTimerQuery,C=S.getQueryObjectEXT(x.query,S.QUERY_RESULT_EXT)/1e6;S.deleteQueryEXT(x.query),f[y]=C}return f}queryGpuTimeDeferredRender(l){if(!this.options.gpuTimingDeferredRender)return 0;const f=this.context.extTimerQuery;let y=0;for(const x of l)y+=f.getQueryObjectEXT(x,f.QUERY_RESULT_EXT)/1e6,f.deleteQueryEXT(x);return y}translatePosMatrix(l,f,y,x,S){if(!y[0]&&!y[1])return l;const C=S?x==="map"?this.transform.angle:0:x==="viewport"?-this.transform.angle:0;if(C){const V=Math.sin(C),U=Math.cos(C);y=[y[0]*U-y[1]*V,y[0]*V+y[1]*U]}const I=[S?y[0]:Zt(f,y[0],this.transform.zoom),S?y[1]:Zt(f,y[1],this.transform.zoom),0],z=new Float32Array(16);return o.translate(z,l,I),z}saveTileTexture(l){const f=this._tileTextures[l.size[0]];f?f.push(l):this._tileTextures[l.size[0]]=[l]}getTileTexture(l){const f=this._tileTextures[l];return f&&f.length>0?f.pop():null}isPatternMissing(l){return l===null||l!==void 0&&!this.imageManager.getPattern(l.toString())}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture}currentGlobalDefines(){const l=this.terrain&&this.terrain.renderingToTexture,f=this.terrain&&this.terrain.exaggeration()===0,y=this.style&&this.style.fog,x=[];return this.terrainRenderModeElevated()&&x.push("TERRAIN"),this.transform.projection.name==="globe"&&x.push("GLOBE"),f&&x.push("ZERO_EXAGGERATION"),y&&!l&&y.getOpacity(this.transform.pitch)!==0&&x.push("FOG"),l&&x.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&x.push("OVERDRAW_INSPECTOR"),x}useProgram(l,f,y){this.cache=this.cache||{};const x=y||[],S=this.currentGlobalDefines().concat(x),C=mp.cacheKey(lp[l],l,S,f);return this.cache[C]||(this.cache[C]=new mp(this.context,l,lp[l],f,hb[l],S)),this.cache[C]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=o.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){this._terrain&&this._terrain.destroy(),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.atmosphereBuffer&&this.atmosphereBuffer.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}prepareDrawProgram(l,f,y){if(this.terrain&&this.terrain.renderingToTexture)return;const x=this.style.fog;if(x){const S=x.getOpacity(this.transform.pitch),C=((I,z,V,U,Z,te,ne,oe,ae,se,Q)=>{const fe=I.transform,he=z.properties.get("color").toArray01();he[3]=U;const me=I.frameCounter/1e3%1;return{u_fog_matrix:V?fe.calculateFogTileMatrix(V):I.identityMat,u_fog_range:z.getFovAdjustedRange(fe._fov),u_fog_color:he,u_fog_horizon_blend:z.properties.get("horizon-blend"),u_fog_temporal_offset:me,u_frustum_tl:Z,u_frustum_tr:te,u_frustum_br:ne,u_frustum_bl:oe,u_globe_pos:ae,u_globe_radius:se,u_viewport:Q,u_globe_transition:o.globeToMercatorTransition(fe.zoom),u_is_globe:+(fe.projection.name==="globe")}})(this,x,y,S,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*o.exported.devicePixelRatio,this.transform.height*o.exported.devicePixelRatio]);f.setFogUniformValues(l,C)}}setTileLoadedFlag(l){this.tileLoaded=l}saveCanvasCopy(){const l=this.canvasCopy();l&&(this.frameCopies.push(l),this.tileLoaded=!1)}canvasCopy(){const l=this.context.gl,f=l.createTexture();return l.bindTexture(l.TEXTURE_2D,f),l.copyTexImage2D(l.TEXTURE_2D,0,l.RGBA,0,0,l.drawingBufferWidth,l.drawingBufferHeight,0),f}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const l=this.style&&this.style.fog;return!!l&&l.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const l=this._backgroundTiles,f=this._backgroundTiles={},y=this.transform.coveringTiles({tileSize:512});for(const x of y)f[x.key]=l[x.key]||new o.Tile(x,512,this.transform.tileZoom,this);return f}clearBackgroundTiles(){this._backgroundTiles={}}}class Pp{constructor(l=0,f=0,y=0,x=0){if(isNaN(l)||l<0||isNaN(f)||f<0||isNaN(y)||y<0||isNaN(x)||x<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=f,this.left=y,this.right=x}interpolate(l,f,y){return f.top!=null&&l.top!=null&&(this.top=o.number(l.top,f.top,y)),f.bottom!=null&&l.bottom!=null&&(this.bottom=o.number(l.bottom,f.bottom,y)),f.left!=null&&l.left!=null&&(this.left=o.number(l.left,f.left,y)),f.right!=null&&l.right!=null&&(this.right=o.number(l.right,f.right,y)),this}getCenter(l,f){const y=o.clamp((this.left+l-this.right)/2,0,l),x=o.clamp((this.top+f-this.bottom)/2,0,f);return new o.pointGeometry(y,x)}equals(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right}clone(){return new Pp(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function h_(m,l){const f=o.getColumn(m,3);o.fromQuat(m,l),o.setColumn(m,3,f)}function zh(m,l){const f=o.identity$1([]);return o.rotateZ$1(f,f,-l),o.rotateX$1(f,f,-m),f}function f_(m,l){const f=[m[0],m[1],0],y=[l[0],l[1],0];if(o.length(f)>=1e-15){const C=o.normalize([],f);o.scale$2(y,C,o.dot(y,C)),l[0]=y[0],l[1]=y[1]}const x=o.cross([],l,m);if(o.len(x)<1e-15)return null;const S=Math.atan2(-x[1],x[0]);return zh(Math.atan2(Math.sqrt(m[0]*m[0]+m[1]*m[1]),-m[2]),S)}class Bh{constructor(l,f){this.position=l,this.orientation=f}get position(){return this._position}set position(l){if(l){const f=l instanceof o.MercatorCoordinate?l:new o.MercatorCoordinate(l[0],l[1],l[2]);this._renderWorldCopies&&(f.x=o.wrap(f.x,0,1)),this._position=f}else this._position=null}lookAtPoint(l,f){if(this.orientation=null,!this.position)return;const y=this.position,x=this._elevation?this._elevation.getAtPointOrZero(o.MercatorCoordinate.fromLngLat(l)):0,S=o.MercatorCoordinate.fromLngLat(l,x),C=[S.x-y.x,S.y-y.y,S.z-y.z];f||(f=[0,0,1]),f[2]=Math.abs(f[2]),this.orientation=f_(C,f)}setPitchBearing(l,f){this.orientation=zh(o.degToRad(l),o.degToRad(-f))}}class Xl{constructor(l,f){this._transform=o.identity([]),this.orientation=f,this.position=l}get mercatorPosition(){const l=this.position;return new o.MercatorCoordinate(l[0],l[1],l[2])}get position(){const l=o.getColumn(this._transform,3);return[l[0],l[1],l[2]]}set position(l){var f;l&&o.setColumn(this._transform,3,[(f=l)[0],f[1],f[2],1])}get orientation(){return this._orientation}set orientation(l){this._orientation=l||o.identity$1([]),l&&h_(this._transform,this._orientation)}getPitchBearing(){const l=this.forward(),f=this.right();return{bearing:Math.atan2(-f[1],f[0]),pitch:Math.atan2(Math.sqrt(l[0]*l[0]+l[1]*l[1]),-l[2])}}setPitchBearing(l,f){this._orientation=zh(l,f),h_(this._transform,this._orientation)}forward(){const l=o.getColumn(this._transform,2);return[-l[0],-l[1],-l[2]]}up(){const l=o.getColumn(this._transform,1);return[-l[0],-l[1],-l[2]]}right(){const l=o.getColumn(this._transform,0);return[l[0],l[1],l[2]]}getCameraToWorld(l,f){const y=new Float64Array(16);return o.invert(y,this.getWorldToCamera(l,f)),y}getWorldToCameraPosition(l,f,y){const x=this.position;o.scale$2(x,x,-l);const S=new Float64Array(16);return o.fromScaling(S,[y,y,y]),o.translate(S,S,x),S[10]*=f,S}getWorldToCamera(l,f){const y=new Float64Array(16),x=new Float64Array(4),S=this.position;return o.conjugate(x,this._orientation),o.scale$2(S,S,-l),o.fromQuat(y,x),o.translate(y,y,S),y[1]*=-1,y[5]*=-1,y[9]*=-1,y[13]*=-1,y[8]*=f,y[9]*=f,y[10]*=f,y[11]*=f,y}getCameraToClipPerspective(l,f,y,x){const S=new Float64Array(16);return o.perspective(S,l,f,y,x),S}getDistanceToElevation(l,f=!1){const y=l===0?0:o.mercatorZfromAltitude(l,f?o.latFromMercatorY(this.position[1]):this.position[1]),x=this.forward();return(y-this.position[2])/x[2]}clone(){return new Xl([...this.position],[...this.orientation])}}function Kl(m,l){const f=Js(m.projection,m.zoom,m.width,m.height),y=function(S,C,I,z,V){const U=new o.LngLat(I.lng-180*Qs,I.lat),Z=new o.LngLat(I.lng+180*Qs,I.lat),te=S.project(U.lng,U.lat),ne=S.project(Z.lng,Z.lat),oe=-Math.atan2(ne.y-te.y,ne.x-te.x),ae=o.MercatorCoordinate.fromLngLat(I);ae.y=o.clamp(ae.y,-.999975,.999975);const se=ae.toLngLat(),Q=S.project(se.lng,se.lat),fe=o.MercatorCoordinate.fromLngLat(se);fe.x+=Qs;const he=fe.toLngLat(),me=S.project(he.lng,he.lat),we=mu(me.x-Q.x,me.y-Q.y,oe),ve=o.MercatorCoordinate.fromLngLat(se);ve.y+=Qs;const Ee=ve.toLngLat(),ke=S.project(Ee.lng,Ee.lat),Le=mu(ke.x-Q.x,ke.y-Q.y,oe),Ne=Math.abs(we.x)/Math.abs(Le.y),yt=o.identity([]);o.rotateZ(yt,yt,-oe*(1-(V?0:z)));const Oe=o.identity([]);return o.scale(Oe,Oe,[1,1-(1-Ne)*z,1]),Oe[4]=-Le.x/Le.y*z,o.rotateZ(Oe,Oe,oe),o.multiply(Oe,yt,Oe),Oe}(m.projection,0,m.center,f,l),x=$h(m);return o.scale(y,y,[x,x,1]),y}function $h(m){const l=m.projection,f=Js(m.projection,m.zoom,m.width,m.height),y=pu(l,m.center),x=pu(l,o.LngLat.convert(l.center));return Math.pow(2,y*f+(1-f)*x)}function Js(m,l,f,y,x=1/0){const S=m.range;if(!S)return 0;const C=Math.min(x,Math.max(f,y)),I=Math.log(C/1024)/Math.LN2;return o.smoothstep(S[0]+I,S[1]+I,l)}const Qs=1/4e4;function pu(m,l){const f=o.clamp(l.lat,-o.MAX_MERCATOR_LATITUDE,o.MAX_MERCATOR_LATITUDE),y=new o.LngLat(l.lng-180*Qs,f),x=new o.LngLat(l.lng+180*Qs,f),S=m.project(y.lng,f),C=m.project(x.lng,f),I=o.MercatorCoordinate.fromLngLat(y),z=o.MercatorCoordinate.fromLngLat(x),V=C.x-S.x,U=C.y-S.y,Z=z.x-I.x,te=z.y-I.y,ne=Math.sqrt((Z*Z+te*te)/(V*V+U*U));return Math.log(ne)/Math.LN2}function mu(m,l,f){const y=Math.cos(f),x=Math.sin(f);return{x:m*y-l*x,y:m*x+l*y}}class Pt{constructor(l,f,y,x,S,C,I){this.tileSize=512,this._renderWorldCopies=S===void 0||S,this._minZoom=l||0,this._maxZoom=f||22,this._minPitch=y??0,this._maxPitch=x??60,this.setProjection(C),this.setMaxBounds(I),this.width=0,this.height=0,this._center=new o.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new Pp,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._distanceTileDataCache={},this._camera=new Xl,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._horizonShift=.1}clone(){const l=new Pt(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return l._elevation=this._elevation,l._centerAltitude=this._centerAltitude,l._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,l.tileSize=this.tileSize,l.mercatorFromTransition=this.mercatorFromTransition,l.width=this.width,l.height=this.height,l.cameraElevationReference=this.cameraElevationReference,l._center=this._center,l._setZoom(this.zoom),l._seaLevelZoom=this._seaLevelZoom,l.angle=this.angle,l._fov=this._fov,l._pitch=this._pitch,l._nearZ=this._nearZ,l._farZ=this._farZ,l._averageElevation=this._averageElevation,l._unmodified=this._unmodified,l._edgeInsets=this._edgeInsets.clone(),l._camera=this._camera.clone(),l._calcMatrices(),l.freezeTileCoverage=this.freezeTileCoverage,l.frustumCorners=this.frustumCorners,l}get elevation(){return this._elevation}set elevation(l){this._elevation!==l&&(this._elevation=l,this._updateCameraOnTerrain(),this._calcMatrices())}updateElevation(l,f=!1){const y=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||y)&&this._updateCameraOnTerrain(),(l||y)&&this._constrainCamera(f),this._calcMatrices()}getProjection(){return o.pick(this.projection,["name","center","parallels"])}setProjection(l){this.projectionOptions=l||{name:"mercator"};const f=this.projection?this.getProjection():void 0;this.projection=o.getProjection(this.projectionOptions);const y=!v(f,this.getProjection());return y&&this._calcMatrices(),this.mercatorFromTransition=!1,y}setMercatorFromTransition(){const l=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=o.getProjection({name:"mercator"});const f=l!==this.projection.name;return f&&this._calcMatrices(),f}get minZoom(){return this._minZoom}set minZoom(l){this._minZoom!==l&&(this._minZoom=l,this.zoom=Math.max(this.zoom,l))}get maxZoom(){return this._maxZoom}set maxZoom(l){this._maxZoom!==l&&(this._maxZoom=l,this.zoom=Math.min(this.zoom,l))}get minPitch(){return this._minPitch}set minPitch(l){this._minPitch!==l&&(this._minPitch=l,this.pitch=Math.max(this.pitch,l))}get maxPitch(){return this._maxPitch}set maxPitch(l){this._maxPitch!==l&&(this._maxPitch=l,this.pitch=Math.min(this.pitch,l))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const l=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(l))}get cameraWorldSize(){const l=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(l))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return o.mercatorZfromAltitude(this.center.lat,this.cameraWorldSizeForFog)}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.pointGeometry(this.width,this.height)}get bearing(){return o.wrap(this.rotation,-180,180)}set bearing(l){this.rotation=l}get rotation(){return-this.angle/Math.PI*180}set rotation(l){const f=-l*Math.PI/180;var y;this.angle!==f&&(this._unmodified=!1,this.angle=f,this._calcMatrices(),this.rotationMatrix=(y=new o.ARRAY_TYPE(4),o.ARRAY_TYPE!=Float32Array&&(y[1]=0,y[2]=0),y[0]=1,y[3]=1,y),function(x,S,C){var I=S[0],z=S[1],V=S[2],U=S[3],Z=Math.sin(C),te=Math.cos(C);x[0]=I*te+V*Z,x[1]=z*te+U*Z,x[2]=I*-Z+V*te,x[3]=z*-Z+U*te}(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(l){const f=o.clamp(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==f&&(this._unmodified=!1,this._pitch=f,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const l=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/l)}set fov(l){l=Math.max(.01,Math.min(60,l)),this._fov!==l&&(this._unmodified=!1,this._fov=o.degToRad(l),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(l){this._averageElevation=l,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(l){const f=Math.min(Math.max(l,this.minZoom),this.maxZoom);this._zoom!==f&&(this._unmodified=!1,this._setZoom(f),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(l){this._zoom=l,this.scale=this.zoomScale(l),this.tileZoom=Math.floor(l),this.zoomFraction=l-this.tileZoom}_updateCameraOnTerrain(){if(!this._elevation||!this._elevation.isDataAvailableAtPoint(this.locationCoordinate(this.center)))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const l=this._elevation;this._centerAltitude=l.getAtPointOrZero(this.locationCoordinate(this.center)),this._centerAltitudeValidForExaggeration=l.exaggeration(),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const l=this._elevation,f=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],y=this.horizonLineFromTop();let x=0,S=0;for(let C=0;C<f.length;C++){const I=new o.pointGeometry(f[C][0]*this.width,y+f[C][1]*(this.height-y)),z=l.pointCoordinate(I);if(!z)continue;const V=1/Math.hypot(z[0]-this._camera.position[0],z[1]-this._camera.position[1]);x+=z[3]*V,S+=V}return S===0?NaN:x/S}get center(){return this._center}set center(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const l=this._seaLevelZoom,f=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),y=this.pixelsPerMeter/this.worldSize*f,x=this._mercatorZfromZoom(l),S=this._mercatorZfromZoom(this._maxZoom),C=Math.max(x-y,S);this._setZoom(this._zoomFromMercatorZ(C))}get padding(){return this._edgeInsets.toJSON()}set padding(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())}computeZoomRelativeTo(l){const f=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,l.toAltitude()));let y;y=l.z<this._camera.position[2]?[f.x,f.y,f.z]:[l.x,l.y,l.z];const x=o.length(o.sub([],this._camera.position,y));return o.clamp(this._zoomFromMercatorZ(x),this._minZoom,this._maxZoom)}setFreeCameraOptions(l){if(!this.height||!l.position&&!l.orientation)return;this._updateCameraState();let f=!1;if(l.orientation&&!o.exactEquals(l.orientation,this._camera.orientation)&&(f=this._setCameraOrientation(l.orientation)),l.position){const y=[l.position.x,l.position.y,l.position.z];o.exactEquals$1(y,this._camera.position)||(this._setCameraPosition(y),f=!0)}f&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const l=this._camera.position,f=new Bh;return f.position=new o.MercatorCoordinate(l[0],l[1],l[2]),f.orientation=this._camera.orientation,f._elevation=this.elevation,f._renderWorldCopies=this.renderWorldCopies,f}_setCameraOrientation(l){if(!o.length$1(l))return!1;o.normalize$1(l,l);const f=o.transformQuat([],[0,0,-1],l),y=o.transformQuat([],[0,-1,0],l);if(y[2]<0)return!1;const x=f_(f,y);return!!x&&(this._camera.orientation=x,!0)}_setCameraPosition(l){const f=this.zoomScale(this.minZoom)*this.tileSize,y=this.zoomScale(this.maxZoom)*this.tileSize,x=this.cameraToCenterDistance;l[2]=o.clamp(l[2],x/y,x/f),this._camera.position=l}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(l){return this._edgeInsets.equals(l)}interpolatePadding(l,f,y){this._unmodified=!1,this._edgeInsets.interpolate(l,f,y),this._constrain(),this._calcMatrices()}coveringZoomLevel(l){const f=(l.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/l.tileSize));return Math.max(0,f)}getVisibleUnwrappedCoordinates(l){const f=[new o.UnwrappedTileID(0,l)];if(this.renderWorldCopies){const y=this.pointCoordinate(new o.pointGeometry(0,0)),x=this.pointCoordinate(new o.pointGeometry(this.width,0)),S=this.pointCoordinate(new o.pointGeometry(this.width,this.height)),C=this.pointCoordinate(new o.pointGeometry(0,this.height)),I=Math.floor(Math.min(y.x,x.x,S.x,C.x)),z=Math.floor(Math.max(y.x,x.x,S.x,C.x)),V=1;for(let U=I-V;U<=z+V;U++)U!==0&&f.push(new o.UnwrappedTileID(U,l))}return f}coveringTiles(l){let f=this.coveringZoomLevel(l);const y=f,x=this.elevation&&!l.isTerrainDEM,S=this.projection.name==="mercator";if(l.minzoom!==void 0&&f<l.minzoom)return[];l.maxzoom!==void 0&&f>l.maxzoom&&(f=l.maxzoom);const C=this.locationCoordinate(this.center),I=this.center.lat,z=1<<f,V=[z*C.x,z*C.y,0],U=this.projection.name==="globe",Z=!U,te=o.Frustum.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,f,Z),ne=U?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),oe=z*o.mercatorZfromAltitude(1,this.center.lat),ae=this._camera.position[2]/o.mercatorZfromAltitude(1,this.center.lat),se=[z*ne.x,z*ne.y,ae*(Z?1:oe)],Q=this.cameraToCenterDistance/l.tileSize*(l.roundZoom?1:.502),fe=this.pitch<=60&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace?f:0,he=l.isTerrainDEM&&this._elevation?1e4*this._elevation.exaggeration():this._centerAltitude,me=l.isTerrainDEM?-he:this._elevation?this._elevation.getMinElevationBelowMSL():0,we=this.projection.isReprojectedInTileSpace?$h(this):1,ve=$e=>{const je=new o.MercatorCoordinate($e.x+25e-6,$e.y,$e.z),ot=new o.MercatorCoordinate($e.x,$e.y+25e-6,$e.z),ct=$e.toLngLat(),Ft=je.toLngLat(),dr=ot.toLngLat(),Lt=this.locationCoordinate(ct),It=this.locationCoordinate(Ft),Nt=this.locationCoordinate(dr),xr=Math.hypot(It.x-Lt.x,It.y-Lt.y),qt=Math.hypot(Nt.x-Lt.x,Nt.y-Lt.y);return Math.sqrt(xr*qt)*we/25e-6},Ee=$e=>{const Pe=he,je=me;return{aabb:o.tileAABB(this,z,0,0,0,$e,je,Pe,this.projection),zoom:0,x:0,y:0,minZ:je,maxZ:Pe,wrap:$e,fullyVisible:!1}},ke=[];let Le=[];const Ne=f,yt=l.reparseOverscaled?y:f,Oe=$e=>$e*$e,rt=Oe((ae-this._centerAltitude)*oe),We=$e=>{if(!this._elevation||!$e.tileID||!S)return;const Pe=this._elevation.getMinMaxForTile($e.tileID),je=$e.aabb;Pe?(je.min[2]=Pe.min,je.max[2]=Pe.max,je.center[2]=(je.min[2]+je.max[2])/2):($e.shouldSplit=st($e),$e.shouldSplit||(je.min[2]=je.max[2]=je.center[2]=this._centerAltitude))},st=$e=>{if($e.zoom<fe)return!0;if($e.zoom===Ne)return!1;if($e.shouldSplit!=null)return $e.shouldSplit;const Pe=$e.aabb.distanceX(se),je=$e.aabb.distanceY(se);let ot=rt,ct=1;if(U){ot=Oe($e.aabb.distanceZ(se));const Lt=Math.pow(2,$e.zoom),It=o.latFromMercatorY(($e.y+1)/Lt),Nt=o.latFromMercatorY($e.y/Lt),xr=Math.min(Math.max(I,It),Nt),qt=o.circumferenceAtLatitude(xr)/o.circumferenceAtLatitude(I);if(ct=xr===I?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,qt/this._mercatorScaleRatio),this.zoom<=o.GLOBE_ZOOM_THRESHOLD_MIN&&$e.zoom===Ne-1&&qt>=.9)return!0}else if(x&&(ot=Oe($e.aabb.distanceZ(se)*oe)),this.projection.isReprojectedInTileSpace&&y<=5){const Lt=Math.pow(2,$e.zoom),It=ve(new o.MercatorCoordinate(($e.x+.5)/Lt,($e.y+.5)/Lt));ct=It>.85?1:It}const Ft=Pe*Pe+je*je+ot,dr=Oe((1<<Ne-$e.zoom)*Q*ct*((Lt,It)=>{if(It*Oe(.707)<Lt)return 1;const Nt=Math.sqrt(It/Lt);return Nt/(1.4144271570014144+(Math.pow(1.1,Nt-1.4144271570014144+1)-1)/(1.1-1)-1)})(Math.max(ot,rt),Ft));return Ft<dr};if(this.renderWorldCopies)for(let $e=1;$e<=3;$e++)ke.push(Ee(-$e)),ke.push(Ee($e));for(ke.push(Ee(0));ke.length>0;){const $e=ke.pop(),Pe=$e.x,je=$e.y;let ot=$e.fullyVisible;if(!ot){const ct=$e.aabb.intersects(te);if(ct===0)continue;ot=ct===2}if($e.zoom!==Ne&&st($e))for(let ct=0;ct<4;ct++){const Ft=(Pe<<1)+ct%2,dr=(je<<1)+(ct>>1),Lt={aabb:S?$e.aabb.quadrant(ct):o.tileAABB(this,z,$e.zoom+1,Ft,dr,$e.wrap,$e.minZ,$e.maxZ,this.projection),zoom:$e.zoom+1,x:Ft,y:dr,wrap:$e.wrap,fullyVisible:ot,tileID:void 0,shouldSplit:void 0,minZ:$e.minZ,maxZ:$e.maxZ};x&&!U&&(Lt.tileID=new o.OverscaledTileID($e.zoom+1===Ne?yt:$e.zoom+1,$e.wrap,$e.zoom+1,Ft,dr),We(Lt)),ke.push(Lt)}else{const ct=$e.zoom===Ne?yt:$e.zoom;if(l.minzoom&&l.minzoom>ct)continue;const Ft=V[0]-(.5+Pe+($e.wrap<<$e.zoom))*(1<<f-$e.zoom),dr=V[1]-.5-je,Lt=$e.tileID?$e.tileID:new o.OverscaledTileID(ct,$e.wrap,$e.zoom,Pe,je);Le.push({tileID:Lt,distanceSq:Ft*Ft+dr*dr})}}if(this.fogCullDistSq){const $e=this.fogCullDistSq,Pe=this.horizonLineFromTop();Le=Le.filter(je=>{const ot=[0,0,0,1],ct=[o.EXTENT,o.EXTENT,0,1],Ft=this.calculateFogTileMatrix(je.tileID.toUnwrapped());o.transformMat4$1(ot,ot,Ft),o.transformMat4$1(ct,ct,Ft);const dr=o.getAABBPointSquareDist(ot,ct);if(dr===0)return!0;let Lt=!1;const It=this._elevation;if(It&&dr>$e&&Pe!==0){const Nt=this.calculateProjMatrix(je.tileID.toUnwrapped());let xr;l.isTerrainDEM||(xr=It.getMinMaxForTile(je.tileID)),xr||(xr={min:me,max:he});const qt=o.furthestTileCorner(this.rotation),Fr=[qt[0]*o.EXTENT,qt[1]*o.EXTENT,xr.max];o.transformMat4(Fr,Fr,Nt),Lt=(1-Fr[1])*this.height*.5<Pe}return dr<$e||Lt})}return Le.sort(($e,Pe)=>$e.distanceSq-Pe.distanceSq).map($e=>$e.tileID)}resize(l,f){this.width=l,this.height=f,this.pixelsToGLUnits=[2/l,-2/f],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(l){return Math.pow(2,l)}scaleZoom(l){return Math.log(l)/Math.LN2}project(l){const f=o.clamp(l.lat,-o.MAX_MERCATOR_LATITUDE,o.MAX_MERCATOR_LATITUDE),y=this.projection.project(l.lng,f);return new o.pointGeometry(y.x*this.worldSize,y.y*this.worldSize)}unproject(l){return this.projection.unproject(l.x/this.worldSize,l.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/o.mercatorZfromAltitude(1,this.center.lat)/this.worldSize}setLocationAtPoint(l,f){let y,x;const S=this.centerPoint;if(this.projection.name==="globe"){const I=this.worldSize;y=(f.x-S.x)/I,x=(f.y-S.y)/I}else{const I=this.pointCoordinate(f),z=this.pointCoordinate(S);y=I.x-z.x,x=I.y-z.y}const C=this.locationCoordinate(l);this.setLocation(new o.MercatorCoordinate(C.x-y,C.y-x))}setLocation(l){this.center=this.coordinateLocation(l),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(l){return this.projection.locationPoint(this,l)}locationPoint3D(l){return this.projection.locationPoint(this,l,!0)}pointLocation(l){return this.coordinateLocation(this.pointCoordinate(l))}pointLocation3D(l){return this.coordinateLocation(this.pointCoordinate3D(l))}locationCoordinate(l,f){const y=f?o.mercatorZfromAltitude(f,l.lat):void 0,x=this.projection.project(l.lng,l.lat);return new o.MercatorCoordinate(x.x,x.y,y)}coordinateLocation(l){return this.projection.unproject(l.x,l.y)}pointRayIntersection(l,f){const y=f??this._centerAltitude,x=[l.x,l.y,0,1],S=[l.x,l.y,1,1];o.transformMat4$1(x,x,this.pixelMatrixInverse),o.transformMat4$1(S,S,this.pixelMatrixInverse);const C=S[3];o.scale$1(x,x,1/x[3]),o.scale$1(S,S,1/C);const I=x[2],z=S[2];return{p0:x,p1:S,t:I===z?0:(y-I)/(z-I)}}screenPointToMercatorRay(l){const f=[l.x,l.y,0,1],y=[l.x,l.y,1,1];return o.transformMat4$1(f,f,this.pixelMatrixInverse),o.transformMat4$1(y,y,this.pixelMatrixInverse),o.scale$1(f,f,1/f[3]),o.scale$1(y,y,1/y[3]),f[2]=o.mercatorZfromAltitude(f[2],this._center.lat)*this.worldSize,y[2]=o.mercatorZfromAltitude(y[2],this._center.lat)*this.worldSize,o.scale$1(f,f,1/this.worldSize),o.scale$1(y,y,1/this.worldSize),new o.Ray([f[0],f[1],f[2]],o.normalize([],o.sub([],y,f)))}rayIntersectionCoordinate(l){const{p0:f,p1:y,t:x}=l,S=o.mercatorZfromAltitude(f[2],this._center.lat),C=o.mercatorZfromAltitude(y[2],this._center.lat);return new o.MercatorCoordinate(o.number(f[0],y[0],x)/this.worldSize,o.number(f[1],y[1],x)/this.worldSize,o.number(S,C,x))}pointCoordinate(l,f=this._centerAltitude){return this.projection.pointCoordinate(this,l.x,l.y,f)}pointCoordinate3D(l){if(!this.elevation)return this.pointCoordinate(l);let f=this.projection.pointCoordinate3D(this,l.x,l.y);if(f)return new o.MercatorCoordinate(f[0],f[1],f[2]);let y=0,x=this.horizonLineFromTop();if(l.y>x)return this.pointCoordinate(l);const S=.02*x,C=l.clone();for(let I=0;I<10&&x-y>S;I++){C.y=o.number(y,x,.66);const z=this.projection.pointCoordinate3D(this,C.x,C.y);z?(x=C.y,f=z):y=C.y}return f?new o.MercatorCoordinate(f[0],f[1],f[2]):this.pointCoordinate(l)}isPointAboveHorizon(l){return this.projection.isPointAboveHorizon(this,l)}_coordinatePoint(l,f){const y=f&&this.elevation?this.elevation.getAtPointOrZero(l,this._centerAltitude):this._centerAltitude,x=[l.x*this.worldSize,l.y*this.worldSize,y+l.toAltitude(),1];return o.transformMat4$1(x,x,this.pixelMatrix),x[3]>0?new o.pointGeometry(x[0]/x[3],x[1]/x[3]):new o.pointGeometry(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:l,left:f}=this._edgeInsets,y=this.height-this._edgeInsets.bottom,x=this.width-this._edgeInsets.right,S=this.pointLocation3D(new o.pointGeometry(f,l)),C=this.pointLocation3D(new o.pointGeometry(x,l)),I=this.pointLocation3D(new o.pointGeometry(x,y)),z=this.pointLocation3D(new o.pointGeometry(f,y));let V=Math.min(S.lng,C.lng,I.lng,z.lng),U=Math.max(S.lng,C.lng,I.lng,z.lng),Z=Math.min(S.lat,C.lat,I.lat,z.lat),te=Math.max(S.lat,C.lat,I.lat,z.lat);const ne=Math.pow(2,-this.zoom)/16*270,oe=this.projection.name==="globe"?1:4,ae=(se,Q,fe,he,me)=>{const we=(se+fe)/2,ve=(Q+he)/2,Ee=new o.pointGeometry(we,ve),{lng:ke,lat:Le}=this.pointLocation3D(Ee),Ne=Math.max(0,V-ke,Z-Le,ke-U,Le-te);V=Math.min(V,ke),U=Math.max(U,ke),Z=Math.min(Z,Le),te=Math.max(te,Le),(me<oe||Ne>ne)&&(ae(se,Q,we,ve,me+1),ae(we,ve,fe,he,me+1))};if(ae(f,l,x,l,1),ae(x,l,x,y,1),ae(x,y,f,y,1),ae(f,y,f,l,1),this.projection.name==="globe"){const[se,Q]=o.polesInViewport(this);se?(te=90,U=180,V=-180):Q&&(Z=-90,U=180,V=-180)}return new o.LngLatBounds(new o.LngLat(V,Z),new o.LngLat(U,te))}_getBoundsRectangular(l,f){const{top:y,left:x}=this._edgeInsets,S=this.height-this._edgeInsets.bottom,C=this.width-this._edgeInsets.right,I=new o.pointGeometry(x,y),z=new o.pointGeometry(C,y),V=new o.pointGeometry(C,S),U=new o.pointGeometry(x,S);let Z=this.pointCoordinate(I,l),te=this.pointCoordinate(z,l);const ne=this.pointCoordinate(V,f),oe=this.pointCoordinate(U,f),ae=(se,Q)=>(Q.y-se.y)/(Q.x-se.x);return Z.y>1&&te.y>=0?Z=new o.MercatorCoordinate((1-oe.y)/ae(oe,Z)+oe.x,1):Z.y<0&&te.y<=1&&(Z=new o.MercatorCoordinate(-oe.y/ae(oe,Z)+oe.x,0)),te.y>1&&Z.y>=0?te=new o.MercatorCoordinate((1-ne.y)/ae(ne,te)+ne.x,1):te.y<0&&Z.y<=1&&(te=new o.MercatorCoordinate(-ne.y/ae(ne,te)+ne.x,0)),new o.LngLatBounds().extend(this.coordinateLocation(Z)).extend(this.coordinateLocation(te)).extend(this.coordinateLocation(oe)).extend(this.coordinateLocation(ne))}_getBoundsRectangularTerrain(){const l=this.elevation;if(!l.visibleDemTiles.length||l.isUsingMockSource())return this._getBoundsRectangular(0,0);const f=l.visibleDemTiles.reduce((y,x)=>{if(x.dem){const S=x.dem.tree;y.min=Math.min(y.min,S.minimums[0]),y.max=Math.max(y.max,S.maximums[0])}return y},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(f.min*l.exaggeration(),f.max*l.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(l=!0){const f=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))+this.centerOffset.y,y=this.height/2-f*(1-this._horizonShift);return l?Math.max(0,y):y}getMaxBounds(){return this.maxBounds}setMaxBounds(l){this.maxBounds=l,this.minLat=-o.MAX_MERCATOR_LATITUDE,this.maxLat=o.MAX_MERCATOR_LATITUDE,this.minLng=-180,this.maxLng=180,l&&(this.minLat=l.getSouth(),this.maxLat=l.getNorth(),this.minLng=l.getWest(),this.maxLng=l.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=o.mercatorXfromLng(this.minLng)*this.tileSize,this.worldMaxX=o.mercatorXfromLng(this.maxLng)*this.tileSize,this.worldMinY=o.mercatorYfromLat(this.maxLat)*this.tileSize,this.worldMaxY=o.mercatorYfromLat(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(l,f){return this.projection.createTileMatrix(this,f,l)}calculateDistanceTileData(l){const f=l.key,y=this._distanceTileDataCache;if(y[f])return y[f];const x=l.canonical,S=1/this.height,C=this.cameraWorldSize,I=C/this.zoomScale(x.z),z=(x.x+Math.pow(2,x.z)*l.wrap)*I,V=x.y*I,U=this.point;U.x*=C/this.worldSize,U.y*=C/this.worldSize;const Z=this.angle,te=Math.sin(-Z),ne=-Math.cos(-Z);return y[f]={bearing:[te,ne],center:[(U.x-z)*S,(U.y-V)*S],scale:I/o.EXTENT*S},y[f]}calculateFogTileMatrix(l){const f=l.key,y=this._fogTileMatrixCache;if(y[f])return y[f];const x=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,l);return o.multiply(x,this.worldToFogMatrix,x),y[f]=new Float32Array(x),y[f]}calculateProjMatrix(l,f=!1){const y=l.key,x=f?this._alignedProjMatrixCache:this._projMatrixCache;if(x[y])return x[y];const S=this.calculatePosMatrix(l,this.worldSize);return o.multiply(S,this.projection.isReprojectedInTileSpace?this.mercatorMatrix:f?this.alignedProjMatrix:this.projMatrix,S),x[y]=new Float32Array(S),x[y]}calculatePixelsToTileUnitsMatrix(l){const f=l.tileID.key,y=this._pixelsToTileUnitsCache;if(y[f])return y[f];const x=function(S,C){const{scale:I}=S.tileTransform,z=I*o.EXTENT/(S.tileSize*Math.pow(2,C.zoom-S.tileID.overscaledZ+S.tileID.canonical.z));return V=new Float32Array(4),te=(U=C.inverseAdjustmentMatrix)[1],ne=U[2],oe=U[3],se=(Z=[z,z])[1],V[0]=U[0]*(ae=Z[0]),V[1]=te*ae,V[2]=ne*se,V[3]=oe*se,V;var V,U,Z,te,ne,oe,ae,se}(l,this);return y[f]=x,y[f]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const l=1/this.worldSize,f=o.fromScaling([],[l,l,l]);return o.multiply(f,f,this.globeMatrix),f}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const l=this._elevation;this._updateCameraState();const f=o.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,y=this._computeCameraPosition(f),x=this._camera.forward(),S=o.mercatorZfromAltitude(1,this._center.lat);y[2]/=S,x[2]/=S,o.normalize(x,x);const C=l.raycast(y,x,l.exaggeration());if(C){const I=o.scaleAndAdd([],y,x,C),z=new o.MercatorCoordinate(I[0],I[1],o.mercatorZfromAltitude(I[2],o.latFromMercatorY(I[1]))),V=(z.z+o.length([z.x-y[0],z.y-y[1],z.z-y[2]*S]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(V),this._centerAltitude=z.toAltitude(),this._center=this.coordinateLocation(z),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(l=!1){if(!this._elevation)return;const f=this._elevation,y=o.mercatorZfromAltitude(1,this._center.lat)*this.worldSize,x=this._computeCameraPosition(y),S=f.getAtPointOrZero(new o.MercatorCoordinate(...x)),C=this.pixelsPerMeter/this.worldSize*S,I=this._minimumHeightOverTerrain(),z=x[2]-C;if(z<=I)if(z<0||l){const V=this.locationCoordinate(this._center,this._centerAltitude),U=[x[0],x[1],V.z-x[2]],Z=o.length(U);U[2]-=(I-z)/this._pixelsPerMercatorPixel;const te=o.length(U);if(te===0)return;o.scale$2(U,U,Z/te*this._pixelsPerMercatorPixel),this._camera.position=[x[0],x[1],V.z*this._pixelsPerMercatorPixel-U[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const l=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||l){const te=this.center;return te.lat=o.clamp(te.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!l)&&(te.lng=o.clamp(te.lng,this.minLng,this.maxLng)),this.center=te,void(this._constraining=!1)}const f=this._unmodified,{x:y,y:x}=this.point;let S=0,C=y,I=x;const z=this.width/2,V=this.height/2,U=this.worldMinY*this.scale,Z=this.worldMaxY*this.scale;if(x-V<U&&(I=U+V),x+V>Z&&(I=Z-V),Z-U<this.height&&(S=Math.max(S,this.height/(Z-U)),I=(Z+U)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const te=this.worldMinX*this.scale,ne=this.worldMaxX*this.scale,oe=this.worldSize/2-(te+ne)/2;C=(y+oe+this.worldSize)%this.worldSize-oe,C-z<te&&(C=te+z),C+z>ne&&(C=ne-z),ne-te<this.width&&(S=Math.max(S,this.width/(ne-te)),C=(ne+te)/2)}C===y&&I===x||(this.center=this.unproject(new o.pointGeometry(C,I))),S&&(this.zoom+=this.scaleZoom(S)),this._constrainCamera(),this._unmodified=f,this._constraining=!1}_minZoomForBounds(){let l=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(l=Math.max(l,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),l}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const l=this.centerOffset,f=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=o.mercatorZfromAltitude(1,this.center.lat)/o.mercatorZfromAltitude(1,o.GLOBE_SCALE_MATCH_LATITUDE));const y=Js(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,y),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const x=this.projection.zAxisUnit==="meters"?f:1,S=this._camera.getWorldToCamera(this.worldSize,x),C=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);C[8]=2*-l.x/this.width,C[9]=2*l.y/this.height;let I=o.mul([],C,S);if(this.projection.isReprojectedInTileSpace){const ve=this.locationCoordinate(this.center),Ee=o.identity([]);o.translate(Ee,Ee,[ve.x*this.worldSize,ve.y*this.worldSize,0]),o.multiply(Ee,Ee,Kl(this)),o.translate(Ee,Ee,[-ve.x*this.worldSize,-ve.y*this.worldSize,0]),o.multiply(I,I,Ee),this.inverseAdjustmentMatrix=function(ke){const Le=Kl(ke,!0);return xe([],[Le[0],Le[1],Le[4],Le[5]])}(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];this.mercatorMatrix=o.scale([],I,[this.worldSize,this.worldSize,this.worldSize/x,1]),this.projMatrix=I,this.invProjMatrix=o.invert(new Float64Array(16),this.projMatrix);const z=o.invert([],C);this.frustumCorners=o.FrustumCorners.fromInvProjectionMatrix(z,this.horizonLineFromTop(),this.height);const V=new Float32Array(16);o.identity(V),o.scale(V,V,[1,-1,1]),o.rotateX(V,V,this._pitch),o.rotateZ(V,V,this.angle);const U=o.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ),Z=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;U[8]=2*-l.x/this.width,U[9]=2*(l.y+Z)/this.height,this.skyboxMatrix=o.multiply(V,U,V);const te=this.point,ne=te.x,oe=te.y,ae=this.width%2/2,se=this.height%2/2,Q=Math.cos(this.angle),fe=Math.sin(this.angle),he=ne-Math.round(ne)+Q*ae+fe*se,me=oe-Math.round(oe)+Q*se+fe*ae,we=new Float64Array(I);if(o.translate(we,we,[he>.5?he-1:he,me>.5?me-1:me,0]),this.alignedProjMatrix=we,I=o.create(),o.scale(I,I,[this.width/2,-this.height/2,1]),o.translate(I,I,[1,-1,0]),this.labelPlaneMatrix=I,I=o.create(),o.scale(I,I,[1,-1,1]),o.translate(I,I,[-1,-1,0]),o.scale(I,I,[2/this.width,2/this.height,1]),this.glCoordMatrix=I,this.pixelMatrix=o.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),this._calcFogMatrices(),this._distanceTileDataCache={},I=o.invert(new Float64Array(16),this.pixelMatrix),!I)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=I,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=o.calculateGlobeMatrix(this);const ve=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=o.transformMat4(ve,ve,S),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=I;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const l=this.cameraWorldSizeForFog,f=this.cameraPixelsPerMeter,y=this._camera.position,x=1/this.height/this._pixelsPerMercatorPixel,S=[l,l,f];o.scale$2(S,S,x),o.scale$2(y,y,-1),o.multiply$2(y,y,S);const C=o.create();o.translate(C,C,y),o.scale(C,C,S),this.mercatorFogMatrix=C,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(l,f,x)}_computeCameraPosition(l){const f=(l=l||this.pixelsPerMeter)/this.pixelsPerMeter,y=this._camera.forward(),x=this.point,S=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*f-l/this.worldSize*this._centerAltitude;return[x.x/this.worldSize-y[0]*S,x.y/this.worldSize-y[1]*S,l/this.worldSize*this._centerAltitude-y[2]*S]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(l){const f=this._maxCameraBoundsDistance()*Math.cos(this._pitch),y=this._camera.position[2],x=l[2];let S=1;this.projection.wrap&&(this.center=this.center.wrap()),x>0&&(S=Math.min((f-y)/x,1)),this._camera.position=o.scaleAndAdd([],this._camera.position,l,S),this._updateStateFromCamera()}_updateStateFromCamera(){const l=this._camera.position,f=this._camera.forward(),{pitch:y,bearing:x}=this._camera.getPitchBearing(),S=o.mercatorZfromAltitude(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,C=this._mercatorZfromZoom(this._maxZoom)*Math.cos(o.degToRad(this._maxPitch)),I=Math.max((l[2]-S)/Math.cos(y),C),z=this._zoomFromMercatorZ(I);o.scaleAndAdd(l,l,f,I),this._pitch=o.clamp(y,o.degToRad(this.minPitch),o.degToRad(this.maxPitch)),this.angle=o.wrap(x,-Math.PI,Math.PI),this._setZoom(o.clamp(z,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new o.MercatorCoordinate(l[0],l[1],l[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(l){return Math.pow(2,l)*this.tileSize}_mercatorZfromZoom(l){return this.cameraToCenterDistance/this._worldSizeFromZoom(l)}_minimumHeightOverTerrain(){const l=Math.min((this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom)+4,this._maxZoom);return this._mercatorZfromZoom(l)}_zoomFromMercatorZ(l){return this.scaleZoom(this.cameraToCenterDistance/(l*this.tileSize))}zoomFromMercatorZAdjusted(l){let f=0,y=o.GLOBE_ZOOM_THRESHOLD_MAX,x=0,S=1/0;for(;y-f>1e-6&&y>f;){const C=f+.5*(y-f),I=this.tileSize*Math.pow(2,C),z=this.getCameraToCenterDistance(this.projection,C,I),V=this.scaleZoom(z/(l*this.tileSize)),U=Math.abs(C-V);U<S&&(S=U,x=C),C<V?f=C:y=C}return x}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(o.warnOnce("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(l,f){const y=Math.min(l.x,f.x),x=Math.max(l.x,f.x),S=Math.min(l.y,f.y),C=Math.max(l.y,f.y);if(S<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const I=[new o.pointGeometry(y,S),new o.pointGeometry(x,C),new o.pointGeometry(y,C),new o.pointGeometry(x,S)],z=this.renderWorldCopies?-3:0,V=this.renderWorldCopies?4:1;for(const U of I){const Z=this.pointRayIntersection(U);if(Z.t<0)return!0;const te=this.rayIntersectionCoordinate(Z);if(te.x<z||te.y<0||te.x>V||te.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+o.radToDeg(this.fovAboveCenter)>88||this.anyCornerOffEdge(new o.pointGeometry(0,0),new o.pointGeometry(this.width,this.height))}zoomDeltaToMovement(l,f){const y=o.length(o.sub([],this._camera.position,l)),x=this._zoomFromMercatorZ(y)+f;return y-this._mercatorZfromZoom(x)}getCameraPoint(){if(this.projection.name==="globe"){const l=function([f,y,x],S){const C=[f,y,x,1];o.transformMat4$1(C,C,S);const I=C[3]=Math.max(C[3],1e-6);return C[0]/=I,C[1]/=I,C[2]/=I,C}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new o.pointGeometry(l[0],l[1])}{const l=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.pointGeometry(0,l))}}getCameraToCenterDistance(l,f=this.zoom,y=this.worldSize){const x=Js(l,f,this.width,this.height,1024),S=l.pixelSpaceConversion(this.center.lat,y,x);return .5/Math.tan(.5*this._fov)*this.height*S}getWorldToCameraMatrix(){const l=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&o.multiply(l,l,this.globeMatrix),l}}function Mo(m,l){let f=!1,y=null;const x=()=>{y=null,f&&(m(),y=setTimeout(x,l),f=!1)};return()=>(f=!0,y||x(),y)}class d_{constructor(l){this._hashName=l&&encodeURIComponent(l),o.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=Mo(this._updateHashUnthrottled.bind(this),300)}addTo(l){return this._map=l,o.window.addEventListener("hashchange",this._onHashChange,!1),l.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),o.window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const l=this._map;if(!l)return"";const f=Ip(l);if(this._hashName){const y=this._hashName;let x=!1;const S=o.window.location.hash.slice(1).split("&").map(C=>{const I=C.split("=")[0];return I===y?(x=!0,`${I}=${f}`):C}).filter(C=>C);return x||S.push(`${y}=${f}`),`#${S.join("&")}`}return`#${f}`}_getCurrentHash(){const l=o.window.location.hash.replace("#","");if(this._hashName){let f;return l.split("&").map(y=>y.split("=")).forEach(y=>{y[0]===this._hashName&&(f=y)}),(f&&f[1]||"").split("/")}return l.split("/")}_onHashChange(){const l=this._map;if(!l)return!1;const f=this._getCurrentHash();if(f.length>=3&&!f.some(y=>isNaN(y))){const y=l.dragRotate.isEnabled()&&l.touchZoomRotate.isEnabled()?+(f[3]||0):l.getBearing();return l.jumpTo({center:[+f[2],+f[1]],zoom:+f[0],bearing:y,pitch:+(f[4]||0)}),!0}return!1}_updateHashUnthrottled(){const l=o.window.location.href.replace(/(#.+)?$/,this.getHashString());o.window.history.replaceState(o.window.history.state,null,l)}}function Ip(m,l){const f=m.getCenter(),y=Math.round(100*m.getZoom())/100,x=Math.ceil((y*Math.LN2+Math.log(512/360/.5))/Math.LN10),S=Math.pow(10,x),C=Math.round(f.lng*S)/S,I=Math.round(f.lat*S)/S,z=m.getBearing(),V=m.getPitch();let U=l?`/${C}/${I}/${y}`:`${y}/${I}/${C}`;return(z||V)&&(U+="/"+Math.round(10*z)/10),V&&(U+=`/${Math.round(V)}`),U}const gu={linearity:.3,easing:o.bezier(0,0,.3,1)},Yl=o.extend({deceleration:2500,maxSpeed:1400},gu),p_=o.extend({deceleration:20,maxSpeed:1400},gu),Fh=o.extend({deceleration:1e3,maxSpeed:360},gu),kp=o.extend({deceleration:1e3,maxSpeed:90},gu);class Nh{constructor(l){this._map=l,this.clear()}clear(){this._inertiaBuffer=[]}record(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:o.exported.now(),settings:l})}_drainInertiaBuffer(){const l=this._inertiaBuffer,f=o.exported.now();for(;l.length>0&&f-l[0].time>160;)l.shift()}_onMoveEnd(l){if(o.exported.prefersReducedMotion||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const f={zoom:0,bearing:0,pitch:0,pan:new o.pointGeometry(0,0),pinchAround:void 0,around:void 0};for(const{settings:S}of this._inertiaBuffer)f.zoom+=S.zoomDelta||0,f.bearing+=S.bearingDelta||0,f.pitch+=S.pitchDelta||0,S.panDelta&&f.pan._add(S.panDelta),S.around&&(f.around=S.around),S.pinchAround&&(f.pinchAround=S.pinchAround);const y=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,x={};if(f.pan.mag()){const S=_u(f.pan.mag(),y,o.extend({},Yl,l||{}));x.offset=f.pan.mult(S.amount/f.pan.mag()),x.center=this._map.transform.center,yu(x,S)}if(f.zoom){const S=_u(f.zoom,y,p_);x.zoom=this._map.transform.zoom+S.amount,yu(x,S)}if(f.bearing){const S=_u(f.bearing,y,Fh);x.bearing=this._map.transform.bearing+o.clamp(S.amount,-179,179),yu(x,S)}if(f.pitch){const S=_u(f.pitch,y,kp);x.pitch=this._map.transform.pitch+S.amount,yu(x,S)}if(x.zoom||x.bearing){const S=f.pinchAround===void 0?f.around:f.pinchAround;x.around=S?this._map.unproject(S):this._map.getCenter()}return this.clear(),x.noMoveStart=!0,x}}function yu(m,l){(!m.duration||m.duration<l.duration)&&(m.duration=l.duration,m.easing=l.easing)}function _u(m,l,f){const{maxSpeed:y,linearity:x,deceleration:S}=f,C=o.clamp(m*x/(l/1e3),-y,y),I=Math.abs(C)/(S*x);return{easing:f.easing,duration:1e3*I,amount:C*(I/2)}}class ai extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,f,y,x={}){const S=W(f.getCanvasContainer(),y),C=f.unproject(S);super(l,o.extend({point:S,lngLat:C,originalEvent:y},x)),this._defaultPrevented=!1,this.target=f}}class jh extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,f,y){const x=l==="touchend"?y.changedTouches:y.touches,S=Y(f.getCanvasContainer(),x),C=S.map(z=>f.unproject(z)),I=S.reduce((z,V,U,Z)=>z.add(V.div(Z.length)),new o.pointGeometry(0,0));super(l,{points:S,point:I,lngLats:C,lngLat:f.unproject(I),originalEvent:y}),this._defaultPrevented=!1}}class mb extends o.Event{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,f,y){super(l,{originalEvent:y}),this._defaultPrevented=!1}}class m_{constructor(l,f){this._map=l,this._clickTolerance=f.clickTolerance}reset(){this._mousedownPos=void 0}wheel(l){return this._firePreventable(new mb(l.type,this._map,l))}mousedown(l,f){return this._mousedownPos=f,this._firePreventable(new ai(l.type,this._map,l))}mouseup(l){this._map.fire(new ai(l.type,this._map,l))}preclick(l){const f=o.extend({},l);f.type="preclick",this._map.fire(new ai(f.type,this._map,f))}click(l,f){this._mousedownPos&&this._mousedownPos.dist(f)>=this._clickTolerance||(this.preclick(l),this._map.fire(new ai(l.type,this._map,l)))}dblclick(l){return this._firePreventable(new ai(l.type,this._map,l))}mouseover(l){this._map.fire(new ai(l.type,this._map,l))}mouseout(l){this._map.fire(new ai(l.type,this._map,l))}touchstart(l){return this._firePreventable(new jh(l.type,this._map,l))}touchmove(l){this._map.fire(new jh(l.type,this._map,l))}touchend(l){this._map.fire(new jh(l.type,this._map,l))}touchcancel(l){this._map.fire(new jh(l.type,this._map,l))}_firePreventable(l){if(this._map.fire(l),l.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Uh{constructor(l){this._map=l}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(l){this._map.fire(new ai(l.type,this._map,l))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new ai("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(l){this._delayContextMenu?this._contextMenuEvent=l:this._map.fire(new ai(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Op{constructor(l,f){this._map=l,this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=f.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(l,f){this.isEnabled()&&l.shiftKey&&l.button===0&&(R(),this._startPos=this._lastPos=f,this._active=!0)}mousemoveWindow(l,f){if(!this._active)return;const y=f,x=this._startPos,S=this._lastPos;if(!x||!S||S.equals(y)||!this._box&&y.dist(x)<this._clickTolerance)return;this._lastPos=y,this._box||(this._box=P("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",l));const C=Math.min(x.x,y.x),I=Math.max(x.x,y.x),z=Math.min(x.y,y.y),V=Math.max(x.y,y.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${C}px,${z}px)`,this._box.style.width=I-C+"px",this._box.style.height=V-z+"px")})}mouseupWindow(l,f){if(!this._active)return;const y=this._startPos,x=f;if(y&&l.button===0){if(this.reset(),G(),y.x!==x.x||y.y!==x.y)return this._map.fire(new o.Event("boxzoomend",{originalEvent:l})),{cameraAnimation:S=>S.fitScreenCoordinates(y,x,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",l)}}keydown(l){this._active&&l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),j(),delete this._startPos,delete this._lastPos}_fireEvent(l,f){return this._map.fire(new o.Event(l,{originalEvent:f}))}}function Vh(m,l){const f={};for(let y=0;y<m.length;y++)f[m[y].identifier]=l[y];return f}class g_{constructor(l){this.reset(),this.numTouches=l.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(l,f,y){(this.centroid||y.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=l.timeStamp),y.length===this.numTouches&&(this.centroid=function(x){const S=new o.pointGeometry(0,0);for(const C of x)S._add(C);return S.div(x.length)}(f),this.touches=Vh(y,f)))}touchmove(l,f,y){if(this.aborted||!this.centroid)return;const x=Vh(y,f);for(const S in this.touches){const C=this.touches[S],I=x[S];(!I||I.dist(C)>30)&&(this.aborted=!0)}}touchend(l,f,y){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),y.length===0){const x=!this.aborted&&this.centroid;if(this.reset(),x)return x}}}class Jl{constructor(l){this.singleTap=new g_(l),this.numTaps=l.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(l,f,y){this.singleTap.touchstart(l,f,y)}touchmove(l,f,y){this.singleTap.touchmove(l,f,y)}touchend(l,f,y){const x=this.singleTap.touchend(l,f,y);if(x){const S=l.timeStamp-this.lastTime<500,C=!this.lastTap||this.lastTap.dist(x)<30;if(S&&C||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=x,this.count===this.numTaps)return this.reset(),x}}}class Dp{constructor(){this._zoomIn=new Jl({numTouches:1,numTaps:2}),this._zoomOut=new Jl({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(l,f,y){this._zoomIn.touchstart(l,f,y),this._zoomOut.touchstart(l,f,y)}touchmove(l,f,y){this._zoomIn.touchmove(l,f,y),this._zoomOut.touchmove(l,f,y)}touchend(l,f,y){const x=this._zoomIn.touchend(l,f,y),S=this._zoomOut.touchend(l,f,y);return x?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:C=>C.easeTo({duration:300,zoom:C.getZoom()+1,around:C.unproject(x)},{originalEvent:l})}):S?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:C=>C.easeTo({duration:300,zoom:C.getZoom()-1,around:C.unproject(S)},{originalEvent:l})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const y_={0:1,2:2};class Gh{constructor(l){this.reset(),this._clickTolerance=l.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(l,f){return!1}_move(l,f){return{}}mousedown(l,f){if(this._lastPoint)return;const y=ee(l);this._correctButton(l,y)&&(this._lastPoint=f,this._eventButton=y)}mousemoveWindow(l,f){const y=this._lastPoint;if(y){if(l.preventDefault(),this._eventButton!=null&&function(x,S){const C=y_[S];return x.buttons===void 0||(x.buttons&C)!==C}(l,this._eventButton))this.reset();else if(this._moved||!(f.dist(y)<this._clickTolerance))return this._moved=!0,this._lastPoint=f,this._move(y,f)}}mouseupWindow(l){this._lastPoint&&ee(l)===this._eventButton&&(this._moved&&G(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class __ extends Gh{mousedown(l,f){super.mousedown(l,f),this._lastPoint&&(this._active=!0)}_correctButton(l,f){return f===0&&!l.ctrlKey}_move(l,f){return{around:f,panDelta:f.sub(l)}}}class Rp extends Gh{_correctButton(l,f){return f===0&&l.ctrlKey||f===2}_move(l,f){const y=.8*(f.x-l.x);if(y)return this._active=!0,{bearingDelta:y}}contextmenu(l){l.preventDefault()}}class Lp extends Gh{_correctButton(l,f){return f===0&&l.ctrlKey||f===2}_move(l,f){const y=-.5*(f.y-l.y);if(y)return this._active=!0,{pitchDelta:y}}contextmenu(l){l.preventDefault()}}class Ql{constructor(l,f){this._map=l,this._el=l.getCanvasContainer(),this._minTouches=1,this._clickTolerance=f.clickTolerance||1,this.reset(),o.bindAll(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new o.pointGeometry(0,0)}touchstart(l,f,y){return this._calculateTransform(l,f,y)}touchmove(l,f,y){if(this._active&&!(y.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(y.length===1&&!o.isFullscreen())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return l.cancelable&&l.preventDefault(),this._calculateTransform(l,f,y)}}touchend(l,f,y){this._calculateTransform(l,f,y),this._active&&y.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(l,f,y){y.length>0&&(this._active=!0);const x=Vh(y,f),S=new o.pointGeometry(0,0),C=new o.pointGeometry(0,0);let I=0;for(const V in x){const U=x[V],Z=this._touches[V];Z&&(S._add(U),C._add(U.sub(Z)),I++,x[V]=U)}if(this._touches=x,I<this._minTouches||!C.mag())return;const z=C.div(I);return this._sum._add(z),this._sum.mag()<this._clickTolerance?void 0:{around:S.div(I),panDelta:z}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=P("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","null")},500)}}class qh{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(l){}_move(l,f,y){return{}}touchstart(l,f,y){this._firstTwoTouches||y.length<2||(this._firstTwoTouches=[y[0].identifier,y[1].identifier],this._start([f[0],f[1]]))}touchmove(l,f,y){const x=this._firstTwoTouches;if(!x)return;l.preventDefault();const[S,C]=x,I=vu(y,f,S),z=vu(y,f,C);if(!I||!z)return;const V=this._aroundCenter?null:I.add(z).div(2);return this._move([I,z],V,l)}touchend(l,f,y){if(!this._firstTwoTouches)return;const[x,S]=this._firstTwoTouches,C=vu(y,f,x),I=vu(y,f,S);C&&I||(this._active&&G(),this.reset())}touchcancel(){this.reset()}enable(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function vu(m,l,f){for(let y=0;y<m.length;y++)if(m[y].identifier===f)return l[y]}function v_(m,l){return Math.log(m/l)/Math.LN2}class x_ extends qh{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(l){this._startDistance=this._distance=l[0].dist(l[1])}_move(l,f){const y=this._distance;if(this._distance=l[0].dist(l[1]),this._active||!(Math.abs(v_(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:v_(this._distance,y),pinchAround:f}}}function zp(m,l){return 180*m.angleWith(l)/Math.PI}class b_ extends qh{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(l){this._startVector=this._vector=l[0].sub(l[1]),this._minDiameter=l[0].dist(l[1])}_move(l,f){const y=this._vector;if(this._vector=l[0].sub(l[1]),y&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:zp(this._vector,y),pinchAround:f}}_isBelowThreshold(l){this._minDiameter=Math.min(this._minDiameter,l.mag());const f=25/(Math.PI*this._minDiameter)*360,y=this._startVector;if(!y)return!1;const x=zp(l,y);return Math.abs(x)<f}}function Wh(m){return Math.abs(m.y)>Math.abs(m.x)}class Ai extends qh{constructor(l){super(),this._map=l}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(l){this._lastPoints=l,Wh(l[0].sub(l[1]))&&(this._valid=!1)}_move(l,f,y){const x=this._lastPoints;if(!x)return;const S=l[0].sub(x[0]),C=l[1].sub(x[1]);return this._map._cooperativeGestures&&!o.isFullscreen()&&y.touches.length<3||(this._valid=this.gestureBeginsVertically(S,C,y.timeStamp),!this._valid)?void 0:(this._lastPoints=l,this._active=!0,{pitchDelta:(S.y+C.y)/2*-.5})}gestureBeginsVertically(l,f,y){if(this._valid!==void 0)return this._valid;const x=l.mag()>=2,S=f.mag()>=2;if(!x&&!S)return;if(!x||!S)return this._firstMove==null&&(this._firstMove=y),y-this._firstMove<100&&void 0;const C=l.y>0==f.y>0;return Wh(l)&&Wh(f)&&C}}const gb={panStep:100,bearingStep:15,pitchStep:10};class w_{constructor(){const l=gb;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(l){if(l.altKey||l.ctrlKey||l.metaKey)return;let f=0,y=0,x=0,S=0,C=0;switch(l.keyCode){case 61:case 107:case 171:case 187:f=1;break;case 189:case 109:case 173:f=-1;break;case 37:l.shiftKey?y=-1:(l.preventDefault(),S=-1);break;case 39:l.shiftKey?y=1:(l.preventDefault(),S=1);break;case 38:l.shiftKey?x=1:(l.preventDefault(),C=-1);break;case 40:l.shiftKey?x=-1:(l.preventDefault(),C=1);break;default:return}return this._rotationDisabled&&(y=0,x=0),{cameraAnimation:I=>{const z=I.getZoom();I.easeTo({duration:300,easeId:"keyboardHandler",easing:yb,zoom:f?Math.round(z)+f*(l.shiftKey?2:1):z,bearing:I.getBearing()+y*this._bearingStep,pitch:I.getPitch()+x*this._pitchStep,offset:[-S*this._panStep,-C*this._panStep],center:I.getCenter()},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function yb(m){return m*(2-m)}const S_=4.000244140625;class Fa{constructor(l,f){this._map=l,this._el=l.getCanvasContainer(),this._handler=f,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=.0022222222222222222,o.bindAll(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(l){this._defaultZoomRate=l}setWheelZoomRate(l){this._wheelZoomRate=l}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!l&&l.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(l){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(l.ctrlKey||l.metaKey||this.isZooming()||o.isFullscreen()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let f=l.deltaMode===o.window.WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY;const y=o.exported.now(),x=y-(this._lastWheelEventTime||0);this._lastWheelEventTime=y,f!==0&&f%S_==0?this._type="wheel":f!==0&&Math.abs(f)<4?this._type="trackpad":x>400?(this._type=null,this._lastValue=f,this._timeout=setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(x*f)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,f+=this._lastValue)),l.shiftKey&&f&&(f/=4),this._type&&(this._lastWheelEvent=l,this._delta-=f,this._active||this._start(l)),l.preventDefault()}_onTimeout(l){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(l)}_start(l){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const f=W(this._el,l);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:f,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const l=this._map.transform;this._type==="wheel"&&l.projection.wrap&&(l._center.lng>=180||l._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const f=()=>l._terrainEnabled()&&this._aroundCoord?l.computeZoomRelativeTo(this._aroundCoord):l.zoom;if(this._delta!==0){const z=this._type==="wheel"&&Math.abs(this._delta)>S_?this._wheelZoomRate:this._defaultZoomRate;let V=2/(1+Math.exp(-Math.abs(this._delta*z)));this._delta<0&&V!==0&&(V=1/V);const U=f(),Z=Math.pow(2,U),te=typeof this._targetZoom=="number"?l.zoomScale(this._targetZoom):Z;this._targetZoom=Math.min(l.maxZoom,Math.max(l.minZoom,l.scaleZoom(te*V))),this._type==="wheel"&&(this._startZoom=U,this._easing=this._smoothOutEasing(200)),this._delta=0}const y=typeof this._targetZoom=="number"?this._targetZoom:f(),x=this._startZoom,S=this._easing;let C,I=!1;if(this._type==="wheel"&&x&&S){const z=Math.min((o.exported.now()-this._lastWheelEventTime)/200,1),V=S(z);C=o.number(x,y,V),z<1?this._frameId||(this._frameId=!0):I=!0}else C=y,I=!0;return this._active=!0,I&&(this._active=!1,this._finishTimeout=setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200)),{noInertia:!0,needsRenderFrame:!I,zoomDelta:C-f(),around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(l){let f=o.ease;if(this._prevEase){const y=this._prevEase,x=(o.exported.now()-y.start)/y.duration,S=y.easing(x+.01)-y.easing(x),C=.27/Math.sqrt(S*S+1e-4)*.01,I=Math.sqrt(.0729-C*C);f=o.bezier(C,I,.25,1)}return this._prevEase={start:o.exported.now(),duration:l,easing:f},f}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=P("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(o.window.navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","null")},200)}}class E_{constructor(l,f){this._clickZoom=l,this._tapZoom=f}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class ec{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(l,f){return l.preventDefault(),{cameraAnimation:y=>{y.easeTo({duration:300,zoom:y.getZoom()+(l.shiftKey?-1:1),around:y.unproject(f)},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ha{constructor(){this._tap=new Jl({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(l,f,y){this._swipePoint||(this._tapTime&&l.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?y.length>0&&(this._swipePoint=f[0],this._swipeTouch=y[0].identifier):this._tap.touchstart(l,f,y))}touchmove(l,f,y){if(this._tapTime){if(this._swipePoint){if(y[0].identifier!==this._swipeTouch)return;const x=f[0],S=x.y-this._swipePoint.y;return this._swipePoint=x,l.preventDefault(),this._active=!0,{zoomDelta:S/128}}}else this._tap.touchmove(l,f,y)}touchend(l,f,y){this._tapTime?this._swipePoint&&y.length===0&&this.reset():this._tap.touchend(l,f,y)&&(this._tapTime=l.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Hh{constructor(l,f,y){this._el=l,this._mousePan=f,this._touchPan=y}enable(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Dt{constructor(l,f,y){this._pitchWithRotate=l.pitchWithRotate,this._mouseRotate=f,this._mousePitch=y}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class T_{constructor(l,f,y,x){this._el=l,this._touchZoom=f,this._touchRotate=y,this._tapDragZoom=x,this._rotationDisabled=!1,this._enabled=!0}enable(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const xu=m=>m.zoom||m.drag||m.pitch||m.rotate;class bu extends o.Event{}class wu{constructor(){this.constants=[1,1,.01],this.radius=0}setup(l,f){const y=o.sub([],f,l);this.radius=o.length(y[2]<0?o.div([],y,this.constants):[y[0],y[1],0])}projectRay(l){o.div(l,l,this.constants),o.normalize(l,l),o.mul$1(l,l,this.constants);const f=o.scale$2([],l,this.radius);if(f[2]>0){const y=o.scale$2([],[0,0,1],o.dot(f,[0,0,1])),x=o.scale$2([],o.normalize([],[f[0],f[1],0]),this.radius),S=o.add([],f,o.scale$2([],o.sub([],o.add([],x,y),f),2));f[0]=S[0],f[1]=S[1]}return f}}function Su(m){return m.panDelta&&m.panDelta.mag()||m.zoomDelta||m.bearingDelta||m.pitchDelta}class A_{constructor(l,f){this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Nh(l),this._bearingSnap=f.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new wu,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(f),o.bindAll(["handleEvent","handleWindowEvent"],this);const y=this._el;this._listeners=[[y,"touchstart",{passive:!0}],[y,"touchmove",{passive:!1}],[y,"touchend",void 0],[y,"touchcancel",void 0],[y,"mousedown",void 0],[y,"mousemove",void 0],[y,"mouseup",void 0],[o.window.document,"mousemove",{capture:!0}],[o.window.document,"mouseup",void 0],[y,"mouseover",void 0],[y,"mouseout",void 0],[y,"dblclick",void 0],[y,"click",void 0],[y,"keydown",{capture:!1}],[y,"keyup",void 0],[y,"wheel",{passive:!1}],[y,"contextmenu",void 0],[o.window,"blur",void 0]];for(const[x,S,C]of this._listeners)x.addEventListener(S,x===o.window.document?this.handleWindowEvent:this.handleEvent,C)}destroy(){for(const[l,f,y]of this._listeners)l.removeEventListener(f,l===o.window.document?this.handleWindowEvent:this.handleEvent,y)}_addDefaultHandlers(l){const f=this._map,y=f.getCanvasContainer();this._add("mapEvent",new m_(f,l));const x=f.boxZoom=new Op(f,l);this._add("boxZoom",x);const S=new Dp,C=new ec;f.doubleClickZoom=new E_(C,S),this._add("tapZoom",S),this._add("clickZoom",C);const I=new ha;this._add("tapDragZoom",I);const z=f.touchPitch=new Ai(f);this._add("touchPitch",z);const V=new Rp(l),U=new Lp(l);f.dragRotate=new Dt(l,V,U),this._add("mouseRotate",V,["mousePitch"]),this._add("mousePitch",U,["mouseRotate"]);const Z=new __(l),te=new Ql(f,l);f.dragPan=new Hh(y,Z,te),this._add("mousePan",Z),this._add("touchPan",te,["touchZoom","touchRotate"]);const ne=new b_,oe=new x_;f.touchZoomRotate=new T_(y,oe,ne,I),this._add("touchRotate",ne,["touchPan","touchZoom"]),this._add("touchZoom",oe,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Uh(f));const ae=f.scrollZoom=new Fa(f,this);this._add("scrollZoom",ae,["mousePan"]);const se=f.keyboard=new w_;this._add("keyboard",se);for(const Q of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])l.interactive&&l[Q]&&f[Q].enable(l[Q])}_add(l,f,y){this._handlers.push({handlerName:l,handler:f,allowed:y}),this._handlersById[l]=f}stop(l){if(!this._updatingCamera){for(const{handler:f}of this._handlers)f.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[]}}isActive(){for(const{handler:l}of this._handlers)if(l.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!xu(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(l,f,y){for(const x in l)if(x!==y&&(!f||f.indexOf(x)<0))return!0;return!1}handleWindowEvent(l){this.handleEvent(l,`${l.type}Window`)}_getMapTouches(l){const f=[];for(const y of l)this._el.contains(y.target)&&f.push(y);return f}handleEvent(l,f){this._updatingCamera=!0;const y=l.type==="renderFrame",x=y?void 0:l,S={needsRenderFrame:!1},C={},I={},z=l.touches?this._getMapTouches(l.touches):void 0,V=z?Y(this._el,z):y?void 0:W(this._el,l);for(const{handlerName:te,handler:ne,allowed:oe}of this._handlers){if(!ne.isEnabled())continue;let ae;this._blockedByActive(I,oe,te)?ne.reset():ne[f||l.type]&&(ae=ne[f||l.type](l,V,z),this.mergeHandlerResult(S,C,ae,te,x),ae&&ae.needsRenderFrame&&this._triggerRenderFrame()),(ae||ne.isActive())&&(I[te]=ne)}const U={};for(const te in this._previousActiveHandlers)I[te]||(U[te]=x);this._previousActiveHandlers=I,(Object.keys(U).length||Su(S))&&(this._changes.push([S,C,U]),this._triggerRenderFrame()),(Object.keys(I).length||Su(S))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:Z}=S;Z&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Z(this._map))}mergeHandlerResult(l,f,y,x,S){if(!y)return;o.extend(l,y);const C={handlerName:x,originalEvent:y.originalEvent||S};y.zoomDelta!==void 0&&(f.zoom=C),y.panDelta!==void 0&&(f.drag=C),y.pitchDelta!==void 0&&(f.pitch=C),y.bearingDelta!==void 0&&(f.rotate=C)}_applyChanges(){const l={},f={},y={};for(const[x,S,C]of this._changes)x.panDelta&&(l.panDelta=(l.panDelta||new o.pointGeometry(0,0))._add(x.panDelta)),x.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+x.zoomDelta),x.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+x.bearingDelta),x.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+x.pitchDelta),x.around!==void 0&&(l.around=x.around),x.aroundCoord!==void 0&&(l.aroundCoord=x.aroundCoord),x.pinchAround!==void 0&&(l.pinchAround=x.pinchAround),x.noInertia&&(l.noInertia=x.noInertia),o.extend(f,S),o.extend(y,C);this._updateMapTransform(l,f,y),this._changes=[]}_updateMapTransform(l,f,y){const x=this._map,S=x.transform,C=fe=>[fe.x,fe.y,fe.z];if((fe=>{const he=this._eventsInProgress.drag;return he&&!this._handlersById[he.handlerName].isActive()})()&&!Su(l)){const fe=S.zoom;S.cameraElevationReference="sea",S.recenterOnTerrain(),S.cameraElevationReference="ground",fe!==S.zoom&&this._map._update(!0)}if(S._isCameraConstrained&&x._stop(!0),!Su(l))return void this._fireEvents(f,y,!0);let{panDelta:I,zoomDelta:z,bearingDelta:V,pitchDelta:U,around:Z,aroundCoord:te,pinchAround:ne}=l;S._isCameraConstrained&&(z>0&&(z=0),S._isCameraConstrained=!1),ne!==void 0&&(Z=ne),(z||(fe=>f.drag&&!this._eventsInProgress.drag)())&&Z&&(this._dragOrigin=C(S.pointCoordinate3D(Z)),this._trackingEllipsoid.setup(S._camera.position,this._dragOrigin)),S.cameraElevationReference="sea",x._stop(!0),Z=Z||x.transform.centerPoint,V&&(S.bearing+=V),U&&(S.pitch+=U),S._updateCameraState();const oe=[0,0,0];if(I)if(S.projection.name==="mercator"){const fe=this._trackingEllipsoid.projectRay(S.screenPointToMercatorRay(Z).dir),he=this._trackingEllipsoid.projectRay(S.screenPointToMercatorRay(Z.sub(I)).dir);oe[0]=he[0]-fe[0],oe[1]=he[1]-fe[1]}else{const fe=S.pointCoordinate(Z);if(S.projection.name==="globe"){I=I.rotate(-S.angle);const he=S._pixelsPerMercatorPixel/S.worldSize;oe[0]=-I.x*o.mercatorScale(o.latFromMercatorY(fe.y))*he,oe[1]=-I.y*o.mercatorScale(S.center.lat)*he}else{const he=S.pointCoordinate(Z.sub(I));fe&&he&&(oe[0]=he.x-fe.x,oe[1]=he.y-fe.y)}}const ae=S.zoom,se=[0,0,0];if(z){const fe=C(te||S.pointCoordinate3D(Z)),he={dir:o.normalize([],o.sub([],fe,S._camera.position))};if(he.dir[2]<0){const me=S.zoomDeltaToMovement(fe,z);o.scale$2(se,he.dir,me)}}const Q=o.add(oe,oe,se);S._translateCameraConstrained(Q),z&&Math.abs(S.zoom-ae)>1e-4&&S.recenterOnTerrain(),S.cameraElevationReference="ground",this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(f,y,!0)}_fireEvents(l,f,y){const x=xu(this._eventsInProgress),S=xu(l),C={};for(const U in l){const{originalEvent:Z}=l[U];this._eventsInProgress[U]||(C[`${U}start`]=Z),this._eventsInProgress[U]=l[U]}!x&&S&&this._fireEvent("movestart",S.originalEvent);for(const U in C)this._fireEvent(U,C[U]);S&&this._fireEvent("move",S.originalEvent);for(const U in l){const{originalEvent:Z}=l[U];this._fireEvent(U,Z)}const I={};let z;for(const U in this._eventsInProgress){const{handlerName:Z,originalEvent:te}=this._eventsInProgress[U];this._handlersById[Z].isActive()||(delete this._eventsInProgress[U],z=f[Z]||te,I[`${U}end`]=z)}for(const U in I)this._fireEvent(U,I[U]);const V=xu(this._eventsInProgress);if(y&&(x||S)&&!V){this._updatingCamera=!0;const U=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Z=te=>te!==0&&-this._bearingSnap<te&&te<this._bearingSnap;U?(Z(U.bearing||this._map.getBearing())&&(U.bearing=0),this._map.easeTo(U,{originalEvent:z})):(this._map.fire(new o.Event("moveend",{originalEvent:z})),Z(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(l,f){this._map.fire(new o.Event(l,f?{originalEvent:f}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(l=>{this._frameId=void 0,this.handleEvent(new bu("renderFrame",{timeStamp:l})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Bp="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class M_ extends o.Evented{constructor(l,f){super(),this._moving=!1,this._zooming=!1,this.transform=l,this._bearingSnap=f.bearingSnap,o.bindAll(["_renderFrameCallback"],this)}getCenter(){return new o.LngLat(this.transform.center.lng,this.transform.center.lat)}setCenter(l,f){return this.jumpTo({center:l},f)}panBy(l,f,y){return l=o.pointGeometry.convert(l).mult(-1),this.panTo(this.transform.center,o.extend({offset:l},f),y)}panTo(l,f,y){return this.easeTo(o.extend({center:l},f),y)}getZoom(){return this.transform.zoom}setZoom(l,f){return this.jumpTo({zoom:l},f),this}zoomTo(l,f,y){return this.easeTo(o.extend({zoom:l},f),y)}zoomIn(l,f){return this.zoomTo(this.getZoom()+1,l,f),this}zoomOut(l,f){return this.zoomTo(this.getZoom()-1,l,f),this}getBearing(){return this.transform.bearing}setBearing(l,f){return this.jumpTo({bearing:l},f),this}getPadding(){return this.transform.padding}setPadding(l,f){return this.jumpTo({padding:l},f),this}rotateTo(l,f,y){return this.easeTo(o.extend({bearing:l},f),y)}resetNorth(l,f){return this.rotateTo(0,o.extend({duration:1e3},l),f),this}resetNorthPitch(l,f){return this.easeTo(o.extend({bearing:0,pitch:0,duration:1e3},l),f),this}snapToNorth(l,f){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(l,f):this}getPitch(){return this.transform.pitch}setPitch(l,f){return this.jumpTo({pitch:l},f),this}cameraForBounds(l,f){l=o.LngLatBounds.convert(l);const y=f&&f.bearing||0,x=f&&f.pitch||0,S=l.getNorthWest(),C=l.getSouthEast();return this._cameraForBounds(this.transform,S,C,y,x,f)}_extendCameraOptions(l){const f={top:0,bottom:0,right:0,left:0};if(typeof(l=o.extend({padding:f,offset:[0,0],maxZoom:this.transform.maxZoom},l)).padding=="number"){const y=l.padding;l.padding={top:y,bottom:y,right:y,left:y}}return l.padding=o.extend(f,l.padding),l}_minimumAABBFrustumDistance(l,f){const y=f.max[0]-f.min[0],x=f.max[1]-f.min[1];return y/x>l.aspect?y/(2*Math.tan(.5*l.fovX)*l.aspect):x/(2*Math.tan(.5*l.fovY)*l.aspect)}_cameraForBoundsOnGlobe(l,f,y,x,S,C){const I=l.clone(),z=this._extendCameraOptions(C);I.bearing=x,I.pitch=S;const V=o.LngLat.convert(f),U=o.LngLat.convert(y),Z=.5*(V.lat+U.lat),te=.5*(V.lng+U.lng),ne=o.latLngToECEF(Z,te),oe=o.normalize([],ne),ae=o.normalize([],o.cross([],oe,[0,1,0])),se=o.cross([],ae,oe),Q=[ae[0],ae[1],ae[2],0,se[0],se[1],se[2],0,oe[0],oe[1],oe[2],0,0,0,0,1],fe=[ne,o.latLngToECEF(V.lat,V.lng),o.latLngToECEF(U.lat,V.lng),o.latLngToECEF(U.lat,U.lng),o.latLngToECEF(V.lat,U.lng),o.latLngToECEF(Z,V.lng),o.latLngToECEF(Z,U.lng),o.latLngToECEF(V.lat,te),o.latLngToECEF(U.lat,te)];let he=o.Aabb.fromPoints(fe.map(ot=>[o.dot(ae,ot),o.dot(se,ot),o.dot(oe,ot)]));const me=o.transformMat4([],he.center,Q);o.squaredLength(me)===0&&o.set(me,0,0,1),o.normalize(me,me),o.scale$2(me,me,o.GLOBE_RADIUS),I.center=o.ecefToLatLng(me);const we=I.getWorldToCameraMatrix(),ve=o.invert(new Float64Array(16),we);he=o.Aabb.applyTransform(he,o.multiply([],we,Q)),o.transformMat4(me,me,we);const Ee=.5*(he.max[2]-he.min[2]),ke=this._minimumAABBFrustumDistance(I,he),Le=o.scale$2([],[0,0,1],Ee),Ne=o.add(Le,me,Le),yt=ke+(I.pitch===0?0:o.distance(me,Ne)),Oe=I.globeCenterInViewSpace,rt=o.sub([],me,[Oe[0],Oe[1],Oe[2]]);o.normalize(rt,rt),o.scale$2(rt,rt,yt);const We=o.add([],me,rt);o.transformMat4(We,We,ve);const st=o.earthRadius/o.GLOBE_RADIUS,$e=o.length(We),Pe=o.mercatorZfromAltitude(Math.max($e*st-o.earthRadius,Number.EPSILON),0),je=Math.min(I.zoomFromMercatorZAdjusted(Pe),z.maxZoom);return je>.5*(o.GLOBE_ZOOM_THRESHOLD_MIN+o.GLOBE_ZOOM_THRESHOLD_MAX)?(I.setProjection({name:"mercator"}),I.zoom=je,this._cameraForBounds(I,f,y,x,S,C)):{center:I.center,zoom:je,bearing:x,pitch:S}}queryTerrainElevation(l,f){const y=this.transform.elevation;return y?(f=o.extend({},{exaggerated:!0},f),y.getAtPoint(o.MercatorCoordinate.fromLngLat(l),null,f.exaggerated)):null}_cameraForBounds(l,f,y,x,S,C){if(l.projection.name==="globe")return this._cameraForBoundsOnGlobe(l,f,y,x,S,C);const I=l.clone(),z=this._extendCameraOptions(C),V=I.padding;I.bearing=x,I.pitch=S;const U=o.LngLat.convert(f),Z=o.LngLat.convert(y),te=new o.LngLat(U.lng,Z.lat),ne=new o.LngLat(Z.lng,U.lat),oe=I.project(U),ae=I.project(Z),se=this.queryTerrainElevation(U),Q=this.queryTerrainElevation(Z),fe=this.queryTerrainElevation(te),he=this.queryTerrainElevation(ne),me=[[oe.x,oe.y,Math.min(se||0,Q||0,fe||0,he||0)],[ae.x,ae.y,Math.max(se||0,Q||0,fe||0,he||0)]];let we=o.Aabb.fromPoints(me);const ve=I.getWorldToCameraMatrix(),Ee=o.invert(new Float64Array(16),ve);we=o.Aabb.applyTransform(we,ve);const ke=o.sub([],we.max,we.min),Le=V.left||0,Ne=V.right||0,yt=V.bottom||0,Oe=V.top||0,{left:rt,right:We,top:st,bottom:$e}=z.padding,Pe=.5*(Le+Ne),je=.5*(Oe+yt),ot=Math.min(I.scaleZoom(I.scale*Math.min((I.width-(Le+Ne+rt+We))/ke[0],(I.height-(yt+Oe+$e+st))/ke[1])),z.maxZoom),ct=I.scale/I.zoomScale(ot);we=new o.Aabb([we.min[0]-(rt+Pe)*ct,we.min[1]-($e+je)*ct,we.min[2]],[we.max[0]+(We+Pe)*ct,we.max[1]+(st+je)*ct,we.max[2]]);const Ft=.5*ke[2],dr=this._minimumAABBFrustumDistance(I,we),Lt=[0,0,1,0];o.transformMat4$1(Lt,Lt,ve),o.normalize$2(Lt,Lt);const It=o.scale$2([],Lt,dr+Ft),Nt=o.add([],we.center,It),xr=(typeof z.offset.x=="number"&&typeof z.offset.y=="number"?new o.pointGeometry(z.offset.x,z.offset.y):o.pointGeometry.convert(z.offset)).rotate(-o.degToRad(x));we.center[0]-=xr.x*ct,we.center[1]+=xr.y*ct,o.transformMat4(we.center,we.center,Ee),o.transformMat4(Nt,Nt,Ee);const qt=[we.center[0],we.center[1],Nt[2]*I.pixelsPerMeter];o.scale$2(qt,qt,1/I.worldSize);const Fr=o.lngFromMercatorX(qt[0]),Ur=o.latFromMercatorY(qt[1]),nn=Math.min(I._zoomFromMercatorZ(qt[2]),z.maxZoom),Jr=new o.LngLat(Fr,Ur);return I.mercatorFromTransition&&nn<.5*(o.GLOBE_ZOOM_THRESHOLD_MIN+o.GLOBE_ZOOM_THRESHOLD_MAX)?(I.setProjection({name:"globe"}),I.zoom=nn,this._cameraForBounds(I,f,y,x,S,C)):{center:Jr,zoom:nn,bearing:x,pitch:S}}fitBounds(l,f,y){const x=this.cameraForBounds(l,f);return this._fitInternal(x,f,y)}fitScreenCoordinates(l,f,y,x,S){const C=o.pointGeometry.convert(l),I=o.pointGeometry.convert(f),z=new o.pointGeometry(Math.min(C.x,I.x),Math.min(C.y,I.y)),V=new o.pointGeometry(Math.max(C.x,I.x),Math.max(C.y,I.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(C,I))return this;const U=this.transform.pointLocation3D(z),Z=this.transform.pointLocation3D(V),te=this.transform.pointLocation3D(new o.pointGeometry(z.x,V.y)),ne=this.transform.pointLocation3D(new o.pointGeometry(V.x,z.y)),oe=[Math.min(U.lng,Z.lng,te.lng,ne.lng),Math.min(U.lat,Z.lat,te.lat,ne.lat)],ae=[Math.max(U.lng,Z.lng,te.lng,ne.lng),Math.max(U.lat,Z.lat,te.lat,ne.lat)],se=x&&x.pitch?x.pitch:this.getPitch(),Q=this._cameraForBounds(this.transform,oe,ae,y,se,x);return this._fitInternal(Q,x,S)}_fitInternal(l,f,y){return l?(delete(f=o.extend(l,f)).padding,f.linear?this.easeTo(f,y):this.flyTo(f,y)):this}jumpTo(l,f){this.stop();const y=l.preloadOnly?this.transform.clone():this.transform;let x=!1,S=!1,C=!1;return"zoom"in l&&y.zoom!==+l.zoom&&(x=!0,y.zoom=+l.zoom),l.center!==void 0&&(y.center=o.LngLat.convert(l.center)),"bearing"in l&&y.bearing!==+l.bearing&&(S=!0,y.bearing=+l.bearing),"pitch"in l&&y.pitch!==+l.pitch&&(C=!0,y.pitch=+l.pitch),l.padding==null||y.isPaddingEqual(l.padding)||(y.padding=l.padding),l.preloadOnly?(this._preloadTiles(y),this):(this.fire(new o.Event("movestart",f)).fire(new o.Event("move",f)),x&&this.fire(new o.Event("zoomstart",f)).fire(new o.Event("zoom",f)).fire(new o.Event("zoomend",f)),S&&this.fire(new o.Event("rotatestart",f)).fire(new o.Event("rotate",f)).fire(new o.Event("rotateend",f)),C&&this.fire(new o.Event("pitchstart",f)).fire(new o.Event("pitch",f)).fire(new o.Event("pitchend",f)),this.fire(new o.Event("moveend",f)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||o.warnOnce(Bp),this.transform.getFreeCameraOptions()}setFreeCameraOptions(l,f){const y=this.transform;if(!y.projection.supportsFreeCamera)return o.warnOnce(Bp),this;this.stop();const x=y.zoom,S=y.pitch,C=y.bearing;y.setFreeCameraOptions(l);const I=x!==y.zoom,z=S!==y.pitch,V=C!==y.bearing;return this.fire(new o.Event("movestart",f)).fire(new o.Event("move",f)),I&&this.fire(new o.Event("zoomstart",f)).fire(new o.Event("zoom",f)).fire(new o.Event("zoomend",f)),V&&this.fire(new o.Event("rotatestart",f)).fire(new o.Event("rotate",f)).fire(new o.Event("rotateend",f)),z&&this.fire(new o.Event("pitchstart",f)).fire(new o.Event("pitch",f)).fire(new o.Event("pitchend",f)),this.fire(new o.Event("moveend",f)),this}easeTo(l,f){this._stop(!1,l.easeId),((l=o.extend({offset:[0,0],duration:500,easing:o.ease},l)).animate===!1||!l.essential&&o.exported.prefersReducedMotion)&&(l.duration=0);const y=this.transform,x=this.getZoom(),S=this.getBearing(),C=this.getPitch(),I=this.getPadding(),z="zoom"in l?+l.zoom:x,V="bearing"in l?this._normalizeBearing(l.bearing,S):S,U="pitch"in l?+l.pitch:C,Z="padding"in l?l.padding:y.padding,te=o.pointGeometry.convert(l.offset);let ne,oe,ae;if(y.projection.name==="globe"){const Le=o.MercatorCoordinate.fromLngLat(y.center),Ne=te.rotate(-y.angle);Le.x+=Ne.x/y.worldSize,Le.y+=Ne.y/y.worldSize;const yt=Le.toLngLat(),Oe=o.LngLat.convert(l.center||yt);this._normalizeCenter(Oe),ne=y.centerPoint.add(Ne),oe=new o.pointGeometry(Le.x,Le.y).mult(y.worldSize),ae=new o.pointGeometry(o.mercatorXfromLng(Oe.lng),o.mercatorYfromLat(Oe.lat)).mult(y.worldSize).sub(oe)}else{ne=y.centerPoint.add(te);const Le=y.pointLocation(ne),Ne=o.LngLat.convert(l.center||Le);this._normalizeCenter(Ne),oe=y.project(Le),ae=y.project(Ne).sub(oe)}const se=y.zoomScale(z-x);let Q,fe;l.around&&(Q=o.LngLat.convert(l.around),fe=y.locationPoint(Q));const he=this._zooming||z!==x,me=this._rotating||S!==V,we=this._pitching||U!==C,ve=!y.isPaddingEqual(Z),Ee=Le=>Ne=>{if(he&&(Le.zoom=o.number(x,z,Ne)),me&&(Le.bearing=o.number(S,V,Ne)),we&&(Le.pitch=o.number(C,U,Ne)),ve&&(Le.interpolatePadding(I,Z,Ne),ne=Le.centerPoint.add(te)),Q)Le.setLocationAtPoint(Q,fe);else{const yt=Le.zoomScale(Le.zoom-x),Oe=z>x?Math.min(2,se):Math.max(.5,se),rt=Math.pow(Oe,1-Ne),We=Le.unproject(oe.add(ae.mult(Ne*rt)).mult(yt));Le.setLocationAtPoint(Le.renderWorldCopies?We.wrap():We,ne)}return l.preloadOnly||this._fireMoveEvents(f),Le};if(l.preloadOnly){const Le=this._emulate(Ee,l.duration,y);return this._preloadTiles(Le),this}const ke={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=he,this._rotating=me,this._pitching=we,this._padding=ve,this._easeId=l.easeId,this._prepareEase(f,l.noMoveStart,ke),this._ease(Ee(y),Le=>{y.recenterOnTerrain(),this._afterEase(f,Le)},l),this}_prepareEase(l,f,y={}){this._moving=!0,this.transform.cameraElevationReference="sea",f||y.moving||this.fire(new o.Event("movestart",l)),this._zooming&&!y.zooming&&this.fire(new o.Event("zoomstart",l)),this._rotating&&!y.rotating&&this.fire(new o.Event("rotatestart",l)),this._pitching&&!y.pitching&&this.fire(new o.Event("pitchstart",l))}_fireMoveEvents(l){this.fire(new o.Event("move",l)),this._zooming&&this.fire(new o.Event("zoom",l)),this._rotating&&this.fire(new o.Event("rotate",l)),this._pitching&&this.fire(new o.Event("pitch",l))}_afterEase(l,f){if(this._easeId&&f&&this._easeId===f)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const y=this._zooming,x=this._rotating,S=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,y&&this.fire(new o.Event("zoomend",l)),x&&this.fire(new o.Event("rotateend",l)),S&&this.fire(new o.Event("pitchend",l)),this.fire(new o.Event("moveend",l))}flyTo(l,f){if(!l.essential&&o.exported.prefersReducedMotion){const ot=o.pick(l,["center","zoom","bearing","pitch","around"]);return this.jumpTo(ot,f)}this.stop(),l=o.extend({offset:[0,0],speed:1.2,curve:1.42,easing:o.ease},l);const y=this.transform,x=this.getZoom(),S=this.getBearing(),C=this.getPitch(),I=this.getPadding(),z="zoom"in l?o.clamp(+l.zoom,y.minZoom,y.maxZoom):x,V="bearing"in l?this._normalizeBearing(l.bearing,S):S,U="pitch"in l?+l.pitch:C,Z="padding"in l?l.padding:y.padding,te=y.zoomScale(z-x),ne=o.pointGeometry.convert(l.offset);let oe=y.centerPoint.add(ne);const ae=y.pointLocation(oe),se=o.LngLat.convert(l.center||ae);this._normalizeCenter(se);const Q=y.project(ae),fe=y.project(se).sub(Q);let he=l.curve;const me=Math.max(y.width,y.height),we=me/te,ve=fe.mag();if("minZoom"in l){const ot=o.clamp(Math.min(l.minZoom,x,z),y.minZoom,y.maxZoom),ct=me/y.zoomScale(ot-x);he=Math.sqrt(ct/ve*2)}const Ee=he*he;function ke(ot){const ct=(we*we-me*me+(ot?-1:1)*Ee*Ee*ve*ve)/(2*(ot?we:me)*Ee*ve);return Math.log(Math.sqrt(ct*ct+1)-ct)}function Le(ot){return(Math.exp(ot)-Math.exp(-ot))/2}function Ne(ot){return(Math.exp(ot)+Math.exp(-ot))/2}const yt=ke(0);let Oe=function(ot){return Ne(yt)/Ne(yt+he*ot)},rt=function(ot){return me*((Ne(yt)*(Le(ct=yt+he*ot)/Ne(ct))-Le(yt))/Ee)/ve;var ct},We=(ke(1)-yt)/he;if(Math.abs(ve)<1e-6||!isFinite(We)){if(Math.abs(me-we)<1e-6)return this.easeTo(l,f);const ot=we<me?-1:1;We=Math.abs(Math.log(we/me))/he,rt=function(){return 0},Oe=function(ct){return Math.exp(ot*he*ct)}}l.duration="duration"in l?+l.duration:1e3*We/("screenSpeed"in l?+l.screenSpeed/he:+l.speed),l.maxDuration&&l.duration>l.maxDuration&&(l.duration=0);const st=S!==V,$e=U!==C,Pe=!y.isPaddingEqual(Z),je=ot=>ct=>{const Ft=ct*We,dr=1/Oe(Ft);ot.zoom=ct===1?z:x+ot.scaleZoom(dr),st&&(ot.bearing=o.number(S,V,ct)),$e&&(ot.pitch=o.number(C,U,ct)),Pe&&(ot.interpolatePadding(I,Z,ct),oe=ot.centerPoint.add(ne));const Lt=ct===1?se:ot.unproject(Q.add(fe.mult(rt(Ft))).mult(dr));return ot.setLocationAtPoint(ot.renderWorldCopies?Lt.wrap():Lt,oe),ot._updateCameraOnTerrain(),l.preloadOnly||this._fireMoveEvents(f),ot};if(l.preloadOnly){const ot=this._emulate(je,l.duration,y);return this._preloadTiles(ot),this}return this._zooming=!0,this._rotating=st,this._pitching=$e,this._padding=Pe,this._prepareEase(f,!1),this._ease(je(y),()=>this._afterEase(f),l),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(l,f){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const y=this._onEaseEnd;this._onEaseEnd=void 0,y.call(this,f)}if(!l){const y=this.handlers;y&&y.stop(!1)}return this}_ease(l,f,y){y.animate===!1||y.duration===0?(l(1),f()):(this._easeStart=o.exported.now(),this._easeOptions=y,this._onEaseFrame=l,this._onEaseEnd=f,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const l=Math.min((o.exported.now()-this._easeStart)/this._easeOptions.duration,1),f=this._onEaseFrame;f&&f(this._easeOptions.easing(l)),l<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(l,f){l=o.wrap(l,-180,180);const y=Math.abs(l-f);return Math.abs(l-360-f)<y&&(l-=360),Math.abs(l+360-f)<y&&(l+=360),l}_normalizeCenter(l){const f=this.transform;if(!f.renderWorldCopies||f.maxBounds)return;const y=l.lng-f.center.lng;l.lng+=y>180?-360:y<-180?360:0}_emulate(l,f,y){const x=Math.ceil(15*f/1e3),S=[],C=l(y.clone());for(let I=0;I<=x;I++){const z=C(I/x);S.push(z.clone())}return S}}class $p{constructor(l={}){this.options=l,o.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(l){const f=this.options&&this.options.compact;return this._map=l,this._container=P("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=P("button","mapboxgl-ctrl-attrib-button",this._container),P("span","mapboxgl-ctrl-icon",this._compactButton).setAttribute("aria-hidden","true"),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=P("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),f&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),f===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_setElementTitle(l,f){const y=this._map._getUIString(`AttributionControl.${f}`);l.setAttribute("aria-label",y),l.removeAttribute("title"),l.firstElementChild&&l.firstElementChild.setAttribute("title",y)}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let l=this._editLink;l||(l=this._editLink=this._container.querySelector(".mapbox-improve-map"));const f=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||o.config.ACCESS_TOKEN}];if(l){const y=f.reduce((x,S,C)=>(S.value&&(x+=`${S.key}=${S.value}${C<f.length-1?"&":""}`),x),"?");l.href=`${o.config.FEEDBACK_URL}/${y}#${Ip(this._map,!0)}`,l.rel="noopener nofollow",this._setElementTitle(l,"MapFeedback")}}_updateData(l){!l||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility"&&l.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let l=[];if(this._map.style.stylesheet){const x=this._map.style.stylesheet;this.styleOwner=x.owner,this.styleId=x.id}const f=this._map.style._sourceCaches;for(const x in f){const S=f[x];if(S.used){const C=S.getSource();C.attribution&&l.indexOf(C.attribution)<0&&l.push(C.attribution)}}l.sort((x,S)=>x.length-S.length),l=l.filter((x,S)=>{for(let C=S+1;C<l.length;C++)if(l[C].indexOf(x)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=[...this.options.customAttribution,...l]:l.unshift(this.options.customAttribution));const y=l.join(" | ");y!==this._attribHTML&&(this._attribHTML=y,l.length?(this._innerContainer.innerHTML=y,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Fp{constructor(){o.bindAll(["_updateLogo","_updateCompact"],this)}onAdd(l){this._map=l,this._container=P("div","mapboxgl-ctrl");const f=P("a","mapboxgl-ctrl-logo");return f.target="_blank",f.rel="noopener nofollow",f.href="https://www.mapbox.com/",f.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),f.setAttribute("rel","noopener nofollow"),this._container.appendChild(f),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(l){l&&l.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const l=this._map.style._sourceCaches;if(Object.entries(l).length===0)return!0;for(const f in l){const y=l[f].getSource();if(y.hasOwnProperty("mapbox_logo")&&!y.mapbox_logo)return!1}return!0}_updateCompact(){const l=this._container.children;if(l.length){const f=l[0];this._map.getCanvasContainer().offsetWidth<250?f.classList.add("mapboxgl-compact"):f.classList.remove("mapboxgl-compact")}}}class Eu{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(l){const f=++this._id;return this._queue.push({callback:l,id:f,cancelled:!1}),f}remove(l){const f=this._currentlyRunning,y=f?this._queue.concat(f):this._queue;for(const x of y)if(x.id===l)return void(x.cancelled=!0)}run(l=0){const f=this._currentlyRunning=this._queue;this._queue=[];for(const y of f)if(!y.cancelled&&(y.callback(l),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}function Zh(m,l,f){if(m=new o.LngLat(m.lng,m.lat),l){const y=new o.LngLat(m.lng-360,m.lat),x=new o.LngLat(m.lng+360,m.lat),S=360*Math.ceil(Math.abs(m.lng-f.center.lng)/360),C=f.locationPoint(m).distSqr(l),I=l.x<0||l.y<0||l.x>f.width||l.y>f.height;f.locationPoint(y).distSqr(l)<C&&(I||Math.abs(y.lng-f.center.lng)<S)?m=y:f.locationPoint(x).distSqr(l)<C&&(I||Math.abs(x.lng-f.center.lng)<S)&&(m=x)}for(;Math.abs(m.lng-f.center.lng)>180;){const y=f.locationPoint(m);if(y.x>=0&&y.y>=0&&y.x<=f.width&&y.y<=f.height)break;m.lng>f.center.lng?m.lng-=360:m.lng+=360}return m}const tc={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class Xh extends o.Evented{constructor(l,f){if(super(),(l instanceof o.window.HTMLElement||f)&&(l=o.extend({element:l},f)),o.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=l&&l.anchor||"center",this._color=l&&l.color||"#3FB1CE",this._scale=l&&l.scale||1,this._draggable=l&&l.draggable||!1,this._clickTolerance=l&&l.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=l&&l.rotation||0,this._rotationAlignment=l&&l.rotationAlignment||"auto",this._pitchAlignment=l&&l.pitchAlignment&&l.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=l&&l.occludedOpacity||.2,l&&l.element)this._element=l.element,this._offset=o.pointGeometry.convert(l&&l.offset||[0,0]);else{this._defaultMarker=!0,this._element=P("div");const x=41,S=27,C=$("svg",{display:"block",height:x*this._scale+"px",width:S*this._scale+"px",viewBox:`0 0 ${S} ${x}`},this._element),I=$("radialGradient",{id:"shadowGradient"},$("defs",{},C));$("stop",{offset:"10%","stop-opacity":.4},I),$("stop",{offset:"100%","stop-opacity":.05},I),$("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},C),$("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},C),$("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},C),$("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},C),this._offset=o.pointGeometry.convert(l&&l.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",x=>{x.preventDefault()}),this._element.addEventListener("mousedown",x=>{x.preventDefault()});const y=this._element.classList;for(const x in tc)y.remove(`mapboxgl-marker-anchor-${x}`);y.add(`mapboxgl-marker-anchor-${this._anchor}`),this._popup=null}addTo(l){return l===this._map||(this.remove(),this._map=l,l.getCanvasContainer().appendChild(this._element),l.on("move",this._updateMoving),l.on("moveend",this._update),l.on("remove",this._clearFadeTimer),l._addMarker(this),this.setDraggable(this._draggable),this._update(),l.on("click",this._onMapClick)),this}remove(){const l=this._map;return l&&(l.off("click",this._onMapClick),l.off("move",this._updateMoving),l.off("moveend",this._update),l.off("mousedown",this._addDragHandler),l.off("touchstart",this._addDragHandler),l.off("mouseup",this._onUp),l.off("touchend",this._onUp),l.off("mousemove",this._onMove),l.off("touchmove",this._onMove),l.off("remove",this._clearFadeTimer),l._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(l){return this._lngLat=o.LngLat.convert(l),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(l){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),l){if(!("offset"in l.options)){const x=Math.sqrt(Math.pow(13.5,2)/2);l.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[x,-1*(38.1-13.5+x)],"bottom-right":[-x,-1*(38.1-13.5+x)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=l,l._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(l){const f=l.code,y=l.charCode||l.keyCode;f!=="Space"&&f!=="Enter"&&y!==32&&y!==13||this.togglePopup()}_onMapClick(l){const f=l.originalEvent.target,y=this._element;this._popup&&(f===y||y.contains(f))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const l=this._popup;return l?(l.isOpen()?(l.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(l.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const l=this._map,f=this._pos;if(!l||!f)return!1;const y=l.unproject(f),x=l.getFreeCameraOptions();if(!x.position)return!1;const S=x.position.toLngLat();return S.distanceTo(y)<.9*S.distanceTo(this._lngLat)}_evaluateOpacity(){const l=this._map;if(!l)return;const f=this._pos;if(!f||f.x<0||f.x>l.transform.width||f.y<0||f.y>l.transform.height)return void this._clearFadeTimer();const y=l.unproject(f);let x;l._showingGlobe()&&o.isLngLatBehindGlobe(l.transform,this._lngLat)?x=0:(x=1-l._queryFogOpacity(y),l.transform._terrainEnabled()&&l.getTerrain()&&this._behindTerrain()&&(x*=this._occludedOpacity)),this._element.style.opacity=`${x}`,this._element.style.pointerEvents=x>0?"auto":"none",this._popup&&this._popup._setOpacity(x),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const l=this._pos;if(!l||!this._map)return;const f=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${l.x}px,${l.y}px)
            ${tc[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${f.x}px,${f.y}px)
        `}_calculateXYTransform(){const l=this._pos,f=this._map,y=this.getPitchAlignment();if(!f||!l||y!=="map")return"";if(!f._showingGlobe()){const z=f.getPitch();return z?`rotateX(${z}deg)`:""}const x=o.radToDeg(o.globeTiltAtLngLat(f.transform,this._lngLat)),S=l.sub(o.globeCenterToScreenPoint(f.transform)),C=Math.abs(S.x)+Math.abs(S.y);if(C===0)return"";const I=x/C;return`rotateX(${-S.y*I}deg) rotateY(${S.x*I}deg)`}_calculateZTransform(){const l=this._pos,f=this._map;if(!f||!l)return"";let y=0;const x=this.getRotationAlignment();if(x==="map")if(f._showingGlobe()){const S=f.project(new o.LngLat(this._lngLat.lng,this._lngLat.lat+.001)),C=f.project(new o.LngLat(this._lngLat.lng,this._lngLat.lat-.001)).sub(S);y=o.radToDeg(Math.atan2(C.y,C.x))-90}else y=-f.getBearing();else if(x==="horizon"){const S=o.smoothstep(4,6,f.getZoom()),C=o.globeCenterToScreenPoint(f.transform);C.y+=S*f.transform.height;const I=l.sub(C),z=o.radToDeg(Math.atan2(I.y,I.x));y=(z>90?z-270:z+90)*(1-S)}return y+=this._rotation,y?`rotateZ(${y}deg)`:""}_update(l){o.window.cancelAnimationFrame(this._updateFrameId);const f=this._map;f&&(f.transform.renderWorldCopies&&(this._lngLat=Zh(this._lngLat,this._pos,f.transform)),this._pos=f.project(this._lngLat),l===!0?this._updateFrameId=o.window.requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),f._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(f._showingGlobe()||f.getTerrain()||f.getFog())&&!this._fadeTimer&&(this._fadeTimer=setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(l){return this._offset=o.pointGeometry.convert(l),this._update(),this}_onMove(l){const f=this._map;if(!f)return;const y=this._pointerdownPos,x=this._positionDelta;if(y&&x){if(!this._isDragging){const S=this._clickTolerance||f._clickTolerance;if(l.point.dist(y)<S)return;this._isDragging=!0}this._pos=l.point.sub(x),this._lngLat=f.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.Event("dragstart"))),this.fire(new o.Event("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const l=this._map;l&&(l.off("mousemove",this._onMove),l.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new o.Event("dragend")),this._state="inactive"}_addDragHandler(l){const f=this._map,y=this._pos;f&&y&&this._element.contains(l.originalEvent.target)&&(l.preventDefault(),this._positionDelta=l.point.sub(y),this._pointerdownPos=l.point,this._state="pending",f.on("mousemove",this._onMove),f.on("touchmove",this._onMove),f.once("mouseup",this._onUp),f.once("touchend",this._onUp))}setDraggable(l){this._draggable=!!l;const f=this._map;return f&&(l?(f.on("mousedown",this._addDragHandler),f.on("touchstart",this._addDragHandler)):(f.off("mousedown",this._addDragHandler),f.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(l){return this._rotation=l||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(l){return this._rotationAlignment=l||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(l){return this._pitchAlignment=l||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(l){return this._occludedOpacity=l||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const C_={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},P_=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Np(m=new o.pointGeometry(0,0),l="bottom"){if(typeof m=="number"){const f=Math.round(Math.sqrt(.5*Math.pow(m,2)));switch(l){case"top":return new o.pointGeometry(0,m);case"top-left":return new o.pointGeometry(f,f);case"top-right":return new o.pointGeometry(-f,f);case"bottom":return new o.pointGeometry(0,-m);case"bottom-left":return new o.pointGeometry(f,-f);case"bottom-right":return new o.pointGeometry(-f,-f);case"left":return new o.pointGeometry(m,0);case"right":return new o.pointGeometry(-m,0)}return new o.pointGeometry(0,0)}return m instanceof o.pointGeometry||Array.isArray(m)?o.pointGeometry.convert(m):o.pointGeometry.convert(m[l]||[0,0])}class I_{constructor(l){this.jumpTo(l)}getValue(l){if(l<=this._startTime)return this._start;if(l>=this._endTime)return this._end;const f=o.easeCubicInOut((l-this._startTime)/(this._endTime-this._startTime));return this._start*(1-f)+this._end*f}isEasing(l){return l>=this._startTime&&l<=this._endTime}jumpTo(l){this._startTime=-1/0,this._endTime=-1/0,this._start=l,this._end=l}easeTo(l,f,y){this._start=this.getValue(f),this._end=l,this._startTime=f,this._endTime=f+y}}const k_={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use ⌘ + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},O_={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,optimizeForTerrain:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},jp={showCompass:!0,showZoom:!0,visualizePitch:!1};class D_{constructor(l,f,y=!1){this._clickTolerance=10,this.element=f,this.mouseRotate=new Rp({clickTolerance:l.dragRotate._mouseRotate._clickTolerance}),this.map=l,y&&(this.mousePitch=new Lp({clickTolerance:l.dragRotate._mousePitch._clickTolerance})),o.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),f.addEventListener("mousedown",this.mousedown),f.addEventListener("touchstart",this.touchstart,{passive:!1}),f.addEventListener("touchmove",this.touchmove),f.addEventListener("touchend",this.touchend),f.addEventListener("touchcancel",this.reset)}down(l,f){this.mouseRotate.mousedown(l,f),this.mousePitch&&this.mousePitch.mousedown(l,f),R()}move(l,f){const y=this.map,x=this.mouseRotate.mousemoveWindow(l,f),S=x&&x.bearingDelta;if(S&&y.setBearing(y.getBearing()+S),this.mousePitch){const C=this.mousePitch.mousemoveWindow(l,f),I=C&&C.pitchDelta;I&&y.setPitch(y.getPitch()+I)}}off(){const l=this.element;l.removeEventListener("mousedown",this.mousedown),l.removeEventListener("touchstart",this.touchstart,{passive:!1}),l.removeEventListener("touchmove",this.touchmove),l.removeEventListener("touchend",this.touchend),l.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){j(),o.window.removeEventListener("mousemove",this.mousemove),o.window.removeEventListener("mouseup",this.mouseup)}mousedown(l){this.down(o.extend({},l,{ctrlKey:!0,preventDefault:()=>l.preventDefault()}),W(this.element,l)),o.window.addEventListener("mousemove",this.mousemove),o.window.addEventListener("mouseup",this.mouseup)}mousemove(l){this.move(l,W(this.element,l))}mouseup(l){this.mouseRotate.mouseupWindow(l),this.mousePitch&&this.mousePitch.mouseupWindow(l),this.offTemp()}touchstart(l){l.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=Y(this.element,l.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>l.preventDefault()},this._startPos))}touchmove(l){l.targetTouches.length!==1?this.reset():(this._lastPos=Y(this.element,l.targetTouches)[0],this.move({preventDefault:()=>l.preventDefault()},this._lastPos))}touchend(l){l.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}const R_={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},L_={maxWidth:100,unit:"metric"};function z_(m,l,f){const y=Kh(l),x=y/l,S={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"}[f];this._map._requestDomTask(()=>{this._container.style.width=m*x+"px",this._container.innerHTML=`${y}&nbsp;${S}`})}function Kh(m){const l=Math.pow(10,`${Math.floor(m)}`.length-1);let f=m/l;return f=f>=10?10:f>=5?5:f>=3?3:f>=2?2:f>=1?1:function(y){const x=Math.pow(10,Math.ceil(-Math.log(y)/Math.LN10));return Math.round(y*x)/x}(f),l*f}const Tu={version:o.version,supported:w,setRTLTextPlugin:o.setRTLTextPlugin,getRTLTextPluginStatus:o.getRTLTextPluginStatus,Map:class extends M_{constructor(m){if(o.LivePerformanceUtils.mark(o.PerformanceMarkers.create),(m=o.extend({},O_,m)).minZoom!=null&&m.maxZoom!=null&&m.minZoom>m.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(m.minPitch!=null&&m.maxPitch!=null&&m.minPitch>m.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(m.minPitch!=null&&m.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(m.maxPitch!=null&&m.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(m.antialias&&o.isSafariWithAntialiasingBug(o.window)&&(m.antialias=!1,o.warnOnce("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new Pt(m.minZoom,m.maxZoom,m.minPitch,m.maxPitch,m.renderWorldCopies),m),this._interactive=m.interactive,this._minTileCacheSize=m.minTileCacheSize,this._maxTileCacheSize=m.maxTileCacheSize,this._failIfMajorPerformanceCaveat=m.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=m.preserveDrawingBuffer,this._antialias=m.antialias,this._useWebGL2=m.useWebGL2,this._trackResize=m.trackResize,this._bearingSnap=m.bearingSnap,this._refreshExpiredTiles=m.refreshExpiredTiles,this._fadeDuration=m.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=m.crossSourceCollisions,this._collectResourceTiming=m.collectResourceTiming,this._optimizeForTerrain=m.optimizeForTerrain,this._language=this._parseLanguage(m.language),this._worldview=m.worldview,this._renderTaskQueue=new Eu,this._domRenderTaskQueue=new Eu,this._controls=[],this._markers=[],this._popups=[],this._mapId=o.uniqueId(),this._locale=o.extend({},k_,m.locale),this._clickTolerance=m.clickTolerance,this._cooperativeGestures=m.cooperativeGestures,this._performanceMetricsCollection=m.performanceMetricsCollection,this._containerWidth=0,this._containerHeight=0,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new I_(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._requestManager=new o.RequestManager(m.transformRequest,m.accessToken,m.testMode),this._silenceAuthErrors=!!m.testMode,typeof m.container=="string"){if(this._container=o.window.document.getElementById(m.container),!this._container)throw new Error(`Container '${m.container}' not found.`)}else{if(!(m.container instanceof o.window.HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=m.container}if(this._container.childNodes.length>0&&o.warnOnce("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),m.maxBounds&&this.setMaxBounds(m.maxBounds),o.bindAll(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),o.window!==void 0&&(o.window.addEventListener("online",this._onWindowOnline,!1),o.window.addEventListener("resize",this._onWindowResize,!1),o.window.addEventListener("orientationchange",this._onWindowResize,!1),o.window.addEventListener("webkitfullscreenchange",this._onWindowResize,!1),o.window.addEventListener("visibilitychange",this._onVisibilityChange,!1)),this.handlers=new A_(this,m),this._localFontFamily=m.localFontFamily,this._localIdeographFontFamily=m.localIdeographFontFamily,m.style&&this.setStyle(m.style,{localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),m.projection&&this.setProjection(m.projection),this._hash=m.hash&&new d_(typeof m.hash=="string"&&m.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:m.center,zoom:m.zoom,bearing:m.bearing,pitch:m.pitch}),m.bounds&&(this.resize(),this.fitBounds(m.bounds,o.extend({},m.fitBoundsOptions,{duration:0})))),this.resize(),m.attributionControl&&this.addControl(new $p({customAttribution:m.customAttribution})),this._logoControl=new Fp,this.addControl(this._logoControl,m.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet)}),this.on("data",l=>{this._update(l.dataType==="style"),this.fire(new o.Event(`${l.dataType}data`,l))}),this.on("dataloading",l=>{this.fire(new o.Event(`${l.dataType}dataloading`,l))})}_getMapId(){return this._mapId}addControl(m,l){if(l===void 0&&(l=m.getDefaultPosition?m.getDefaultPosition():"top-right"),!m||!m.onAdd)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const f=m.onAdd(this);this._controls.push(m);const y=this._controlPositions[l];return l.indexOf("bottom")!==-1?y.insertBefore(f,y.firstChild):y.appendChild(f),this}removeControl(m){if(!m||!m.onRemove)return this.fire(new o.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const l=this._controls.indexOf(m);return l>-1&&this._controls.splice(l,1),m.onRemove(this),this}hasControl(m){return this._controls.indexOf(m)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(m){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const l=!this._moving;return l&&this.fire(new o.Event("movestart",m)).fire(new o.Event("move",m)),this.fire(new o.Event("resize",m)),l&&this.fire(new o.Event("moveend",m)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(m){return this.transform.setMaxBounds(o.LngLatBounds.convert(m)),this._update()}setMinZoom(m){if((m=m??-2)>=-2&&m<=this.transform.maxZoom)return this.transform.minZoom=m,this._update(),this.getZoom()<m?this.setZoom(m):this.fire(new o.Event("zoomstart")).fire(new o.Event("zoom")).fire(new o.Event("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(m){if((m=m??22)>=this.transform.minZoom)return this.transform.maxZoom=m,this._update(),this.getZoom()>m?this.setZoom(m):this.fire(new o.Event("zoomstart")).fire(new o.Event("zoom")).fire(new o.Event("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(m){if((m=m??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(m>=0&&m<=this.transform.maxPitch)return this.transform.minPitch=m,this._update(),this.getPitch()<m?this.setPitch(m):this.fire(new o.Event("pitchstart")).fire(new o.Event("pitch")).fire(new o.Event("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(m){if((m=m??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(m>=this.transform.minPitch)return this.transform.maxPitch=m,this._update(),this.getPitch()>m?this.setPitch(m):this.fire(new o.Event("pitchstart")).fire(new o.Event("pitch")).fire(new o.Event("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(m){return this.transform.renderWorldCopies=m,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(m){return m==="auto"?o.window.navigator.language:Array.isArray(m)?m.length===0?void 0:m.map(l=>l==="auto"?o.window.navigator.language:l):m}setLanguage(m){const l=this._parseLanguage(m);if(!this.style||l===this._language)return this;this._language=l,this.style._reloadSources();for(const f of this._controls)f._setLanguage&&f._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(m){return this.style&&m!==this._worldview?(this._worldview=m,this.style._reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(m){return this._lazyInitEmptyStyle(),m?typeof m=="string"&&(m={name:m}):m=null,this._useExplicitProjection=!!m,this._prioritizeAndUpdateProjection(m,this.style.stylesheet?this.style.stylesheet.projection:null)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const m=this.transform,l=m.projection.name;let f;l==="globe"&&m.zoom>=o.GLOBE_ZOOM_THRESHOLD_MAX?(m.setMercatorFromTransition(),f=!0):l==="mercator"&&m.zoom<o.GLOBE_ZOOM_THRESHOLD_MAX&&(m.setProjection({name:"globe"}),f=!0),f&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(m,l){return this._updateProjection(m||l||{name:"mercator"})}_updateProjection(m){let l;if(l=m.name==="globe"&&this.transform.zoom>=o.GLOBE_ZOOM_THRESHOLD_MAX?this.transform.setMercatorFromTransition():this.transform.setProjection(m),this.style.applyProjectionUpdate(),l){this.painter.clearBackgroundTiles();for(const f in this.style._sourceCaches)this.style._sourceCaches[f].clearTiles();this._update(!0),this._forceMarkerAndPopupUpdate(!0)}return this}project(m){return this.transform.locationPoint3D(o.LngLat.convert(m))}unproject(m){return this.transform.pointLocation3D(o.pointGeometry.convert(m))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(m,l,f){if(m==="mouseenter"||m==="mouseover"){let y=!1;const x=C=>{const I=l.filter(V=>this.getLayer(V)),z=I.length?this.queryRenderedFeatures(C.point,{layers:I}):[];z.length?y||(y=!0,f.call(this,new ai(m,this,C.originalEvent,{features:z}))):y=!1},S=()=>{y=!1};return{layers:new Set(l),listener:f,delegates:{mousemove:x,mouseout:S}}}if(m==="mouseleave"||m==="mouseout"){let y=!1;const x=C=>{const I=l.filter(z=>this.getLayer(z));(I.length?this.queryRenderedFeatures(C.point,{layers:I}):[]).length?y=!0:y&&(y=!1,f.call(this,new ai(m,this,C.originalEvent)))},S=C=>{y&&(y=!1,f.call(this,new ai(m,this,C.originalEvent)))};return{layers:new Set(l),listener:f,delegates:{mousemove:x,mouseout:S}}}{const y=x=>{const S=l.filter(I=>this.getLayer(I)),C=S.length?this.queryRenderedFeatures(x.point,{layers:S}):[];C.length&&(x.features=C,f.call(this,x),delete x.features)};return{layers:new Set(l),listener:f,delegates:{[m]:y}}}}on(m,l,f){if(f===void 0)return super.on(m,l);Array.isArray(l)||(l=[l]);const y=this._createDelegatedListener(m,l,f);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[m]=this._delegatedListeners[m]||[],this._delegatedListeners[m].push(y);for(const x in y.delegates)this.on(x,y.delegates[x]);return this}once(m,l,f){if(f===void 0)return super.once(m,l);Array.isArray(l)||(l=[l]);const y=this._createDelegatedListener(m,l,f);for(const x in y.delegates)this.once(x,y.delegates[x]);return this}off(m,l,f){if(f===void 0)return super.off(m,l);l=new Set(Array.isArray(l)?l:[l]);const y=(S,C)=>{if(S.size!==C.size)return!1;for(const I of S)if(!C.has(I))return!1;return!0},x=this._delegatedListeners?this._delegatedListeners[m]:void 0;return x&&(S=>{for(let C=0;C<S.length;C++){const I=S[C];if(I.listener===f&&y(I.layers,l)){for(const z in I.delegates)this.off(z,I.delegates[z]);return S.splice(C,1),this}}})(x),this}queryRenderedFeatures(m,l){return this.style?(l!==void 0||m===void 0||m instanceof o.pointGeometry||Array.isArray(m)||(l=m,m=void 0),this.style.queryRenderedFeatures(m=m||[[0,0],[this.transform.width,this.transform.height]],l=l||{},this.transform)):[]}querySourceFeatures(m,l){return this.style.querySourceFeatures(m,l)}setStyle(m,l){return(l=o.extend({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},l)).diff!==!1&&l.localIdeographFontFamily===this._localIdeographFontFamily&&l.localFontFamily===this._localFontFamily&&this.style&&m?(this._diffStyle(m,l),this):(this._localIdeographFontFamily=l.localIdeographFontFamily,this._localFontFamily=l.localFontFamily,this._updateStyle(m,l))}_getUIString(m){const l=this._locale[m];if(l==null)throw new Error(`Missing UI string '${m}'`);return l}_updateStyle(m,l){return this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),m&&(this.style=new Ao(this,l||{}),this.style.setEventedParent(this,{style:this.style}),typeof m=="string"?this.style.loadURL(m):this.style.loadJSON(m)),this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Ao(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(m,l){if(typeof m=="string"){const f=this._requestManager.normalizeStyleURL(m),y=this._requestManager.transformRequest(f,o.ResourceType.Style);o.getJSON(y,(x,S)=>{x?this.fire(new o.ErrorEvent(x)):S&&this._updateDiff(S,l)})}else typeof m=="object"&&this._updateDiff(m,l)}_updateDiff(m,l){try{this.style.setState(m)&&this._update(!0)}catch(f){o.warnOnce(`Unable to perform style diff: ${f.message||f.error||f}.  Rebuilding the style from scratch.`),this._updateStyle(m,l)}}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(o.warnOnce("There is no style added to the map."),!1)}addSource(m,l){return this._lazyInitEmptyStyle(),this.style.addSource(m,l),this._update(!0)}isSourceLoaded(m){return!!this.style&&this.style._isSourceCacheLoaded(m)}areTilesLoaded(){const m=this.style&&this.style._sourceCaches;for(const l in m){const f=m[l]._tiles;for(const y in f){const x=f[y];if(x.state!=="loaded"&&x.state!=="errored")return!1}}return!0}addSourceType(m,l,f){this._lazyInitEmptyStyle(),this.style.addSourceType(m,l,f)}removeSource(m){return this.style.removeSource(m),this._updateTerrain(),this._update(!0)}getSource(m){return this.style.getSource(m)}addImage(m,l,{pixelRatio:f=1,sdf:y=!1,stretchX:x,stretchY:S,content:C}={}){if(this._lazyInitEmptyStyle(),l instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&l instanceof o.window.ImageBitmap){const{width:I,height:z,data:V}=o.exported.getImageData(l);this.style.addImage(m,{data:new o.RGBAImage({width:I,height:z},V),pixelRatio:f,stretchX:x,stretchY:S,content:C,sdf:y,version:0})}else if(l.width===void 0||l.height===void 0)this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:I,height:z}=l,V=l;this.style.addImage(m,{data:new o.RGBAImage({width:I,height:z},new Uint8Array(V.data)),pixelRatio:f,stretchX:x,stretchY:S,content:C,sdf:y,version:0,userImage:V}),V.onAdd&&V.onAdd(this,m)}}updateImage(m,l){const f=this.style.getImage(m);if(!f)return void this.fire(new o.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const y=l instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&l instanceof o.window.ImageBitmap?o.exported.getImageData(l):l,{width:x,height:S}=y;x!==void 0&&S!==void 0?x===f.data.width&&S===f.data.height?(f.data.replace(y.data,!(l instanceof o.window.HTMLImageElement||o.window.ImageBitmap&&l instanceof o.window.ImageBitmap)),this.style.updateImage(m,f)):this.fire(new o.ErrorEvent(new Error(`The width and height of the updated image (${x}, ${S})
                must be that same as the previous version of the image
                (${f.data.width}, ${f.data.height})`))):this.fire(new o.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")))}hasImage(m){return m?!!this.style.getImage(m):(this.fire(new o.ErrorEvent(new Error("Missing required image id"))),!1)}removeImage(m){this.style.removeImage(m)}loadImage(m,l){o.getImage(this._requestManager.transformRequest(m,o.ResourceType.Image),(f,y)=>{l(f,y instanceof o.window.HTMLImageElement?o.exported.getImageData(y):y)})}listImages(){return this.style.listImages()}addLayer(m,l){return this._lazyInitEmptyStyle(),this.style.addLayer(m,l),this._update(!0)}moveLayer(m,l){return this.style.moveLayer(m,l),this._update(!0)}removeLayer(m){return this.style.removeLayer(m),this._update(!0)}getLayer(m){return this.style.getLayer(m)}setLayerZoomRange(m,l,f){return this.style.setLayerZoomRange(m,l,f),this._update(!0)}setFilter(m,l,f={}){return this.style.setFilter(m,l,f),this._update(!0)}getFilter(m){return this.style.getFilter(m)}setPaintProperty(m,l,f,y={}){return this.style.setPaintProperty(m,l,f,y),this._update(!0)}getPaintProperty(m,l){return this.style.getPaintProperty(m,l)}setLayoutProperty(m,l,f,y={}){return this.style.setLayoutProperty(m,l,f,y),this._update(!0)}getLayoutProperty(m,l){return this.style.getLayoutProperty(m,l)}setLight(m,l={}){return this._lazyInitEmptyStyle(),this.style.setLight(m,l),this._update(!0)}getLight(){return this.style.getLight()}setTerrain(m){return this._lazyInitEmptyStyle(),!m&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(m),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(m){return this._lazyInitEmptyStyle(),this.style.setFog(m),this._update(!0)}getFog(){return this.style?this.style.getFog():null}_queryFogOpacity(m){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(o.LngLat.convert(m),this.transform):0}setFeatureState(m,l){return this.style.setFeatureState(m,l),this._update()}removeFeatureState(m,l){return this.style.removeFeatureState(m,l),this._update()}getFeatureState(m){return this.style.getFeatureState(m)}_updateContainerDimensions(){if(!this._container)return;const m=this._container.getBoundingClientRect().width||400,l=this._container.getBoundingClientRect().height||300;let f,y,x,S=this._container;for(;S&&(!y||!x);){const C=o.window.getComputedStyle(S).transform;C&&C!=="none"&&(f=C.match(/matrix.*\((.+)\)/)[1].split(", "),f[0]&&f[0]!=="0"&&f[0]!=="1"&&(y=f[0]),f[3]&&f[3]!=="0"&&f[3]!=="1"&&(x=f[3])),S=S.parentElement}this._containerWidth=y?Math.abs(m/y):m,this._containerHeight=x?Math.abs(l/x):l}_detectMissingCSS(){o.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&o.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const m=this._container;m.classList.add("mapboxgl-map"),(this._missingCSSCanary=P("div","mapboxgl-canary",m)).style.visibility="hidden",this._detectMissingCSS();const l=this._canvasContainer=P("div","mapboxgl-canvas-container",m);this._interactive&&l.classList.add("mapboxgl-interactive"),this._canvas=P("canvas","mapboxgl-canvas",l),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const f=this._controlContainer=P("div","mapboxgl-control-container",m),y=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach(x=>{y[x]=P("div",`mapboxgl-ctrl-${x}`,f)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(m,l){const f=o.exported.devicePixelRatio||1;this._canvas.width=f*Math.ceil(m),this._canvas.height=f*Math.ceil(l),this._canvas.style.width=`${m}px`,this._canvas.style.height=`${l}px`}_addMarker(m){this._markers.push(m)}_removeMarker(m){const l=this._markers.indexOf(m);l!==-1&&this._markers.splice(l,1)}_addPopup(m){this._popups.push(m)}_removePopup(m){const l=this._popups.indexOf(m);l!==-1&&this._popups.splice(l,1)}_setupPainter(){const m=o.extend({},w.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),l=this._useWebGL2&&this._canvas.getContext("webgl2",m),f=l||this._canvas.getContext("webgl",m)||this._canvas.getContext("experimental-webgl",m);f?(this._useWebGL2&&!l&&o.warnOnce("Failed to create WebGL 2 context. Using WebGL 1."),o.storeAuthState(f,!0),this.painter=new du(f,this.transform,!!l),this.on("data",y=>{y.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),o.exported$1.testSupport(f)):this.fire(new o.ErrorEvent(new Error("Failed to initialize WebGL")))}_contextLost(m){m.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new o.Event("webglcontextlost",{originalEvent:m}))}_contextRestored(m){this._setupPainter(),this.resize(),this._update(),this.fire(new o.Event("webglcontextrestored",{originalEvent:m}))}_onMapScroll(m){if(m.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(m){return this.style?(this._styleDirty=this._styleDirty||m,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(m){return this._update(),this._renderTaskQueue.add(m)}_cancelRenderFrame(m){this._renderTaskQueue.remove(m)}_requestDomTask(m){!this.loaded()||this.loaded()&&!this.isMoving()?m():this._domRenderTaskQueue.add(m)}_render(m){let l;const f=this.painter.context.extTimerQuery,y=o.exported.now();if(this.listens("gpu-timing-frame")&&(l=f.createQueryEXT(),f.beginQueryEXT(f.TIME_ELAPSED_EXT,l)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],o.window.performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],o.window.performance.now())),this._renderTaskQueue.run(m),this._domRenderTaskQueue.run(m),this._removed)return;this._updateProjectionTransition();const x=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const I=this.transform.zoom,z=this.transform.pitch,V=o.exported.now(),U=new o.EvaluationParameters(I,{now:V,fadeDuration:x,pitch:z,transition:this.style.getTransition()});this.style.update(U)}this.style&&this.style.fog&&this.style.fog.hasTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let S=!1;if(this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),S=this._updateAverageElevation(y),this.style._updateSources(this.transform),this._forceMarkerAndPopupUpdate()):S=this._updateAverageElevation(y),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,x,this._crossSourceCollisions),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showTerrainWireframe:this.showTerrainWireframe,showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:x,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new o.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new o.Event("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),l){const I=o.exported.now()-y;f.endQueryEXT(f.TIME_ELAPSED_EXT,l),setTimeout(()=>{const z=f.getQueryObjectEXT(l,f.QUERY_RESULT_EXT)/1e6;f.deleteQueryEXT(l),this.fire(new o.Event("gpu-timing-frame",{cpuTime:I,gpuTime:z})),o.window.performance.mark("frame-gpu",{startTime:y,detail:{gpuTime:z}})},50)}if(this.listens("gpu-timing-layer")){const I=this.painter.collectGpuTimers();setTimeout(()=>{const z=this.painter.queryGpuTimers(I);this.fire(new o.Event("gpu-timing-layer",{layerTimes:z}))},50)}if(this.listens("gpu-timing-deferred-render")){const I=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const z=this.painter.queryGpuTimeDeferredRender(I);this.fire(new o.Event("gpu-timing-deferred-render",{gpuTime:z}))},50)}const C=this._sourcesDirty||this._styleDirty||this._placementDirty||S;if(C||this._repaint)this.triggerRepaint();else{const I=!this.isMoving()&&this.loaded();if(I&&(S=this._updateAverageElevation(y,!0)),S)this.triggerRepaint();else if(this._triggerFrame(!1),I&&(this.fire(new o.Event("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const z=this._calculateSpeedIndex();this.fire(new o.Event("speedindexcompleted",{speedIndex:z})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||C||(this._fullyLoaded=!0,o.LivePerformanceUtils.mark(o.PerformanceMarkers.fullLoad),this._performanceMetricsCollection&&o.postPerformanceEvent(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(m){for(const l of this._markers)m&&!this.getRenderWorldCopies()&&(l._lngLat=l._lngLat.wrap()),l._update();for(const l of this._popups)!m||this.getRenderWorldCopies()||l._trackPointer||(l._lngLat=l._lngLat.wrap()),l._update()}_updateAverageElevation(m,l=!1){const f=y=>(this.transform.averageElevation=y,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&f(0);if((l||m-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(m)){const y=this.transform.averageElevation;let x=this.transform.sampleAverageElevation(),S=!1;this.transform.elevation&&(S=this.transform.elevation.exaggeration()!==this._averageElevationExaggeration,this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(x)?x=0:this._averageElevationLastSampledAt=m;const C=Math.abs(y-x);if(C>1){if(this._isInitialLoad||S)return this._averageElevation.jumpTo(x),f(x);this._averageElevation.easeTo(x,m,300)}else if(C>1e-4)return this._averageElevation.jumpTo(x),f(x)}return!!this._averageElevation.isEasing(m)&&f(this._averageElevation.getValue(m))}_authenticate(){o.getMapSessionAPI(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,m=>{if(m&&(m.message===o.AUTH_ERR_MSG||m.status===401)){const l=this.painter.context.gl;o.storeAuthState(l,!1),this._logoControl instanceof Fp&&this._logoControl._updateLogo(),l&&l.clear(l.DEPTH_BUFFER_BIT|l.COLOR_BUFFER_BIT|l.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new o.ErrorEvent(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),o.postMapLoadEvent(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_updateTerrain(){const m=this._isDragging();this.painter.updateTerrain(this.style,m)}_calculateSpeedIndex(){const m=this.painter.canvasCopy(),l=this.painter.getCanvasCopiesAndTimestamps();l.timeStamps.push(performance.now());const f=this.painter.context.gl,y=f.createFramebuffer();function x(S){f.framebufferTexture2D(f.FRAMEBUFFER,f.COLOR_ATTACHMENT0,f.TEXTURE_2D,S,0);const C=new Uint8Array(f.drawingBufferWidth*f.drawingBufferHeight*4);return f.readPixels(0,0,f.drawingBufferWidth,f.drawingBufferHeight,f.RGBA,f.UNSIGNED_BYTE,C),C}return f.bindFramebuffer(f.FRAMEBUFFER,y),this._canvasPixelComparison(x(m),l.canvasCopies.map(x),l.timeStamps)}_canvasPixelComparison(m,l,f){let y=f[1]-f[0];const x=m.length/4;for(let S=0;S<l.length;S++){const C=l[S];let I=0;for(let z=0;z<C.length;z+=4)C[z]===m[z]&&C[z+1]===m[z+1]&&C[z+2]===m[z+2]&&C[z+3]===m[z+3]&&(I+=1);y+=(f[S+2]-f[S+1])*(1-I/x)}return y}remove(){this._hash&&this._hash.remove();for(const l of this._controls)l.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),o.window!==void 0&&(o.window.removeEventListener("resize",this._onWindowResize,!1),o.window.removeEventListener("orientationchange",this._onWindowResize,!1),o.window.removeEventListener("webkitfullscreenchange",this._onWindowResize,!1),o.window.removeEventListener("online",this._onWindowOnline,!1),o.window.removeEventListener("visibilitychange",this._onVisibilityChange,!1));const m=this.painter.context.gl.getExtension("WEBGL_lose_context");m&&m.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),o.removeAuthState(this.painter.context.gl),this._removed=!0,this.fire(new o.Event("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(m){this._renderNextFrame=this._renderNextFrame||m,this.style&&!this._frame&&(this._frame=o.exported.frame(l=>{const f=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,f&&this._render(l)}))}_preloadTiles(m){const l=this.style?Object.values(this.style._sourceCaches):[];return o.asyncAll(l,(f,y)=>f._preloadTiles(m,y),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(m){this._trackResize&&this.resize({originalEvent:m})._update()}_onVisibilityChange(){o.window.document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(m){this._showTileBoundaries!==m&&(this._showTileBoundaries=m,this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(m){this._showTerrainWireframe!==m&&(this._showTerrainWireframe=m,this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(m){this._speedIndexTiming!==m&&(this._speedIndexTiming=m,this._update())}get showPadding(){return!!this._showPadding}set showPadding(m){this._showPadding!==m&&(this._showPadding=m,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(m){this._showCollisionBoxes!==m&&(this._showCollisionBoxes=m,m?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(m){this._showOverdrawInspector!==m&&(this._showOverdrawInspector=m,this._update())}get repaint(){return!!this._repaint}set repaint(m){this._repaint!==m&&(this._repaint=m,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(m){this._vertices=m,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(m){this._showTileAABBs!==m&&(this._showTileAABBs=m,m&&this._update())}_setCacheLimits(m,l){o.setCacheLimits(m,l)}get version(){return o.version}},NavigationControl:class{constructor(m){this.options=o.extend({},jp,m),this._container=P("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",l=>l.preventDefault()),this.options.showZoom&&(o.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",l=>{this._map&&this._map.zoomIn({},{originalEvent:l})}),P("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",l=>{this._map&&this._map.zoomOut({},{originalEvent:l})}),P("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(o.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",l=>{const f=this._map;f&&(this.options.visualizePitch?f.resetNorthPitch({},{originalEvent:l}):f.resetNorth({},{originalEvent:l}))}),this._compassIcon=P("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const m=this._map;if(!m)return;const l=m.getZoom(),f=l===m.getMaxZoom(),y=l===m.getMinZoom();this._zoomInButton.disabled=f,this._zoomOutButton.disabled=y,this._zoomInButton.setAttribute("aria-disabled",f.toString()),this._zoomOutButton.setAttribute("aria-disabled",y.toString())}_rotateCompassArrow(){const m=this._map;if(!m)return;const l=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(m.transform.pitch*(Math.PI/180)),.5)}) rotateX(${m.transform.pitch}deg) rotateZ(${m.transform.angle*(180/Math.PI)}deg)`:`rotate(${m.transform.angle*(180/Math.PI)}deg)`;m._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=l)})}onAdd(m){return this._map=m,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),m.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&m.on("pitch",this._rotateCompassArrow),m.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new D_(m,this._compass,this.options.visualizePitch)),this._container}onRemove(){const m=this._map;m&&(this._container.remove(),this.options.showZoom&&m.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&m.off("pitch",this._rotateCompassArrow),m.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(m,l){const f=P("button",m,this._container);return f.type="button",f.addEventListener("click",l),f}_setButtonTitle(m,l){if(!this._map)return;const f=this._map._getUIString(`NavigationControl.${l}`);m.setAttribute("aria-label",f),m.firstElementChild&&m.firstElementChild.setAttribute("title",f)}},GeolocateControl:class extends o.Evented{constructor(m){super(),this.options=o.extend({geolocation:o.window.navigator.geolocation},R_,m),o.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=Mo(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(m){return this._map=m,this._container=P("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(m){const l=(f=!!this.options.geolocation)=>{this._supportsGeolocation=f,m(f)};this._supportsGeolocation!==void 0?m(this._supportsGeolocation):o.window.navigator.permissions!==void 0?o.window.navigator.permissions.query({name:"geolocation"}).then(f=>l(f.state!=="denied")).catch(()=>l()):l()}_isOutOfMapMaxBounds(m){const l=this._map.getMaxBounds(),f=m.coords;return!!l&&(f.longitude<l.getWest()||f.longitude>l.getEast()||f.latitude<l.getSouth()||f.latitude>l.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(m){if(this._map){if(this._isOutOfMapMaxBounds(m))return this._setErrorState(),this.fire(new o.Event("outofmaxbounds",m)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=m,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(m),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(m),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("geolocate",m)),this._finish()}}_updateCamera(m){const l=new o.LngLat(m.coords.longitude,m.coords.latitude),f=m.coords.accuracy,y=this._map.getBearing(),x=o.extend({bearing:y},this.options.fitBoundsOptions);this._map.fitBounds(l.toBounds(f),x,{geolocateSource:!0})}_updateMarker(m){if(m){const l=new o.LngLat(m.coords.longitude,m.coords.latitude);this._accuracyCircleMarker.setLngLat(l).addTo(this._map),this._userLocationDotMarker.setLngLat(l).addTo(this._map),this._accuracy=m.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const m=this._map.transform,l=o.mercatorZfromAltitude(1,m._center.lat)*m.worldSize,f=Math.ceil(2*this._accuracy*l);this._circleElement.style.width=`${f}px`,this._circleElement.style.height=`${f}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._dotElement.classList.add("mapboxgl-user-location-show-heading")):(this._dotElement.classList.remove("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(m){if(this._map){if(this.options.trackUserLocation)if(m.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(m.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new o.Event("error",m)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(m){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",l=>l.preventDefault()),this._geolocateButton=P("button","mapboxgl-ctrl-geolocate",this._container),P("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",m===!1){o.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l)}else{const l=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=P("div","mapboxgl-user-location"),this._dotElement.appendChild(P("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(P("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Xh({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=P("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Xh({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",l=>{l.geolocateSource||this._watchState!=="ACTIVE_LOCK"||l.originalEvent&&l.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new o.Event("trackuserlocationend")))})}}_onDeviceOrientation(m){this._userLocationDotMarker&&(m.webkitCompassHeading?this._heading=m.webkitCompassHeading:m.absolute===!0&&(this._heading=-1*m.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return o.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new o.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let m;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(m={maximumAge:6e5,timeout:0},this._noTimeout=!0):(m=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,m),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const m=()=>{o.window.addEventListener("ondeviceorientationabsolute"in o.window?"deviceorientationabsolute":"deviceorientation",this._onDeviceOrientation)};o.window.DeviceMotionEvent!==void 0&&typeof o.window.DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(l=>{l==="granted"&&m()}).catch(console.error):m()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),o.window.removeEventListener("deviceorientation",this._onDeviceOrientation),o.window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:$p,ScaleControl:class{constructor(m){this.options=o.extend({},L_,m),function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"narrow",unit:"meter"}),!0}catch{return!1}}()||(this._setScale=z_.bind(this)),o.bindAll(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const m=this.options.maxWidth||100,l=this._map,f=l._containerHeight/2,y=l._containerWidth/2-m/2,x=l.unproject([y,f]),S=l.unproject([y+m,f]),C=x.distanceTo(S);if(this.options.unit==="imperial"){const I=3.2808*C;I>5280?this._setScale(m,I/5280,"mile"):this._setScale(m,I,"foot")}else this.options.unit==="nautical"?this._setScale(m,C/1852,"nautical-mile"):C>=1e3?this._setScale(m,C/1e3,"kilometer"):this._setScale(m,C,"meter")}_setScale(m,l,f){const y=Kh(l),x=y/l;this._map._requestDomTask(()=>{this._container.style.width=m*x+"px",this._container.innerHTML=f!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"narrow",unit:f}).format(y):`${y}&nbsp;nm`})}onAdd(m){return this._map=m,this._language=m.getLanguage(),this._container=P("div","mapboxgl-ctrl mapboxgl-ctrl-scale",m.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(m){this._language=m,this._update()}setUnit(m){this.options.unit=m,this._update()}},FullscreenControl:class{constructor(m){this._fullscreen=!1,m&&m.container&&(m.container instanceof o.window.HTMLElement?this._container=m.container:o.warnOnce("Full screen control 'container' must be a DOM element.")),o.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in o.window.document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in o.window.document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(m){return this._map=m,this._container||(this._container=this._map.getContainer()),this._controlContainer=P("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",o.warnOnce("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,o.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!o.window.document.fullscreenEnabled&&!o.window.document.webkitFullscreenEnabled)}_setupUI(){const m=this._fullscreenButton=P("button","mapboxgl-ctrl-fullscreen",this._controlContainer);P("span","mapboxgl-ctrl-icon",m).setAttribute("aria-hidden","true"),m.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),o.window.document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const m=this._getTitle();this._fullscreenButton.setAttribute("aria-label",m),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",m)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(o.window.document.fullscreenElement||o.window.document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?o.window.document.exitFullscreen?o.window.document.exitFullscreen():o.window.document.webkitCancelFullScreen&&o.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends o.Evented{constructor(m){super(),this.options=o.extend(Object.create(C_),m),o.bindAll(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(m&&m.className?m.className.trim().split(/\s+/):[])}addTo(m){return this._map&&this.remove(),this._map=m,this.options.closeOnClick&&m.on("preclick",this._onClose),this.options.closeOnMove&&m.on("move",this._onClose),m.on("remove",this.remove),this._update(),m._addPopup(this),this._focusFirstElement(),this._trackPointer?(m.on("mousemove",this._onMouseEvent),m.on("mouseup",this._onMouseEvent),m._canvasContainer.classList.add("mapboxgl-track-pointer")):m.on("move",this._update),this.fire(new o.Event("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const m=this._map;return m&&(m.off("move",this._update),m.off("move",this._onClose),m.off("preclick",this._onClose),m.off("click",this._onClose),m.off("remove",this.remove),m.off("mousemove",this._onMouseEvent),m.off("mouseup",this._onMouseEvent),m.off("drag",this._onMouseEvent),m._canvasContainer&&m._canvasContainer.classList.remove("mapboxgl-track-pointer"),m._removePopup(this),this._map=void 0),this.fire(new o.Event("close")),this}getLngLat(){return this._lngLat}setLngLat(m){this._lngLat=o.LngLat.convert(m),this._pos=null,this._trackPointer=!1,this._update();const l=this._map;return l&&(l.on("move",this._update),l.off("mousemove",this._onMouseEvent),l._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const m=this._map;return m&&(m.off("move",this._update),m.on("mousemove",this._onMouseEvent),m.on("drag",this._onMouseEvent),m._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(m){return this.setDOMContent(o.window.document.createTextNode(m))}setHTML(m){const l=o.window.document.createDocumentFragment(),f=o.window.document.createElement("body");let y;for(f.innerHTML=m;y=f.firstChild,y;)l.appendChild(y);return this.setDOMContent(l)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(m){return this.options.maxWidth=m,this._update(),this}setDOMContent(m){let l=this._content;if(l)for(;l.hasChildNodes();)l.firstChild&&l.removeChild(l.firstChild);else l=this._content=P("div","mapboxgl-popup-content",this._container||void 0);if(l.appendChild(m),this.options.closeButton){const f=this._closeButton=P("button","mapboxgl-popup-close-button",l);f.type="button",f.setAttribute("aria-label","Close popup"),f.setAttribute("aria-hidden","true"),f.innerHTML="&#215;",f.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(m){return this._classList.add(m),this._updateClassList(),this}removeClassName(m){return this._classList.delete(m),this._updateClassList(),this}setOffset(m){return this.options.offset=m,this._update(),this}toggleClassName(m){let l;return this._classList.delete(m)?l=!1:(this._classList.add(m),l=!0),this._updateClassList(),l}_onMouseEvent(m){this._update(m.point)}_getAnchor(m){if(this.options.anchor)return this.options.anchor;const l=this._map,f=this._container,y=this._pos;if(!l||!f||!y)return"bottom";const x=f.offsetWidth,S=f.offsetHeight,C=y.x<x/2,I=y.x>l.transform.width-x/2;if(y.y+m<S)return C?"top-left":I?"top-right":"top";if(y.y>l.transform.height-S){if(C)return"bottom-left";if(I)return"bottom-right"}return C?"left":I?"right":"bottom"}_updateClassList(){const m=this._container;if(!m)return;const l=[...this._classList];l.push("mapboxgl-popup"),this._anchor&&l.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&l.push("mapboxgl-popup-track-pointer"),m.className=l.join(" ")}_update(m){const l=this._map,f=this._content;if(!l||!this._lngLat&&!this._trackPointer||!f)return;let y=this._container;if(y||(y=this._container=P("div","mapboxgl-popup",l.getContainer()),this._tip=P("div","mapboxgl-popup-tip",y),y.appendChild(f)),this.options.maxWidth&&y.style.maxWidth!==this.options.maxWidth&&(y.style.maxWidth=this.options.maxWidth),l.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=Zh(this._lngLat,this._pos,l.transform)),!this._trackPointer||m){const x=this._pos=this._trackPointer&&m?m:l.project(this._lngLat),S=Np(this.options.offset),C=this._anchor=this._getAnchor(S.y),I=Np(this.options.offset,C),z=x.add(I).round();l._requestDomTask(()=>{this._container&&C&&(this._container.style.transform=`${tc[C]} translate(${z.x}px,${z.y}px)`)})}if(!this._marker&&l._showingGlobe()){const x=o.isLngLatBehindGlobe(l.transform,this._lngLat)?0:1;this._setOpacity(x)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const m=this._container.querySelector(P_);m&&m.focus()}_onClose(){this.remove()}_setOpacity(m){this._container&&(this._container.style.opacity=`${m}`),this._content&&(this._content.style.pointerEvents=m?"auto":"none")}},Marker:Xh,Style:Ao,LngLat:o.LngLat,LngLatBounds:o.LngLatBounds,Point:o.pointGeometry,MercatorCoordinate:o.MercatorCoordinate,FreeCameraOptions:Bh,Evented:o.Evented,config:o.config,prewarm:function(){tr().acquire(Kt)},clearPrewarmedResources:function(){const m=Ut;m&&(m.isPreloaded()&&m.numActive()===1?(m.release(Kt),Ut=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return o.config.ACCESS_TOKEN},set accessToken(m){o.config.ACCESS_TOKEN=m},get baseApiUrl(){return o.config.API_URL},set baseApiUrl(m){o.config.API_URL=m},get workerCount(){return Gt.workerCount},set workerCount(m){Gt.workerCount=m},get maxParallelImageRequests(){return o.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(m){o.config.MAX_PARALLEL_IMAGE_REQUESTS=m},clearStorage(m){o.clearTileCache(m)},workerUrl:"",workerClass:null,setNow:o.exported.setNow,restoreNow:o.exported.restoreNow};return Tu});var p=c;return p})})(X5);var X7=X5.exports;const Qw=vn(X7);function Y5(e,t){return function(){return e.apply(t,arguments)}}const{toString:K7}=Object.prototype,{getPrototypeOf:EA}=Object,A1=(e=>t=>{const r=K7.call(t);return e[r]||(e[r]=r.slice(8,-1).toLowerCase())})(Object.create(null)),Vs=e=>(e=e.toLowerCase(),t=>A1(t)===e),M1=e=>t=>typeof t===e,{isArray:Ud}=Array,Fg=M1("undefined");function Y7(e){return e!==null&&!Fg(e)&&e.constructor!==null&&!Fg(e.constructor)&&Aa(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const J5=Vs("ArrayBuffer");function J7(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&J5(e.buffer),t}const Q7=M1("string"),Aa=M1("function"),Q5=M1("number"),C1=e=>e!==null&&typeof e=="object",eq=e=>e===!0||e===!1,p0=e=>{if(A1(e)!=="object")return!1;const t=EA(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},tq=Vs("Date"),rq=Vs("File"),nq=Vs("Blob"),iq=Vs("FileList"),oq=e=>C1(e)&&Aa(e.pipe),aq=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Aa(e.append)&&((t=A1(e))==="formdata"||t==="object"&&Aa(e.toString)&&e.toString()==="[object FormData]"))},sq=Vs("URLSearchParams"),lq=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Sy(e,t,{allOwnKeys:r=!1}={}){if(e===null||typeof e>"u")return;let i,c;if(typeof e!="object"&&(e=[e]),Ud(e))for(i=0,c=e.length;i<c;i++)t.call(null,e[i],i,e);else{const u=r?Object.getOwnPropertyNames(e):Object.keys(e),p=u.length;let o;for(i=0;i<p;i++)o=u[i],t.call(null,e[o],o,e)}}function eB(e,t){t=t.toLowerCase();const r=Object.keys(e);let i=r.length,c;for(;i-- >0;)if(c=r[i],t===c.toLowerCase())return c;return null}const tB=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),rB=e=>!Fg(e)&&e!==tB;function $S(){const{caseless:e}=rB(this)&&this||{},t={},r=(i,c)=>{const u=e&&eB(t,c)||c;p0(t[u])&&p0(i)?t[u]=$S(t[u],i):p0(i)?t[u]=$S({},i):Ud(i)?t[u]=i.slice():t[u]=i};for(let i=0,c=arguments.length;i<c;i++)arguments[i]&&Sy(arguments[i],r);return t}const cq=(e,t,r,{allOwnKeys:i}={})=>(Sy(t,(c,u)=>{r&&Aa(c)?e[u]=Y5(c,r):e[u]=c},{allOwnKeys:i}),e),uq=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),hq=(e,t,r,i)=>{e.prototype=Object.create(t.prototype,i),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),r&&Object.assign(e.prototype,r)},fq=(e,t,r,i)=>{let c,u,p;const o={};if(t=t||{},e==null)return t;do{for(c=Object.getOwnPropertyNames(e),u=c.length;u-- >0;)p=c[u],(!i||i(p,e,t))&&!o[p]&&(t[p]=e[p],o[p]=!0);e=r!==!1&&EA(e)}while(e&&(!r||r(e,t))&&e!==Object.prototype);return t},dq=(e,t,r)=>{e=String(e),(r===void 0||r>e.length)&&(r=e.length),r-=t.length;const i=e.indexOf(t,r);return i!==-1&&i===r},pq=e=>{if(!e)return null;if(Ud(e))return e;let t=e.length;if(!Q5(t))return null;const r=new Array(t);for(;t-- >0;)r[t]=e[t];return r},mq=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&EA(Uint8Array)),gq=(e,t)=>{const i=(e&&e[Symbol.iterator]).call(e);let c;for(;(c=i.next())&&!c.done;){const u=c.value;t.call(e,u[0],u[1])}},yq=(e,t)=>{let r;const i=[];for(;(r=e.exec(t))!==null;)i.push(r);return i},_q=Vs("HTMLFormElement"),vq=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(r,i,c){return i.toUpperCase()+c}),oO=(({hasOwnProperty:e})=>(t,r)=>e.call(t,r))(Object.prototype),xq=Vs("RegExp"),nB=(e,t)=>{const r=Object.getOwnPropertyDescriptors(e),i={};Sy(r,(c,u)=>{t(c,u,e)!==!1&&(i[u]=c)}),Object.defineProperties(e,i)},bq=e=>{nB(e,(t,r)=>{if(Aa(e)&&["arguments","caller","callee"].indexOf(r)!==-1)return!1;const i=e[r];if(Aa(i)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+r+"'")})}})},wq=(e,t)=>{const r={},i=c=>{c.forEach(u=>{r[u]=!0})};return Ud(e)?i(e):i(String(e).split(t)),r},Sq=()=>{},Eq=(e,t)=>(e=+e,Number.isFinite(e)?e:t),e2="abcdefghijklmnopqrstuvwxyz",aO="0123456789",iB={DIGIT:aO,ALPHA:e2,ALPHA_DIGIT:e2+e2.toUpperCase()+aO},Tq=(e=16,t=iB.ALPHA_DIGIT)=>{let r="";const{length:i}=t;for(;e--;)r+=t[Math.random()*i|0];return r};function Aq(e){return!!(e&&Aa(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator])}const Mq=e=>{const t=new Array(10),r=(i,c)=>{if(C1(i)){if(t.indexOf(i)>=0)return;if(!("toJSON"in i)){t[c]=i;const u=Ud(i)?[]:{};return Sy(i,(p,o)=>{const v=r(p,c+1);!Fg(v)&&(u[o]=v)}),t[c]=void 0,u}}return i};return r(e,0)},Cq=Vs("AsyncFunction"),Pq=e=>e&&(C1(e)||Aa(e))&&Aa(e.then)&&Aa(e.catch),ht={isArray:Ud,isArrayBuffer:J5,isBuffer:Y7,isFormData:aq,isArrayBufferView:J7,isString:Q7,isNumber:Q5,isBoolean:eq,isObject:C1,isPlainObject:p0,isUndefined:Fg,isDate:tq,isFile:rq,isBlob:nq,isRegExp:xq,isFunction:Aa,isStream:oq,isURLSearchParams:sq,isTypedArray:mq,isFileList:iq,forEach:Sy,merge:$S,extend:cq,trim:lq,stripBOM:uq,inherits:hq,toFlatObject:fq,kindOf:A1,kindOfTest:Vs,endsWith:dq,toArray:pq,forEachEntry:gq,matchAll:yq,isHTMLForm:_q,hasOwnProperty:oO,hasOwnProp:oO,reduceDescriptors:nB,freezeMethods:bq,toObjectSet:wq,toCamelCase:vq,noop:Sq,toFiniteNumber:Eq,findKey:eB,global:tB,isContextDefined:rB,ALPHABET:iB,generateString:Tq,isSpecCompliantForm:Aq,toJSONObject:Mq,isAsyncFn:Cq,isThenable:Pq};function Kr(e,t,r,i,c){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),r&&(this.config=r),i&&(this.request=i),c&&(this.response=c)}ht.inherits(Kr,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ht.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const oB=Kr.prototype,aB={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{aB[e]={value:e}});Object.defineProperties(Kr,aB);Object.defineProperty(oB,"isAxiosError",{value:!0});Kr.from=(e,t,r,i,c,u)=>{const p=Object.create(oB);return ht.toFlatObject(e,p,function(v){return v!==Error.prototype},o=>o!=="isAxiosError"),Kr.call(p,e.message,t,r,i,c),p.cause=e,p.name=e.name,u&&Object.assign(p,u),p};const Iq=null;function FS(e){return ht.isPlainObject(e)||ht.isArray(e)}function sB(e){return ht.endsWith(e,"[]")?e.slice(0,-2):e}function sO(e,t,r){return e?e.concat(t).map(function(c,u){return c=sB(c),!r&&u?"["+c+"]":c}).join(r?".":""):t}function kq(e){return ht.isArray(e)&&!e.some(FS)}const Oq=ht.toFlatObject(ht,{},null,function(t){return/^is[A-Z]/.test(t)});function P1(e,t,r){if(!ht.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,r=ht.toFlatObject(r,{metaTokens:!0,dots:!1,indexes:!1},!1,function(k,N){return!ht.isUndefined(N[k])});const i=r.metaTokens,c=r.visitor||A,u=r.dots,p=r.indexes,v=(r.Blob||typeof Blob<"u"&&Blob)&&ht.isSpecCompliantForm(t);if(!ht.isFunction(c))throw new TypeError("visitor must be a function");function w(L){if(L===null)return"";if(ht.isDate(L))return L.toISOString();if(!v&&ht.isBlob(L))throw new Kr("Blob is not supported. Use a Buffer instead.");return ht.isArrayBuffer(L)||ht.isTypedArray(L)?v&&typeof Blob=="function"?new Blob([L]):Buffer.from(L):L}function A(L,k,N){let R=L;if(L&&!N&&typeof L=="object"){if(ht.endsWith(k,"{}"))k=i?k:k.slice(0,-2),L=JSON.stringify(L);else if(ht.isArray(L)&&kq(L)||(ht.isFileList(L)||ht.endsWith(k,"[]"))&&(R=ht.toArray(L)))return k=sB(k),R.forEach(function(D,G){!(ht.isUndefined(D)||D===null)&&t.append(p===!0?sO([k],G,u):p===null?k:k+"[]",w(D))}),!1}return FS(L)?!0:(t.append(sO(N,k,u),w(L)),!1)}const T=[],P=Object.assign(Oq,{defaultVisitor:A,convertValue:w,isVisitable:FS});function $(L,k){if(!ht.isUndefined(L)){if(T.indexOf(L)!==-1)throw Error("Circular reference detected in "+k.join("."));T.push(L),ht.forEach(L,function(R,j){(!(ht.isUndefined(R)||R===null)&&c.call(t,R,ht.isString(j)?j.trim():j,k,P))===!0&&$(R,k?k.concat(j):[j])}),T.pop()}}if(!ht.isObject(e))throw new TypeError("data must be an object");return $(e),t}function lO(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(i){return t[i]})}function TA(e,t){this._pairs=[],e&&P1(e,this,t)}const lB=TA.prototype;lB.append=function(t,r){this._pairs.push([t,r])};lB.toString=function(t){const r=t?function(i){return t.call(this,i,lO)}:lO;return this._pairs.map(function(c){return r(c[0])+"="+r(c[1])},"").join("&")};function Dq(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function cB(e,t,r){if(!t)return e;const i=r&&r.encode||Dq,c=r&&r.serialize;let u;if(c?u=c(t,r):u=ht.isURLSearchParams(t)?t.toString():new TA(t,r).toString(i),u){const p=e.indexOf("#");p!==-1&&(e=e.slice(0,p)),e+=(e.indexOf("?")===-1?"?":"&")+u}return e}class Rq{constructor(){this.handlers=[]}use(t,r,i){return this.handlers.push({fulfilled:t,rejected:r,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){ht.forEach(this.handlers,function(i){i!==null&&t(i)})}}const cO=Rq,uB={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},Lq=typeof URLSearchParams<"u"?URLSearchParams:TA,zq=typeof FormData<"u"?FormData:null,Bq=typeof Blob<"u"?Blob:null,$q=(()=>{let e;return typeof navigator<"u"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),Fq=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Rs={isBrowser:!0,classes:{URLSearchParams:Lq,FormData:zq,Blob:Bq},isStandardBrowserEnv:$q,isStandardBrowserWebWorkerEnv:Fq,protocols:["http","https","file","blob","url","data"]};function Nq(e,t){return P1(e,new Rs.classes.URLSearchParams,Object.assign({visitor:function(r,i,c,u){return Rs.isNode&&ht.isBuffer(r)?(this.append(i,r.toString("base64")),!1):u.defaultVisitor.apply(this,arguments)}},t))}function jq(e){return ht.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function Uq(e){const t={},r=Object.keys(e);let i;const c=r.length;let u;for(i=0;i<c;i++)u=r[i],t[u]=e[u];return t}function hB(e){function t(r,i,c,u){let p=r[u++];const o=Number.isFinite(+p),v=u>=r.length;return p=!p&&ht.isArray(c)?c.length:p,v?(ht.hasOwnProp(c,p)?c[p]=[c[p],i]:c[p]=i,!o):((!c[p]||!ht.isObject(c[p]))&&(c[p]=[]),t(r,i,c[p],u)&&ht.isArray(c[p])&&(c[p]=Uq(c[p])),!o)}if(ht.isFormData(e)&&ht.isFunction(e.entries)){const r={};return ht.forEachEntry(e,(i,c)=>{t(jq(i),c,r,0)}),r}return null}const Vq={"Content-Type":void 0};function Gq(e,t,r){if(ht.isString(e))try{return(t||JSON.parse)(e),ht.trim(e)}catch(i){if(i.name!=="SyntaxError")throw i}return(r||JSON.stringify)(e)}const I1={transitional:uB,adapter:["xhr","http"],transformRequest:[function(t,r){const i=r.getContentType()||"",c=i.indexOf("application/json")>-1,u=ht.isObject(t);if(u&&ht.isHTMLForm(t)&&(t=new FormData(t)),ht.isFormData(t))return c&&c?JSON.stringify(hB(t)):t;if(ht.isArrayBuffer(t)||ht.isBuffer(t)||ht.isStream(t)||ht.isFile(t)||ht.isBlob(t))return t;if(ht.isArrayBufferView(t))return t.buffer;if(ht.isURLSearchParams(t))return r.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let o;if(u){if(i.indexOf("application/x-www-form-urlencoded")>-1)return Nq(t,this.formSerializer).toString();if((o=ht.isFileList(t))||i.indexOf("multipart/form-data")>-1){const v=this.env&&this.env.FormData;return P1(o?{"files[]":t}:t,v&&new v,this.formSerializer)}}return u||c?(r.setContentType("application/json",!1),Gq(t)):t}],transformResponse:[function(t){const r=this.transitional||I1.transitional,i=r&&r.forcedJSONParsing,c=this.responseType==="json";if(t&&ht.isString(t)&&(i&&!this.responseType||c)){const p=!(r&&r.silentJSONParsing)&&c;try{return JSON.parse(t)}catch(o){if(p)throw o.name==="SyntaxError"?Kr.from(o,Kr.ERR_BAD_RESPONSE,this,null,this.response):o}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Rs.classes.FormData,Blob:Rs.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};ht.forEach(["delete","get","head"],function(t){I1.headers[t]={}});ht.forEach(["post","put","patch"],function(t){I1.headers[t]=ht.merge(Vq)});const AA=I1,qq=ht.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),Wq=e=>{const t={};let r,i,c;return e&&e.split(`
`).forEach(function(p){c=p.indexOf(":"),r=p.substring(0,c).trim().toLowerCase(),i=p.substring(c+1).trim(),!(!r||t[r]&&qq[r])&&(r==="set-cookie"?t[r]?t[r].push(i):t[r]=[i]:t[r]=t[r]?t[r]+", "+i:i)}),t},uO=Symbol("internals");function Lm(e){return e&&String(e).trim().toLowerCase()}function m0(e){return e===!1||e==null?e:ht.isArray(e)?e.map(m0):String(e)}function Hq(e){const t=Object.create(null),r=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=r.exec(e);)t[i[1]]=i[2];return t}const Zq=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function t2(e,t,r,i,c){if(ht.isFunction(i))return i.call(this,t,r);if(c&&(t=r),!!ht.isString(t)){if(ht.isString(i))return t.indexOf(i)!==-1;if(ht.isRegExp(i))return i.test(t)}}function Xq(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,r,i)=>r.toUpperCase()+i)}function Kq(e,t){const r=ht.toCamelCase(" "+t);["get","set","has"].forEach(i=>{Object.defineProperty(e,i+r,{value:function(c,u,p){return this[i].call(this,t,c,u,p)},configurable:!0})})}class k1{constructor(t){t&&this.set(t)}set(t,r,i){const c=this;function u(o,v,w){const A=Lm(v);if(!A)throw new Error("header name must be a non-empty string");const T=ht.findKey(c,A);(!T||c[T]===void 0||w===!0||w===void 0&&c[T]!==!1)&&(c[T||v]=m0(o))}const p=(o,v)=>ht.forEach(o,(w,A)=>u(w,A,v));return ht.isPlainObject(t)||t instanceof this.constructor?p(t,r):ht.isString(t)&&(t=t.trim())&&!Zq(t)?p(Wq(t),r):t!=null&&u(r,t,i),this}get(t,r){if(t=Lm(t),t){const i=ht.findKey(this,t);if(i){const c=this[i];if(!r)return c;if(r===!0)return Hq(c);if(ht.isFunction(r))return r.call(this,c,i);if(ht.isRegExp(r))return r.exec(c);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,r){if(t=Lm(t),t){const i=ht.findKey(this,t);return!!(i&&this[i]!==void 0&&(!r||t2(this,this[i],i,r)))}return!1}delete(t,r){const i=this;let c=!1;function u(p){if(p=Lm(p),p){const o=ht.findKey(i,p);o&&(!r||t2(i,i[o],o,r))&&(delete i[o],c=!0)}}return ht.isArray(t)?t.forEach(u):u(t),c}clear(t){const r=Object.keys(this);let i=r.length,c=!1;for(;i--;){const u=r[i];(!t||t2(this,this[u],u,t,!0))&&(delete this[u],c=!0)}return c}normalize(t){const r=this,i={};return ht.forEach(this,(c,u)=>{const p=ht.findKey(i,u);if(p){r[p]=m0(c),delete r[u];return}const o=t?Xq(u):String(u).trim();o!==u&&delete r[u],r[o]=m0(c),i[o]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const r=Object.create(null);return ht.forEach(this,(i,c)=>{i!=null&&i!==!1&&(r[c]=t&&ht.isArray(i)?i.join(", "):i)}),r}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,r])=>t+": "+r).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...r){const i=new this(t);return r.forEach(c=>i.set(c)),i}static accessor(t){const i=(this[uO]=this[uO]={accessors:{}}).accessors,c=this.prototype;function u(p){const o=Lm(p);i[o]||(Kq(c,p),i[o]=!0)}return ht.isArray(t)?t.forEach(u):u(t),this}}k1.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ht.freezeMethods(k1.prototype);ht.freezeMethods(k1);const xl=k1;function r2(e,t){const r=this||AA,i=t||r,c=xl.from(i.headers);let u=i.data;return ht.forEach(e,function(o){u=o.call(r,u,c.normalize(),t?t.status:void 0)}),c.normalize(),u}function fB(e){return!!(e&&e.__CANCEL__)}function Ey(e,t,r){Kr.call(this,e??"canceled",Kr.ERR_CANCELED,t,r),this.name="CanceledError"}ht.inherits(Ey,Kr,{__CANCEL__:!0});function Yq(e,t,r){const i=r.config.validateStatus;!r.status||!i||i(r.status)?e(r):t(new Kr("Request failed with status code "+r.status,[Kr.ERR_BAD_REQUEST,Kr.ERR_BAD_RESPONSE][Math.floor(r.status/100)-4],r.config,r.request,r))}const Jq=Rs.isStandardBrowserEnv?function(){return{write:function(r,i,c,u,p,o){const v=[];v.push(r+"="+encodeURIComponent(i)),ht.isNumber(c)&&v.push("expires="+new Date(c).toGMTString()),ht.isString(u)&&v.push("path="+u),ht.isString(p)&&v.push("domain="+p),o===!0&&v.push("secure"),document.cookie=v.join("; ")},read:function(r){const i=document.cookie.match(new RegExp("(^|;\\s*)("+r+")=([^;]*)"));return i?decodeURIComponent(i[3]):null},remove:function(r){this.write(r,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function Qq(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function eW(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function dB(e,t){return e&&!Qq(t)?eW(e,t):t}const tW=Rs.isStandardBrowserEnv?function(){const t=/(msie|trident)/i.test(navigator.userAgent),r=document.createElement("a");let i;function c(u){let p=u;return t&&(r.setAttribute("href",p),p=r.href),r.setAttribute("href",p),{href:r.href,protocol:r.protocol?r.protocol.replace(/:$/,""):"",host:r.host,search:r.search?r.search.replace(/^\?/,""):"",hash:r.hash?r.hash.replace(/^#/,""):"",hostname:r.hostname,port:r.port,pathname:r.pathname.charAt(0)==="/"?r.pathname:"/"+r.pathname}}return i=c(window.location.href),function(p){const o=ht.isString(p)?c(p):p;return o.protocol===i.protocol&&o.host===i.host}}():function(){return function(){return!0}}();function rW(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function nW(e,t){e=e||10;const r=new Array(e),i=new Array(e);let c=0,u=0,p;return t=t!==void 0?t:1e3,function(v){const w=Date.now(),A=i[u];p||(p=w),r[c]=v,i[c]=w;let T=u,P=0;for(;T!==c;)P+=r[T++],T=T%e;if(c=(c+1)%e,c===u&&(u=(u+1)%e),w-p<t)return;const $=A&&w-A;return $?Math.round(P*1e3/$):void 0}}function hO(e,t){let r=0;const i=nW(50,250);return c=>{const u=c.loaded,p=c.lengthComputable?c.total:void 0,o=u-r,v=i(o),w=u<=p;r=u;const A={loaded:u,total:p,progress:p?u/p:void 0,bytes:o,rate:v||void 0,estimated:v&&p&&w?(p-u)/v:void 0,event:c};A[t?"download":"upload"]=!0,e(A)}}const iW=typeof XMLHttpRequest<"u",oW=iW&&function(e){return new Promise(function(r,i){let c=e.data;const u=xl.from(e.headers).normalize(),p=e.responseType;let o;function v(){e.cancelToken&&e.cancelToken.unsubscribe(o),e.signal&&e.signal.removeEventListener("abort",o)}ht.isFormData(c)&&(Rs.isStandardBrowserEnv||Rs.isStandardBrowserWebWorkerEnv?u.setContentType(!1):u.setContentType("multipart/form-data;",!1));let w=new XMLHttpRequest;if(e.auth){const $=e.auth.username||"",L=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";u.set("Authorization","Basic "+btoa($+":"+L))}const A=dB(e.baseURL,e.url);w.open(e.method.toUpperCase(),cB(A,e.params,e.paramsSerializer),!0),w.timeout=e.timeout;function T(){if(!w)return;const $=xl.from("getAllResponseHeaders"in w&&w.getAllResponseHeaders()),k={data:!p||p==="text"||p==="json"?w.responseText:w.response,status:w.status,statusText:w.statusText,headers:$,config:e,request:w};Yq(function(R){r(R),v()},function(R){i(R),v()},k),w=null}if("onloadend"in w?w.onloadend=T:w.onreadystatechange=function(){!w||w.readyState!==4||w.status===0&&!(w.responseURL&&w.responseURL.indexOf("file:")===0)||setTimeout(T)},w.onabort=function(){w&&(i(new Kr("Request aborted",Kr.ECONNABORTED,e,w)),w=null)},w.onerror=function(){i(new Kr("Network Error",Kr.ERR_NETWORK,e,w)),w=null},w.ontimeout=function(){let L=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const k=e.transitional||uB;e.timeoutErrorMessage&&(L=e.timeoutErrorMessage),i(new Kr(L,k.clarifyTimeoutError?Kr.ETIMEDOUT:Kr.ECONNABORTED,e,w)),w=null},Rs.isStandardBrowserEnv){const $=(e.withCredentials||tW(A))&&e.xsrfCookieName&&Jq.read(e.xsrfCookieName);$&&u.set(e.xsrfHeaderName,$)}c===void 0&&u.setContentType(null),"setRequestHeader"in w&&ht.forEach(u.toJSON(),function(L,k){w.setRequestHeader(k,L)}),ht.isUndefined(e.withCredentials)||(w.withCredentials=!!e.withCredentials),p&&p!=="json"&&(w.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&w.addEventListener("progress",hO(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&w.upload&&w.upload.addEventListener("progress",hO(e.onUploadProgress)),(e.cancelToken||e.signal)&&(o=$=>{w&&(i(!$||$.type?new Ey(null,e,w):$),w.abort(),w=null)},e.cancelToken&&e.cancelToken.subscribe(o),e.signal&&(e.signal.aborted?o():e.signal.addEventListener("abort",o)));const P=rW(A);if(P&&Rs.protocols.indexOf(P)===-1){i(new Kr("Unsupported protocol "+P+":",Kr.ERR_BAD_REQUEST,e));return}w.send(c||null)})},g0={http:Iq,xhr:oW};ht.forEach(g0,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const aW={getAdapter:e=>{e=ht.isArray(e)?e:[e];const{length:t}=e;let r,i;for(let c=0;c<t&&(r=e[c],!(i=ht.isString(r)?g0[r.toLowerCase()]:r));c++);if(!i)throw i===!1?new Kr(`Adapter ${r} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(ht.hasOwnProp(g0,r)?`Adapter '${r}' is not available in the build`:`Unknown adapter '${r}'`);if(!ht.isFunction(i))throw new TypeError("adapter is not a function");return i},adapters:g0};function n2(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Ey(null,e)}function fO(e){return n2(e),e.headers=xl.from(e.headers),e.data=r2.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),aW.getAdapter(e.adapter||AA.adapter)(e).then(function(i){return n2(e),i.data=r2.call(e,e.transformResponse,i),i.headers=xl.from(i.headers),i},function(i){return fB(i)||(n2(e),i&&i.response&&(i.response.data=r2.call(e,e.transformResponse,i.response),i.response.headers=xl.from(i.response.headers))),Promise.reject(i)})}const dO=e=>e instanceof xl?e.toJSON():e;function md(e,t){t=t||{};const r={};function i(w,A,T){return ht.isPlainObject(w)&&ht.isPlainObject(A)?ht.merge.call({caseless:T},w,A):ht.isPlainObject(A)?ht.merge({},A):ht.isArray(A)?A.slice():A}function c(w,A,T){if(ht.isUndefined(A)){if(!ht.isUndefined(w))return i(void 0,w,T)}else return i(w,A,T)}function u(w,A){if(!ht.isUndefined(A))return i(void 0,A)}function p(w,A){if(ht.isUndefined(A)){if(!ht.isUndefined(w))return i(void 0,w)}else return i(void 0,A)}function o(w,A,T){if(T in t)return i(w,A);if(T in e)return i(void 0,w)}const v={url:u,method:u,data:u,baseURL:p,transformRequest:p,transformResponse:p,paramsSerializer:p,timeout:p,timeoutMessage:p,withCredentials:p,adapter:p,responseType:p,xsrfCookieName:p,xsrfHeaderName:p,onUploadProgress:p,onDownloadProgress:p,decompress:p,maxContentLength:p,maxBodyLength:p,beforeRedirect:p,transport:p,httpAgent:p,httpsAgent:p,cancelToken:p,socketPath:p,responseEncoding:p,validateStatus:o,headers:(w,A)=>c(dO(w),dO(A),!0)};return ht.forEach(Object.keys(Object.assign({},e,t)),function(A){const T=v[A]||c,P=T(e[A],t[A],A);ht.isUndefined(P)&&T!==o||(r[A]=P)}),r}const pB="1.4.0",MA={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{MA[e]=function(i){return typeof i===e||"a"+(t<1?"n ":" ")+e}});const pO={};MA.transitional=function(t,r,i){function c(u,p){return"[Axios v"+pB+"] Transitional option '"+u+"'"+p+(i?". "+i:"")}return(u,p,o)=>{if(t===!1)throw new Kr(c(p," has been removed"+(r?" in "+r:"")),Kr.ERR_DEPRECATED);return r&&!pO[p]&&(pO[p]=!0,console.warn(c(p," has been deprecated since v"+r+" and will be removed in the near future"))),t?t(u,p,o):!0}};function sW(e,t,r){if(typeof e!="object")throw new Kr("options must be an object",Kr.ERR_BAD_OPTION_VALUE);const i=Object.keys(e);let c=i.length;for(;c-- >0;){const u=i[c],p=t[u];if(p){const o=e[u],v=o===void 0||p(o,u,e);if(v!==!0)throw new Kr("option "+u+" must be "+v,Kr.ERR_BAD_OPTION_VALUE);continue}if(r!==!0)throw new Kr("Unknown option "+u,Kr.ERR_BAD_OPTION)}}const NS={assertOptions:sW,validators:MA},gc=NS.validators;class Z0{constructor(t){this.defaults=t,this.interceptors={request:new cO,response:new cO}}request(t,r){typeof t=="string"?(r=r||{},r.url=t):r=t||{},r=md(this.defaults,r);const{transitional:i,paramsSerializer:c,headers:u}=r;i!==void 0&&NS.assertOptions(i,{silentJSONParsing:gc.transitional(gc.boolean),forcedJSONParsing:gc.transitional(gc.boolean),clarifyTimeoutError:gc.transitional(gc.boolean)},!1),c!=null&&(ht.isFunction(c)?r.paramsSerializer={serialize:c}:NS.assertOptions(c,{encode:gc.function,serialize:gc.function},!0)),r.method=(r.method||this.defaults.method||"get").toLowerCase();let p;p=u&&ht.merge(u.common,u[r.method]),p&&ht.forEach(["delete","get","head","post","put","patch","common"],L=>{delete u[L]}),r.headers=xl.concat(p,u);const o=[];let v=!0;this.interceptors.request.forEach(function(k){typeof k.runWhen=="function"&&k.runWhen(r)===!1||(v=v&&k.synchronous,o.unshift(k.fulfilled,k.rejected))});const w=[];this.interceptors.response.forEach(function(k){w.push(k.fulfilled,k.rejected)});let A,T=0,P;if(!v){const L=[fO.bind(this),void 0];for(L.unshift.apply(L,o),L.push.apply(L,w),P=L.length,A=Promise.resolve(r);T<P;)A=A.then(L[T++],L[T++]);return A}P=o.length;let $=r;for(T=0;T<P;){const L=o[T++],k=o[T++];try{$=L($)}catch(N){k.call(this,N);break}}try{A=fO.call(this,$)}catch(L){return Promise.reject(L)}for(T=0,P=w.length;T<P;)A=A.then(w[T++],w[T++]);return A}getUri(t){t=md(this.defaults,t);const r=dB(t.baseURL,t.url);return cB(r,t.params,t.paramsSerializer)}}ht.forEach(["delete","get","head","options"],function(t){Z0.prototype[t]=function(r,i){return this.request(md(i||{},{method:t,url:r,data:(i||{}).data}))}});ht.forEach(["post","put","patch"],function(t){function r(i){return function(u,p,o){return this.request(md(o||{},{method:t,headers:i?{"Content-Type":"multipart/form-data"}:{},url:u,data:p}))}}Z0.prototype[t]=r(),Z0.prototype[t+"Form"]=r(!0)});const y0=Z0;class CA{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let r;this.promise=new Promise(function(u){r=u});const i=this;this.promise.then(c=>{if(!i._listeners)return;let u=i._listeners.length;for(;u-- >0;)i._listeners[u](c);i._listeners=null}),this.promise.then=c=>{let u;const p=new Promise(o=>{i.subscribe(o),u=o}).then(c);return p.cancel=function(){i.unsubscribe(u)},p},t(function(u,p,o){i.reason||(i.reason=new Ey(u,p,o),r(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const r=this._listeners.indexOf(t);r!==-1&&this._listeners.splice(r,1)}static source(){let t;return{token:new CA(function(c){t=c}),cancel:t}}}const lW=CA;function cW(e){return function(r){return e.apply(null,r)}}function uW(e){return ht.isObject(e)&&e.isAxiosError===!0}const jS={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(jS).forEach(([e,t])=>{jS[t]=e});const hW=jS;function mB(e){const t=new y0(e),r=Y5(y0.prototype.request,t);return ht.extend(r,y0.prototype,t,{allOwnKeys:!0}),ht.extend(r,t,null,{allOwnKeys:!0}),r.create=function(c){return mB(md(e,c))},r}const Si=mB(AA);Si.Axios=y0;Si.CanceledError=Ey;Si.CancelToken=lW;Si.isCancel=fB;Si.VERSION=pB;Si.toFormData=P1;Si.AxiosError=Kr;Si.Cancel=Si.CanceledError;Si.all=function(t){return Promise.all(t)};Si.spread=cW;Si.isAxiosError=uW;Si.mergeConfig=md;Si.AxiosHeaders=xl;Si.formToJSON=e=>hB(ht.isHTMLForm(e)?new FormData(e):e);Si.HttpStatusCode=hW;Si.default=Si;const hg=Si,fW="pk.eyJ1Ijoic291cmFiODg4OCIsImEiOiJjbGh5YTQ5czIxMWxsM2ZwZ3JmZ2tvbm50In0.VDBIHwgNdYzsCSqkxjaHQQ",dW="6f2dc78206339e3acb507b37ab1006e8",pW=`https://api.openweathermap.org/data/2.5/weather?lat=_lat_&lon=_lon_&appid=${dW}`;function mW({city:e,savedCities:t,theme:r}){return Ke.useRef(null),Ke.useEffect(()=>{if(Qw.accessToken=fW,console.log(t),e!==null){console.log("worling");const i=new Qw.Map({container:"map",style:`mapbox://styles/mapbox/${r==="dark"?"dark-v10":"light-v10"}`,center:[e.longitude,e.latitude],zoom:2});i.on("click",c=>{console.log(c)}),[...t,e].forEach(c=>{try{hg.get(pW.replace("_lat_",c.latitude).replace("_lon_",c.longitude)).then(u=>{const p=u.data,o=W0[p.weather[0].icon],v=new Qw.Marker({element:document.createElement("div"),anchor:"bottom",offset:[0,-15]}).setLngLat([c.longitude,c.latitude]).addTo(i);console.log(v);const w=v.getElement();w.style.backgroundImage=`url(${o})`,w.style.height="40px",w.style.width="40px",w.style.backgroundColor="var(--bg)",w.style.padding="5px",w.style.borderRadius="50%",w.style.backgroundSize="contain",w.style.backgroundRepeat="no-repeat",w.style.backgroundPosition="center";const A=document.createElement("div");A.textContent=c.city,A.style.fontSize="12px",A.style.fontWeight="bold",A.style.textAlign="center",A.style.marginTop="-20px",w.appendChild(A)})}catch(u){console.error(u)}})}},[t,e,r]),ze.jsxs(ze.Fragment,{children:[ze.jsxs("div",{className:"cheader",children:[ze.jsx("span",{className:"title",children:"Global Map"}),ze.jsxs("span",{className:"view-wide-btn",children:["View Wide",ze.jsx(L7,{fontSize:"10px",style:{color:"goldenrod"}})]})]}),ze.jsx("div",{className:"map-container",children:ze.jsx("div",{id:"map"})})]})}var gB={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function r(){for(var i=[],c=0;c<arguments.length;c++){var u=arguments[c];if(u){var p=typeof u;if(p==="string"||p==="number")i.push(u);else if(Array.isArray(u)){if(u.length){var o=r.apply(null,u);o&&i.push(o)}}else if(p==="object"){if(u.toString!==Object.prototype.toString&&!u.toString.toString().includes("[native code]")){i.push(u.toString());continue}for(var v in u)t.call(u,v)&&u[v]&&i.push(v)}}}return i.join(" ")}e.exports?(r.default=r,e.exports=r):window.classNames=r})()})(gB);var gW=gB.exports;const Mn=vn(gW);function yW(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Vc=yW;const Vd=vn(Vc);var _W=typeof qm=="object"&&qm&&qm.Object===Object&&qm,yB=_W,vW=yB,xW=typeof self=="object"&&self&&self.Object===Object&&self,bW=vW||xW||Function("return this")(),Gs=bW,wW=Gs,SW=wW.Symbol,Ty=SW,mO=Ty,_B=Object.prototype,EW=_B.hasOwnProperty,TW=_B.toString,zm=mO?mO.toStringTag:void 0;function AW(e){var t=EW.call(e,zm),r=e[zm];try{e[zm]=void 0;var i=!0}catch{}var c=TW.call(e);return i&&(t?e[zm]=r:delete e[zm]),c}var MW=AW,CW=Object.prototype,PW=CW.toString;function IW(e){return PW.call(e)}var kW=IW,gO=Ty,OW=MW,DW=kW,RW="[object Null]",LW="[object Undefined]",yO=gO?gO.toStringTag:void 0;function zW(e){return e==null?e===void 0?LW:RW:yO&&yO in Object(e)?OW(e):DW(e)}var Gc=zW,BW=Gc,$W=Vc,FW="[object AsyncFunction]",NW="[object Function]",jW="[object GeneratorFunction]",UW="[object Proxy]";function VW(e){if(!$W(e))return!1;var t=BW(e);return t==NW||t==jW||t==FW||t==UW}var PA=VW;const gr=vn(PA);var GW=Array.isArray,Eo=GW;const Hi=vn(Eo);function qW(e){return e!=null&&typeof e=="object"}var qc=qW,WW=Gc,HW=Eo,ZW=qc,XW="[object String]";function KW(e){return typeof e=="string"||!HW(e)&&ZW(e)&&WW(e)==XW}var YW=KW;const Ay=vn(YW);var JW=Gc,QW=qc,eH="[object Symbol]";function tH(e){return typeof e=="symbol"||QW(e)&&JW(e)==eH}var Gd=tH,rH=Eo,nH=Gd,iH=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,oH=/^\w*$/;function aH(e,t){if(rH(e))return!1;var r=typeof e;return r=="number"||r=="symbol"||r=="boolean"||e==null||nH(e)?!0:oH.test(e)||!iH.test(e)||t!=null&&e in Object(t)}var IA=aH,sH=Gs,lH=sH["__core-js_shared__"],cH=lH,i2=cH,_O=function(){var e=/[^.]+$/.exec(i2&&i2.keys&&i2.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function uH(e){return!!_O&&_O in e}var hH=uH,fH=Function.prototype,dH=fH.toString;function pH(e){if(e!=null){try{return dH.call(e)}catch{}try{return e+""}catch{}}return""}var vB=pH,mH=PA,gH=hH,yH=Vc,_H=vB,vH=/[\\^$.*+?()[\]{}|]/g,xH=/^\[object .+?Constructor\]$/,bH=Function.prototype,wH=Object.prototype,SH=bH.toString,EH=wH.hasOwnProperty,TH=RegExp("^"+SH.call(EH).replace(vH,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function AH(e){if(!yH(e)||gH(e))return!1;var t=mH(e)?TH:xH;return t.test(_H(e))}var MH=AH;function CH(e,t){return e==null?void 0:e[t]}var PH=CH,IH=MH,kH=PH;function OH(e,t){var r=kH(e,t);return IH(r)?r:void 0}var dh=OH,DH=dh,RH=DH(Object,"create"),O1=RH,vO=O1;function LH(){this.__data__=vO?vO(null):{},this.size=0}var zH=LH;function BH(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var $H=BH,FH=O1,NH="__lodash_hash_undefined__",jH=Object.prototype,UH=jH.hasOwnProperty;function VH(e){var t=this.__data__;if(FH){var r=t[e];return r===NH?void 0:r}return UH.call(t,e)?t[e]:void 0}var GH=VH,qH=O1,WH=Object.prototype,HH=WH.hasOwnProperty;function ZH(e){var t=this.__data__;return qH?t[e]!==void 0:HH.call(t,e)}var XH=ZH,KH=O1,YH="__lodash_hash_undefined__";function JH(e,t){var r=this.__data__;return this.size+=this.has(e)?0:1,r[e]=KH&&t===void 0?YH:t,this}var QH=JH,eZ=zH,tZ=$H,rZ=GH,nZ=XH,iZ=QH;function qd(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}qd.prototype.clear=eZ;qd.prototype.delete=tZ;qd.prototype.get=rZ;qd.prototype.has=nZ;qd.prototype.set=iZ;var oZ=qd;function aZ(){this.__data__=[],this.size=0}var sZ=aZ;function lZ(e,t){return e===t||e!==e&&t!==t}var kA=lZ,cZ=kA;function uZ(e,t){for(var r=e.length;r--;)if(cZ(e[r][0],t))return r;return-1}var D1=uZ,hZ=D1,fZ=Array.prototype,dZ=fZ.splice;function pZ(e){var t=this.__data__,r=hZ(t,e);if(r<0)return!1;var i=t.length-1;return r==i?t.pop():dZ.call(t,r,1),--this.size,!0}var mZ=pZ,gZ=D1;function yZ(e){var t=this.__data__,r=gZ(t,e);return r<0?void 0:t[r][1]}var _Z=yZ,vZ=D1;function xZ(e){return vZ(this.__data__,e)>-1}var bZ=xZ,wZ=D1;function SZ(e,t){var r=this.__data__,i=wZ(r,e);return i<0?(++this.size,r.push([e,t])):r[i][1]=t,this}var EZ=SZ,TZ=sZ,AZ=mZ,MZ=_Z,CZ=bZ,PZ=EZ;function Wd(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}Wd.prototype.clear=TZ;Wd.prototype.delete=AZ;Wd.prototype.get=MZ;Wd.prototype.has=CZ;Wd.prototype.set=PZ;var R1=Wd,IZ=dh,kZ=Gs,OZ=IZ(kZ,"Map"),OA=OZ,xO=oZ,DZ=R1,RZ=OA;function LZ(){this.size=0,this.__data__={hash:new xO,map:new(RZ||DZ),string:new xO}}var zZ=LZ;function BZ(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var $Z=BZ,FZ=$Z;function NZ(e,t){var r=e.__data__;return FZ(t)?r[typeof t=="string"?"string":"hash"]:r.map}var L1=NZ,jZ=L1;function UZ(e){var t=jZ(this,e).delete(e);return this.size-=t?1:0,t}var VZ=UZ,GZ=L1;function qZ(e){return GZ(this,e).get(e)}var WZ=qZ,HZ=L1;function ZZ(e){return HZ(this,e).has(e)}var XZ=ZZ,KZ=L1;function YZ(e,t){var r=KZ(this,e),i=r.size;return r.set(e,t),this.size+=r.size==i?0:1,this}var JZ=YZ,QZ=zZ,eX=VZ,tX=WZ,rX=XZ,nX=JZ;function Hd(e){var t=-1,r=e==null?0:e.length;for(this.clear();++t<r;){var i=e[t];this.set(i[0],i[1])}}Hd.prototype.clear=QZ;Hd.prototype.delete=eX;Hd.prototype.get=tX;Hd.prototype.has=rX;Hd.prototype.set=nX;var DA=Hd,xB=DA,iX="Expected a function";function RA(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(iX);var r=function(){var i=arguments,c=t?t.apply(this,i):i[0],u=r.cache;if(u.has(c))return u.get(c);var p=e.apply(this,i);return r.cache=u.set(c,p)||u,p};return r.cache=new(RA.Cache||xB),r}RA.Cache=xB;var oX=RA,aX=oX,sX=500;function lX(e){var t=aX(e,function(i){return r.size===sX&&r.clear(),i}),r=t.cache;return t}var cX=lX,uX=cX,hX=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,fX=/\\(\\)?/g,dX=uX(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(hX,function(r,i,c,u){t.push(c?u.replace(fX,"$1"):i||r)}),t}),pX=dX;function mX(e,t){for(var r=-1,i=e==null?0:e.length,c=Array(i);++r<i;)c[r]=t(e[r],r,e);return c}var LA=mX,bO=Ty,gX=LA,yX=Eo,_X=Gd,vX=1/0,wO=bO?bO.prototype:void 0,SO=wO?wO.toString:void 0;function bB(e){if(typeof e=="string")return e;if(yX(e))return gX(e,bB)+"";if(_X(e))return SO?SO.call(e):"";var t=e+"";return t=="0"&&1/e==-vX?"-0":t}var xX=bB,bX=xX;function wX(e){return e==null?"":bX(e)}var wB=wX,SX=Eo,EX=IA,TX=pX,AX=wB;function MX(e,t){return SX(e)?e:EX(e,t)?[e]:TX(AX(e))}var SB=MX,CX=Gd,PX=1/0;function IX(e){if(typeof e=="string"||CX(e))return e;var t=e+"";return t=="0"&&1/e==-PX?"-0":t}var z1=IX,kX=SB,OX=z1;function DX(e,t){t=kX(t,e);for(var r=0,i=t.length;e!=null&&r<i;)e=e[OX(t[r++])];return r&&r==i?e:void 0}var zA=DX,RX=zA;function LX(e,t,r){var i=e==null?void 0:RX(e,t);return i===void 0?r:i}var EB=LX;const Ma=vn(EB);function zX(e){return e==null}var BX=zX;const ur=vn(BX);var $X=Gc,FX=qc,NX="[object Number]";function jX(e){return typeof e=="number"||FX(e)&&$X(e)==NX}var TB=jX;const UX=vn(TB);var VX=TB;function GX(e){return VX(e)&&e!=+e}var qX=GX;const My=vn(qX);var Sa=function(t){return t===0?0:t>0?1:-1},US=function(t){return Ay(t)&&t.indexOf("%")===t.length-1},Rt=function(t){return UX(t)&&!My(t)},wi=function(t){return Rt(t)||Ay(t)},WX=0,Cy=function(t){var r=++WX;return"".concat(t||"").concat(r)},gd=function(t,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,c=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Rt(t)&&!Ay(t))return i;var u;if(US(t)){var p=t.indexOf("%");u=r*parseFloat(t.slice(0,p))/100}else u=+t;return My(u)&&(u=i),c&&u>r&&(u=r),u},yc=function(t){if(!t)return null;var r=Object.keys(t);return r&&r.length?t[r[0]]:null},HX=function(t){if(!Hi(t))return!1;for(var r=t.length,i={},c=0;c<r;c++)if(!i[t[c]])i[t[c]]=!0;else return!0;return!1},ts=function(t,r){return Rt(t)&&Rt(r)?function(i){return t+i*(r-t)}:function(){return r}};function X0(e,t,r){return!e||!e.length?null:e.find(function(i){return i&&(typeof t=="function"?t(i):Ma(i,t))===r})}function td(e,t){for(var r in e)if({}.hasOwnProperty.call(e,r)&&(!{}.hasOwnProperty.call(t,r)||e[r]!==t[r]))return!1;for(var i in t)if({}.hasOwnProperty.call(t,i)&&!{}.hasOwnProperty.call(e,i))return!1;return!0}function VS(e){return VS=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},VS(e)}var ZX=["viewBox","children"],XX=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],EO=["points","pathLength"],o2={svg:ZX,polygon:EO,polyline:EO},BA=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],K0=function(t,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var i=t;if(Ke.isValidElement(t)&&(i=t.props),!Vd(i))return null;var c={};return Object.keys(i).forEach(function(u){BA.includes(u)&&(c[u]=r||function(p){return i[u](i,p)})}),c},KX=function(t,r,i){return function(c){return t(r,i,c),null}},Y0=function(t,r,i){if(!Vd(t)||VS(t)!=="object")return null;var c=null;return Object.keys(t).forEach(function(u){var p=t[u];BA.includes(u)&&typeof p=="function"&&(c||(c={}),c[u]=KX(p,r,i))}),c},YX=["children"],JX=["children"];function TO(e,t){if(e==null)return{};var r=QX(e,t),i,c;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(c=0;c<u.length;c++)i=u[c],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function QX(e,t){if(e==null)return{};var r={},i=Object.keys(e),c,u;for(u=0;u<i.length;u++)c=i[u],!(t.indexOf(c)>=0)&&(r[c]=e[c]);return r}var AO={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"},Lc=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},MO=null,a2=null,$A=function e(t){if(t===MO&&Hi(a2))return a2;var r=[];return Ke.Children.forEach(t,function(i){ur(i)||(hG.isFragment(i)?r=r.concat(e(i.props.children)):r.push(i))}),a2=r,MO=t,r};function Ca(e,t){var r=[],i=[];return Hi(t)?i=t.map(function(c){return Lc(c)}):i=[Lc(t)],$A(e).forEach(function(c){var u=Ma(c,"type.displayName")||Ma(c,"type.name");i.indexOf(u)!==-1&&r.push(c)}),r}function pl(e,t){var r=Ca(e,t);return r&&r[0]}var CO=function(t){if(!t||!t.props)return!1;var r=t.props,i=r.width,c=r.height;return!(!Rt(i)||i<=0||!Rt(c)||c<=0)},eK=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],tK=function(t){return t&&t.type&&Ay(t.type)&&eK.indexOf(t.type)>=0},rK=function(t,r,i,c){var u,p=(u=o2==null?void 0:o2[c])!==null&&u!==void 0?u:[];return!gr(t)&&(c&&p.includes(r)||XX.includes(r))||i&&BA.includes(r)},en=function(t,r,i){if(!t||typeof t=="function"||typeof t=="boolean")return null;var c=t;if(Ke.isValidElement(t)&&(c=t.props),!Vd(c))return null;var u={};return Object.keys(c).forEach(function(p){var o;rK((o=c)===null||o===void 0?void 0:o[p],p,r,i)&&(u[p]=c[p])}),u},AB=function e(t,r){if(t===r)return!0;var i=Ke.Children.count(t);if(i!==Ke.Children.count(r))return!1;if(i===0)return!0;if(i===1)return PO(Hi(t)?t[0]:t,Hi(r)?r[0]:r);for(var c=0;c<i;c++){var u=t[c],p=r[c];if(Hi(u)||Hi(p)){if(!e(u,p))return!1}else if(!PO(u,p))return!1}return!0},PO=function(t,r){if(ur(t)&&ur(r))return!0;if(!ur(t)&&!ur(r)){var i=t.props||{},c=i.children,u=TO(i,YX),p=r.props||{},o=p.children,v=TO(p,JX);return c&&o?td(u,v)&&AB(c,o):!c&&!o?td(u,v):!1}return!1},IO=function(t,r){var i=[],c={};return $A(t).forEach(function(u,p){if(tK(u))i.push(u);else if(u){var o=Lc(u.type),v=r[o]||{},w=v.handler,A=v.once;if(w&&(!A||!c[o])){var T=w(u,o,p);i.push(T),c[o]=!0}}}),i},nK=function(t){var r=t&&t.type;return r&&AO[r]?AO[r]:null},iK=function(t,r){return $A(r).indexOf(t)},oK=["children","width","height","viewBox","className","style"];function GS(){return GS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},GS.apply(this,arguments)}function aK(e,t){if(e==null)return{};var r=sK(e,t),i,c;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(c=0;c<u.length;c++)i=u[c],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function sK(e,t){if(e==null)return{};var r={},i=Object.keys(e),c,u;for(u=0;u<i.length;u++)c=i[u],!(t.indexOf(c)>=0)&&(r[c]=e[c]);return r}function qS(e){var t=e.children,r=e.width,i=e.height,c=e.viewBox,u=e.className,p=e.style,o=aK(e,oK),v=c||{width:r,height:i,x:0,y:0},w=Mn("recharts-surface",u);return Ze.createElement("svg",GS({},en(o,!0,"svg"),{className:w,width:r,height:i,style:p,viewBox:"".concat(v.x," ").concat(v.y," ").concat(v.width," ").concat(v.height)}),Ze.createElement("title",null,e.title),Ze.createElement("desc",null,e.desc),t)}var lK=["children","className"];function WS(){return WS=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},WS.apply(this,arguments)}function cK(e,t){if(e==null)return{};var r=uK(e,t),i,c;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(c=0;c<u.length;c++)i=u[c],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function uK(e,t){if(e==null)return{};var r={},i=Object.keys(e),c,u;for(u=0;u<i.length;u++)c=i[u],!(t.indexOf(c)>=0)&&(r[c]=e[c]);return r}var ui=Ze.forwardRef(function(e,t){var r=e.children,i=e.className,c=cK(e,lK),u=Mn("recharts-layer",i);return Ze.createElement("g",WS({className:u},en(c,!0),{ref:t}),r)}),hK=R1;function fK(){this.__data__=new hK,this.size=0}var dK=fK;function pK(e){var t=this.__data__,r=t.delete(e);return this.size=t.size,r}var mK=pK;function gK(e){return this.__data__.get(e)}var yK=gK;function _K(e){return this.__data__.has(e)}var vK=_K,xK=R1,bK=OA,wK=DA,SK=200;function EK(e,t){var r=this.__data__;if(r instanceof xK){var i=r.__data__;if(!bK||i.length<SK-1)return i.push([e,t]),this.size=++r.size,this;r=this.__data__=new wK(i)}return r.set(e,t),this.size=r.size,this}var TK=EK,AK=R1,MK=dK,CK=mK,PK=yK,IK=vK,kK=TK;function Zd(e){var t=this.__data__=new AK(e);this.size=t.size}Zd.prototype.clear=MK;Zd.prototype.delete=CK;Zd.prototype.get=PK;Zd.prototype.has=IK;Zd.prototype.set=kK;var MB=Zd,OK="__lodash_hash_undefined__";function DK(e){return this.__data__.set(e,OK),this}var RK=DK;function LK(e){return this.__data__.has(e)}var zK=LK,BK=DA,$K=RK,FK=zK;function J0(e){var t=-1,r=e==null?0:e.length;for(this.__data__=new BK;++t<r;)this.add(e[t])}J0.prototype.add=J0.prototype.push=$K;J0.prototype.has=FK;var CB=J0;function NK(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(t(e[r],r,e))return!0;return!1}var PB=NK;function jK(e,t){return e.has(t)}var IB=jK,UK=CB,VK=PB,GK=IB,qK=1,WK=2;function HK(e,t,r,i,c,u){var p=r&qK,o=e.length,v=t.length;if(o!=v&&!(p&&v>o))return!1;var w=u.get(e),A=u.get(t);if(w&&A)return w==t&&A==e;var T=-1,P=!0,$=r&WK?new UK:void 0;for(u.set(e,t),u.set(t,e);++T<o;){var L=e[T],k=t[T];if(i)var N=p?i(k,L,T,t,e,u):i(L,k,T,e,t,u);if(N!==void 0){if(N)continue;P=!1;break}if($){if(!VK(t,function(R,j){if(!GK($,j)&&(L===R||c(L,R,r,i,u)))return $.push(j)})){P=!1;break}}else if(!(L===k||c(L,k,r,i,u))){P=!1;break}}return u.delete(e),u.delete(t),P}var kB=HK,ZK=Gs,XK=ZK.Uint8Array,KK=XK;function YK(e){var t=-1,r=Array(e.size);return e.forEach(function(i,c){r[++t]=[c,i]}),r}var JK=YK;function QK(e){var t=-1,r=Array(e.size);return e.forEach(function(i){r[++t]=i}),r}var FA=QK,kO=Ty,OO=KK,eY=kA,tY=kB,rY=JK,nY=FA,iY=1,oY=2,aY="[object Boolean]",sY="[object Date]",lY="[object Error]",cY="[object Map]",uY="[object Number]",hY="[object RegExp]",fY="[object Set]",dY="[object String]",pY="[object Symbol]",mY="[object ArrayBuffer]",gY="[object DataView]",DO=kO?kO.prototype:void 0,s2=DO?DO.valueOf:void 0;function yY(e,t,r,i,c,u,p){switch(r){case gY:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case mY:return!(e.byteLength!=t.byteLength||!u(new OO(e),new OO(t)));case aY:case sY:case uY:return eY(+e,+t);case lY:return e.name==t.name&&e.message==t.message;case hY:case dY:return e==t+"";case cY:var o=rY;case fY:var v=i&iY;if(o||(o=nY),e.size!=t.size&&!v)return!1;var w=p.get(e);if(w)return w==t;i|=oY,p.set(e,t);var A=tY(o(e),o(t),i,c,u,p);return p.delete(e),A;case pY:if(s2)return s2.call(e)==s2.call(t)}return!1}var _Y=yY;function vY(e,t){for(var r=-1,i=t.length,c=e.length;++r<i;)e[c+r]=t[r];return e}var OB=vY,xY=OB,bY=Eo;function wY(e,t,r){var i=t(e);return bY(e)?i:xY(i,r(e))}var SY=wY;function EY(e,t){for(var r=-1,i=e==null?0:e.length,c=0,u=[];++r<i;){var p=e[r];t(p,r,e)&&(u[c++]=p)}return u}var TY=EY;function AY(){return[]}var MY=AY,CY=TY,PY=MY,IY=Object.prototype,kY=IY.propertyIsEnumerable,RO=Object.getOwnPropertySymbols,OY=RO?function(e){return e==null?[]:(e=Object(e),CY(RO(e),function(t){return kY.call(e,t)}))}:PY,DY=OY;function RY(e,t){for(var r=-1,i=Array(e);++r<e;)i[r]=t(r);return i}var LY=RY,zY=Gc,BY=qc,$Y="[object Arguments]";function FY(e){return BY(e)&&zY(e)==$Y}var NY=FY,LO=NY,jY=qc,DB=Object.prototype,UY=DB.hasOwnProperty,VY=DB.propertyIsEnumerable,GY=LO(function(){return arguments}())?LO:function(e){return jY(e)&&UY.call(e,"callee")&&!VY.call(e,"callee")},NA=GY,Q0={exports:{}};function qY(){return!1}var WY=qY;Q0.exports;(function(e,t){var r=Gs,i=WY,c=t&&!t.nodeType&&t,u=c&&!0&&e&&!e.nodeType&&e,p=u&&u.exports===c,o=p?r.Buffer:void 0,v=o?o.isBuffer:void 0,w=v||i;e.exports=w})(Q0,Q0.exports);var RB=Q0.exports,HY=9007199254740991,ZY=/^(?:0|[1-9]\d*)$/;function XY(e,t){var r=typeof e;return t=t??HY,!!t&&(r=="number"||r!="symbol"&&ZY.test(e))&&e>-1&&e%1==0&&e<t}var jA=XY,KY=9007199254740991;function YY(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=KY}var UA=YY,JY=Gc,QY=UA,eJ=qc,tJ="[object Arguments]",rJ="[object Array]",nJ="[object Boolean]",iJ="[object Date]",oJ="[object Error]",aJ="[object Function]",sJ="[object Map]",lJ="[object Number]",cJ="[object Object]",uJ="[object RegExp]",hJ="[object Set]",fJ="[object String]",dJ="[object WeakMap]",pJ="[object ArrayBuffer]",mJ="[object DataView]",gJ="[object Float32Array]",yJ="[object Float64Array]",_J="[object Int8Array]",vJ="[object Int16Array]",xJ="[object Int32Array]",bJ="[object Uint8Array]",wJ="[object Uint8ClampedArray]",SJ="[object Uint16Array]",EJ="[object Uint32Array]",On={};On[gJ]=On[yJ]=On[_J]=On[vJ]=On[xJ]=On[bJ]=On[wJ]=On[SJ]=On[EJ]=!0;On[tJ]=On[rJ]=On[pJ]=On[nJ]=On[mJ]=On[iJ]=On[oJ]=On[aJ]=On[sJ]=On[lJ]=On[cJ]=On[uJ]=On[hJ]=On[fJ]=On[dJ]=!1;function TJ(e){return eJ(e)&&QY(e.length)&&!!On[JY(e)]}var AJ=TJ;function MJ(e){return function(t){return e(t)}}var LB=MJ,ex={exports:{}};ex.exports;(function(e,t){var r=yB,i=t&&!t.nodeType&&t,c=i&&!0&&e&&!e.nodeType&&e,u=c&&c.exports===i,p=u&&r.process,o=function(){try{var v=c&&c.require&&c.require("util").types;return v||p&&p.binding&&p.binding("util")}catch{}}();e.exports=o})(ex,ex.exports);var CJ=ex.exports,PJ=AJ,IJ=LB,zO=CJ,BO=zO&&zO.isTypedArray,kJ=BO?IJ(BO):PJ,zB=kJ,OJ=LY,DJ=NA,RJ=Eo,LJ=RB,zJ=jA,BJ=zB,$J=Object.prototype,FJ=$J.hasOwnProperty;function NJ(e,t){var r=RJ(e),i=!r&&DJ(e),c=!r&&!i&&LJ(e),u=!r&&!i&&!c&&BJ(e),p=r||i||c||u,o=p?OJ(e.length,String):[],v=o.length;for(var w in e)(t||FJ.call(e,w))&&!(p&&(w=="length"||c&&(w=="offset"||w=="parent")||u&&(w=="buffer"||w=="byteLength"||w=="byteOffset")||zJ(w,v)))&&o.push(w);return o}var jJ=NJ,UJ=Object.prototype;function VJ(e){var t=e&&e.constructor,r=typeof t=="function"&&t.prototype||UJ;return e===r}var GJ=VJ;function qJ(e,t){return function(r){return e(t(r))}}var WJ=qJ,HJ=WJ,ZJ=HJ(Object.keys,Object),XJ=ZJ,KJ=GJ,YJ=XJ,JJ=Object.prototype,QJ=JJ.hasOwnProperty;function eQ(e){if(!KJ(e))return YJ(e);var t=[];for(var r in Object(e))QJ.call(e,r)&&r!="constructor"&&t.push(r);return t}var tQ=eQ,rQ=PA,nQ=UA;function iQ(e){return e!=null&&nQ(e.length)&&!rQ(e)}var Py=iQ,oQ=jJ,aQ=tQ,sQ=Py;function lQ(e){return sQ(e)?oQ(e):aQ(e)}var B1=lQ,cQ=SY,uQ=DY,hQ=B1;function fQ(e){return cQ(e,hQ,uQ)}var dQ=fQ,$O=dQ,pQ=1,mQ=Object.prototype,gQ=mQ.hasOwnProperty;function yQ(e,t,r,i,c,u){var p=r&pQ,o=$O(e),v=o.length,w=$O(t),A=w.length;if(v!=A&&!p)return!1;for(var T=v;T--;){var P=o[T];if(!(p?P in t:gQ.call(t,P)))return!1}var $=u.get(e),L=u.get(t);if($&&L)return $==t&&L==e;var k=!0;u.set(e,t),u.set(t,e);for(var N=p;++T<v;){P=o[T];var R=e[P],j=t[P];if(i)var D=p?i(j,R,P,t,e,u):i(R,j,P,e,t,u);if(!(D===void 0?R===j||c(R,j,r,i,u):D)){k=!1;break}N||(N=P=="constructor")}if(k&&!N){var G=e.constructor,W=t.constructor;G!=W&&"constructor"in e&&"constructor"in t&&!(typeof G=="function"&&G instanceof G&&typeof W=="function"&&W instanceof W)&&(k=!1)}return u.delete(e),u.delete(t),k}var _Q=yQ,vQ=dh,xQ=Gs,bQ=vQ(xQ,"DataView"),wQ=bQ,SQ=dh,EQ=Gs,TQ=SQ(EQ,"Promise"),AQ=TQ,MQ=dh,CQ=Gs,PQ=MQ(CQ,"Set"),BB=PQ,IQ=dh,kQ=Gs,OQ=IQ(kQ,"WeakMap"),DQ=OQ,HS=wQ,ZS=OA,XS=AQ,KS=BB,YS=DQ,$B=Gc,Xd=vB,FO="[object Map]",RQ="[object Object]",NO="[object Promise]",jO="[object Set]",UO="[object WeakMap]",VO="[object DataView]",LQ=Xd(HS),zQ=Xd(ZS),BQ=Xd(XS),$Q=Xd(KS),FQ=Xd(YS),Uu=$B;(HS&&Uu(new HS(new ArrayBuffer(1)))!=VO||ZS&&Uu(new ZS)!=FO||XS&&Uu(XS.resolve())!=NO||KS&&Uu(new KS)!=jO||YS&&Uu(new YS)!=UO)&&(Uu=function(e){var t=$B(e),r=t==RQ?e.constructor:void 0,i=r?Xd(r):"";if(i)switch(i){case LQ:return VO;case zQ:return FO;case BQ:return NO;case $Q:return jO;case FQ:return UO}return t});var NQ=Uu,l2=MB,jQ=kB,UQ=_Y,VQ=_Q,GO=NQ,qO=Eo,WO=RB,GQ=zB,qQ=1,HO="[object Arguments]",ZO="[object Array]",Fv="[object Object]",WQ=Object.prototype,XO=WQ.hasOwnProperty;function HQ(e,t,r,i,c,u){var p=qO(e),o=qO(t),v=p?ZO:GO(e),w=o?ZO:GO(t);v=v==HO?Fv:v,w=w==HO?Fv:w;var A=v==Fv,T=w==Fv,P=v==w;if(P&&WO(e)){if(!WO(t))return!1;p=!0,A=!1}if(P&&!A)return u||(u=new l2),p||GQ(e)?jQ(e,t,r,i,c,u):UQ(e,t,v,r,i,c,u);if(!(r&qQ)){var $=A&&XO.call(e,"__wrapped__"),L=T&&XO.call(t,"__wrapped__");if($||L){var k=$?e.value():e,N=L?t.value():t;return u||(u=new l2),c(k,N,r,i,u)}}return P?(u||(u=new l2),VQ(e,t,r,i,c,u)):!1}var ZQ=HQ,XQ=ZQ,KO=qc;function FB(e,t,r,i,c){return e===t?!0:e==null||t==null||!KO(e)&&!KO(t)?e!==e&&t!==t:XQ(e,t,r,i,FB,c)}var VA=FB,KQ=MB,YQ=VA,JQ=1,QQ=2;function eee(e,t,r,i){var c=r.length,u=c,p=!i;if(e==null)return!u;for(e=Object(e);c--;){var o=r[c];if(p&&o[2]?o[1]!==e[o[0]]:!(o[0]in e))return!1}for(;++c<u;){o=r[c];var v=o[0],w=e[v],A=o[1];if(p&&o[2]){if(w===void 0&&!(v in e))return!1}else{var T=new KQ;if(i)var P=i(w,A,v,e,t,T);if(!(P===void 0?YQ(A,w,JQ|QQ,i,T):P))return!1}}return!0}var tee=eee,ree=Vc;function nee(e){return e===e&&!ree(e)}var NB=nee,iee=NB,oee=B1;function aee(e){for(var t=oee(e),r=t.length;r--;){var i=t[r],c=e[i];t[r]=[i,c,iee(c)]}return t}var see=aee;function lee(e,t){return function(r){return r==null?!1:r[e]===t&&(t!==void 0||e in Object(r))}}var jB=lee,cee=tee,uee=see,hee=jB;function fee(e){var t=uee(e);return t.length==1&&t[0][2]?hee(t[0][0],t[0][1]):function(r){return r===e||cee(r,e,t)}}var dee=fee;function pee(e,t){return e!=null&&t in Object(e)}var mee=pee,gee=SB,yee=NA,_ee=Eo,vee=jA,xee=UA,bee=z1;function wee(e,t,r){t=gee(t,e);for(var i=-1,c=t.length,u=!1;++i<c;){var p=bee(t[i]);if(!(u=e!=null&&r(e,p)))break;e=e[p]}return u||++i!=c?u:(c=e==null?0:e.length,!!c&&xee(c)&&vee(p,c)&&(_ee(e)||yee(e)))}var See=wee,Eee=mee,Tee=See;function Aee(e,t){return e!=null&&Tee(e,t,Eee)}var Mee=Aee,Cee=VA,Pee=EB,Iee=Mee,kee=IA,Oee=NB,Dee=jB,Ree=z1,Lee=1,zee=2;function Bee(e,t){return kee(e)&&Oee(t)?Dee(Ree(e),t):function(r){var i=Pee(r,e);return i===void 0&&i===t?Iee(r,e):Cee(t,i,Lee|zee)}}var $ee=Bee;function Fee(e){return e}var Kd=Fee;function Nee(e){return function(t){return t==null?void 0:t[e]}}var jee=Nee,Uee=zA;function Vee(e){return function(t){return Uee(t,e)}}var Gee=Vee,qee=jee,Wee=Gee,Hee=IA,Zee=z1;function Xee(e){return Hee(e)?qee(Zee(e)):Wee(e)}var Kee=Xee,Yee=dee,Jee=$ee,Qee=Kd,ete=Eo,tte=Kee;function rte(e){return typeof e=="function"?e:e==null?Qee:typeof e=="object"?ete(e)?Jee(e[0],e[1]):Yee(e):tte(e)}var Wc=rte;function nte(e,t,r,i){for(var c=e.length,u=r+(i?1:-1);i?u--:++u<c;)if(t(e[u],u,e))return u;return-1}var UB=nte;function ite(e){return e!==e}var ote=ite;function ate(e,t,r){for(var i=r-1,c=e.length;++i<c;)if(e[i]===t)return i;return-1}var ste=ate,lte=UB,cte=ote,ute=ste;function hte(e,t,r){return t===t?ute(e,t,r):lte(e,cte,r)}var fte=hte,dte=fte;function pte(e,t){var r=e==null?0:e.length;return!!r&&dte(e,t,0)>-1}var mte=pte;function gte(e,t,r){for(var i=-1,c=e==null?0:e.length;++i<c;)if(r(t,e[i]))return!0;return!1}var yte=gte;function _te(){}var vte=_te,c2=BB,xte=vte,bte=FA,wte=1/0,Ste=c2&&1/bte(new c2([,-0]))[1]==wte?function(e){return new c2(e)}:xte,Ete=Ste,Tte=CB,Ate=mte,Mte=yte,Cte=IB,Pte=Ete,Ite=FA,kte=200;function Ote(e,t,r){var i=-1,c=Ate,u=e.length,p=!0,o=[],v=o;if(r)p=!1,c=Mte;else if(u>=kte){var w=t?null:Pte(e);if(w)return Ite(w);p=!1,c=Cte,v=new Tte}else v=t?[]:o;e:for(;++i<u;){var A=e[i],T=t?t(A):A;if(A=r||A!==0?A:0,p&&T===T){for(var P=v.length;P--;)if(v[P]===T)continue e;t&&v.push(T),o.push(A)}else c(v,T,r)||(v!==o&&v.push(T),o.push(A))}return o}var Dte=Ote,Rte=Wc,Lte=Dte;function zte(e,t){return e&&e.length?Lte(e,Rte(t)):[]}var Bte=zte;const tx=vn(Bte);function $te(e,t,r){var i=-1,c=e.length;t<0&&(t=-t>c?0:c+t),r=r>c?c:r,r<0&&(r+=c),c=t>r?0:r-t>>>0,t>>>=0;for(var u=Array(c);++i<c;)u[i]=e[i+t];return u}var Fte=$te,Nte=Fte;function jte(e,t,r){var i=e.length;return r=r===void 0?i:r,!t&&r>=i?e:Nte(e,t,r)}var Ute=jte,Vte="\\ud800-\\udfff",Gte="\\u0300-\\u036f",qte="\\ufe20-\\ufe2f",Wte="\\u20d0-\\u20ff",Hte=Gte+qte+Wte,Zte="\\ufe0e\\ufe0f",Xte="\\u200d",Kte=RegExp("["+Xte+Vte+Hte+Zte+"]");function Yte(e){return Kte.test(e)}var VB=Yte;function Jte(e){return e.split("")}var Qte=Jte,GB="\\ud800-\\udfff",ere="\\u0300-\\u036f",tre="\\ufe20-\\ufe2f",rre="\\u20d0-\\u20ff",nre=ere+tre+rre,ire="\\ufe0e\\ufe0f",ore="["+GB+"]",JS="["+nre+"]",QS="\\ud83c[\\udffb-\\udfff]",are="(?:"+JS+"|"+QS+")",qB="[^"+GB+"]",WB="(?:\\ud83c[\\udde6-\\uddff]){2}",HB="[\\ud800-\\udbff][\\udc00-\\udfff]",sre="\\u200d",ZB=are+"?",XB="["+ire+"]?",lre="(?:"+sre+"(?:"+[qB,WB,HB].join("|")+")"+XB+ZB+")*",cre=XB+ZB+lre,ure="(?:"+[qB+JS+"?",JS,WB,HB,ore].join("|")+")",hre=RegExp(QS+"(?="+QS+")|"+ure+cre,"g");function fre(e){return e.match(hre)||[]}var dre=fre,pre=Qte,mre=VB,gre=dre;function yre(e){return mre(e)?gre(e):pre(e)}var _re=yre,vre=Ute,xre=VB,bre=_re,wre=wB;function Sre(e){return function(t){t=wre(t);var r=xre(t)?bre(t):void 0,i=r?r[0]:t.charAt(0),c=r?vre(r,1).join(""):t.slice(1);return i[e]()+c}}var Ere=Sre,Tre=Ere,Are=Tre("toUpperCase"),Mre=Are;const $1=vn(Mre);function Tn(e){return function(){return e}}const KB=Math.cos,rx=Math.sin,as=Math.sqrt,nx=Math.PI,F1=2*nx,eE=Math.PI,tE=2*eE,Vu=1e-6,Cre=tE-Vu;function YB(e){this._+=e[0];for(let t=1,r=e.length;t<r;++t)this._+=arguments[t]+e[t]}function Pre(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return YB;const r=10**t;return function(i){this._+=i[0];for(let c=1,u=i.length;c<u;++c)this._+=Math.round(arguments[c]*r)/r+i[c]}}class Ire{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?YB:Pre(t)}moveTo(t,r){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,r){this._append`L${this._x1=+t},${this._y1=+r}`}quadraticCurveTo(t,r,i,c){this._append`Q${+t},${+r},${this._x1=+i},${this._y1=+c}`}bezierCurveTo(t,r,i,c,u,p){this._append`C${+t},${+r},${+i},${+c},${this._x1=+u},${this._y1=+p}`}arcTo(t,r,i,c,u){if(t=+t,r=+r,i=+i,c=+c,u=+u,u<0)throw new Error(`negative radius: ${u}`);let p=this._x1,o=this._y1,v=i-t,w=c-r,A=p-t,T=o-r,P=A*A+T*T;if(this._x1===null)this._append`M${this._x1=t},${this._y1=r}`;else if(P>Vu)if(!(Math.abs(T*v-w*A)>Vu)||!u)this._append`L${this._x1=t},${this._y1=r}`;else{let $=i-p,L=c-o,k=v*v+w*w,N=$*$+L*L,R=Math.sqrt(k),j=Math.sqrt(P),D=u*Math.tan((eE-Math.acos((k+P-N)/(2*R*j)))/2),G=D/j,W=D/R;Math.abs(G-1)>Vu&&this._append`L${t+G*A},${r+G*T}`,this._append`A${u},${u},0,0,${+(T*$>A*L)},${this._x1=t+W*v},${this._y1=r+W*w}`}}arc(t,r,i,c,u,p){if(t=+t,r=+r,i=+i,p=!!p,i<0)throw new Error(`negative radius: ${i}`);let o=i*Math.cos(c),v=i*Math.sin(c),w=t+o,A=r+v,T=1^p,P=p?c-u:u-c;this._x1===null?this._append`M${w},${A}`:(Math.abs(this._x1-w)>Vu||Math.abs(this._y1-A)>Vu)&&this._append`L${w},${A}`,i&&(P<0&&(P=P%tE+tE),P>Cre?this._append`A${i},${i},0,1,${T},${t-o},${r-v}A${i},${i},0,1,${T},${this._x1=w},${this._y1=A}`:P>Vu&&this._append`A${i},${i},0,${+(P>=eE)},${T},${this._x1=t+i*Math.cos(u)},${this._y1=r+i*Math.sin(u)}`)}rect(t,r,i,c){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+r}h${i=+i}v${+c}h${-i}Z`}toString(){return this._}}function GA(e){let t=3;return e.digits=function(r){if(!arguments.length)return t;if(r==null)t=null;else{const i=Math.floor(r);if(!(i>=0))throw new RangeError(`invalid digits: ${r}`);t=i}return e},()=>new Ire(t)}function qA(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function JB(e){this._context=e}JB.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function N1(e){return new JB(e)}function QB(e){return e[0]}function e4(e){return e[1]}function t4(e,t){var r=Tn(!0),i=null,c=N1,u=null,p=GA(o);e=typeof e=="function"?e:e===void 0?QB:Tn(e),t=typeof t=="function"?t:t===void 0?e4:Tn(t);function o(v){var w,A=(v=qA(v)).length,T,P=!1,$;for(i==null&&(u=c($=p())),w=0;w<=A;++w)!(w<A&&r(T=v[w],w,v))===P&&((P=!P)?u.lineStart():u.lineEnd()),P&&u.point(+e(T,w,v),+t(T,w,v));if($)return u=null,$+""||null}return o.x=function(v){return arguments.length?(e=typeof v=="function"?v:Tn(+v),o):e},o.y=function(v){return arguments.length?(t=typeof v=="function"?v:Tn(+v),o):t},o.defined=function(v){return arguments.length?(r=typeof v=="function"?v:Tn(!!v),o):r},o.curve=function(v){return arguments.length?(c=v,i!=null&&(u=c(i)),o):c},o.context=function(v){return arguments.length?(v==null?i=u=null:u=c(i=v),o):i},o}function Nv(e,t,r){var i=null,c=Tn(!0),u=null,p=N1,o=null,v=GA(w);e=typeof e=="function"?e:e===void 0?QB:Tn(+e),t=typeof t=="function"?t:Tn(t===void 0?0:+t),r=typeof r=="function"?r:r===void 0?e4:Tn(+r);function w(T){var P,$,L,k=(T=qA(T)).length,N,R=!1,j,D=new Array(k),G=new Array(k);for(u==null&&(o=p(j=v())),P=0;P<=k;++P){if(!(P<k&&c(N=T[P],P,T))===R)if(R=!R)$=P,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),L=P-1;L>=$;--L)o.point(D[L],G[L]);o.lineEnd(),o.areaEnd()}R&&(D[P]=+e(N,P,T),G[P]=+t(N,P,T),o.point(i?+i(N,P,T):D[P],r?+r(N,P,T):G[P]))}if(j)return o=null,j+""||null}function A(){return t4().defined(c).curve(p).context(u)}return w.x=function(T){return arguments.length?(e=typeof T=="function"?T:Tn(+T),i=null,w):e},w.x0=function(T){return arguments.length?(e=typeof T=="function"?T:Tn(+T),w):e},w.x1=function(T){return arguments.length?(i=T==null?null:typeof T=="function"?T:Tn(+T),w):i},w.y=function(T){return arguments.length?(t=typeof T=="function"?T:Tn(+T),r=null,w):t},w.y0=function(T){return arguments.length?(t=typeof T=="function"?T:Tn(+T),w):t},w.y1=function(T){return arguments.length?(r=T==null?null:typeof T=="function"?T:Tn(+T),w):r},w.lineX0=w.lineY0=function(){return A().x(e).y(t)},w.lineY1=function(){return A().x(e).y(r)},w.lineX1=function(){return A().x(i).y(t)},w.defined=function(T){return arguments.length?(c=typeof T=="function"?T:Tn(!!T),w):c},w.curve=function(T){return arguments.length?(p=T,u!=null&&(o=p(u)),w):p},w.context=function(T){return arguments.length?(T==null?u=o=null:o=p(u=T),w):u},w}const WA={draw(e,t){const r=as(t/nx);e.moveTo(r,0),e.arc(0,0,r,0,F1)}},kre={draw(e,t){const r=as(t/5)/2;e.moveTo(-3*r,-r),e.lineTo(-r,-r),e.lineTo(-r,-3*r),e.lineTo(r,-3*r),e.lineTo(r,-r),e.lineTo(3*r,-r),e.lineTo(3*r,r),e.lineTo(r,r),e.lineTo(r,3*r),e.lineTo(-r,3*r),e.lineTo(-r,r),e.lineTo(-3*r,r),e.closePath()}},r4=as(1/3),Ore=r4*2,Dre={draw(e,t){const r=as(t/Ore),i=r*r4;e.moveTo(0,-r),e.lineTo(i,0),e.lineTo(0,r),e.lineTo(-i,0),e.closePath()}},Rre={draw(e,t){const r=as(t),i=-r/2;e.rect(i,i,r,r)}},Lre=.8908130915292852,n4=rx(nx/10)/rx(7*nx/10),zre=rx(F1/10)*n4,Bre=-KB(F1/10)*n4,$re={draw(e,t){const r=as(t*Lre),i=zre*r,c=Bre*r;e.moveTo(0,-r),e.lineTo(i,c);for(let u=1;u<5;++u){const p=F1*u/5,o=KB(p),v=rx(p);e.lineTo(v*r,-o*r),e.lineTo(o*i-v*c,v*i+o*c)}e.closePath()}},u2=as(3),Fre={draw(e,t){const r=-as(t/(u2*3));e.moveTo(0,r*2),e.lineTo(-u2*r,-r),e.lineTo(u2*r,-r),e.closePath()}},ga=-.5,ya=as(3)/2,rE=1/as(12),Nre=(rE/2+1)*3,jre={draw(e,t){const r=as(t/Nre),i=r/2,c=r*rE,u=i,p=r*rE+r,o=-u,v=p;e.moveTo(i,c),e.lineTo(u,p),e.lineTo(o,v),e.lineTo(ga*i-ya*c,ya*i+ga*c),e.lineTo(ga*u-ya*p,ya*u+ga*p),e.lineTo(ga*o-ya*v,ya*o+ga*v),e.lineTo(ga*i+ya*c,ga*c-ya*i),e.lineTo(ga*u+ya*p,ga*p-ya*u),e.lineTo(ga*o+ya*v,ga*v-ya*o),e.closePath()}};function Ure(e,t){let r=null,i=GA(c);e=typeof e=="function"?e:Tn(e||WA),t=typeof t=="function"?t:Tn(t===void 0?64:+t);function c(){let u;if(r||(r=u=i()),e.apply(this,arguments).draw(r,+t.apply(this,arguments)),u)return r=null,u+""||null}return c.type=function(u){return arguments.length?(e=typeof u=="function"?u:Tn(u),c):e},c.size=function(u){return arguments.length?(t=typeof u=="function"?u:Tn(+u),c):t},c.context=function(u){return arguments.length?(r=u??null,c):r},c}function ix(){}function ox(e,t,r){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+r)/6)}function i4(e){this._context=e}i4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:ox(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:ox(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Vre(e){return new i4(e)}function o4(e){this._context=e}o4.prototype={areaStart:ix,areaEnd:ix,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:ox(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Gre(e){return new o4(e)}function a4(e){this._context=e}a4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var r=(this._x0+4*this._x1+e)/6,i=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(r,i):this._context.moveTo(r,i);break;case 3:this._point=4;default:ox(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function qre(e){return new a4(e)}function s4(e){this._context=e}s4.prototype={areaStart:ix,areaEnd:ix,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Wre(e){return new s4(e)}function YO(e){return e<0?-1:1}function JO(e,t,r){var i=e._x1-e._x0,c=t-e._x1,u=(e._y1-e._y0)/(i||c<0&&-0),p=(r-e._y1)/(c||i<0&&-0),o=(u*c+p*i)/(i+c);return(YO(u)+YO(p))*Math.min(Math.abs(u),Math.abs(p),.5*Math.abs(o))||0}function QO(e,t){var r=e._x1-e._x0;return r?(3*(e._y1-e._y0)/r-t)/2:t}function h2(e,t,r){var i=e._x0,c=e._y0,u=e._x1,p=e._y1,o=(u-i)/3;e._context.bezierCurveTo(i+o,c+o*t,u-o,p-o*r,u,p)}function ax(e){this._context=e}ax.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:h2(this,this._t0,QO(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var r=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,h2(this,QO(this,r=JO(this,e,t)),r);break;default:h2(this,this._t0,r=JO(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=r}}};function l4(e){this._context=new c4(e)}(l4.prototype=Object.create(ax.prototype)).point=function(e,t){ax.prototype.point.call(this,t,e)};function c4(e){this._context=e}c4.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,r,i,c,u){this._context.bezierCurveTo(t,e,i,r,u,c)}};function Hre(e){return new ax(e)}function Zre(e){return new l4(e)}function u4(e){this._context=e}u4.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,r=e.length;if(r)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),r===2)this._context.lineTo(e[1],t[1]);else for(var i=eD(e),c=eD(t),u=0,p=1;p<r;++u,++p)this._context.bezierCurveTo(i[0][u],c[0][u],i[1][u],c[1][u],e[p],t[p]);(this._line||this._line!==0&&r===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function eD(e){var t,r=e.length-1,i,c=new Array(r),u=new Array(r),p=new Array(r);for(c[0]=0,u[0]=2,p[0]=e[0]+2*e[1],t=1;t<r-1;++t)c[t]=1,u[t]=4,p[t]=4*e[t]+2*e[t+1];for(c[r-1]=2,u[r-1]=7,p[r-1]=8*e[r-1]+e[r],t=1;t<r;++t)i=c[t]/u[t-1],u[t]-=i,p[t]-=i*p[t-1];for(c[r-1]=p[r-1]/u[r-1],t=r-2;t>=0;--t)c[t]=(p[t]-c[t+1])/u[t];for(u[r-1]=(e[r]+c[r-1])/2,t=0;t<r-1;++t)u[t]=2*e[t+1]-c[t+1];return[c,u]}function Xre(e){return new u4(e)}function j1(e,t){this._context=e,this._t=t}j1.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var r=this._x*(1-this._t)+e*this._t;this._context.lineTo(r,this._y),this._context.lineTo(r,t)}break}}this._x=e,this._y=t}};function Kre(e){return new j1(e,.5)}function Yre(e){return new j1(e,0)}function Jre(e){return new j1(e,1)}function yd(e,t){if((p=e.length)>1)for(var r=1,i,c,u=e[t[0]],p,o=u.length;r<p;++r)for(c=u,u=e[t[r]],i=0;i<o;++i)u[i][1]+=u[i][0]=isNaN(c[i][1])?c[i][0]:c[i][1]}function nE(e){for(var t=e.length,r=new Array(t);--t>=0;)r[t]=t;return r}function Qre(e,t){return e[t]}function ene(e){const t=[];return t.key=e,t}function tne(){var e=Tn([]),t=nE,r=yd,i=Qre;function c(u){var p=Array.from(e.apply(this,arguments),ene),o,v=p.length,w=-1,A;for(const T of u)for(o=0,++w;o<v;++o)(p[o][w]=[0,+i(T,p[o].key,w,u)]).data=T;for(o=0,A=qA(t(p));o<v;++o)p[A[o]].index=o;return r(p,A),p}return c.keys=function(u){return arguments.length?(e=typeof u=="function"?u:Tn(Array.from(u)),c):e},c.value=function(u){return arguments.length?(i=typeof u=="function"?u:Tn(+u),c):i},c.order=function(u){return arguments.length?(t=u==null?nE:typeof u=="function"?u:Tn(Array.from(u)),c):t},c.offset=function(u){return arguments.length?(r=u??yd,c):r},c}function rne(e,t){if((i=e.length)>0){for(var r,i,c=0,u=e[0].length,p;c<u;++c){for(p=r=0;r<i;++r)p+=e[r][c][1]||0;if(p)for(r=0;r<i;++r)e[r][c][1]/=p}yd(e,t)}}function nne(e,t){if((c=e.length)>0){for(var r=0,i=e[t[0]],c,u=i.length;r<u;++r){for(var p=0,o=0;p<c;++p)o+=e[p][r][1]||0;i[r][1]+=i[r][0]=-o/2}yd(e,t)}}function ine(e,t){if(!(!((p=e.length)>0)||!((u=(c=e[t[0]]).length)>0))){for(var r=0,i=1,c,u,p;i<u;++i){for(var o=0,v=0,w=0;o<p;++o){for(var A=e[t[o]],T=A[i][1]||0,P=A[i-1][1]||0,$=(T-P)/2,L=0;L<o;++L){var k=e[t[L]],N=k[i][1]||0,R=k[i-1][1]||0;$+=N-R}v+=T,w+=$*T}c[i-1][1]+=c[i-1][0]=r,v&&(r-=w/v)}c[i-1][1]+=c[i-1][0]=r,yd(e,t)}}function _d(e){return _d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_d(e)}function iE(){return iE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},iE.apply(this,arguments)}function one(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function tD(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,f4(i.key),i)}}function ane(e,t,r){return t&&tD(e.prototype,t),r&&tD(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function sne(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&oE(e,t)}function oE(e,t){return oE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,c){return i.__proto__=c,i},oE(e,t)}function lne(e){var t=hne();return function(){var i=sx(e),c;if(t){var u=sx(this).constructor;c=Reflect.construct(i,arguments,u)}else c=i.apply(this,arguments);return cne(this,c)}}function cne(e,t){if(t&&(_d(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return une(e)}function une(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hne(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function sx(e){return sx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},sx(e)}function h4(e,t,r){return t=f4(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function f4(e){var t=fne(e,"string");return _d(t)==="symbol"?t:String(t)}function fne(e,t){if(_d(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(_d(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var d4={symbolCircle:WA,symbolCross:kre,symbolDiamond:Dre,symbolSquare:Rre,symbolStar:$re,symbolTriangle:Fre,symbolWye:jre},dne=Math.PI/180,pne=function(t){var r="symbol".concat($1(t));return d4[r]||WA},mne=function(t,r,i){if(r==="area")return t;switch(i){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var c=18*dne;return 1.25*t*t*(Math.tan(c)-Math.tan(c*2)*Math.pow(Math.tan(c),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},HA=function(e){sne(r,e);var t=lne(r);function r(){return one(this,r),t.apply(this,arguments)}return ane(r,[{key:"getPath",value:function(){var c=this.props,u=c.size,p=c.sizeType,o=c.type,v=pne(o),w=Ure().type(v).size(mne(u,p,o));return w()}},{key:"render",value:function(){var c=this.props,u=c.className,p=c.cx,o=c.cy,v=c.size,w=en(this.props,!0);return p===+p&&o===+o&&v===+v?Ze.createElement("path",iE({},w,{className:Mn("recharts-symbols",u),transform:"translate(".concat(p,", ").concat(o,")"),d:this.getPath()})):null}}]),r}(Ke.PureComponent);h4(HA,"defaultProps",{type:"circle",size:64,sizeType:"area"});h4(HA,"registerSymbol",function(e,t){d4["symbol".concat($1(e))]=t});function vd(e){return vd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vd(e)}function aE(){return aE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},aE.apply(this,arguments)}function rD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,i)}return r}function gne(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?rD(Object(r),!0).forEach(function(i){Ng(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):rD(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function yne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nD(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,p4(i.key),i)}}function _ne(e,t,r){return t&&nD(e.prototype,t),r&&nD(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function vne(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sE(e,t)}function sE(e,t){return sE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,c){return i.__proto__=c,i},sE(e,t)}function xne(e){var t=Sne();return function(){var i=lx(e),c;if(t){var u=lx(this).constructor;c=Reflect.construct(i,arguments,u)}else c=i.apply(this,arguments);return bne(this,c)}}function bne(e,t){if(t&&(vd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wne(e)}function wne(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sne(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function lx(e){return lx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},lx(e)}function Ng(e,t,r){return t=p4(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function p4(e){var t=Ene(e,"string");return vd(t)==="symbol"?t:String(t)}function Ene(e,t){if(vd(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(vd(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var _a=32,ZA=function(e){vne(r,e);var t=xne(r);function r(){return yne(this,r),t.apply(this,arguments)}return _ne(r,[{key:"renderIcon",value:function(c){var u=this.props.inactiveColor,p=_a/2,o=_a/6,v=_a/3,w=c.inactive?u:c.color;if(c.type==="plainline")return Ze.createElement("line",{strokeWidth:4,fill:"none",stroke:w,strokeDasharray:c.payload.strokeDasharray,x1:0,y1:p,x2:_a,y2:p,className:"recharts-legend-icon"});if(c.type==="line")return Ze.createElement("path",{strokeWidth:4,fill:"none",stroke:w,d:"M0,".concat(p,"h").concat(v,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*v,",").concat(p,`
            H`).concat(_a,"M").concat(2*v,",").concat(p,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(v,",").concat(p),className:"recharts-legend-icon"});if(c.type==="rect")return Ze.createElement("path",{stroke:"none",fill:w,d:"M0,".concat(_a/8,"h").concat(_a,"v").concat(_a*3/4,"h").concat(-_a,"z"),className:"recharts-legend-icon"});if(Ze.isValidElement(c.legendIcon)){var A=gne({},c);return delete A.legendIcon,Ze.cloneElement(c.legendIcon,A)}return Ze.createElement(HA,{fill:w,cx:p,cy:p,size:_a,sizeType:"diameter",type:c.type})}},{key:"renderItems",value:function(){var c=this,u=this.props,p=u.payload,o=u.iconSize,v=u.layout,w=u.formatter,A=u.inactiveColor,T={x:0,y:0,width:_a,height:_a},P={display:v==="horizontal"?"inline-block":"block",marginRight:10},$={display:"inline-block",verticalAlign:"middle",marginRight:4};return p.map(function(L,k){var N,R=L.formatter||w,j=Mn((N={"recharts-legend-item":!0},Ng(N,"legend-item-".concat(k),!0),Ng(N,"inactive",L.inactive),N));if(L.type==="none")return null;var D=L.inactive?A:L.color;return Ze.createElement("li",aE({className:j,style:P,key:"legend-item-".concat(k)},Y0(c.props,L,k)),Ze.createElement(qS,{width:o,height:o,viewBox:T,style:$},c.renderIcon(L)),Ze.createElement("span",{className:"recharts-legend-item-text",style:{color:D}},R?R(L.value,L,k):L.value))})}},{key:"render",value:function(){var c=this.props,u=c.payload,p=c.layout,o=c.align;if(!u||!u.length)return null;var v={padding:0,margin:0,textAlign:p==="horizontal"?o:"left"};return Ze.createElement("ul",{className:"recharts-default-legend",style:v},this.renderItems())}}]),r}(Ke.PureComponent);Ng(ZA,"displayName","Legend");Ng(ZA,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});function xd(e){return xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xd(e)}var Tne=["ref"];function iD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,i)}return r}function Ef(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?iD(Object(r),!0).forEach(function(i){U1(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):iD(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function Ane(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oD(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,g4(i.key),i)}}function Mne(e,t,r){return t&&oD(e.prototype,t),r&&oD(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Cne(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lE(e,t)}function lE(e,t){return lE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,c){return i.__proto__=c,i},lE(e,t)}function Pne(e){var t=kne();return function(){var i=cx(e),c;if(t){var u=cx(this).constructor;c=Reflect.construct(i,arguments,u)}else c=i.apply(this,arguments);return Ine(this,c)}}function Ine(e,t){if(t&&(xd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return m4(e)}function m4(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function kne(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function cx(e){return cx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},cx(e)}function U1(e,t,r){return t=g4(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function g4(e){var t=One(e,"string");return xd(t)==="symbol"?t:String(t)}function One(e,t){if(xd(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(xd(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Dne(e,t){if(e==null)return{};var r=Rne(e,t),i,c;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(c=0;c<u.length;c++)i=u[c],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function Rne(e,t){if(e==null)return{};var r={},i=Object.keys(e),c,u;for(u=0;u<i.length;u++)c=i[u],!(t.indexOf(c)>=0)&&(r[c]=e[c]);return r}function Lne(e){return e.value}function zne(e,t){return e===!0?tx(t,Lne):gr(e)?tx(t,e):t}function Bne(e,t){if(Ze.isValidElement(e))return Ze.cloneElement(e,t);if(gr(e))return Ze.createElement(e,t);t.ref;var r=Dne(t,Tne);return Ze.createElement(ZA,r)}var aD=1,bd=function(e){Cne(r,e);var t=Pne(r);function r(){var i;Ane(this,r);for(var c=arguments.length,u=new Array(c),p=0;p<c;p++)u[p]=arguments[p];return i=t.call.apply(t,[this].concat(u)),U1(m4(i),"state",{boxWidth:-1,boxHeight:-1}),i}return Mne(r,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){return this.wrapperNode&&this.wrapperNode.getBoundingClientRect?this.wrapperNode.getBoundingClientRect():null}},{key:"getBBoxSnapshot",value:function(){var c=this.state,u=c.boxWidth,p=c.boxHeight;return u>=0&&p>=0?{width:u,height:p}:null}},{key:"getDefaultPosition",value:function(c){var u=this.props,p=u.layout,o=u.align,v=u.verticalAlign,w=u.margin,A=u.chartWidth,T=u.chartHeight,P,$;if(!c||(c.left===void 0||c.left===null)&&(c.right===void 0||c.right===null))if(o==="center"&&p==="vertical"){var L=this.getBBoxSnapshot()||{width:0};P={left:((A||0)-L.width)/2}}else P=o==="right"?{right:w&&w.right||0}:{left:w&&w.left||0};if(!c||(c.top===void 0||c.top===null)&&(c.bottom===void 0||c.bottom===null))if(v==="middle"){var k=this.getBBoxSnapshot()||{height:0};$={top:((T||0)-k.height)/2}}else $=v==="bottom"?{bottom:w&&w.bottom||0}:{top:w&&w.top||0};return Ef(Ef({},P),$)}},{key:"updateBBox",value:function(){var c=this.state,u=c.boxWidth,p=c.boxHeight,o=this.props.onBBoxUpdate;if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var v=this.wrapperNode.getBoundingClientRect();(Math.abs(v.width-u)>aD||Math.abs(v.height-p)>aD)&&this.setState({boxWidth:v.width,boxHeight:v.height},function(){o&&o(v)})}else(u!==-1||p!==-1)&&this.setState({boxWidth:-1,boxHeight:-1},function(){o&&o(null)})}},{key:"render",value:function(){var c=this,u=this.props,p=u.content,o=u.width,v=u.height,w=u.wrapperStyle,A=u.payloadUniqBy,T=u.payload,P=Ef(Ef({position:"absolute",width:o||"auto",height:v||"auto"},this.getDefaultPosition(w)),w);return Ze.createElement("div",{className:"recharts-legend-wrapper",style:P,ref:function(L){c.wrapperNode=L}},Bne(p,Ef(Ef({},this.props),{},{payload:zne(A,T)})))}}],[{key:"getWithHeight",value:function(c,u){var p=c.props.layout;return p==="vertical"&&Rt(c.props.height)?{height:c.props.height}:p==="horizontal"?{width:c.props.width||u}:null}}]),r}(Ke.PureComponent);U1(bd,"displayName","Legend");U1(bd,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var $ne=Object.getOwnPropertyNames,Fne=Object.getOwnPropertySymbols,Nne=Object.prototype.hasOwnProperty;function sD(e,t){return function(i,c,u){return e(i,c,u)&&t(i,c,u)}}function jv(e){return function(r,i,c){if(!r||!i||typeof r!="object"||typeof i!="object")return e(r,i,c);var u=c.cache,p=u.get(r),o=u.get(i);if(p&&o)return p===i&&o===r;u.set(r,i),u.set(i,r);var v=e(r,i,c);return u.delete(r),u.delete(i),v}}function lD(e){return $ne(e).concat(Fne(e))}var y4=Object.hasOwn||function(e,t){return Nne.call(e,t)};function Yd(e,t){return e||t?e===t:e===t||e!==e&&t!==t}var _4="_owner",cD=Object.getOwnPropertyDescriptor,uD=Object.keys;function jne(e,t,r){var i=e.length;if(t.length!==i)return!1;for(;i-- >0;)if(!r.equals(e[i],t[i],i,i,e,t,r))return!1;return!0}function Une(e,t){return Yd(e.getTime(),t.getTime())}function hD(e,t,r){if(e.size!==t.size)return!1;for(var i={},c=e.entries(),u=0,p,o;(p=c.next())&&!p.done;){for(var v=t.entries(),w=!1,A=0;(o=v.next())&&!o.done;){var T=p.value,P=T[0],$=T[1],L=o.value,k=L[0],N=L[1];!w&&!i[A]&&(w=r.equals(P,k,u,A,e,t,r)&&r.equals($,N,P,k,e,t,r))&&(i[A]=!0),A++}if(!w)return!1;u++}return!0}function Vne(e,t,r){var i=uD(e),c=i.length;if(uD(t).length!==c)return!1;for(var u;c-- >0;)if(u=i[c],u===_4&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!y4(t,u)||!r.equals(e[u],t[u],u,u,e,t,r))return!1;return!0}function Bm(e,t,r){var i=lD(e),c=i.length;if(lD(t).length!==c)return!1;for(var u,p,o;c-- >0;)if(u=i[c],u===_4&&(e.$$typeof||t.$$typeof)&&e.$$typeof!==t.$$typeof||!y4(t,u)||!r.equals(e[u],t[u],u,u,e,t,r)||(p=cD(e,u),o=cD(t,u),(p||o)&&(!p||!o||p.configurable!==o.configurable||p.enumerable!==o.enumerable||p.writable!==o.writable)))return!1;return!0}function Gne(e,t){return Yd(e.valueOf(),t.valueOf())}function qne(e,t){return e.source===t.source&&e.flags===t.flags}function fD(e,t,r){if(e.size!==t.size)return!1;for(var i={},c=e.values(),u,p;(u=c.next())&&!u.done;){for(var o=t.values(),v=!1,w=0;(p=o.next())&&!p.done;)!v&&!i[w]&&(v=r.equals(u.value,p.value,u.value,p.value,e,t,r))&&(i[w]=!0),w++;if(!v)return!1}return!0}function Wne(e,t){var r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(e[r]!==t[r])return!1;return!0}var Hne="[object Arguments]",Zne="[object Boolean]",Xne="[object Date]",Kne="[object Map]",Yne="[object Number]",Jne="[object Object]",Qne="[object RegExp]",eie="[object Set]",tie="[object String]",rie=Array.isArray,dD=typeof ArrayBuffer=="function"&&ArrayBuffer.isView?ArrayBuffer.isView:null,pD=Object.assign,nie=Object.prototype.toString.call.bind(Object.prototype.toString);function iie(e){var t=e.areArraysEqual,r=e.areDatesEqual,i=e.areMapsEqual,c=e.areObjectsEqual,u=e.arePrimitiveWrappersEqual,p=e.areRegExpsEqual,o=e.areSetsEqual,v=e.areTypedArraysEqual;return function(A,T,P){if(A===T)return!0;if(A==null||T==null||typeof A!="object"||typeof T!="object")return A!==A&&T!==T;var $=A.constructor;if($!==T.constructor)return!1;if($===Object)return c(A,T,P);if(rie(A))return t(A,T,P);if(dD!=null&&dD(A))return v(A,T,P);if($===Date)return r(A,T,P);if($===RegExp)return p(A,T,P);if($===Map)return i(A,T,P);if($===Set)return o(A,T,P);var L=nie(A);return L===Xne?r(A,T,P):L===Qne?p(A,T,P):L===Kne?i(A,T,P):L===eie?o(A,T,P):L===Jne?typeof A.then!="function"&&typeof T.then!="function"&&c(A,T,P):L===Hne?c(A,T,P):L===Zne||L===Yne||L===tie?u(A,T,P):!1}}function oie(e){var t=e.circular,r=e.createCustomConfig,i=e.strict,c={areArraysEqual:i?Bm:jne,areDatesEqual:Une,areMapsEqual:i?sD(hD,Bm):hD,areObjectsEqual:i?Bm:Vne,arePrimitiveWrappersEqual:Gne,areRegExpsEqual:qne,areSetsEqual:i?sD(fD,Bm):fD,areTypedArraysEqual:i?Bm:Wne};if(r&&(c=pD({},c,r(c))),t){var u=jv(c.areArraysEqual),p=jv(c.areMapsEqual),o=jv(c.areObjectsEqual),v=jv(c.areSetsEqual);c=pD({},c,{areArraysEqual:u,areMapsEqual:p,areObjectsEqual:o,areSetsEqual:v})}return c}function aie(e){return function(t,r,i,c,u,p,o){return e(t,r,o)}}function sie(e){var t=e.circular,r=e.comparator,i=e.createState,c=e.equals,u=e.strict;if(i)return function(v,w){var A=i(),T=A.cache,P=T===void 0?t?new WeakMap:void 0:T,$=A.meta;return r(v,w,{cache:P,equals:c,meta:$,strict:u})};if(t)return function(v,w){return r(v,w,{cache:new WeakMap,equals:c,meta:void 0,strict:u})};var p={cache:void 0,equals:c,meta:void 0,strict:u};return function(v,w){return r(v,w,p)}}var lie=Hc();Hc({strict:!0});Hc({circular:!0});Hc({circular:!0,strict:!0});Hc({createInternalComparator:function(){return Yd}});Hc({strict:!0,createInternalComparator:function(){return Yd}});Hc({circular:!0,createInternalComparator:function(){return Yd}});Hc({circular:!0,createInternalComparator:function(){return Yd},strict:!0});function Hc(e){e===void 0&&(e={});var t=e.circular,r=t===void 0?!1:t,i=e.createInternalComparator,c=e.createState,u=e.strict,p=u===void 0?!1:u,o=oie(e),v=iie(o),w=i?i(v):aie(v);return sie({circular:r,comparator:v,createState:c,equals:w,strict:p})}function mD(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,r=-1,i=function c(u){r<0&&(r=u),u-r>t?(e(u),r=-1):requestAnimationFrame(c)};requestAnimationFrame(i)}function cE(e){return cE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cE(e)}function cie(e){return die(e)||fie(e)||hie(e)||uie()}function uie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hie(e,t){if(e){if(typeof e=="string")return gD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return gD(e,t)}}function gD(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function fie(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function die(e){if(Array.isArray(e))return e}function pie(){var e={},t=function(){return null},r=!1,i=function c(u){if(!r){if(Array.isArray(u)){if(!u.length)return;var p=u,o=cie(p),v=o[0],w=o.slice(1);if(typeof v=="number"){mD(c.bind(null,w),v);return}c(v),mD(c.bind(null,w));return}cE(u)==="object"&&(e=u,t(e)),typeof u=="function"&&u()}};return{stop:function(){r=!0},start:function(u){r=!1,i(u)},subscribe:function(u){return t=u,function(){t=function(){return null}}}}}function jg(e){return jg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jg(e)}function yD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,i)}return r}function wd(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yD(Object(r),!0).forEach(function(i){ux(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yD(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function ux(e,t,r){return t=mie(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function mie(e){var t=gie(e,"string");return jg(t)==="symbol"?t:String(t)}function gie(e,t){if(jg(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(jg(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var yie=["Webkit","Moz","O","ms"],_ie=["-webkit-","-moz-","-o-","-ms-"],vie=["transform","transformOrigin","transition"],xie=function(t,r){return[Object.keys(t),Object.keys(r)].reduce(function(i,c){return i.filter(function(u){return c.includes(u)})})},bie=function(t){return t},wie=function(t){return t.replace(/([A-Z])/g,function(r){return"-".concat(r.toLowerCase())})},Sie=function(t,r){if(vie.indexOf(t)===-1)return ux({},t,Number.isNaN(r)?0:r);var i=t==="transition",c=t.replace(/(\w)/,function(p){return p.toUpperCase()}),u=r;return yie.reduce(function(p,o,v){return i&&(u=r.replace(/(transform|transform-origin)/gim,"".concat(_ie[v],"$1"))),wd(wd({},p),{},ux({},o+c,u))},{})},fg=function(t,r){return Object.keys(r).reduce(function(i,c){return wd(wd({},i),{},ux({},c,t(c,r[c])))},{})},uE=function(t){return Object.keys(t).reduce(function(r,i){return wd(wd({},r),Sie(i,r[i]))},t)},_D=function(t,r,i){return t.map(function(c){return"".concat(wie(c)," ").concat(r,"ms ").concat(i)}).join(",")};function Eie(e,t){return Mie(e)||Aie(e,t)||v4(e,t)||Tie()}function Tie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Aie(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,c,u,p,o=[],v=!0,w=!1;try{if(u=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;v=!1}else for(;!(v=(i=u.call(r)).done)&&(o.push(i.value),o.length!==t);v=!0);}catch(A){w=!0,c=A}finally{try{if(!v&&r.return!=null&&(p=r.return(),Object(p)!==p))return}finally{if(w)throw c}}return o}}function Mie(e){if(Array.isArray(e))return e}function Cie(e){return kie(e)||Iie(e)||v4(e)||Pie()}function Pie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function v4(e,t){if(e){if(typeof e=="string")return hE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return hE(e,t)}}function Iie(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function kie(e){if(Array.isArray(e))return hE(e)}function hE(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}var hx=1e-4,x4=function(t,r){return[0,3*t,3*r-6*t,3*t-3*r+1]},b4=function(t,r){return t.map(function(i,c){return i*Math.pow(r,c)}).reduce(function(i,c){return i+c})},vD=function(t,r){return function(i){var c=x4(t,r);return b4(c,i)}},Oie=function(t,r){return function(i){var c=x4(t,r),u=[].concat(Cie(c.map(function(p,o){return p*o}).slice(1)),[0]);return b4(u,i)}},xD=function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var c=r[0],u=r[1],p=r[2],o=r[3];if(r.length===1)switch(r[0]){case"linear":c=0,u=0,p=1,o=1;break;case"ease":c=.25,u=.1,p=.25,o=1;break;case"ease-in":c=.42,u=0,p=1,o=1;break;case"ease-out":c=.42,u=0,p=.58,o=1;break;case"ease-in-out":c=0,u=0,p=.58,o=1;break;default:{var v=r[0].split("(");if(v[0]==="cubic-bezier"&&v[1].split(")")[0].split(",").length===4){var w=v[1].split(")")[0].split(",").map(function(N){return parseFloat(N)}),A=Eie(w,4);c=A[0],u=A[1],p=A[2],o=A[3]}}}var T=vD(c,p),P=vD(u,o),$=Oie(c,p),L=function(R){return R>1?1:R<0?0:R},k=function(R){for(var j=R>1?1:R,D=j,G=0;G<8;++G){var W=T(D)-j,Y=$(D);if(Math.abs(W-j)<hx||Y<hx)return P(D);D=L(D-W/Y)}return P(D)};return k.isStepper=!1,k},Die=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},r=t.stiff,i=r===void 0?100:r,c=t.damping,u=c===void 0?8:c,p=t.dt,o=p===void 0?17:p,v=function(A,T,P){var $=-(A-T)*i,L=P*u,k=P+($-L)*o/1e3,N=P*o/1e3+A;return Math.abs(N-T)<hx&&Math.abs(k)<hx?[T,0]:[N,k]};return v.isStepper=!0,v.dt=o,v},Rie=function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];var c=r[0];if(typeof c=="string")switch(c){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return xD(c);case"spring":return Die();default:if(c.split("(")[0]==="cubic-bezier")return xD(c)}return typeof c=="function"?c:null};function Ug(e){return Ug=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ug(e)}function bD(e){return Bie(e)||zie(e)||w4(e)||Lie()}function Lie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zie(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Bie(e){if(Array.isArray(e))return dE(e)}function wD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,i)}return r}function Vi(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?wD(Object(r),!0).forEach(function(i){fE(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):wD(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function fE(e,t,r){return t=$ie(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $ie(e){var t=Fie(e,"string");return Ug(t)==="symbol"?t:String(t)}function Fie(e,t){if(Ug(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(Ug(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nie(e,t){return Vie(e)||Uie(e,t)||w4(e,t)||jie()}function jie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function w4(e,t){if(e){if(typeof e=="string")return dE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return dE(e,t)}}function dE(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function Uie(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,c,u,p,o=[],v=!0,w=!1;try{if(u=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;v=!1}else for(;!(v=(i=u.call(r)).done)&&(o.push(i.value),o.length!==t);v=!0);}catch(A){w=!0,c=A}finally{try{if(!v&&r.return!=null&&(p=r.return(),Object(p)!==p))return}finally{if(w)throw c}}return o}}function Vie(e){if(Array.isArray(e))return e}var fx=function(t,r,i){return t+(r-t)*i},pE=function(t){var r=t.from,i=t.to;return r!==i},Gie=function e(t,r,i){var c=fg(function(u,p){if(pE(p)){var o=t(p.from,p.to,p.velocity),v=Nie(o,2),w=v[0],A=v[1];return Vi(Vi({},p),{},{from:w,velocity:A})}return p},r);return i<1?fg(function(u,p){return pE(p)?Vi(Vi({},p),{},{velocity:fx(p.velocity,c[u].velocity,i),from:fx(p.from,c[u].from,i)}):p},r):e(t,c,i-1)};const qie=function(e,t,r,i,c){var u=xie(e,t),p=u.reduce(function(N,R){return Vi(Vi({},N),{},fE({},R,[e[R],t[R]]))},{}),o=u.reduce(function(N,R){return Vi(Vi({},N),{},fE({},R,{from:e[R],velocity:0,to:t[R]}))},{}),v=-1,w,A,T=function(){return null},P=function(){return fg(function(R,j){return j.from},o)},$=function(){return!Object.values(o).filter(pE).length},L=function(R){w||(w=R);var j=R-w,D=j/r.dt;o=Gie(r,o,D),c(Vi(Vi(Vi({},e),t),P())),w=R,$()||(v=requestAnimationFrame(T))},k=function(R){A||(A=R);var j=(R-A)/i,D=fg(function(W,Y){return fx.apply(void 0,bD(Y).concat([r(j)]))},p);if(c(Vi(Vi(Vi({},e),t),D)),j<1)v=requestAnimationFrame(T);else{var G=fg(function(W,Y){return fx.apply(void 0,bD(Y).concat([r(1)]))},p);c(Vi(Vi(Vi({},e),t),G))}};return T=r.isStepper?L:k,function(){return requestAnimationFrame(T),function(){cancelAnimationFrame(v)}}};function Sd(e){return Sd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sd(e)}var Wie=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Hie(e,t){if(e==null)return{};var r=Zie(e,t),i,c;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(c=0;c<u.length;c++)i=u[c],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function Zie(e,t){if(e==null)return{};var r={},i=Object.keys(e),c,u;for(u=0;u<i.length;u++)c=i[u],!(t.indexOf(c)>=0)&&(r[c]=e[c]);return r}function f2(e){return Jie(e)||Yie(e)||Kie(e)||Xie()}function Xie(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kie(e,t){if(e){if(typeof e=="string")return mE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return mE(e,t)}}function Yie(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Jie(e){if(Array.isArray(e))return mE(e)}function mE(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function SD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,i)}return r}function Xa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SD(Object(r),!0).forEach(function(i){Km(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SD(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function Km(e,t,r){return t=S4(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Qie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ED(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,S4(i.key),i)}}function eoe(e,t,r){return t&&ED(e.prototype,t),r&&ED(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function S4(e){var t=toe(e,"string");return Sd(t)==="symbol"?t:String(t)}function toe(e,t){if(Sd(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(Sd(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function roe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&gE(e,t)}function gE(e,t){return gE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,c){return i.__proto__=c,i},gE(e,t)}function noe(e){var t=ioe();return function(){var i=dx(e),c;if(t){var u=dx(this).constructor;c=Reflect.construct(i,arguments,u)}else c=i.apply(this,arguments);return yE(this,c)}}function yE(e,t){if(t&&(Sd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _E(e)}function _E(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ioe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function dx(e){return dx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},dx(e)}var ch=function(e){roe(r,e);var t=noe(r);function r(i,c){var u;Qie(this,r),u=t.call(this,i,c);var p=u.props,o=p.isActive,v=p.attributeName,w=p.from,A=p.to,T=p.steps,P=p.children,$=p.duration;if(u.handleStyleChange=u.handleStyleChange.bind(_E(u)),u.changeStyle=u.changeStyle.bind(_E(u)),!o||$<=0)return u.state={style:{}},typeof P=="function"&&(u.state={style:A}),yE(u);if(T&&T.length)u.state={style:T[0].style};else if(w){if(typeof P=="function")return u.state={style:w},yE(u);u.state={style:v?Km({},v,w):w}}else u.state={style:{}};return u}return eoe(r,[{key:"componentDidMount",value:function(){var c=this.props,u=c.isActive,p=c.canBegin;this.mounted=!0,!(!u||!p)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(c){var u=this.props,p=u.isActive,o=u.canBegin,v=u.attributeName,w=u.shouldReAnimate,A=u.to,T=u.from,P=this.state.style;if(o){if(!p){var $={style:v?Km({},v,A):A};this.state&&P&&(v&&P[v]!==A||!v&&P!==A)&&this.setState($);return}if(!(lie(c.to,A)&&c.canBegin&&c.isActive)){var L=!c.canBegin||!c.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var k=L||w?T:c.to;if(this.state&&P){var N={style:v?Km({},v,k):k};(v&&[v]!==k||!v&&P!==k)&&this.setState(N)}this.runAnimation(Xa(Xa({},this.props),{},{from:k,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1,this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation()}},{key:"handleStyleChange",value:function(c){this.changeStyle(c)}},{key:"changeStyle",value:function(c){this.mounted&&this.setState({style:c})}},{key:"runJSAnimation",value:function(c){var u=this,p=c.from,o=c.to,v=c.duration,w=c.easing,A=c.begin,T=c.onAnimationEnd,P=c.onAnimationStart,$=qie(p,o,Rie(w),v,this.changeStyle),L=function(){u.stopJSAnimation=$()};this.manager.start([P,A,L,v,T])}},{key:"runStepAnimation",value:function(c){var u=this,p=c.steps,o=c.begin,v=c.onAnimationStart,w=p[0],A=w.style,T=w.duration,P=T===void 0?0:T,$=function(k,N,R){if(R===0)return k;var j=N.duration,D=N.easing,G=D===void 0?"ease":D,W=N.style,Y=N.properties,ee=N.onAnimationEnd,de=R>0?p[R-1]:N,xe=Y||Object.keys(W);if(typeof G=="function"||G==="spring")return[].concat(f2(k),[u.runJSAnimation.bind(u,{from:de.style,to:W,duration:j,easing:G}),j]);var Me=_D(xe,j,G),Ce=Xa(Xa(Xa({},de.style),W),{},{transition:Me});return[].concat(f2(k),[Ce,j,ee]).filter(bie)};return this.manager.start([v].concat(f2(p.reduce($,[A,Math.max(P,o)])),[c.onAnimationEnd]))}},{key:"runAnimation",value:function(c){this.manager||(this.manager=pie());var u=c.begin,p=c.duration,o=c.attributeName,v=c.to,w=c.easing,A=c.onAnimationStart,T=c.onAnimationEnd,P=c.steps,$=c.children,L=this.manager;if(this.unSubscribe=L.subscribe(this.handleStyleChange),typeof w=="function"||typeof $=="function"||w==="spring"){this.runJSAnimation(c);return}if(P.length>1){this.runStepAnimation(c);return}var k=o?Km({},o,v):v,N=_D(Object.keys(k),p,w);L.start([A,u,Xa(Xa({},k),{},{transition:N}),p,T])}},{key:"render",value:function(){var c=this.props,u=c.children;c.begin;var p=c.duration;c.attributeName,c.easing;var o=c.isActive;c.steps,c.from,c.to,c.canBegin,c.onAnimationEnd,c.shouldReAnimate,c.onAnimationReStart;var v=Hie(c,Wie),w=Ke.Children.count(u),A=uE(this.state.style);if(typeof u=="function")return u(A);if(!o||w===0||p<=0)return u;var T=function($){var L=$.props,k=L.style,N=k===void 0?{}:k,R=L.className,j=Ke.cloneElement($,Xa(Xa({},v),{},{style:Xa(Xa({},N),A),className:R}));return j};return w===1?T(Ke.Children.only(u)):Ze.createElement("div",null,Ke.Children.map(u,function(P){return T(P)}))}}]),r}(Ke.PureComponent);ch.displayName="Animate";ch.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};ch.propTypes={from:Mr.oneOfType([Mr.object,Mr.string]),to:Mr.oneOfType([Mr.object,Mr.string]),attributeName:Mr.string,duration:Mr.number,begin:Mr.number,easing:Mr.oneOfType([Mr.string,Mr.func]),steps:Mr.arrayOf(Mr.shape({duration:Mr.number.isRequired,style:Mr.object.isRequired,easing:Mr.oneOfType([Mr.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Mr.func]),properties:Mr.arrayOf("string"),onAnimationEnd:Mr.func})),children:Mr.oneOfType([Mr.node,Mr.func]),isActive:Mr.bool,canBegin:Mr.bool,onAnimationEnd:Mr.func,shouldReAnimate:Mr.bool,onAnimationStart:Mr.func,onAnimationReStart:Mr.func};Number.isFinite===void 0&&(Number.isFinite=function(e){return typeof e=="number"&&isFinite(e)});Mr.object,Mr.object,Mr.object,Mr.element;Mr.object,Mr.object,Mr.object,Mr.oneOfType([Mr.array,Mr.element]),Mr.any;var TD=Ty,ooe=NA,aoe=Eo,AD=TD?TD.isConcatSpreadable:void 0;function soe(e){return aoe(e)||ooe(e)||!!(AD&&e&&e[AD])}var loe=soe,coe=OB,uoe=loe;function E4(e,t,r,i,c){var u=-1,p=e.length;for(r||(r=uoe),c||(c=[]);++u<p;){var o=e[u];t>0&&r(o)?t>1?E4(o,t-1,r,i,c):coe(c,o):i||(c[c.length]=o)}return c}var T4=E4;function hoe(e){return function(t,r,i){for(var c=-1,u=Object(t),p=i(t),o=p.length;o--;){var v=p[e?o:++c];if(r(u[v],v,u)===!1)break}return t}}var foe=hoe,doe=foe,poe=doe(),moe=poe,goe=moe,yoe=B1;function _oe(e,t){return e&&goe(e,t,yoe)}var A4=_oe,voe=Py;function xoe(e,t){return function(r,i){if(r==null)return r;if(!voe(r))return e(r,i);for(var c=r.length,u=t?c:-1,p=Object(r);(t?u--:++u<c)&&i(p[u],u,p)!==!1;);return r}}var boe=xoe,woe=A4,Soe=boe,Eoe=Soe(woe),XA=Eoe,Toe=XA,Aoe=Py;function Moe(e,t){var r=-1,i=Aoe(e)?Array(e.length):[];return Toe(e,function(c,u,p){i[++r]=t(c,u,p)}),i}var M4=Moe;function Coe(e,t){var r=e.length;for(e.sort(t);r--;)e[r]=e[r].value;return e}var Poe=Coe,MD=Gd;function Ioe(e,t){if(e!==t){var r=e!==void 0,i=e===null,c=e===e,u=MD(e),p=t!==void 0,o=t===null,v=t===t,w=MD(t);if(!o&&!w&&!u&&e>t||u&&p&&v&&!o&&!w||i&&p&&v||!r&&v||!c)return 1;if(!i&&!u&&!w&&e<t||w&&r&&c&&!i&&!u||o&&r&&c||!p&&c||!v)return-1}return 0}var koe=Ioe,Ooe=koe;function Doe(e,t,r){for(var i=-1,c=e.criteria,u=t.criteria,p=c.length,o=r.length;++i<p;){var v=Ooe(c[i],u[i]);if(v){if(i>=o)return v;var w=r[i];return v*(w=="desc"?-1:1)}}return e.index-t.index}var Roe=Doe,d2=LA,Loe=zA,zoe=Wc,Boe=M4,$oe=Poe,Foe=LB,Noe=Roe,joe=Kd,Uoe=Eo;function Voe(e,t,r){t.length?t=d2(t,function(u){return Uoe(u)?function(p){return Loe(p,u.length===1?u[0]:u)}:u}):t=[joe];var i=-1;t=d2(t,Foe(zoe));var c=Boe(e,function(u,p,o){var v=d2(t,function(w){return w(u)});return{criteria:v,index:++i,value:u}});return $oe(c,function(u,p){return Noe(u,p,r)})}var Goe=Voe;function qoe(e,t,r){switch(r.length){case 0:return e.call(t);case 1:return e.call(t,r[0]);case 2:return e.call(t,r[0],r[1]);case 3:return e.call(t,r[0],r[1],r[2])}return e.apply(t,r)}var Woe=qoe,Hoe=Woe,CD=Math.max;function Zoe(e,t,r){return t=CD(t===void 0?e.length-1:t,0),function(){for(var i=arguments,c=-1,u=CD(i.length-t,0),p=Array(u);++c<u;)p[c]=i[t+c];c=-1;for(var o=Array(t+1);++c<t;)o[c]=i[c];return o[t]=r(p),Hoe(e,this,o)}}var Xoe=Zoe;function Koe(e){return function(){return e}}var Yoe=Koe,Joe=dh,Qoe=function(){try{var e=Joe(Object,"defineProperty");return e({},"",{}),e}catch{}}(),C4=Qoe,eae=Yoe,PD=C4,tae=Kd,rae=PD?function(e,t){return PD(e,"toString",{configurable:!0,enumerable:!1,value:eae(t),writable:!0})}:tae,nae=rae,iae=800,oae=16,aae=Date.now;function sae(e){var t=0,r=0;return function(){var i=aae(),c=oae-(i-r);if(r=i,c>0){if(++t>=iae)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var lae=sae,cae=nae,uae=lae,hae=uae(cae),fae=hae,dae=Kd,pae=Xoe,mae=fae;function gae(e,t){return mae(pae(e,t,dae),e+"")}var yae=gae,_ae=kA,vae=Py,xae=jA,bae=Vc;function wae(e,t,r){if(!bae(r))return!1;var i=typeof t;return(i=="number"?vae(r)&&xae(t,r.length):i=="string"&&t in r)?_ae(r[t],e):!1}var V1=wae,Sae=T4,Eae=Goe,Tae=yae,ID=V1,Aae=Tae(function(e,t){if(e==null)return[];var r=t.length;return r>1&&ID(e,t[0],t[1])?t=[]:r>2&&ID(t[0],t[1],t[2])&&(t=[t[0]]),Eae(e,Sae(t,1),[])}),Mae=Aae;const KA=vn(Mae);function Ed(e){return Ed=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ed(e)}function Cae(e,t){return Oae(e)||kae(e,t)||Iae(e,t)||Pae()}function Pae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Iae(e,t){if(e){if(typeof e=="string")return kD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return kD(e,t)}}function kD(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function kae(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,c,u,p,o=[],v=!0,w=!1;try{if(u=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;v=!1}else for(;!(v=(i=u.call(r)).done)&&(o.push(i.value),o.length!==t);v=!0);}catch(A){w=!0,c=A}finally{try{if(!v&&r.return!=null&&(p=r.return(),Object(p)!==p))return}finally{if(w)throw c}}return o}}function Oae(e){if(Array.isArray(e))return e}function OD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,i)}return r}function p2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?OD(Object(r),!0).forEach(function(i){YA(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):OD(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function Dae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function DD(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,P4(i.key),i)}}function Rae(e,t,r){return t&&DD(e.prototype,t),r&&DD(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Lae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&vE(e,t)}function vE(e,t){return vE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,c){return i.__proto__=c,i},vE(e,t)}function zae(e){var t=Fae();return function(){var i=px(e),c;if(t){var u=px(this).constructor;c=Reflect.construct(i,arguments,u)}else c=i.apply(this,arguments);return Bae(this,c)}}function Bae(e,t){if(t&&(Ed(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $ae(e)}function $ae(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Fae(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function px(e){return px=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},px(e)}function YA(e,t,r){return t=P4(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function P4(e){var t=Nae(e,"string");return Ed(t)==="symbol"?t:String(t)}function Nae(e,t){if(Ed(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(Ed(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jae(e){return Hi(e)&&wi(e[0])&&wi(e[1])?e.join(" ~ "):e}var JA=function(e){Lae(r,e);var t=zae(r);function r(){return Dae(this,r),t.apply(this,arguments)}return Rae(r,[{key:"renderContent",value:function(){var c=this.props,u=c.payload,p=c.separator,o=c.formatter,v=c.itemStyle,w=c.itemSorter;if(u&&u.length){var A={padding:0,margin:0},T=(w?KA(u,w):u).map(function(P,$){if(P.type==="none")return null;var L=p2({display:"block",paddingTop:4,paddingBottom:4,color:P.color||"#000"},v),k=P.formatter||o||jae,N=P.value,R=P.name;if(k&&N!=null&&R!=null){var j=k(N,R,P,$,u);if(Array.isArray(j)){var D=j,G=Cae(D,2);N=G[0],R=G[1]}else N=j}return Ze.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat($),style:L},wi(R)?Ze.createElement("span",{className:"recharts-tooltip-item-name"},R):null,wi(R)?Ze.createElement("span",{className:"recharts-tooltip-item-separator"},p):null,Ze.createElement("span",{className:"recharts-tooltip-item-value"},N),Ze.createElement("span",{className:"recharts-tooltip-item-unit"},P.unit||""))});return Ze.createElement("ul",{className:"recharts-tooltip-item-list",style:A},T)}return null}},{key:"render",value:function(){var c=this.props,u=c.wrapperClassName,p=c.contentStyle,o=c.labelClassName,v=c.labelStyle,w=c.label,A=c.labelFormatter,T=c.payload,P=p2({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},p),$=p2({margin:0},v),L=!ur(w),k=L?w:"",N=Mn("recharts-default-tooltip",u),R=Mn("recharts-tooltip-label",o);return L&&A&&T!==void 0&&T!==null&&(k=A(w,T)),Ze.createElement("div",{className:N,style:P},Ze.createElement("p",{className:R,style:$},Ze.isValidElement(k)?k:"".concat(k)),this.renderContent())}}]),r}(Ke.PureComponent);YA(JA,"displayName","DefaultTooltipContent");YA(JA,"defaultProps",{separator:" : ",contentStyle:{},itemStyle:{},labelStyle:{}});var Uae=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},bl={isSsr:Uae(),get:function(t){return bl[t]},set:function(t,r){if(typeof t=="string")bl[t]=r;else{var i=Object.keys(t);i&&i.length&&i.forEach(function(c){bl[c]=t[c]})}}};function Vg(e){return Vg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vg(e)}function RD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,i)}return r}function ll(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?RD(Object(r),!0).forEach(function(i){Ym(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):RD(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function Ym(e,t,r){return t=Vae(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Vae(e){var t=Gae(e,"string");return Vg(t)==="symbol"?t:String(t)}function Gae(e,t){if(Vg(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(Vg(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Uv(e,t){return Zae(e)||Hae(e,t)||Wae(e,t)||qae()}function qae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wae(e,t){if(e){if(typeof e=="string")return LD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return LD(e,t)}}function LD(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function Hae(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,c,u,p,o=[],v=!0,w=!1;try{if(u=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;v=!1}else for(;!(v=(i=u.call(r)).done)&&(o.push(i.value),o.length!==t);v=!0);}catch(A){w=!0,c=A}finally{try{if(!v&&r.return!=null&&(p=r.return(),Object(p)!==p))return}finally{if(w)throw c}}return o}}function Zae(e){if(Array.isArray(e))return e}var $m="recharts-tooltip-wrapper",zD=1;function Xae(e){return e.dataKey}function Kae(e,t){return e===!0?tx(t,Xae):gr(e)?tx(t,e):t}function Yae(e,t){return Ze.isValidElement(e)?Ze.cloneElement(e,t):gr(e)?Ze.createElement(e,t):Ze.createElement(JA,t)}var Jae={active:!1,allowEscapeViewBox:{x:!1,y:!1},reverseDirection:{x:!1,y:!1},offset:10,viewBox:{x:0,y:0,height:0,width:0},coordinate:{x:0,y:0},cursorStyle:{},separator:" : ",wrapperStyle:{},contentStyle:{},itemStyle:{},labelStyle:{},cursor:!0,trigger:"hover",isAnimationActive:!bl.isSsr,animationEasing:"ease",animationDuration:400,filterNull:!0,useTranslate3d:!1},Vf=function(t){var r,i=Ke.useState(-1),c=Uv(i,2),u=c[0],p=c[1],o=Ke.useState(-1),v=Uv(o,2),w=v[0],A=v[1],T=Ke.useState(!1),P=Uv(T,2),$=P[0],L=P[1],k=Ke.useState({x:0,y:0}),N=Uv(k,2),R=N[0],j=N[1],D=Ke.useRef(),G=t.allowEscapeViewBox,W=t.reverseDirection,Y=t.coordinate,ee=t.offset,de=t.position,xe=t.viewBox,Me=Ke.useCallback(function(ir){ir.key==="Escape"&&(L(!0),j(function(_t){return ll(ll({},_t),{},{x:Y==null?void 0:Y.x,y:Y==null?void 0:Y.y})}))},[Y==null?void 0:Y.x,Y==null?void 0:Y.y]);Ke.useEffect(function(){var ir=function(){if($?(document.removeEventListener("keydown",Me),((Y==null?void 0:Y.x)!==R.x||(Y==null?void 0:Y.y)!==R.y)&&L(!1)):document.addEventListener("keydown",Me),D.current&&D.current.getBoundingClientRect){var Mt=D.current.getBoundingClientRect();(Math.abs(Mt.width-u)>zD||Math.abs(Mt.height-w)>zD)&&(p(Mt.width),A(Mt.height))}else(u!==-1||w!==-1)&&(p(-1),A(-1))};return ir(),function(){document.removeEventListener("keydown",Me)}},[w,u,Y,$,R.x,R.y,Me]);var Ce=function(_t){var Mt=_t.key,or=_t.tooltipDimension,Qe=_t.viewBoxDimension;if(de&&Rt(de[Mt]))return de[Mt];var lr=Y[Mt]-or-ee,Ot=Y[Mt]+ee;if(G!=null&&G[Mt])return W[Mt]?lr:Ot;if(W!=null&&W[Mt]){var Sr=lr,Lr=xe[Mt];return Sr<Lr?Math.max(Ot,xe[Mt]):Math.max(lr,xe[Mt])}var mn=Ot+or,Kn=xe[Mt]+Qe;return mn>Kn?Math.max(lr,xe[Mt]):Math.max(Ot,xe[Mt])},qe=t.payload,Ue=t.payloadUniqBy,ut=t.filterNull,Be=t.active,bt=t.wrapperStyle,kt=t.useTranslate3d,He=t.isAnimationActive,nt=t.animationDuration,gt=t.animationEasing,xt=Kae(Ue,ut&&qe&&qe.length?qe.filter(function(ir){return!ur(ir.value)}):qe),zt=xt&&xt.length,Vt=t.content,Zt=ll({pointerEvents:"none",visibility:!$&&Be&&zt?"visible":"hidden",position:"absolute",top:0,left:0},bt),hr,Tr;de&&Rt(de.x)&&Rt(de.y)?(hr=de.x,Tr=de.y):u>0&&w>0&&Y?(hr=Ce({key:"x",tooltipDimension:u,viewBoxDimension:xe.width}),Tr=Ce({key:"y",tooltipDimension:w,viewBoxDimension:xe.height})):Zt.visibility="hidden",Zt=ll(ll({},uE({transform:kt?"translate3d(".concat(hr,"px, ").concat(Tr,"px, 0)"):"translate(".concat(hr,"px, ").concat(Tr,"px)")})),Zt),He&&Be&&(Zt=ll(ll({},uE({transition:"transform ".concat(nt,"ms ").concat(gt)})),Zt));var Rr=Mn($m,(r={},Ym(r,"".concat($m,"-right"),Rt(hr)&&Y&&Rt(Y.x)&&hr>=Y.x),Ym(r,"".concat($m,"-left"),Rt(hr)&&Y&&Rt(Y.x)&&hr<Y.x),Ym(r,"".concat($m,"-bottom"),Rt(Tr)&&Y&&Rt(Y.y)&&Tr>=Y.y),Ym(r,"".concat($m,"-top"),Rt(Tr)&&Y&&Rt(Y.y)&&Tr<Y.y),r));return Ze.createElement("div",{tabIndex:-1,role:"dialog",className:Rr,style:Zt,ref:D},Yae(Vt,ll(ll({},t),{},{payload:xt})))};Vf.displayName="Tooltip";Vf.defaultProps=Jae;var Qae=Gs,ese=function(){return Qae.Date.now()},tse=ese,rse=/\s/;function nse(e){for(var t=e.length;t--&&rse.test(e.charAt(t)););return t}var ise=nse,ose=ise,ase=/^\s+/;function sse(e){return e&&e.slice(0,ose(e)+1).replace(ase,"")}var lse=sse,cse=lse,BD=Vc,use=Gd,$D=0/0,hse=/^[-+]0x[0-9a-f]+$/i,fse=/^0b[01]+$/i,dse=/^0o[0-7]+$/i,pse=parseInt;function mse(e){if(typeof e=="number")return e;if(use(e))return $D;if(BD(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=BD(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=cse(e);var r=fse.test(e);return r||dse.test(e)?pse(e.slice(2),r?2:8):hse.test(e)?$D:+e}var I4=mse,gse=Vc,m2=tse,FD=I4,yse="Expected a function",_se=Math.max,vse=Math.min;function xse(e,t,r){var i,c,u,p,o,v,w=0,A=!1,T=!1,P=!0;if(typeof e!="function")throw new TypeError(yse);t=FD(t)||0,gse(r)&&(A=!!r.leading,T="maxWait"in r,u=T?_se(FD(r.maxWait)||0,t):u,P="trailing"in r?!!r.trailing:P);function $(Y){var ee=i,de=c;return i=c=void 0,w=Y,p=e.apply(de,ee),p}function L(Y){return w=Y,o=setTimeout(R,t),A?$(Y):p}function k(Y){var ee=Y-v,de=Y-w,xe=t-ee;return T?vse(xe,u-de):xe}function N(Y){var ee=Y-v,de=Y-w;return v===void 0||ee>=t||ee<0||T&&de>=u}function R(){var Y=m2();if(N(Y))return j(Y);o=setTimeout(R,k(Y))}function j(Y){return o=void 0,P&&i?$(Y):(i=c=void 0,p)}function D(){o!==void 0&&clearTimeout(o),w=0,i=v=c=o=void 0}function G(){return o===void 0?p:j(m2())}function W(){var Y=m2(),ee=N(Y);if(i=arguments,c=this,v=Y,ee){if(o===void 0)return L(v);if(T)return clearTimeout(o),o=setTimeout(R,t),$(v)}return o===void 0&&(o=setTimeout(R,t)),p}return W.cancel=D,W.flush=G,W}var bse=xse,wse=bse,Sse=Vc,Ese="Expected a function";function Tse(e,t,r){var i=!0,c=!0;if(typeof e!="function")throw new TypeError(Ese);return Sse(r)&&(i="leading"in r?!!r.leading:i,c="trailing"in r?!!r.trailing:c),wse(e,t,{leading:i,maxWait:t,trailing:c})}var Ase=Tse;const Mse=vn(Ase);var QA=function(t,r){for(var i=arguments.length,c=new Array(i>2?i-2:0),u=2;u<i;u++)c[u-2]=arguments[u]},k4=function(t){return null};k4.displayName="Cell";var xE={exports:{}},g2="(".charCodeAt(0),y2=")".charCodeAt(0),Vv="'".charCodeAt(0),_2='"'.charCodeAt(0),v2="\\".charCodeAt(0),Gv="/".charCodeAt(0),x2=",".charCodeAt(0),b2=":".charCodeAt(0),ND="*".charCodeAt(0),Cse=function(e){for(var t=[],r=e,i,c,u,p,o,v,w,A=0,T=r.charCodeAt(A),P=r.length,$=[{nodes:t}],L=0,k,N="",R="",j="";A<P;)if(T<=32){i=A;do i+=1,T=r.charCodeAt(i);while(T<=32);p=r.slice(A,i),u=t[t.length-1],T===y2&&L?j=p:u&&u.type==="div"?u.after=p:T===x2||T===b2||T===Gv&&r.charCodeAt(i+1)!==ND?R=p:t.push({type:"space",sourceIndex:A,value:p}),A=i}else if(T===Vv||T===_2){i=A,c=T===Vv?"'":'"',p={type:"string",sourceIndex:A,quote:c};do if(o=!1,i=r.indexOf(c,i+1),~i)for(v=i;r.charCodeAt(v-1)===v2;)v-=1,o=!o;else r+=c,i=r.length-1,p.unclosed=!0;while(o);p.value=r.slice(A+1,i),t.push(p),A=i+1,T=r.charCodeAt(A)}else if(T===Gv&&r.charCodeAt(A+1)===ND)p={type:"comment",sourceIndex:A},i=r.indexOf("*/",A),i===-1&&(p.unclosed=!0,i=r.length),p.value=r.slice(A+2,i),t.push(p),A=i+2,T=r.charCodeAt(A);else if(T===Gv||T===x2||T===b2)p=r[A],t.push({type:"div",sourceIndex:A-R.length,value:p,before:R,after:""}),R="",A+=1,T=r.charCodeAt(A);else if(g2===T){i=A;do i+=1,T=r.charCodeAt(i);while(T<=32);if(p={type:"function",sourceIndex:A-N.length,value:N,before:r.slice(A+1,i)},A=i,N==="url"&&T!==Vv&&T!==_2){i-=1;do if(o=!1,i=r.indexOf(")",i+1),~i)for(v=i;r.charCodeAt(v-1)===v2;)v-=1,o=!o;else r+=")",i=r.length-1,p.unclosed=!0;while(o);w=i;do w-=1,T=r.charCodeAt(w);while(T<=32);A!==w+1?p.nodes=[{type:"word",sourceIndex:A,value:r.slice(A,w+1)}]:p.nodes=[],p.unclosed&&w+1!==i?(p.after="",p.nodes.push({type:"space",sourceIndex:w+1,value:r.slice(w+1,i)})):p.after=r.slice(w+1,i),A=i+1,T=r.charCodeAt(A),t.push(p)}else L+=1,p.after="",t.push(p),$.push(p),t=p.nodes=[],k=p;N=""}else if(y2===T&&L)A+=1,T=r.charCodeAt(A),k.after=j,j="",L-=1,$.pop(),k=$[L],t=k.nodes;else{i=A;do T===v2&&(i+=1),i+=1,T=r.charCodeAt(i);while(i<P&&!(T<=32||T===Vv||T===_2||T===x2||T===b2||T===Gv||T===g2||T===y2&&L));p=r.slice(A,i),g2===T?N=p:t.push({type:"word",sourceIndex:A,value:p}),A=i}for(A=$.length-1;A;A-=1)$[A].unclosed=!0;return $[0].nodes},Pse=function e(t,r,i){var c,u,p,o;for(c=0,u=t.length;c<u;c+=1)p=t[c],i||(o=r(p,c,t)),o!==!1&&p.type==="function"&&Array.isArray(p.nodes)&&e(p.nodes,r,i),i&&r(p,c,t)};function jD(e,t){var r=e.type,i=e.value,c,u;return t&&(u=t(e))!==void 0?u:r==="word"||r==="space"?i:r==="string"?(c=e.quote||"",c+i+(e.unclosed?"":c)):r==="comment"?"/*"+i+(e.unclosed?"":"*/"):r==="div"?(e.before||"")+i+(e.after||""):Array.isArray(e.nodes)?(c=O4(e.nodes),r!=="function"?c:i+"("+(e.before||"")+c+(e.after||"")+(e.unclosed?"":")")):i}function O4(e,t){var r,i;if(Array.isArray(e)){for(r="",i=e.length-1;~i;i-=1)r=jD(e[i],t)+r;return r}return jD(e,t)}var Ise=O4,w2,UD;function kse(){if(UD)return w2;UD=1;var e="-".charCodeAt(0),t="+".charCodeAt(0),r=".".charCodeAt(0),i="e".charCodeAt(0),c="E".charCodeAt(0);return w2=function(u){for(var p=0,o=u.length,v=!1,w=-1,A=!1,T;p<o;){if(T=u.charCodeAt(p),T>=48&&T<=57)A=!0;else if(T===i||T===c){if(w>-1)break;w=p}else if(T===r){if(v)break;v=!0}else if(T===t||T===e){if(p!==0)break}else break;p+=1}return w+1===p&&p--,A?{number:u.slice(0,p),unit:u.slice(p)}:!1},w2}var Ose=Cse,D4=Pse,R4=Ise;function Fc(e){return this instanceof Fc?(this.nodes=Ose(e),this):new Fc(e)}Fc.prototype.toString=function(){return Array.isArray(this.nodes)?R4(this.nodes):""};Fc.prototype.walk=function(e,t){return D4(this.nodes,e,t),this};Fc.unit=kse();Fc.walk=D4;Fc.stringify=R4;var Dse=Fc;function Rse(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var L4={};(function(e){var t=function(){function r(P,$){Object.defineProperty(this,"name",{enumerable:!1,writable:!1,value:"JisonParserError"}),P==null&&(P="???"),Object.defineProperty(this,"message",{enumerable:!1,writable:!0,value:P}),this.hash=$;var L;if($&&$.exception instanceof Error){var k=$.exception;this.message=k.message||P,L=k.stack}L||(Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,this.constructor):L=new Error(P).stack),L&&Object.defineProperty(this,"stack",{enumerable:!1,writable:!1,value:L})}typeof Object.setPrototypeOf=="function"?Object.setPrototypeOf(r.prototype,Error.prototype):r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r.prototype.name="JisonParserError";function i(P){for(var $=[],L=P.pop,k=P.rule,N=0,R=L.length;N<R;N++)$.push([L[N],k[N]]);return $}function c(P){for(var $={},L=P.idx,k=P.goto,N=0,R=L.length;N<R;N++){var j=L[N];$[j]=k[N]}return $}function u(P){for(var $=[],L=P.len,k=P.symbol,N=P.type,R=P.state,j=P.mode,D=P.goto,G=0,W=L.length;G<W;G++){for(var Y=L[G],ee={},de=0;de<Y;de++){var xe=k.shift();switch(N.shift()){case 2:ee[xe]=[j.shift(),D.shift()];break;case 0:ee[xe]=R.shift();break;default:ee[xe]=[3]}}$.push(ee)}return $}function p(P,$,L){L=L||0;for(var k=0;k<$;k++)this.push(P),P+=L}function o(P,$){for(P=this.length-P,$+=P;P<$;P++)this.push(this[P])}function v(P){for(var $=[],L=0,k=P.length;L<k;L++){var N=P[L];typeof N=="function"?(L++,N.apply($,P[L])):$.push(N)}return $}var w={trace:function(){},JisonParserError:r,yy:{},options:{type:"lalr",hasPartialLrUpgradeOnConflict:!0,errorRecoveryTokenDiscardCount:3},symbols_:{$accept:0,$end:1,ADD:3,ANGLE:16,CHS:22,COMMA:14,CSS_CPROP:13,CSS_VAR:12,DIV:6,EMS:20,EOF:1,EXS:21,FREQ:18,LENGTH:15,LPAREN:7,MUL:5,NESTED_CALC:9,NUMBER:11,PERCENTAGE:28,PREFIX:10,REMS:23,RES:19,RPAREN:8,SUB:4,TIME:17,VHS:24,VMAXS:27,VMINS:26,VWS:25,css_value:33,css_variable:32,error:2,expression:29,math_expression:30,value:31},terminals_:{1:"EOF",2:"error",3:"ADD",4:"SUB",5:"MUL",6:"DIV",7:"LPAREN",8:"RPAREN",9:"NESTED_CALC",10:"PREFIX",11:"NUMBER",12:"CSS_VAR",13:"CSS_CPROP",14:"COMMA",15:"LENGTH",16:"ANGLE",17:"TIME",18:"FREQ",19:"RES",20:"EMS",21:"EXS",22:"CHS",23:"REMS",24:"VHS",25:"VWS",26:"VMINS",27:"VMAXS",28:"PERCENTAGE"},TERROR:2,EOF:1,originalQuoteName:null,originalParseError:null,cleanupAfterParse:null,constructParseErrorInfo:null,yyMergeLocationInfo:null,__reentrant_call_depth:0,__error_infos:[],__error_recovery_infos:[],quoteName:function($){return'"'+$+'"'},getSymbolName:function($){if(this.terminals_[$])return this.terminals_[$];var L=this.symbols_;for(var k in L)if(L[k]===$)return k;return null},describeSymbol:function($){if($!==this.EOF&&this.terminal_descriptions_&&this.terminal_descriptions_[$])return this.terminal_descriptions_[$];if($===this.EOF)return"end of input";var L=this.getSymbolName($);return L?this.quoteName(L):null},collect_expected_token_set:function($,L){var k=this.TERROR,N=[],R={};if(!L&&this.state_descriptions_&&this.state_descriptions_[$])return[this.state_descriptions_[$]];for(var j in this.table[$])if(j=+j,j!==k){var D=L?j:this.describeSymbol(j);D&&!R[D]&&(N.push(D),R[D]=!0)}return N},productions_:i({pop:v([29,p,[30,10],31,31,32,32,p,[33,15]]),rule:v([2,p,[3,5],4,7,p,[1,4],2,4,6,p,[1,14],2])}),performAction:function($,L,k){var N=this.yy;switch(N.parser,N.lexer,$){case 0:this.$=k[L-1];break;case 1:return this.$=k[L-1],k[L-1];case 2:case 3:case 4:case 5:this.$={type:"MathExpression",operator:k[L-1],left:k[L-2],right:k[L]};break;case 6:this.$=k[L-1];break;case 7:this.$={type:"Calc",value:k[L-1]};break;case 8:this.$={type:"Calc",value:k[L-1],prefix:k[L-5]};break;case 9:case 10:case 11:this.$=k[L];break;case 12:this.$={type:"Value",value:parseFloat(k[L])};break;case 13:this.$={type:"Value",value:parseFloat(k[L])*-1};break;case 14:this.$={type:"CssVariable",value:k[L-1]};break;case 15:this.$={type:"CssVariable",value:k[L-3],fallback:k[L-1]};break;case 16:this.$={type:"LengthValue",value:parseFloat(k[L]),unit:/[a-z]+/.exec(k[L])[0]};break;case 17:this.$={type:"AngleValue",value:parseFloat(k[L]),unit:/[a-z]+/.exec(k[L])[0]};break;case 18:this.$={type:"TimeValue",value:parseFloat(k[L]),unit:/[a-z]+/.exec(k[L])[0]};break;case 19:this.$={type:"FrequencyValue",value:parseFloat(k[L]),unit:/[a-z]+/.exec(k[L])[0]};break;case 20:this.$={type:"ResolutionValue",value:parseFloat(k[L]),unit:/[a-z]+/.exec(k[L])[0]};break;case 21:this.$={type:"EmValue",value:parseFloat(k[L]),unit:"em"};break;case 22:this.$={type:"ExValue",value:parseFloat(k[L]),unit:"ex"};break;case 23:this.$={type:"ChValue",value:parseFloat(k[L]),unit:"ch"};break;case 24:this.$={type:"RemValue",value:parseFloat(k[L]),unit:"rem"};break;case 25:this.$={type:"VhValue",value:parseFloat(k[L]),unit:"vh"};break;case 26:this.$={type:"VwValue",value:parseFloat(k[L]),unit:"vw"};break;case 27:this.$={type:"VminValue",value:parseFloat(k[L]),unit:"vmin"};break;case 28:this.$={type:"VmaxValue",value:parseFloat(k[L]),unit:"vmax"};break;case 29:this.$={type:"PercentageValue",value:parseFloat(k[L]),unit:"%"};break;case 30:var R=k[L];R.value*=-1,this.$=R;break}},table:u({len:v([24,1,5,23,1,18,p,[0,3],1,p,[0,16],p,[23,4],o,[28,3],0,0,16,1,6,6,p,[0,3],5,1,2,o,[37,3],o,[20,3],5,0,0]),symbol:v([4,7,9,11,12,p,[15,19,1],1,1,p,[3,4,1],o,[30,19],o,[29,4],7,4,10,11,o,[22,14],o,[19,3],o,[43,22],o,[23,69],o,[139,4],8,o,[51,24],4,o,[138,15],13,o,[186,5],8,o,[6,6],o,[5,5],9,8,14,o,[159,47],o,[60,10]]),type:v([p,[2,19],p,[0,5],1,p,[2,24],p,[0,4],o,[22,19],o,[43,42],o,[23,70],o,[28,25],o,[45,25],o,[113,54]]),state:v([1,2,8,6,7,30,o,[4,3],33,37,o,[5,3],38,o,[4,3],39,o,[4,3],40,o,[4,3],42,o,[21,4],50,o,[5,3],51,o,[4,3]]),mode:v([p,[1,179],p,[2,3],o,[5,5],o,[6,4],p,[1,57]]),goto:v([5,3,4,24,p,[9,15,1],p,[25,5,1],o,[24,19],31,35,32,34,o,[18,14],36,o,[38,19],o,[19,57],o,[118,4],41,o,[24,19],43,35,o,[16,14],44,p,[2,3],28,29,2,p,[3,3],28,29,3,o,[53,4],p,[45,5,1],o,[100,42],52,o,[5,4],53])}),defaultActions:c({idx:v([6,7,8,p,[10,16,1],33,34,39,40,41,45,47,52,53]),goto:v([9,10,11,p,[16,14,1],12,1,30,13,p,[4,4,1],14,15,8])}),parseError:function($,L,k){if(L.recoverable)typeof this.trace=="function"&&this.trace($),L.destroy();else throw typeof this.trace=="function"&&this.trace($),k||(k=this.JisonParserError),new k($,L)},parse:function($){var L=this,k=new Array(128),N=new Array(128),R=new Array(128),j=this.table,D=0,G=0;this.TERROR;var W=this.EOF;this.options.errorRecoveryTokenDiscardCount|0;var Y=[0,54],ee;this.__lexer__?ee=this.__lexer__:ee=this.__lexer__=Object.create(this.lexer);var de={parseError:void 0,quoteName:void 0,lexer:void 0,parser:void 0,pre_parse:void 0,post_parse:void 0,pre_lex:void 0,post_lex:void 0};typeof assert!="function"||assert,this.yyGetSharedState=function(){return de};function xe(ir,_t){for(var Mt in _t)typeof ir[Mt]>"u"&&Object.prototype.hasOwnProperty.call(_t,Mt)&&(ir[Mt]=_t[Mt])}xe(de,this.yy),de.lexer=ee,de.parser=this,typeof de.parseError=="function"?this.parseError=function(_t,Mt,or){return or||(or=this.JisonParserError),de.parseError.call(this,_t,Mt,or)}:this.parseError=this.originalParseError,typeof de.quoteName=="function"?this.quoteName=function(_t){return de.quoteName.call(this,_t)}:this.quoteName=this.originalQuoteName,this.cleanupAfterParse=function(_t,Mt,or){var Qe;if(Mt){var lr;(de.post_parse||this.post_parse)&&(lr=this.constructParseErrorInfo(null,null,null,!1)),de.post_parse&&(Qe=de.post_parse.call(this,de,_t,lr),typeof Qe<"u"&&(_t=Qe)),this.post_parse&&(Qe=this.post_parse.call(this,de,_t,lr),typeof Qe<"u"&&(_t=Qe)),lr&&lr.destroy&&lr.destroy()}if(this.__reentrant_call_depth>1)return _t;if(ee.cleanupAfterLex&&ee.cleanupAfterLex(or),de&&(de.lexer=void 0,de.parser=void 0,ee.yy===de&&(ee.yy=void 0)),de=void 0,this.parseError=this.originalParseError,this.quoteName=this.originalQuoteName,k.length=0,N.length=0,R.length=0,D=0,!or){for(var Ot=this.__error_infos.length-1;Ot>=0;Ot--){var Sr=this.__error_infos[Ot];Sr&&typeof Sr.destroy=="function"&&Sr.destroy()}this.__error_infos.length=0}return _t},this.constructParseErrorInfo=function(_t,Mt,or,Qe){var lr={errStr:_t,exception:Mt,text:ee.match,value:ee.yytext,token:this.describeSymbol(G)||G,token_id:G,line:ee.yylineno,expected:or,recoverable:Qe,state:Ue,action:ut,new_state:xt,symbol_stack:k,state_stack:N,value_stack:R,stack_pointer:D,yy:de,lexer:ee,parser:this,destroy:function(){var Sr=!!this.recoverable;for(var Lr in this)this.hasOwnProperty(Lr)&&typeof Lr=="object"&&(this[Lr]=void 0);this.recoverable=Sr}};return this.__error_infos.push(lr),lr};function Me(){var ir=ee.lex();return typeof ir!="number"&&(ir=L.symbols_[ir]||ir),ir||W}function Ce(){var ir=ee.fastLex();return typeof ir!="number"&&(ir=L.symbols_[ir]||ir),ir||W}var qe=Me,Ue,ut,Be,bt,kt={$:!0,_$:void 0,yy:de},He,nt,gt,xt,zt=!1;try{if(this.__reentrant_call_depth++,ee.setInput($,de),typeof ee.canIUse=="function"){var Vt=ee.canIUse();Vt.fastLex&&typeof Ce=="function"&&(qe=Ce)}for(R[D]=null,N[D]=0,k[D]=0,++D,this.pre_parse&&this.pre_parse.call(this,de),de.pre_parse&&de.pre_parse.call(this,de),xt=N[D-1];;){if(Ue=xt,this.defaultActions[Ue])ut=2,xt=this.defaultActions[Ue];else if(G||(G=qe()),bt=j[Ue]&&j[Ue][G]||Y,xt=bt[1],ut=bt[0],!ut){var Zt,hr=this.describeSymbol(G)||G,Tr=this.collect_expected_token_set(Ue);typeof ee.yylineno=="number"?Zt="Parse error on line "+(ee.yylineno+1)+": ":Zt="Parse error: ",typeof ee.showPosition=="function"&&(Zt+=`
`+ee.showPosition(79-10,10)+`
`),Tr.length?Zt+="Expecting "+Tr.join(", ")+", got unexpected "+hr:Zt+="Unexpected "+hr,He=this.constructParseErrorInfo(Zt,null,Tr,!1),Be=this.parseError(He.errStr,He,this.JisonParserError),typeof Be<"u"&&(zt=Be);break}switch(ut){default:if(ut instanceof Array){He=this.constructParseErrorInfo("Parse Error: multiple actions possible at state: "+Ue+", token: "+G,null,null,!1),Be=this.parseError(He.errStr,He,this.JisonParserError),typeof Be<"u"&&(zt=Be);break}He=this.constructParseErrorInfo("Parsing halted. No viable error recovery approach available due to internal system failure.",null,null,!1),Be=this.parseError(He.errStr,He,this.JisonParserError),typeof Be<"u"&&(zt=Be);break;case 1:k[D]=G,R[D]=ee.yytext,N[D]=xt,++D,G=0;continue;case 2:if(gt=this.productions_[xt-1],nt=gt[1],Be=this.performAction.call(kt,xt,D-1,R),typeof Be<"u"){zt=Be;break}D-=nt;var Rr=gt[0];k[D]=Rr,R[D]=kt.$,xt=j[N[D-1]][Rr],N[D]=xt,++D;continue;case 3:D!==-2&&(zt=!0,D--,typeof R[D]<"u"&&(zt=R[D]));break}break}}catch(ir){if(ir instanceof this.JisonParserError)throw ir;if(ee&&typeof ee.JisonLexerError=="function"&&ir instanceof ee.JisonLexerError)throw ir;He=this.constructParseErrorInfo("Parsing aborted due to exception.",ir,null,!1),zt=!1,Be=this.parseError(He.errStr,He,this.JisonParserError),typeof Be<"u"&&(zt=Be)}finally{zt=this.cleanupAfterParse(zt,!0,!0),this.__reentrant_call_depth--}return zt}};w.originalParseError=w.parseError,w.originalQuoteName=w.quoteName;var A=function(){function P(L,k){Object.defineProperty(this,"name",{enumerable:!1,writable:!1,value:"JisonLexerError"}),L==null&&(L="???"),Object.defineProperty(this,"message",{enumerable:!1,writable:!0,value:L}),this.hash=k;var N;if(k&&k.exception instanceof Error){var R=k.exception;this.message=R.message||L,N=R.stack}N||(Error.hasOwnProperty("captureStackTrace")?Error.captureStackTrace(this,this.constructor):N=new Error(L).stack),N&&Object.defineProperty(this,"stack",{enumerable:!1,writable:!1,value:N})}typeof Object.setPrototypeOf=="function"?Object.setPrototypeOf(P.prototype,Error.prototype):P.prototype=Object.create(Error.prototype),P.prototype.constructor=P,P.prototype.name="JisonLexerError";var $={EOF:1,ERROR:2,__currentRuleSet__:null,__error_infos:[],__decompressed:!1,done:!1,_backtrack:!1,_input:"",_more:!1,_signaled_error_token:!1,conditionStack:[],match:"",matched:"",matches:!1,yytext:"",offset:0,yyleng:0,yylineno:0,yylloc:null,constructLexErrorInfo:function(k,N,R){if(k=""+k,R==null&&(R=!(k.indexOf(`
`)>0&&k.indexOf("^")>0)),this.yylloc&&R){if(typeof this.prettyPrintRange=="function")this.prettyPrintRange(this.yylloc),/\n\s*$/.test(k)||(k+=`
`),k+=`
  Erroneous area:
`+this.prettyPrintRange(this.yylloc);else if(typeof this.showPosition=="function"){var j=this.showPosition();j&&(k.length&&k[k.length-1]!==`
`&&j[0]!==`
`?k+=`
`+j:k+=j)}}var D={errStr:k,recoverable:!!N,text:this.match,token:null,line:this.yylineno,loc:this.yylloc,yy:this.yy,lexer:this,destroy:function(){var W=!!this.recoverable;for(var Y in this)this.hasOwnProperty(Y)&&typeof Y=="object"&&(this[Y]=void 0);this.recoverable=W}};return this.__error_infos.push(D),D},parseError:function(k,N,R){if(R||(R=this.JisonLexerError),this.yy){if(this.yy.parser&&typeof this.yy.parser.parseError=="function")return this.yy.parser.parseError.call(this,k,N,R)||this.ERROR;if(typeof this.yy.parseError=="function")return this.yy.parseError.call(this,k,N,R)||this.ERROR}throw new R(k,N)},yyerror:function(k){var N="";this.yylloc&&(N=" on line "+(this.yylineno+1));var R=this.constructLexErrorInfo("Lexical error"+N+": "+k,this.options.lexerErrorsAreRecoverable),j=Array.prototype.slice.call(arguments,1);return j.length&&(R.extra_error_attributes=j),this.parseError(R.errStr,R,this.JisonLexerError)||this.ERROR},cleanupAfterLex:function(k){if(this.setInput("",{}),!k){for(var N=this.__error_infos.length-1;N>=0;N--){var R=this.__error_infos[N];R&&typeof R.destroy=="function"&&R.destroy()}this.__error_infos.length=0}return this},clear:function(){this.yytext="",this.yyleng=0,this.match="",this.matches=!1,this._more=!1,this._backtrack=!1;var k=this.yylloc?this.yylloc.last_column:0;this.yylloc={first_line:this.yylineno+1,first_column:k,last_line:this.yylineno+1,last_column:k,range:[this.offset,this.offset]}},setInput:function(k,N){if(this.yy=N||this.yy||{},!this.__decompressed){for(var R=this.rules,j=0,D=R.length;j<D;j++){var G=R[j];typeof G=="number"&&(R[j]=R[G])}var W=this.conditions;for(var Y in W){for(var ee=W[Y],de=ee.rules,D=de.length,xe=new Array(D+1),Me=new Array(D+1),j=0;j<D;j++){var Ce=de[j],G=R[Ce];xe[j+1]=G,Me[j+1]=Ce}ee.rules=Me,ee.__rule_regexes=xe,ee.__rule_count=D}this.__decompressed=!0}return this._input=k||"",this.clear(),this._signaled_error_token=!1,this.done=!1,this.yylineno=0,this.matched="",this.conditionStack=["INITIAL"],this.__currentRuleSet__=null,this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0,range:[0,0]},this.offset=0,this},editRemainingInput:function(k,N){var R=k.call(this,this._input,N);return typeof R!="string"?R&&(this._input=""+R):this._input=R,this},input:function(){if(!this._input)return null;var k=this._input[0];this.yytext+=k,this.yyleng++,this.offset++,this.match+=k,this.matched+=k;var N=1,R=!1;if(k===`
`)R=!0;else if(k==="\r"){R=!0;var j=this._input[1];j===`
`&&(N++,k+=j,this.yytext+=j,this.yyleng++,this.offset++,this.match+=j,this.matched+=j,this.yylloc.range[1]++)}return R?(this.yylineno++,this.yylloc.last_line++,this.yylloc.last_column=0):this.yylloc.last_column++,this.yylloc.range[1]++,this._input=this._input.slice(N),k},unput:function(k){var N=k.length,R=k.split(/(?:\r\n?|\n)/g);if(this._input=k+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-N),this.yyleng=this.yytext.length,this.offset-=N,this.match=this.match.substr(0,this.match.length-N),this.matched=this.matched.substr(0,this.matched.length-N),R.length>1){this.yylineno-=R.length-1,this.yylloc.last_line=this.yylineno+1;var j=this.match,D=j.split(/(?:\r\n?|\n)/g);D.length===1&&(j=this.matched,D=j.split(/(?:\r\n?|\n)/g)),this.yylloc.last_column=D[D.length-1].length}else this.yylloc.last_column-=N;return this.yylloc.range[1]=this.yylloc.range[0]+this.yyleng,this.done=!1,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else{var k="";this.yylloc&&(k=" on line "+(this.yylineno+1));var N=this.constructLexErrorInfo("Lexical error"+k+": You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).",!1);this._signaled_error_token=this.parseError(N.errStr,N,this.JisonLexerError)||this.ERROR}return this},less:function(k){return this.unput(this.match.slice(k))},pastInput:function(k,N){var R=this.matched.substring(0,this.matched.length-this.match.length);k<0?k=R.length:k||(k=20),N<0?N=R.length:N||(N=1),R=R.substr(-k*2-2);var j=R.replace(/\r\n|\r/g,`
`).split(`
`);return j=j.slice(-N),R=j.join(`
`),R.length>k&&(R="..."+R.substr(-k)),R},upcomingInput:function(k,N){var R=this.match;k<0?k=R.length+this._input.length:k||(k=20),N<0?N=k:N||(N=1),R.length<k*2+2&&(R+=this._input.substring(0,k*2+2));var j=R.replace(/\r\n|\r/g,`
`).split(`
`);return j=j.slice(0,N),R=j.join(`
`),R.length>k&&(R=R.substring(0,k)+"..."),R},showPosition:function(k,N){var R=this.pastInput(k).replace(/\s/g," "),j=new Array(R.length+1).join("-");return R+this.upcomingInput(N).replace(/\s/g," ")+`
`+j+"^"},deriveLocationInfo:function(k,N,R,j){var D={first_line:1,first_column:0,last_line:1,last_column:0,range:[0,0]};return k&&(D.first_line=k.first_line|0,D.last_line=k.last_line|0,D.first_column=k.first_column|0,D.last_column=k.last_column|0,k.range&&(D.range[0]=k.range[0]|0,D.range[1]=k.range[1]|0)),(D.first_line<=0||D.last_line<D.first_line)&&(D.first_line<=0&&N&&(D.first_line=N.last_line|0,D.first_column=N.last_column|0,N.range&&(D.range[0]=k.range[1]|0)),(D.last_line<=0||D.last_line<D.first_line)&&R&&(D.last_line=R.first_line|0,D.last_column=R.first_column|0,R.range&&(D.range[1]=k.range[0]|0)),D.first_line<=0&&j&&(D.last_line<=0||j.last_line<=D.last_line)&&(D.first_line=j.first_line|0,D.first_column=j.first_column|0,j.range&&(D.range[0]=j.range[0]|0)),D.last_line<=0&&j&&(D.first_line<=0||j.first_line>=D.first_line)&&(D.last_line=j.last_line|0,D.last_column=j.last_column|0,j.range&&(D.range[1]=j.range[1]|0))),D.last_line<=0&&(D.first_line<=0?(D.first_line=this.yylloc.first_line,D.last_line=this.yylloc.last_line,D.first_column=this.yylloc.first_column,D.last_column=this.yylloc.last_column,D.range[0]=this.yylloc.range[0],D.range[1]=this.yylloc.range[1]):(D.last_line=this.yylloc.last_line,D.last_column=this.yylloc.last_column,D.range[1]=this.yylloc.range[1])),D.first_line<=0&&(D.first_line=D.last_line,D.first_column=0,D.range[1]=D.range[0]),D.first_column<0&&(D.first_column=0),D.last_column<0&&(D.last_column=D.first_column>0?D.first_column:80),D},prettyPrintRange:function(k,N,R){k=this.deriveLocationInfo(k,N,R);const j=3,D=1,G=2;var W=this.matched+this._input,Y=W.split(`
`),ee=Math.max(1,N?N.first_line:k.first_line-j),de=Math.max(1,R?R.last_line:k.last_line+D),xe=1+Math.log10(de|1)|0,Me=new Array(xe).join(" "),Ce=[],qe=Y.slice(ee-1,de+1).map(function(kt,He){var nt=He+ee,gt=(Me+nt).substr(-xe),xt=gt+": "+kt,zt=new Array(xe+1).join("^"),Vt=2+1,Zt=0;if(nt===k.first_line?(Vt+=k.first_column,Zt=Math.max(2,(nt===k.last_line?k.last_column:kt.length)-k.first_column+1)):nt===k.last_line?Zt=Math.max(2,k.last_column+1):nt>k.first_line&&nt<k.last_line&&(Zt=Math.max(2,kt.length+1)),Zt){var hr=new Array(Vt).join("."),Tr=new Array(Zt).join("^");xt+=`
`+zt+hr+Tr,kt.trim().length>0&&Ce.push(He)}return xt=xt.replace(/\t/g," "),xt});if(Ce.length>2*G){var Ue=Ce[G-1]+1,ut=Ce[Ce.length-G]-1,Be=new Array(xe+1).join(" ")+"  (...continued...)";Be+=`
`+new Array(xe+1).join("-")+"  (---------------)",qe.splice(Ue,ut-Ue+1,Be)}return qe.join(`
`)},describeYYLLOC:function(k,N){var R=k.first_line,j=k.last_line,D=k.first_column,G=k.last_column,W=j-R,Y=G-D,ee;if(W===0?(ee="line "+R+", ",Y<=1?ee+="column "+D:ee+="columns "+D+" .. "+G):ee="lines "+R+"(column "+D+") .. "+j+"(column "+G+")",k.range&&N){var de=k.range[0],xe=k.range[1]-1;xe<=de?ee+=" {String Offset: "+de+"}":ee+=" {String Offset range: "+de+" .. "+xe+"}"}return ee},test_match:function(k,N){var R,j,D,G,W;if(this.options.backtrack_lexer&&(D={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.yylloc.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column,range:this.yylloc.range.slice(0)},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done}),G=k[0],W=G.length,j=G.split(/(?:\r\n?|\n)/g),j.length>1?(this.yylineno+=j.length-1,this.yylloc.last_line=this.yylineno+1,this.yylloc.last_column=j[j.length-1].length):this.yylloc.last_column+=W,this.yytext+=G,this.match+=G,this.matched+=G,this.matches=k,this.yyleng=this.yytext.length,this.yylloc.range[1]+=W,this.offset+=W,this._more=!1,this._backtrack=!1,this._input=this._input.slice(W),R=this.performAction.call(this,this.yy,N,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),R)return R;if(this._backtrack){for(var Y in D)this[Y]=D[Y];return this.__currentRuleSet__=null,!1}else if(this._signaled_error_token)return R=this._signaled_error_token,this._signaled_error_token=!1,R;return!1},next:function(){if(this.done)return this.clear(),this.EOF;this._input||(this.done=!0);var k,N,R,j;this._more||this.clear();var D=this.__currentRuleSet__;if(!D&&(D=this.__currentRuleSet__=this._currentRules(),!D||!D.rules)){var G="";this.options.trackPosition&&(G=" on line "+(this.yylineno+1));var W=this.constructLexErrorInfo("Internal lexer engine error"+G+': The lex grammar programmer pushed a non-existing condition name "'+this.topState()+'"; this is a fatal error and should be reported to the application programmer team!',!1);return this.parseError(W.errStr,W,this.JisonLexerError)||this.ERROR}for(var Y=D.rules,ee=D.__rule_regexes,de=D.__rule_count,xe=1;xe<=de;xe++)if(R=this._input.match(ee[xe]),R&&(!N||R[0].length>N[0].length)){if(N=R,j=xe,this.options.backtrack_lexer){if(k=this.test_match(R,Y[xe]),k!==!1)return k;if(this._backtrack){N=void 0;continue}else return!1}else if(!this.options.flex)break}if(N)return k=this.test_match(N,Y[j]),k!==!1?k:!1;if(this._input){var G="";this.options.trackPosition&&(G=" on line "+(this.yylineno+1));var W=this.constructLexErrorInfo("Lexical error"+G+": Unrecognized text.",this.options.lexerErrorsAreRecoverable),Me=this._input,Ce=this.topState(),qe=this.conditionStack.length;return k=this.parseError(W.errStr,W,this.JisonLexerError)||this.ERROR,k===this.ERROR&&!this.matches&&Me===this._input&&Ce===this.topState()&&qe===this.conditionStack.length&&this.input(),k}else return this.done=!0,this.clear(),this.EOF},lex:function(){var k;for(typeof this.pre_lex=="function"&&(k=this.pre_lex.call(this,0)),typeof this.options.pre_lex=="function"&&(k=this.options.pre_lex.call(this,k)||k),this.yy&&typeof this.yy.pre_lex=="function"&&(k=this.yy.pre_lex.call(this,k)||k);!k;)k=this.next();return this.yy&&typeof this.yy.post_lex=="function"&&(k=this.yy.post_lex.call(this,k)||k),typeof this.options.post_lex=="function"&&(k=this.options.post_lex.call(this,k)||k),typeof this.post_lex=="function"&&(k=this.post_lex.call(this,k)||k),k},fastLex:function(){for(var k;!k;)k=this.next();return k},canIUse:function(){var k={fastLex:!(typeof this.pre_lex=="function"||typeof this.options.pre_lex=="function"||this.yy&&typeof this.yy.pre_lex=="function"||this.yy&&typeof this.yy.post_lex=="function"||typeof this.options.post_lex=="function"||typeof this.post_lex=="function")&&typeof this.fastLex=="function"};return k},begin:function(k){return this.pushState(k)},pushState:function(k){return this.conditionStack.push(k),this.__currentRuleSet__=null,this},popState:function(){var k=this.conditionStack.length-1;return k>0?(this.__currentRuleSet__=null,this.conditionStack.pop()):this.conditionStack[0]},topState:function(k){return k=this.conditionStack.length-1-Math.abs(k||0),k>=0?this.conditionStack[k]:"INITIAL"},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]]:this.conditions.INITIAL},stateStackSize:function(){return this.conditionStack.length},options:{trackPosition:!0},JisonLexerError:P,performAction:function(k,N,R){switch(N){case 1:break;default:return this.simpleCaseActionClusters[N]}},simpleCaseActionClusters:{0:13,2:5,3:6,4:3,5:4,6:15,7:15,8:15,9:15,10:15,11:15,12:16,13:16,14:16,15:16,16:17,17:17,18:18,19:18,20:19,21:19,22:19,23:20,24:21,25:22,26:23,27:25,28:24,29:26,30:27,31:28,32:11,33:9,34:12,35:10,36:7,37:8,38:14,39:1},rules:[/^(?:(--[\d\-A-Za-z]*))/,/^(?:\s+)/,/^(?:\*)/,/^(?:\/)/,/^(?:\+)/,/^(?:-)/,/^(?:(\d+(\.\d*)?|\.\d+)px\b)/,/^(?:(\d+(\.\d*)?|\.\d+)cm\b)/,/^(?:(\d+(\.\d*)?|\.\d+)mm\b)/,/^(?:(\d+(\.\d*)?|\.\d+)in\b)/,/^(?:(\d+(\.\d*)?|\.\d+)pt\b)/,/^(?:(\d+(\.\d*)?|\.\d+)pc\b)/,/^(?:(\d+(\.\d*)?|\.\d+)deg\b)/,/^(?:(\d+(\.\d*)?|\.\d+)grad\b)/,/^(?:(\d+(\.\d*)?|\.\d+)rad\b)/,/^(?:(\d+(\.\d*)?|\.\d+)turn\b)/,/^(?:(\d+(\.\d*)?|\.\d+)s\b)/,/^(?:(\d+(\.\d*)?|\.\d+)ms\b)/,/^(?:(\d+(\.\d*)?|\.\d+)Hz\b)/,/^(?:(\d+(\.\d*)?|\.\d+)kHz\b)/,/^(?:(\d+(\.\d*)?|\.\d+)dpi\b)/,/^(?:(\d+(\.\d*)?|\.\d+)dpcm\b)/,/^(?:(\d+(\.\d*)?|\.\d+)dppx\b)/,/^(?:(\d+(\.\d*)?|\.\d+)em\b)/,/^(?:(\d+(\.\d*)?|\.\d+)ex\b)/,/^(?:(\d+(\.\d*)?|\.\d+)ch\b)/,/^(?:(\d+(\.\d*)?|\.\d+)rem\b)/,/^(?:(\d+(\.\d*)?|\.\d+)vw\b)/,/^(?:(\d+(\.\d*)?|\.\d+)vh\b)/,/^(?:(\d+(\.\d*)?|\.\d+)vmin\b)/,/^(?:(\d+(\.\d*)?|\.\d+)vmax\b)/,/^(?:(\d+(\.\d*)?|\.\d+)%)/,/^(?:(\d+(\.\d*)?|\.\d+)\b)/,/^(?:(calc))/,/^(?:(var))/,/^(?:([a-z]+))/,/^(?:\()/,/^(?:\))/,/^(?:,)/,/^(?:$)/],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39],inclusive:!0}}};return $}();w.lexer=A;function T(){this.yy={}}return T.prototype=w,w.Parser=T,new T}();typeof Rse<"u"&&(e.parser=t,e.Parser=t.Parser,e.parse=function(){return t.parse.apply(t,arguments)})})(L4);var Iy={},bE={exports:{}},S2={px:{px:1,cm:96/2.54,mm:96/25.4,in:96,pt:96/72,pc:16},cm:{px:2.54/96,cm:1,mm:.1,in:2.54,pt:2.54/72,pc:2.54/6},mm:{px:25.4/96,cm:10,mm:1,in:25.4,pt:25.4/72,pc:25.4/6},in:{px:1/96,cm:1/2.54,mm:1/25.4,in:1,pt:1/72,pc:1/6},pt:{px:.75,cm:72/2.54,mm:72/25.4,in:72,pt:1,pc:12},pc:{px:6/96,cm:6/2.54,mm:6/25.4,in:6,pt:6/72,pc:1},deg:{deg:1,grad:.9,rad:180/Math.PI,turn:360},grad:{deg:400/360,grad:1,rad:200/Math.PI,turn:400},rad:{deg:Math.PI/180,grad:Math.PI/200,rad:1,turn:Math.PI*2},turn:{deg:1/360,grad:1/400,rad:.5/Math.PI,turn:1},s:{s:1,ms:1/1e3},ms:{s:1e3,ms:1},Hz:{Hz:1,kHz:1e3},kHz:{Hz:1/1e3,kHz:1},dpi:{dpi:1,dpcm:1/2.54,dppx:1/96},dpcm:{dpi:2.54,dpcm:1,dppx:2.54/96},dppx:{dpi:96,dpcm:96/2.54,dppx:1}},Lse=function(e,t,r,i){if(!S2.hasOwnProperty(r))throw new Error("Cannot convert to "+r);if(!S2[r].hasOwnProperty(t))throw new Error("Cannot convert from "+t+" to "+r);var c=S2[r][t]*e;return i!==!1?(i=Math.pow(10,parseInt(i)||5),Math.round(c*i)/i):c};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=Lse,i=c(r);function c(o){return o&&o.__esModule?o:{default:o}}function u(o,v,w){switch(o.type){case"LengthValue":case"AngleValue":case"TimeValue":case"FrequencyValue":case"ResolutionValue":return p(o,v,w);default:return{left:o,right:v}}}function p(o,v,w){return v.type===o.type&&(v={type:o.type,value:(0,i.default)(v.value,v.unit,o.unit,w),unit:o.unit}),{left:o,right:v}}t.default=u,e.exports=t.default})(bE,bE.exports);var zse=bE.exports;Object.defineProperty(Iy,"__esModule",{value:!0});Iy.flip=wE;var Bse=zse,E2=$se(Bse);function $se(e){return e&&e.__esModule?e:{default:e}}function uo(e,t){return e.type==="MathExpression"?Vse(e,t):e.type==="Calc"?uo(e.value,t):e}function VD(e,t){return e.type===t.type&&e.value===t.value}function Ro(e){switch(e){case"LengthValue":case"AngleValue":case"TimeValue":case"FrequencyValue":case"ResolutionValue":case"EmValue":case"ExValue":case"ChValue":case"RemValue":case"VhValue":case"VwValue":case"VminValue":case"VmaxValue":case"PercentageValue":case"Value":return!0}return!1}function Fse(e,t){var r=(0,E2.default)(e.left,e.right,t),i=uo(r.left,t),c=uo(r.right,t);return i.type==="MathExpression"&&c.type==="MathExpression"&&(i.operator==="/"&&c.operator==="*"||i.operator==="-"&&c.operator==="+"||i.operator==="*"&&c.operator==="/"||i.operator==="+"&&c.operator==="-")&&(VD(i.right,c.right)?r=(0,E2.default)(i.left,c.left,t):VD(i.right,c.left)&&(r=(0,E2.default)(i.left,c.right,t)),i=uo(r.left,t),c=uo(r.right,t)),e.left=i,e.right=c,e}function wE(e){return e==="+"?"-":"+"}function SE(e){return Ro(e.type)?e.value=-e.value:e.type=="MathExpression"&&(e.left=SE(e.left),e.right=SE(e.right)),e}function Nse(e,t){var r=e,i=r.left,c=r.right,u=r.operator;if(i.type==="CssVariable"||c.type==="CssVariable")return e;if(c.value===0)return i;if(i.value===0&&u==="+")return c;if(i.value===0&&u==="-")return SE(c);if(i.type===c.type&&Ro(i.type)&&(e=Object.assign({},i),u==="+"?e.value=i.value+c.value:e.value=i.value-c.value),Ro(i.type)&&(c.operator==="+"||c.operator==="-")&&c.type==="MathExpression"){if(i.type===c.left.type)return e=Object.assign({},e),e.left=uo({type:"MathExpression",operator:u,left:i,right:c.left},t),e.right=c.right,e.operator=u==="-"?wE(c.operator):c.operator,uo(e,t);if(i.type===c.right.type)return e=Object.assign({},e),e.left=uo({type:"MathExpression",operator:u==="-"?wE(c.operator):c.operator,left:i,right:c.right},t),e.right=c.left,uo(e,t)}if(i.type==="MathExpression"&&(i.operator==="+"||i.operator==="-")&&Ro(c.type)){if(c.type===i.left.type)return e=Object.assign({},i),e.left=uo({type:"MathExpression",operator:u,left:i.left,right:c},t),uo(e,t);if(c.type===i.right.type)return e=Object.assign({},i),i.operator==="-"?(e.right=uo({type:"MathExpression",operator:u==="-"?"+":"-",left:c,right:i.right},t),e.operator=u==="-"?"-":"+"):e.right=uo({type:"MathExpression",operator:u,left:i.right,right:c},t),e.right.value<0&&(e.right.value*=-1,e.operator=e.operator==="-"?"+":"-"),uo(e,t)}return e}function jse(e,t){if(!Ro(e.right.type))return e;if(e.right.type!=="Value")throw new Error('Cannot divide by "'+e.right.unit+'", number expected');if(e.right.value===0)throw new Error("Cannot divide by zero");return e.left.type==="MathExpression"?Ro(e.left.left.type)&&Ro(e.left.right.type)?(e.left.left.value/=e.right.value,e.left.right.value/=e.right.value,uo(e.left,t)):e:Ro(e.left.type)?(e.left.value/=e.right.value,e.left):e}function Use(e){if(e.left.type==="MathExpression"&&e.right.type==="Value"){if(Ro(e.left.left.type)&&Ro(e.left.right.type))return e.left.left.value*=e.right.value,e.left.right.value*=e.right.value,e.left}else{if(Ro(e.left.type)&&e.right.type==="Value")return e.left.value*=e.right.value,e.left;if(e.left.type==="Value"&&e.right.type==="MathExpression"){if(Ro(e.right.left.type)&&Ro(e.right.right.type))return e.right.left.value*=e.left.value,e.right.right.value*=e.left.value,e.right}else if(e.left.type==="Value"&&Ro(e.right.type))return e.right.value*=e.left.value,e.right}return e}function Vse(e,t){switch(e=Fse(e,t),e.operator){case"+":case"-":return Nse(e,t);case"/":return jse(e,t);case"*":return Use(e)}return e}Iy.default=uo;var EE={exports:{}};(function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(p,o,v){var w=u(o,v);return o.type==="MathExpression"&&(w=p+"("+w+")"),w};var r=Iy,i={"*":0,"/":0,"+":1,"-":1};function c(p,o){if(o!==!1){var v=Math.pow(10,o);return Math.round(p*v)/v}return p}function u(p,o){switch(p.type){case"MathExpression":{var v=p.left,w=p.right,A=p.operator,T="";return v.type==="MathExpression"&&i[A]<i[v.operator]?T+="("+u(v,o)+")":T+=u(v,o),T+=" "+p.operator+" ",w.type==="MathExpression"&&i[A]<i[w.operator]?T+="("+u(w,o)+")":(w.type==="MathExpression"&&A==="-"&&["+","-"].includes(w.operator)&&(w.operator=(0,r.flip)(w.operator)),T+=u(w,o)),T}case"Value":return c(p.value,o);case"CssVariable":return p.fallback?"var("+p.value+", "+u(p.fallback,o)+")":"var("+p.value+")";case"Calc":return p.prefix?"-"+p.prefix+"-calc("+u(p.value,o)+")":"calc("+u(p.value,o)+")";default:return c(p.value,o)+p.unit}}e.exports=t.default})(EE,EE.exports);var Gse=EE.exports;(function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var r=Dse,i=w(r),c=L4,u=Iy,p=w(u),o=Gse,v=w(o);function w(T){return T&&T.__esModule?T:{default:T}}var A=/((?:\-[a-z]+\-)?calc)/;t.default=function(T){var P=arguments.length>1&&arguments[1]!==void 0?arguments[1]:5;return(0,i.default)(T).walk(function($){if(!($.type!=="function"||!A.test($.value))){var L=i.default.stringify($.nodes);if(!(L.indexOf("constant")>=0||L.indexOf("env")>=0)){var k=c.parser.parse(L),N=(0,p.default)(k,P);$.type="word",$.value=(0,v.default)($.value,N,P)}}},!0).toString()},e.exports=t.default})(xE,xE.exports);var qse=xE.exports;const T2=vn(qse);function Gg(e){return Gg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gg(e)}function GD(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,i)}return r}function qD(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?GD(Object(r),!0).forEach(function(i){Wse(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):GD(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function Wse(e,t,r){return t=Hse(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Hse(e){var t=Zse(e,"string");return Gg(t)==="symbol"?t:String(t)}function Zse(e,t){if(Gg(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(Gg(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function WD(e){return Jse(e)||Yse(e)||Kse(e)||Xse()}function Xse(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Kse(e,t){if(e){if(typeof e=="string")return TE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return TE(e,t)}}function Yse(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Jse(e){if(Array.isArray(e))return TE(e)}function TE(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}var Tf={widthCache:{},cacheCount:0},Qse=2e3,ele={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},tle=["minWidth","maxWidth","width","minHeight","maxHeight","height","top","left","fontSize","lineHeight","padding","margin","paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom"],HD="recharts_measurement_span";function rle(e,t){return tle.indexOf(e)>=0&&t===+t?"".concat(t,"px"):t}function nle(e){var t=e.split(""),r=t.reduce(function(i,c){return c===c.toUpperCase()?[].concat(WD(i),["-",c.toLowerCase()]):[].concat(WD(i),[c])},[]);return r.join("")}var ile=function(t){return Object.keys(t).reduce(function(r,i){return"".concat(r).concat(nle(i),":").concat(rle(i,t[i]),";")},"")},th=function(t){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||bl.isSsr)return{width:0,height:0};var i="".concat(t),c=ile(r),u="".concat(i,"-").concat(c);if(Tf.widthCache[u])return Tf.widthCache[u];try{var p=document.getElementById(HD);p||(p=document.createElement("span"),p.setAttribute("id",HD),p.setAttribute("aria-hidden","true"),document.body.appendChild(p));var o=qD(qD({},ele),r);Object.keys(o).map(function(A){return p.style[A]=o[A],A}),p.textContent=i;var v=p.getBoundingClientRect(),w={width:v.width,height:v.height};return Tf.widthCache[u]=w,++Tf.cacheCount>Qse&&(Tf.cacheCount=0,Tf.widthCache={}),w}catch{return{width:0,height:0}}},ole=function(t){var r=t.ownerDocument.documentElement,i={top:0,left:0};return typeof t.getBoundingClientRect<"u"&&(i=t.getBoundingClientRect()),{top:i.top+window.pageYOffset-r.clientTop,left:i.left+window.pageXOffset-r.clientLeft}},ale=function(t,r){return{chartX:Math.round(t.pageX-r.left),chartY:Math.round(t.pageY-r.top)}},sle=["dx","dy","textAnchor","verticalAnchor","scaleToFit","angle","lineHeight","capHeight","className","breakAll"];function AE(){return AE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},AE.apply(this,arguments)}function lle(e,t){if(e==null)return{};var r=cle(e,t),i,c;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(c=0;c<u.length;c++)i=u[c],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function cle(e,t){if(e==null)return{};var r={},i=Object.keys(e),c,u;for(u=0;u<i.length;u++)c=i[u],!(t.indexOf(c)>=0)&&(r[c]=e[c]);return r}function ZD(e,t){return dle(e)||fle(e,t)||hle(e,t)||ule()}function ule(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hle(e,t){if(e){if(typeof e=="string")return XD(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return XD(e,t)}}function XD(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function fle(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,c,u,p,o=[],v=!0,w=!1;try{if(u=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;v=!1}else for(;!(v=(i=u.call(r)).done)&&(o.push(i.value),o.length!==t);v=!0);}catch(A){w=!0,c=A}finally{try{if(!v&&r.return!=null&&(p=r.return(),Object(p)!==p))return}finally{if(w)throw c}}return o}}function dle(e){if(Array.isArray(e))return e}var z4=/[ \f\n\r\t\v\u2028\u2029]+/,B4=function(t){var r=t.children,i=t.breakAll,c=t.style;try{var u=[];ur(r)||(i?u=r.toString().split(""):u=r.toString().split(z4));var p=u.map(function(v){return{word:v,width:th(v,c).width}}),o=i?0:th(" ",c).width;return{wordsWithComputedWidth:p,spaceWidth:o}}catch{return null}},ple=function(t,r,i,c,u){var p=t.maxLines,o=t.children,v=t.style,w=t.breakAll,A=Rt(p),T=o,P=function(){var Be=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Be.reduce(function(bt,kt){var He=kt.word,nt=kt.width,gt=bt[bt.length-1];if(gt&&(c==null||u||gt.width+nt+i<Number(c)))gt.words.push(He),gt.width+=nt+i;else{var xt={words:[He],width:nt};bt.push(xt)}return bt},[])},$=P(r),L=function(Be){return Be.reduce(function(bt,kt){return bt.width>kt.width?bt:kt})};if(!A)return $;for(var k="…",N=function(Be){var bt=T.slice(0,Be),kt=B4({breakAll:w,style:v,children:bt+k}).wordsWithComputedWidth,He=P(kt),nt=He.length>p||L(He).width>Number(c);return[nt,He]},R=0,j=T.length-1,D=0,G;R<=j&&D<=T.length-1;){var W=Math.floor((R+j)/2),Y=W-1,ee=N(Y),de=ZD(ee,2),xe=de[0],Me=de[1],Ce=N(W),qe=ZD(Ce,1),Ue=qe[0];if(!xe&&!Ue&&(R=W+1),xe&&Ue&&(j=W-1),!xe&&Ue){G=Me;break}D++}return G||$},KD=function(t){var r=ur(t)?[]:t.toString().split(z4);return[{words:r}]},mle=function(t){var r=t.width,i=t.scaleToFit,c=t.children,u=t.style,p=t.breakAll,o=t.maxLines;if((r||i)&&!bl.isSsr){var v,w,A=B4({breakAll:p,children:c,style:u});if(A){var T=A.wordsWithComputedWidth,P=A.spaceWidth;v=T,w=P}else return KD(c);return ple({breakAll:p,children:c,maxLines:o,style:u},v,w,r,i)}return KD(c)},$4={x:0,y:0,lineHeight:"1em",capHeight:"0.71em",scaleToFit:!1,textAnchor:"start",verticalAnchor:"end",fill:"#808080"},qg=function(t){var r=Ke.useMemo(function(){return mle({breakAll:t.breakAll,children:t.children,maxLines:t.maxLines,scaleToFit:t.scaleToFit,style:t.style,width:t.width})},[t.breakAll,t.children,t.maxLines,t.scaleToFit,t.style,t.width]),i=t.dx,c=t.dy,u=t.textAnchor,p=t.verticalAnchor,o=t.scaleToFit,v=t.angle,w=t.lineHeight,A=t.capHeight,T=t.className,P=t.breakAll,$=lle(t,sle);if(!wi($.x)||!wi($.y))return null;var L=$.x+(Rt(i)?i:0),k=$.y+(Rt(c)?c:0),N;switch(p){case"start":N=T2("calc(".concat(A,")"));break;case"middle":N=T2("calc(".concat((r.length-1)/2," * -").concat(w," + (").concat(A," / 2))"));break;default:N=T2("calc(".concat(r.length-1," * -").concat(w,")"));break}var R=[];if(o){var j=r[0].width,D=t.width;R.push("scale(".concat((Rt(D)?D/j:1)/j,")"))}return v&&R.push("rotate(".concat(v,", ").concat(L,", ").concat(k,")")),R.length&&($.transform=R.join(" ")),Ze.createElement("text",AE({},en($,!0),{x:L,y:k,className:Mn("recharts-text",T),textAnchor:u,fill:$.fill.includes("url")?$4.fill:$.fill}),r.map(function(G,W){return Ze.createElement("tspan",{x:L,dy:W===0?N:w,key:W},G.words.join(P?"":" "))}))};qg.defaultProps=$4;var gle=VA;function yle(e,t){return gle(e,t)}var _le=yle;const eM=vn(_le);var vle=Gd;function xle(e,t,r){for(var i=-1,c=e.length;++i<c;){var u=e[i],p=t(u);if(p!=null&&(o===void 0?p===p&&!vle(p):r(p,o)))var o=p,v=u}return v}var F4=xle;function ble(e,t){return e>t}var wle=ble,Sle=F4,Ele=wle,Tle=Kd;function Ale(e){return e&&e.length?Sle(e,Tle,Ele):void 0}var Mle=Ale;const G1=vn(Mle);function Cle(e,t){return e<t}var Ple=Cle,Ile=F4,kle=Ple,Ole=Kd;function Dle(e){return e&&e.length?Ile(e,Ole,kle):void 0}var Rle=Dle;const q1=vn(Rle);var Lle=LA,zle=Wc,Ble=M4,$le=Eo;function Fle(e,t){var r=$le(e)?Lle:Ble;return r(e,zle(t))}var Nle=Fle,jle=T4,Ule=Nle;function Vle(e,t){return jle(Ule(e,t),1)}var Gle=Vle;const qle=vn(Gle);function zc(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function Wle(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function tM(e){let t,r,i;e.length!==2?(t=zc,r=(o,v)=>zc(e(o),v),i=(o,v)=>e(o)-v):(t=e===zc||e===Wle?e:Hle,r=e,i=e);function c(o,v,w=0,A=o.length){if(w<A){if(t(v,v)!==0)return A;do{const T=w+A>>>1;r(o[T],v)<0?w=T+1:A=T}while(w<A)}return w}function u(o,v,w=0,A=o.length){if(w<A){if(t(v,v)!==0)return A;do{const T=w+A>>>1;r(o[T],v)<=0?w=T+1:A=T}while(w<A)}return w}function p(o,v,w=0,A=o.length){const T=c(o,v,w,A-1);return T>w&&i(o[T-1],v)>-i(o[T],v)?T-1:T}return{left:c,center:p,right:u}}function Hle(){return 0}function N4(e){return e===null?NaN:+e}function*Zle(e,t){if(t===void 0)for(let r of e)r!=null&&(r=+r)>=r&&(yield r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(i=+i)>=i&&(yield i)}}const Xle=tM(zc),Kle=Xle.right;tM(N4).center;const ky=Kle;class YD extends Map{constructor(t,r=Qle){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:r}}),t!=null)for(const[i,c]of t)this.set(i,c)}get(t){return super.get(JD(this,t))}has(t){return super.has(JD(this,t))}set(t,r){return super.set(Yle(this,t),r)}delete(t){return super.delete(Jle(this,t))}}function JD({_intern:e,_key:t},r){const i=t(r);return e.has(i)?e.get(i):r}function Yle({_intern:e,_key:t},r){const i=t(r);return e.has(i)?e.get(i):(e.set(i,r),r)}function Jle({_intern:e,_key:t},r){const i=t(r);return e.has(i)&&(r=e.get(i),e.delete(i)),r}function Qle(e){return e!==null&&typeof e=="object"?e.valueOf():e}function ece(e=zc){if(e===zc)return j4;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,r)=>{const i=e(t,r);return i||i===0?i:(e(r,r)===0)-(e(t,t)===0)}}function j4(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const tce=Math.sqrt(50),rce=Math.sqrt(10),nce=Math.sqrt(2);function mx(e,t,r){const i=(t-e)/Math.max(0,r),c=Math.floor(Math.log10(i)),u=i/Math.pow(10,c),p=u>=tce?10:u>=rce?5:u>=nce?2:1;let o,v,w;return c<0?(w=Math.pow(10,-c)/p,o=Math.round(e*w),v=Math.round(t*w),o/w<e&&++o,v/w>t&&--v,w=-w):(w=Math.pow(10,c)*p,o=Math.round(e/w),v=Math.round(t/w),o*w<e&&++o,v*w>t&&--v),v<o&&.5<=r&&r<2?mx(e,t,r*2):[o,v,w]}function ME(e,t,r){if(t=+t,e=+e,r=+r,!(r>0))return[];if(e===t)return[e];const i=t<e,[c,u,p]=i?mx(t,e,r):mx(e,t,r);if(!(u>=c))return[];const o=u-c+1,v=new Array(o);if(i)if(p<0)for(let w=0;w<o;++w)v[w]=(u-w)/-p;else for(let w=0;w<o;++w)v[w]=(u-w)*p;else if(p<0)for(let w=0;w<o;++w)v[w]=(c+w)/-p;else for(let w=0;w<o;++w)v[w]=(c+w)*p;return v}function CE(e,t,r){return t=+t,e=+e,r=+r,mx(e,t,r)[2]}function PE(e,t,r){t=+t,e=+e,r=+r;const i=t<e,c=i?CE(t,e,r):CE(e,t,r);return(i?-1:1)*(c<0?1/-c:c)}function QD(e,t){let r;if(t===void 0)for(const i of e)i!=null&&(r<i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let c of e)(c=t(c,++i,e))!=null&&(r<c||r===void 0&&c>=c)&&(r=c)}return r}function eR(e,t){let r;if(t===void 0)for(const i of e)i!=null&&(r>i||r===void 0&&i>=i)&&(r=i);else{let i=-1;for(let c of e)(c=t(c,++i,e))!=null&&(r>c||r===void 0&&c>=c)&&(r=c)}return r}function U4(e,t,r=0,i=1/0,c){if(t=Math.floor(t),r=Math.floor(Math.max(0,r)),i=Math.floor(Math.min(e.length-1,i)),!(r<=t&&t<=i))return e;for(c=c===void 0?j4:ece(c);i>r;){if(i-r>600){const v=i-r+1,w=t-r+1,A=Math.log(v),T=.5*Math.exp(2*A/3),P=.5*Math.sqrt(A*T*(v-T)/v)*(w-v/2<0?-1:1),$=Math.max(r,Math.floor(t-w*T/v+P)),L=Math.min(i,Math.floor(t+(v-w)*T/v+P));U4(e,t,$,L,c)}const u=e[t];let p=r,o=i;for(Fm(e,r,t),c(e[i],u)>0&&Fm(e,r,i);p<o;){for(Fm(e,p,o),++p,--o;c(e[p],u)<0;)++p;for(;c(e[o],u)>0;)--o}c(e[r],u)===0?Fm(e,r,o):(++o,Fm(e,o,i)),o<=t&&(r=o+1),t<=o&&(i=o-1)}return e}function Fm(e,t,r){const i=e[t];e[t]=e[r],e[r]=i}function ice(e,t,r){if(e=Float64Array.from(Zle(e,r)),!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return eR(e);if(t>=1)return QD(e);var i,c=(i-1)*t,u=Math.floor(c),p=QD(U4(e,u).subarray(0,u+1)),o=eR(e.subarray(u+1));return p+(o-p)*(c-u)}}function oce(e,t,r=N4){if(!(!(i=e.length)||isNaN(t=+t))){if(t<=0||i<2)return+r(e[0],0,e);if(t>=1)return+r(e[i-1],i-1,e);var i,c=(i-1)*t,u=Math.floor(c),p=+r(e[u],u,e),o=+r(e[u+1],u+1,e);return p+(o-p)*(c-u)}}function ace(e,t,r){e=+e,t=+t,r=(c=arguments.length)<2?(t=e,e=0,1):c<3?1:+r;for(var i=-1,c=Math.max(0,Math.ceil((t-e)/r))|0,u=new Array(c);++i<c;)u[i]=e+i*r;return u}function Oa(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Ll(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const IE=Symbol("implicit");function rM(){var e=new YD,t=[],r=[],i=IE;function c(u){let p=e.get(u);if(p===void 0){if(i!==IE)return i;e.set(u,p=t.push(u)-1)}return r[p%r.length]}return c.domain=function(u){if(!arguments.length)return t.slice();t=[],e=new YD;for(const p of u)e.has(p)||e.set(p,t.push(p)-1);return c},c.range=function(u){return arguments.length?(r=Array.from(u),c):r.slice()},c.unknown=function(u){return arguments.length?(i=u,c):i},c.copy=function(){return rM(t,r).unknown(i)},Oa.apply(c,arguments),c}function Wg(){var e=rM().unknown(void 0),t=e.domain,r=e.range,i=0,c=1,u,p,o=!1,v=0,w=0,A=.5;delete e.unknown;function T(){var P=t().length,$=c<i,L=$?c:i,k=$?i:c;u=(k-L)/Math.max(1,P-v+w*2),o&&(u=Math.floor(u)),L+=(k-L-u*(P-v))*A,p=u*(1-v),o&&(L=Math.round(L),p=Math.round(p));var N=ace(P).map(function(R){return L+u*R});return r($?N.reverse():N)}return e.domain=function(P){return arguments.length?(t(P),T()):t()},e.range=function(P){return arguments.length?([i,c]=P,i=+i,c=+c,T()):[i,c]},e.rangeRound=function(P){return[i,c]=P,i=+i,c=+c,o=!0,T()},e.bandwidth=function(){return p},e.step=function(){return u},e.round=function(P){return arguments.length?(o=!!P,T()):o},e.padding=function(P){return arguments.length?(v=Math.min(1,w=+P),T()):v},e.paddingInner=function(P){return arguments.length?(v=Math.min(1,P),T()):v},e.paddingOuter=function(P){return arguments.length?(w=+P,T()):w},e.align=function(P){return arguments.length?(A=Math.max(0,Math.min(1,P)),T()):A},e.copy=function(){return Wg(t(),[i,c]).round(o).paddingInner(v).paddingOuter(w).align(A)},Oa.apply(T(),arguments)}function V4(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return V4(t())},e}function dg(){return V4(Wg.apply(null,arguments).paddingInner(1))}function nM(e,t,r){e.prototype=t.prototype=r,r.constructor=e}function G4(e,t){var r=Object.create(e.prototype);for(var i in t)r[i]=t[i];return r}function Oy(){}var Hg=.7,gx=1/Hg,rd="\\s*([+-]?\\d+)\\s*",Zg="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Fs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",sce=/^#([0-9a-f]{3,8})$/,lce=new RegExp(`^rgb\\(${rd},${rd},${rd}\\)$`),cce=new RegExp(`^rgb\\(${Fs},${Fs},${Fs}\\)$`),uce=new RegExp(`^rgba\\(${rd},${rd},${rd},${Zg}\\)$`),hce=new RegExp(`^rgba\\(${Fs},${Fs},${Fs},${Zg}\\)$`),fce=new RegExp(`^hsl\\(${Zg},${Fs},${Fs}\\)$`),dce=new RegExp(`^hsla\\(${Zg},${Fs},${Fs},${Zg}\\)$`),tR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};nM(Oy,Xg,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:rR,formatHex:rR,formatHex8:pce,formatHsl:mce,formatRgb:nR,toString:nR});function rR(){return this.rgb().formatHex()}function pce(){return this.rgb().formatHex8()}function mce(){return q4(this).formatHsl()}function nR(){return this.rgb().formatRgb()}function Xg(e){var t,r;return e=(e+"").trim().toLowerCase(),(t=sce.exec(e))?(r=t[1].length,t=parseInt(t[1],16),r===6?iR(t):r===3?new zo(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):r===8?qv(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):r===4?qv(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=lce.exec(e))?new zo(t[1],t[2],t[3],1):(t=cce.exec(e))?new zo(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=uce.exec(e))?qv(t[1],t[2],t[3],t[4]):(t=hce.exec(e))?qv(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=fce.exec(e))?sR(t[1],t[2]/100,t[3]/100,1):(t=dce.exec(e))?sR(t[1],t[2]/100,t[3]/100,t[4]):tR.hasOwnProperty(e)?iR(tR[e]):e==="transparent"?new zo(NaN,NaN,NaN,0):null}function iR(e){return new zo(e>>16&255,e>>8&255,e&255,1)}function qv(e,t,r,i){return i<=0&&(e=t=r=NaN),new zo(e,t,r,i)}function gce(e){return e instanceof Oy||(e=Xg(e)),e?(e=e.rgb(),new zo(e.r,e.g,e.b,e.opacity)):new zo}function kE(e,t,r,i){return arguments.length===1?gce(e):new zo(e,t,r,i??1)}function zo(e,t,r,i){this.r=+e,this.g=+t,this.b=+r,this.opacity=+i}nM(zo,kE,G4(Oy,{brighter(e){return e=e==null?gx:Math.pow(gx,e),new zo(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Hg:Math.pow(Hg,e),new zo(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new zo(rh(this.r),rh(this.g),rh(this.b),yx(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:oR,formatHex:oR,formatHex8:yce,formatRgb:aR,toString:aR}));function oR(){return`#${Ku(this.r)}${Ku(this.g)}${Ku(this.b)}`}function yce(){return`#${Ku(this.r)}${Ku(this.g)}${Ku(this.b)}${Ku((isNaN(this.opacity)?1:this.opacity)*255)}`}function aR(){const e=yx(this.opacity);return`${e===1?"rgb(":"rgba("}${rh(this.r)}, ${rh(this.g)}, ${rh(this.b)}${e===1?")":`, ${e})`}`}function yx(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function rh(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ku(e){return e=rh(e),(e<16?"0":"")+e.toString(16)}function sR(e,t,r,i){return i<=0?e=t=r=NaN:r<=0||r>=1?e=t=NaN:t<=0&&(e=NaN),new rs(e,t,r,i)}function q4(e){if(e instanceof rs)return new rs(e.h,e.s,e.l,e.opacity);if(e instanceof Oy||(e=Xg(e)),!e)return new rs;if(e instanceof rs)return e;e=e.rgb();var t=e.r/255,r=e.g/255,i=e.b/255,c=Math.min(t,r,i),u=Math.max(t,r,i),p=NaN,o=u-c,v=(u+c)/2;return o?(t===u?p=(r-i)/o+(r<i)*6:r===u?p=(i-t)/o+2:p=(t-r)/o+4,o/=v<.5?u+c:2-u-c,p*=60):o=v>0&&v<1?0:p,new rs(p,o,v,e.opacity)}function _ce(e,t,r,i){return arguments.length===1?q4(e):new rs(e,t,r,i??1)}function rs(e,t,r,i){this.h=+e,this.s=+t,this.l=+r,this.opacity=+i}nM(rs,_ce,G4(Oy,{brighter(e){return e=e==null?gx:Math.pow(gx,e),new rs(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Hg:Math.pow(Hg,e),new rs(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,r=this.l,i=r+(r<.5?r:1-r)*t,c=2*r-i;return new zo(A2(e>=240?e-240:e+120,c,i),A2(e,c,i),A2(e<120?e+240:e-120,c,i),this.opacity)},clamp(){return new rs(lR(this.h),Wv(this.s),Wv(this.l),yx(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=yx(this.opacity);return`${e===1?"hsl(":"hsla("}${lR(this.h)}, ${Wv(this.s)*100}%, ${Wv(this.l)*100}%${e===1?")":`, ${e})`}`}}));function lR(e){return e=(e||0)%360,e<0?e+360:e}function Wv(e){return Math.max(0,Math.min(1,e||0))}function A2(e,t,r){return(e<60?t+(r-t)*e/60:e<180?r:e<240?t+(r-t)*(240-e)/60:t)*255}const iM=e=>()=>e;function vce(e,t){return function(r){return e+r*t}}function xce(e,t,r){return e=Math.pow(e,r),t=Math.pow(t,r)-e,r=1/r,function(i){return Math.pow(e+i*t,r)}}function bce(e){return(e=+e)==1?W4:function(t,r){return r-t?xce(t,r,e):iM(isNaN(t)?r:t)}}function W4(e,t){var r=t-e;return r?vce(e,r):iM(isNaN(e)?t:e)}const cR=function e(t){var r=bce(t);function i(c,u){var p=r((c=kE(c)).r,(u=kE(u)).r),o=r(c.g,u.g),v=r(c.b,u.b),w=W4(c.opacity,u.opacity);return function(A){return c.r=p(A),c.g=o(A),c.b=v(A),c.opacity=w(A),c+""}}return i.gamma=e,i}(1);function wce(e,t){t||(t=[]);var r=e?Math.min(t.length,e.length):0,i=t.slice(),c;return function(u){for(c=0;c<r;++c)i[c]=e[c]*(1-u)+t[c]*u;return i}}function Sce(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Ece(e,t){var r=t?t.length:0,i=e?Math.min(r,e.length):0,c=new Array(i),u=new Array(r),p;for(p=0;p<i;++p)c[p]=Jd(e[p],t[p]);for(;p<r;++p)u[p]=t[p];return function(o){for(p=0;p<i;++p)u[p]=c[p](o);return u}}function Tce(e,t){var r=new Date;return e=+e,t=+t,function(i){return r.setTime(e*(1-i)+t*i),r}}function _x(e,t){return e=+e,t=+t,function(r){return e*(1-r)+t*r}}function Ace(e,t){var r={},i={},c;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(c in t)c in e?r[c]=Jd(e[c],t[c]):i[c]=t[c];return function(u){for(c in r)i[c]=r[c](u);return i}}var OE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,M2=new RegExp(OE.source,"g");function Mce(e){return function(){return e}}function Cce(e){return function(t){return e(t)+""}}function Pce(e,t){var r=OE.lastIndex=M2.lastIndex=0,i,c,u,p=-1,o=[],v=[];for(e=e+"",t=t+"";(i=OE.exec(e))&&(c=M2.exec(t));)(u=c.index)>r&&(u=t.slice(r,u),o[p]?o[p]+=u:o[++p]=u),(i=i[0])===(c=c[0])?o[p]?o[p]+=c:o[++p]=c:(o[++p]=null,v.push({i:p,x:_x(i,c)})),r=M2.lastIndex;return r<t.length&&(u=t.slice(r),o[p]?o[p]+=u:o[++p]=u),o.length<2?v[0]?Cce(v[0].x):Mce(t):(t=v.length,function(w){for(var A=0,T;A<t;++A)o[(T=v[A]).i]=T.x(w);return o.join("")})}function Jd(e,t){var r=typeof t,i;return t==null||r==="boolean"?iM(t):(r==="number"?_x:r==="string"?(i=Xg(t))?(t=i,cR):Pce:t instanceof Xg?cR:t instanceof Date?Tce:Sce(t)?wce:Array.isArray(t)?Ece:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Ace:_x)(e,t)}function oM(e,t){return e=+e,t=+t,function(r){return Math.round(e*(1-r)+t*r)}}function Ice(e,t){t===void 0&&(t=e,e=Jd);for(var r=0,i=t.length-1,c=t[0],u=new Array(i<0?0:i);r<i;)u[r]=e(c,c=t[++r]);return function(p){var o=Math.max(0,Math.min(i-1,Math.floor(p*=i)));return u[o](p-o)}}function kce(e){return function(){return e}}function vx(e){return+e}var uR=[0,1];function xo(e){return e}function DE(e,t){return(t-=e=+e)?function(r){return(r-e)/t}:kce(isNaN(t)?NaN:.5)}function Oce(e,t){var r;return e>t&&(r=e,e=t,t=r),function(i){return Math.max(e,Math.min(t,i))}}function Dce(e,t,r){var i=e[0],c=e[1],u=t[0],p=t[1];return c<i?(i=DE(c,i),u=r(p,u)):(i=DE(i,c),u=r(u,p)),function(o){return u(i(o))}}function Rce(e,t,r){var i=Math.min(e.length,t.length)-1,c=new Array(i),u=new Array(i),p=-1;for(e[i]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++p<i;)c[p]=DE(e[p],e[p+1]),u[p]=r(t[p],t[p+1]);return function(o){var v=ky(e,o,1,i)-1;return u[v](c[v](o))}}function Dy(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function W1(){var e=uR,t=uR,r=Jd,i,c,u,p=xo,o,v,w;function A(){var P=Math.min(e.length,t.length);return p!==xo&&(p=Oce(e[0],e[P-1])),o=P>2?Rce:Dce,v=w=null,T}function T(P){return P==null||isNaN(P=+P)?u:(v||(v=o(e.map(i),t,r)))(i(p(P)))}return T.invert=function(P){return p(c((w||(w=o(t,e.map(i),_x)))(P)))},T.domain=function(P){return arguments.length?(e=Array.from(P,vx),A()):e.slice()},T.range=function(P){return arguments.length?(t=Array.from(P),A()):t.slice()},T.rangeRound=function(P){return t=Array.from(P),r=oM,A()},T.clamp=function(P){return arguments.length?(p=P?!0:xo,A()):p!==xo},T.interpolate=function(P){return arguments.length?(r=P,A()):r},T.unknown=function(P){return arguments.length?(u=P,T):u},function(P,$){return i=P,c=$,A()}}function aM(){return W1()(xo,xo)}function Lce(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function xx(e,t){if((r=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var r,i=e.slice(0,r);return[i.length>1?i[0]+i.slice(2):i,+e.slice(r+1)]}function Td(e){return e=xx(Math.abs(e)),e?e[1]:NaN}function zce(e,t){return function(r,i){for(var c=r.length,u=[],p=0,o=e[0],v=0;c>0&&o>0&&(v+o+1>i&&(o=Math.max(1,i-v)),u.push(r.substring(c-=o,c+o)),!((v+=o+1)>i));)o=e[p=(p+1)%e.length];return u.reverse().join(t)}}function Bce(e){return function(t){return t.replace(/[0-9]/g,function(r){return e[+r]})}}var $ce=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Kg(e){if(!(t=$ce.exec(e)))throw new Error("invalid format: "+e);var t;return new sM({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Kg.prototype=sM.prototype;function sM(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}sM.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Fce(e){e:for(var t=e.length,r=1,i=-1,c;r<t;++r)switch(e[r]){case".":i=c=r;break;case"0":i===0&&(i=r),c=r;break;default:if(!+e[r])break e;i>0&&(i=0);break}return i>0?e.slice(0,i)+e.slice(c+1):e}var H4;function Nce(e,t){var r=xx(e,t);if(!r)return e+"";var i=r[0],c=r[1],u=c-(H4=Math.max(-8,Math.min(8,Math.floor(c/3)))*3)+1,p=i.length;return u===p?i:u>p?i+new Array(u-p+1).join("0"):u>0?i.slice(0,u)+"."+i.slice(u):"0."+new Array(1-u).join("0")+xx(e,Math.max(0,t+u-1))[0]}function hR(e,t){var r=xx(e,t);if(!r)return e+"";var i=r[0],c=r[1];return c<0?"0."+new Array(-c).join("0")+i:i.length>c+1?i.slice(0,c+1)+"."+i.slice(c+1):i+new Array(c-i.length+2).join("0")}const fR={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Lce,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>hR(e*100,t),r:hR,s:Nce,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function dR(e){return e}var pR=Array.prototype.map,mR=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function jce(e){var t=e.grouping===void 0||e.thousands===void 0?dR:zce(pR.call(e.grouping,Number),e.thousands+""),r=e.currency===void 0?"":e.currency[0]+"",i=e.currency===void 0?"":e.currency[1]+"",c=e.decimal===void 0?".":e.decimal+"",u=e.numerals===void 0?dR:Bce(pR.call(e.numerals,String)),p=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"−":e.minus+"",v=e.nan===void 0?"NaN":e.nan+"";function w(T){T=Kg(T);var P=T.fill,$=T.align,L=T.sign,k=T.symbol,N=T.zero,R=T.width,j=T.comma,D=T.precision,G=T.trim,W=T.type;W==="n"?(j=!0,W="g"):fR[W]||(D===void 0&&(D=12),G=!0,W="g"),(N||P==="0"&&$==="=")&&(N=!0,P="0",$="=");var Y=k==="$"?r:k==="#"&&/[boxX]/.test(W)?"0"+W.toLowerCase():"",ee=k==="$"?i:/[%p]/.test(W)?p:"",de=fR[W],xe=/[defgprs%]/.test(W);D=D===void 0?6:/[gprs]/.test(W)?Math.max(1,Math.min(21,D)):Math.max(0,Math.min(20,D));function Me(Ce){var qe=Y,Ue=ee,ut,Be,bt;if(W==="c")Ue=de(Ce)+Ue,Ce="";else{Ce=+Ce;var kt=Ce<0||1/Ce<0;if(Ce=isNaN(Ce)?v:de(Math.abs(Ce),D),G&&(Ce=Fce(Ce)),kt&&+Ce==0&&L!=="+"&&(kt=!1),qe=(kt?L==="("?L:o:L==="-"||L==="("?"":L)+qe,Ue=(W==="s"?mR[8+H4/3]:"")+Ue+(kt&&L==="("?")":""),xe){for(ut=-1,Be=Ce.length;++ut<Be;)if(bt=Ce.charCodeAt(ut),48>bt||bt>57){Ue=(bt===46?c+Ce.slice(ut+1):Ce.slice(ut))+Ue,Ce=Ce.slice(0,ut);break}}}j&&!N&&(Ce=t(Ce,1/0));var He=qe.length+Ce.length+Ue.length,nt=He<R?new Array(R-He+1).join(P):"";switch(j&&N&&(Ce=t(nt+Ce,nt.length?R-Ue.length:1/0),nt=""),$){case"<":Ce=qe+Ce+Ue+nt;break;case"=":Ce=qe+nt+Ce+Ue;break;case"^":Ce=nt.slice(0,He=nt.length>>1)+qe+Ce+Ue+nt.slice(He);break;default:Ce=nt+qe+Ce+Ue;break}return u(Ce)}return Me.toString=function(){return T+""},Me}function A(T,P){var $=w((T=Kg(T),T.type="f",T)),L=Math.max(-8,Math.min(8,Math.floor(Td(P)/3)))*3,k=Math.pow(10,-L),N=mR[8+L/3];return function(R){return $(k*R)+N}}return{format:w,formatPrefix:A}}var Hv,lM,Z4;Uce({thousands:",",grouping:[3],currency:["$",""]});function Uce(e){return Hv=jce(e),lM=Hv.format,Z4=Hv.formatPrefix,Hv}function Vce(e){return Math.max(0,-Td(Math.abs(e)))}function Gce(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Td(t)/3)))*3-Td(Math.abs(e)))}function qce(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,Td(t)-Td(e))+1}function X4(e,t,r,i){var c=PE(e,t,r),u;switch(i=Kg(i??",f"),i.type){case"s":{var p=Math.max(Math.abs(e),Math.abs(t));return i.precision==null&&!isNaN(u=Gce(c,p))&&(i.precision=u),Z4(i,p)}case"":case"e":case"g":case"p":case"r":{i.precision==null&&!isNaN(u=qce(c,Math.max(Math.abs(e),Math.abs(t))))&&(i.precision=u-(i.type==="e"));break}case"f":case"%":{i.precision==null&&!isNaN(u=Vce(c))&&(i.precision=u-(i.type==="%")*2);break}}return lM(i)}function Zc(e){var t=e.domain;return e.ticks=function(r){var i=t();return ME(i[0],i[i.length-1],r??10)},e.tickFormat=function(r,i){var c=t();return X4(c[0],c[c.length-1],r??10,i)},e.nice=function(r){r==null&&(r=10);var i=t(),c=0,u=i.length-1,p=i[c],o=i[u],v,w,A=10;for(o<p&&(w=p,p=o,o=w,w=c,c=u,u=w);A-- >0;){if(w=CE(p,o,r),w===v)return i[c]=p,i[u]=o,t(i);if(w>0)p=Math.floor(p/w)*w,o=Math.ceil(o/w)*w;else if(w<0)p=Math.ceil(p*w)/w,o=Math.floor(o*w)/w;else break;v=w}return e},e}function bx(){var e=aM();return e.copy=function(){return Dy(e,bx())},Oa.apply(e,arguments),Zc(e)}function K4(e){var t;function r(i){return i==null||isNaN(i=+i)?t:i}return r.invert=r,r.domain=r.range=function(i){return arguments.length?(e=Array.from(i,vx),r):e.slice()},r.unknown=function(i){return arguments.length?(t=i,r):t},r.copy=function(){return K4(e).unknown(t)},e=arguments.length?Array.from(e,vx):[0,1],Zc(r)}function Y4(e,t){e=e.slice();var r=0,i=e.length-1,c=e[r],u=e[i],p;return u<c&&(p=r,r=i,i=p,p=c,c=u,u=p),e[r]=t.floor(c),e[i]=t.ceil(u),e}function gR(e){return Math.log(e)}function yR(e){return Math.exp(e)}function Wce(e){return-Math.log(-e)}function Hce(e){return-Math.exp(-e)}function Zce(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Xce(e){return e===10?Zce:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Kce(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function _R(e){return(t,r)=>-e(-t,r)}function cM(e){const t=e(gR,yR),r=t.domain;let i=10,c,u;function p(){return c=Kce(i),u=Xce(i),r()[0]<0?(c=_R(c),u=_R(u),e(Wce,Hce)):e(gR,yR),t}return t.base=function(o){return arguments.length?(i=+o,p()):i},t.domain=function(o){return arguments.length?(r(o),p()):r()},t.ticks=o=>{const v=r();let w=v[0],A=v[v.length-1];const T=A<w;T&&([w,A]=[A,w]);let P=c(w),$=c(A),L,k;const N=o==null?10:+o;let R=[];if(!(i%1)&&$-P<N){if(P=Math.floor(P),$=Math.ceil($),w>0){for(;P<=$;++P)for(L=1;L<i;++L)if(k=P<0?L/u(-P):L*u(P),!(k<w)){if(k>A)break;R.push(k)}}else for(;P<=$;++P)for(L=i-1;L>=1;--L)if(k=P>0?L/u(-P):L*u(P),!(k<w)){if(k>A)break;R.push(k)}R.length*2<N&&(R=ME(w,A,N))}else R=ME(P,$,Math.min($-P,N)).map(u);return T?R.reverse():R},t.tickFormat=(o,v)=>{if(o==null&&(o=10),v==null&&(v=i===10?"s":","),typeof v!="function"&&(!(i%1)&&(v=Kg(v)).precision==null&&(v.trim=!0),v=lM(v)),o===1/0)return v;const w=Math.max(1,i*o/t.ticks().length);return A=>{let T=A/u(Math.round(c(A)));return T*i<i-.5&&(T*=i),T<=w?v(A):""}},t.nice=()=>r(Y4(r(),{floor:o=>u(Math.floor(c(o))),ceil:o=>u(Math.ceil(c(o)))})),t}function J4(){const e=cM(W1()).domain([1,10]);return e.copy=()=>Dy(e,J4()).base(e.base()),Oa.apply(e,arguments),e}function vR(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function xR(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function uM(e){var t=1,r=e(vR(t),xR(t));return r.constant=function(i){return arguments.length?e(vR(t=+i),xR(t)):t},Zc(r)}function Q4(){var e=uM(W1());return e.copy=function(){return Dy(e,Q4()).constant(e.constant())},Oa.apply(e,arguments)}function bR(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Yce(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Jce(e){return e<0?-e*e:e*e}function hM(e){var t=e(xo,xo),r=1;function i(){return r===1?e(xo,xo):r===.5?e(Yce,Jce):e(bR(r),bR(1/r))}return t.exponent=function(c){return arguments.length?(r=+c,i()):r},Zc(t)}function fM(){var e=hM(W1());return e.copy=function(){return Dy(e,fM()).exponent(e.exponent())},Oa.apply(e,arguments),e}function Qce(){return fM.apply(null,arguments).exponent(.5)}function wR(e){return Math.sign(e)*e*e}function eue(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function e$(){var e=aM(),t=[0,1],r=!1,i;function c(u){var p=eue(e(u));return isNaN(p)?i:r?Math.round(p):p}return c.invert=function(u){return e.invert(wR(u))},c.domain=function(u){return arguments.length?(e.domain(u),c):e.domain()},c.range=function(u){return arguments.length?(e.range((t=Array.from(u,vx)).map(wR)),c):t.slice()},c.rangeRound=function(u){return c.range(u).round(!0)},c.round=function(u){return arguments.length?(r=!!u,c):r},c.clamp=function(u){return arguments.length?(e.clamp(u),c):e.clamp()},c.unknown=function(u){return arguments.length?(i=u,c):i},c.copy=function(){return e$(e.domain(),t).round(r).clamp(e.clamp()).unknown(i)},Oa.apply(c,arguments),Zc(c)}function t$(){var e=[],t=[],r=[],i;function c(){var p=0,o=Math.max(1,t.length);for(r=new Array(o-1);++p<o;)r[p-1]=oce(e,p/o);return u}function u(p){return p==null||isNaN(p=+p)?i:t[ky(r,p)]}return u.invertExtent=function(p){var o=t.indexOf(p);return o<0?[NaN,NaN]:[o>0?r[o-1]:e[0],o<r.length?r[o]:e[e.length-1]]},u.domain=function(p){if(!arguments.length)return e.slice();e=[];for(let o of p)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(zc),c()},u.range=function(p){return arguments.length?(t=Array.from(p),c()):t.slice()},u.unknown=function(p){return arguments.length?(i=p,u):i},u.quantiles=function(){return r.slice()},u.copy=function(){return t$().domain(e).range(t).unknown(i)},Oa.apply(u,arguments)}function r$(){var e=0,t=1,r=1,i=[.5],c=[0,1],u;function p(v){return v!=null&&v<=v?c[ky(i,v,0,r)]:u}function o(){var v=-1;for(i=new Array(r);++v<r;)i[v]=((v+1)*t-(v-r)*e)/(r+1);return p}return p.domain=function(v){return arguments.length?([e,t]=v,e=+e,t=+t,o()):[e,t]},p.range=function(v){return arguments.length?(r=(c=Array.from(v)).length-1,o()):c.slice()},p.invertExtent=function(v){var w=c.indexOf(v);return w<0?[NaN,NaN]:w<1?[e,i[0]]:w>=r?[i[r-1],t]:[i[w-1],i[w]]},p.unknown=function(v){return arguments.length&&(u=v),p},p.thresholds=function(){return i.slice()},p.copy=function(){return r$().domain([e,t]).range(c).unknown(u)},Oa.apply(Zc(p),arguments)}function n$(){var e=[.5],t=[0,1],r,i=1;function c(u){return u!=null&&u<=u?t[ky(e,u,0,i)]:r}return c.domain=function(u){return arguments.length?(e=Array.from(u),i=Math.min(e.length,t.length-1),c):e.slice()},c.range=function(u){return arguments.length?(t=Array.from(u),i=Math.min(e.length,t.length-1),c):t.slice()},c.invertExtent=function(u){var p=t.indexOf(u);return[e[p-1],e[p]]},c.unknown=function(u){return arguments.length?(r=u,c):r},c.copy=function(){return n$().domain(e).range(t).unknown(r)},Oa.apply(c,arguments)}const C2=new Date,P2=new Date;function Ei(e,t,r,i){function c(u){return e(u=arguments.length===0?new Date:new Date(+u)),u}return c.floor=u=>(e(u=new Date(+u)),u),c.ceil=u=>(e(u=new Date(u-1)),t(u,1),e(u),u),c.round=u=>{const p=c(u),o=c.ceil(u);return u-p<o-u?p:o},c.offset=(u,p)=>(t(u=new Date(+u),p==null?1:Math.floor(p)),u),c.range=(u,p,o)=>{const v=[];if(u=c.ceil(u),o=o==null?1:Math.floor(o),!(u<p)||!(o>0))return v;let w;do v.push(w=new Date(+u)),t(u,o),e(u);while(w<u&&u<p);return v},c.filter=u=>Ei(p=>{if(p>=p)for(;e(p),!u(p);)p.setTime(p-1)},(p,o)=>{if(p>=p)if(o<0)for(;++o<=0;)for(;t(p,-1),!u(p););else for(;--o>=0;)for(;t(p,1),!u(p););}),r&&(c.count=(u,p)=>(C2.setTime(+u),P2.setTime(+p),e(C2),e(P2),Math.floor(r(C2,P2))),c.every=u=>(u=Math.floor(u),!isFinite(u)||!(u>0)?null:u>1?c.filter(i?p=>i(p)%u===0:p=>c.count(0,p)%u===0):c)),c}const wx=Ei(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);wx.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ei(t=>{t.setTime(Math.floor(t/e)*e)},(t,r)=>{t.setTime(+t+r*e)},(t,r)=>(r-t)/e):wx);wx.range;const ml=1e3,Ea=ml*60,gl=Ea*60,Pl=gl*24,dM=Pl*7,SR=Pl*30,I2=Pl*365,Yu=Ei(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*ml)},(e,t)=>(t-e)/ml,e=>e.getUTCSeconds());Yu.range;const pM=Ei(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ml)},(e,t)=>{e.setTime(+e+t*Ea)},(e,t)=>(t-e)/Ea,e=>e.getMinutes());pM.range;const mM=Ei(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Ea)},(e,t)=>(t-e)/Ea,e=>e.getUTCMinutes());mM.range;const gM=Ei(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ml-e.getMinutes()*Ea)},(e,t)=>{e.setTime(+e+t*gl)},(e,t)=>(t-e)/gl,e=>e.getHours());gM.range;const yM=Ei(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*gl)},(e,t)=>(t-e)/gl,e=>e.getUTCHours());yM.range;const Ry=Ei(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Ea)/Pl,e=>e.getDate()-1);Ry.range;const H1=Ei(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Pl,e=>e.getUTCDate()-1);H1.range;const i$=Ei(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/Pl,e=>Math.floor(e/Pl));i$.range;function ph(e){return Ei(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,r)=>{t.setDate(t.getDate()+r*7)},(t,r)=>(r-t-(r.getTimezoneOffset()-t.getTimezoneOffset())*Ea)/dM)}const Z1=ph(0),Sx=ph(1),tue=ph(2),rue=ph(3),Ad=ph(4),nue=ph(5),iue=ph(6);Z1.range;Sx.range;tue.range;rue.range;Ad.range;nue.range;iue.range;function mh(e){return Ei(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCDate(t.getUTCDate()+r*7)},(t,r)=>(r-t)/dM)}const X1=mh(0),Ex=mh(1),oue=mh(2),aue=mh(3),Md=mh(4),sue=mh(5),lue=mh(6);X1.range;Ex.range;oue.range;aue.range;Md.range;sue.range;lue.range;const _M=Ei(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());_M.range;const vM=Ei(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());vM.range;const Il=Ei(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());Il.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ei(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,r)=>{t.setFullYear(t.getFullYear()+r*e)});Il.range;const kl=Ei(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());kl.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ei(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,r)=>{t.setUTCFullYear(t.getUTCFullYear()+r*e)});kl.range;function o$(e,t,r,i,c,u){const p=[[Yu,1,ml],[Yu,5,5*ml],[Yu,15,15*ml],[Yu,30,30*ml],[u,1,Ea],[u,5,5*Ea],[u,15,15*Ea],[u,30,30*Ea],[c,1,gl],[c,3,3*gl],[c,6,6*gl],[c,12,12*gl],[i,1,Pl],[i,2,2*Pl],[r,1,dM],[t,1,SR],[t,3,3*SR],[e,1,I2]];function o(w,A,T){const P=A<w;P&&([w,A]=[A,w]);const $=T&&typeof T.range=="function"?T:v(w,A,T),L=$?$.range(w,+A+1):[];return P?L.reverse():L}function v(w,A,T){const P=Math.abs(A-w)/T,$=tM(([,,N])=>N).right(p,P);if($===p.length)return e.every(PE(w/I2,A/I2,T));if($===0)return wx.every(Math.max(PE(w,A,T),1));const[L,k]=p[P/p[$-1][2]<p[$][2]/P?$-1:$];return L.every(k)}return[o,v]}const[cue,uue]=o$(kl,vM,X1,i$,yM,mM),[hue,fue]=o$(Il,_M,Z1,Ry,gM,pM);function k2(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function O2(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Nm(e,t,r){return{y:e,m:t,d:r,H:0,M:0,S:0,L:0}}function due(e){var t=e.dateTime,r=e.date,i=e.time,c=e.periods,u=e.days,p=e.shortDays,o=e.months,v=e.shortMonths,w=jm(c),A=Um(c),T=jm(u),P=Um(u),$=jm(p),L=Um(p),k=jm(o),N=Um(o),R=jm(v),j=Um(v),D={a:kt,A:He,b:nt,B:gt,c:null,d:PR,e:PR,f:zue,g:Wue,G:Zue,H:Due,I:Rue,j:Lue,L:a$,m:Bue,M:$ue,p:xt,q:zt,Q:OR,s:DR,S:Fue,u:Nue,U:jue,V:Uue,w:Vue,W:Gue,x:null,X:null,y:que,Y:Hue,Z:Xue,"%":kR},G={a:Vt,A:Zt,b:hr,B:Tr,c:null,d:IR,e:IR,f:Que,g:che,G:hhe,H:Kue,I:Yue,j:Jue,L:l$,m:ehe,M:the,p:Rr,q:ir,Q:OR,s:DR,S:rhe,u:nhe,U:ihe,V:ohe,w:ahe,W:she,x:null,X:null,y:lhe,Y:uhe,Z:fhe,"%":kR},W={a:Me,A:Ce,b:qe,B:Ue,c:ut,d:MR,e:MR,f:Pue,g:AR,G:TR,H:CR,I:CR,j:Tue,L:Cue,m:Eue,M:Aue,p:xe,q:Sue,Q:kue,s:Oue,S:Mue,u:_ue,U:vue,V:xue,w:yue,W:bue,x:Be,X:bt,y:AR,Y:TR,Z:wue,"%":Iue};D.x=Y(r,D),D.X=Y(i,D),D.c=Y(t,D),G.x=Y(r,G),G.X=Y(i,G),G.c=Y(t,G);function Y(_t,Mt){return function(or){var Qe=[],lr=-1,Ot=0,Sr=_t.length,Lr,mn,Kn;for(or instanceof Date||(or=new Date(+or));++lr<Sr;)_t.charCodeAt(lr)===37&&(Qe.push(_t.slice(Ot,lr)),(mn=ER[Lr=_t.charAt(++lr)])!=null?Lr=_t.charAt(++lr):mn=Lr==="e"?" ":"0",(Kn=Mt[Lr])&&(Lr=Kn(or,mn)),Qe.push(Lr),Ot=lr+1);return Qe.push(_t.slice(Ot,lr)),Qe.join("")}}function ee(_t,Mt){return function(or){var Qe=Nm(1900,void 0,1),lr=de(Qe,_t,or+="",0),Ot,Sr;if(lr!=or.length)return null;if("Q"in Qe)return new Date(Qe.Q);if("s"in Qe)return new Date(Qe.s*1e3+("L"in Qe?Qe.L:0));if(Mt&&!("Z"in Qe)&&(Qe.Z=0),"p"in Qe&&(Qe.H=Qe.H%12+Qe.p*12),Qe.m===void 0&&(Qe.m="q"in Qe?Qe.q:0),"V"in Qe){if(Qe.V<1||Qe.V>53)return null;"w"in Qe||(Qe.w=1),"Z"in Qe?(Ot=O2(Nm(Qe.y,0,1)),Sr=Ot.getUTCDay(),Ot=Sr>4||Sr===0?Ex.ceil(Ot):Ex(Ot),Ot=H1.offset(Ot,(Qe.V-1)*7),Qe.y=Ot.getUTCFullYear(),Qe.m=Ot.getUTCMonth(),Qe.d=Ot.getUTCDate()+(Qe.w+6)%7):(Ot=k2(Nm(Qe.y,0,1)),Sr=Ot.getDay(),Ot=Sr>4||Sr===0?Sx.ceil(Ot):Sx(Ot),Ot=Ry.offset(Ot,(Qe.V-1)*7),Qe.y=Ot.getFullYear(),Qe.m=Ot.getMonth(),Qe.d=Ot.getDate()+(Qe.w+6)%7)}else("W"in Qe||"U"in Qe)&&("w"in Qe||(Qe.w="u"in Qe?Qe.u%7:"W"in Qe?1:0),Sr="Z"in Qe?O2(Nm(Qe.y,0,1)).getUTCDay():k2(Nm(Qe.y,0,1)).getDay(),Qe.m=0,Qe.d="W"in Qe?(Qe.w+6)%7+Qe.W*7-(Sr+5)%7:Qe.w+Qe.U*7-(Sr+6)%7);return"Z"in Qe?(Qe.H+=Qe.Z/100|0,Qe.M+=Qe.Z%100,O2(Qe)):k2(Qe)}}function de(_t,Mt,or,Qe){for(var lr=0,Ot=Mt.length,Sr=or.length,Lr,mn;lr<Ot;){if(Qe>=Sr)return-1;if(Lr=Mt.charCodeAt(lr++),Lr===37){if(Lr=Mt.charAt(lr++),mn=W[Lr in ER?Mt.charAt(lr++):Lr],!mn||(Qe=mn(_t,or,Qe))<0)return-1}else if(Lr!=or.charCodeAt(Qe++))return-1}return Qe}function xe(_t,Mt,or){var Qe=w.exec(Mt.slice(or));return Qe?(_t.p=A.get(Qe[0].toLowerCase()),or+Qe[0].length):-1}function Me(_t,Mt,or){var Qe=$.exec(Mt.slice(or));return Qe?(_t.w=L.get(Qe[0].toLowerCase()),or+Qe[0].length):-1}function Ce(_t,Mt,or){var Qe=T.exec(Mt.slice(or));return Qe?(_t.w=P.get(Qe[0].toLowerCase()),or+Qe[0].length):-1}function qe(_t,Mt,or){var Qe=R.exec(Mt.slice(or));return Qe?(_t.m=j.get(Qe[0].toLowerCase()),or+Qe[0].length):-1}function Ue(_t,Mt,or){var Qe=k.exec(Mt.slice(or));return Qe?(_t.m=N.get(Qe[0].toLowerCase()),or+Qe[0].length):-1}function ut(_t,Mt,or){return de(_t,t,Mt,or)}function Be(_t,Mt,or){return de(_t,r,Mt,or)}function bt(_t,Mt,or){return de(_t,i,Mt,or)}function kt(_t){return p[_t.getDay()]}function He(_t){return u[_t.getDay()]}function nt(_t){return v[_t.getMonth()]}function gt(_t){return o[_t.getMonth()]}function xt(_t){return c[+(_t.getHours()>=12)]}function zt(_t){return 1+~~(_t.getMonth()/3)}function Vt(_t){return p[_t.getUTCDay()]}function Zt(_t){return u[_t.getUTCDay()]}function hr(_t){return v[_t.getUTCMonth()]}function Tr(_t){return o[_t.getUTCMonth()]}function Rr(_t){return c[+(_t.getUTCHours()>=12)]}function ir(_t){return 1+~~(_t.getUTCMonth()/3)}return{format:function(_t){var Mt=Y(_t+="",D);return Mt.toString=function(){return _t},Mt},parse:function(_t){var Mt=ee(_t+="",!1);return Mt.toString=function(){return _t},Mt},utcFormat:function(_t){var Mt=Y(_t+="",G);return Mt.toString=function(){return _t},Mt},utcParse:function(_t){var Mt=ee(_t+="",!0);return Mt.toString=function(){return _t},Mt}}}var ER={"-":"",_:" ",0:"0"},Fi=/^\s*\d+/,pue=/^%/,mue=/[\\^$*+?|[\]().{}]/g;function tn(e,t,r){var i=e<0?"-":"",c=(i?-e:e)+"",u=c.length;return i+(u<r?new Array(r-u+1).join(t)+c:c)}function gue(e){return e.replace(mue,"\\$&")}function jm(e){return new RegExp("^(?:"+e.map(gue).join("|")+")","i")}function Um(e){return new Map(e.map((t,r)=>[t.toLowerCase(),r]))}function yue(e,t,r){var i=Fi.exec(t.slice(r,r+1));return i?(e.w=+i[0],r+i[0].length):-1}function _ue(e,t,r){var i=Fi.exec(t.slice(r,r+1));return i?(e.u=+i[0],r+i[0].length):-1}function vue(e,t,r){var i=Fi.exec(t.slice(r,r+2));return i?(e.U=+i[0],r+i[0].length):-1}function xue(e,t,r){var i=Fi.exec(t.slice(r,r+2));return i?(e.V=+i[0],r+i[0].length):-1}function bue(e,t,r){var i=Fi.exec(t.slice(r,r+2));return i?(e.W=+i[0],r+i[0].length):-1}function TR(e,t,r){var i=Fi.exec(t.slice(r,r+4));return i?(e.y=+i[0],r+i[0].length):-1}function AR(e,t,r){var i=Fi.exec(t.slice(r,r+2));return i?(e.y=+i[0]+(+i[0]>68?1900:2e3),r+i[0].length):-1}function wue(e,t,r){var i=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(r,r+6));return i?(e.Z=i[1]?0:-(i[2]+(i[3]||"00")),r+i[0].length):-1}function Sue(e,t,r){var i=Fi.exec(t.slice(r,r+1));return i?(e.q=i[0]*3-3,r+i[0].length):-1}function Eue(e,t,r){var i=Fi.exec(t.slice(r,r+2));return i?(e.m=i[0]-1,r+i[0].length):-1}function MR(e,t,r){var i=Fi.exec(t.slice(r,r+2));return i?(e.d=+i[0],r+i[0].length):-1}function Tue(e,t,r){var i=Fi.exec(t.slice(r,r+3));return i?(e.m=0,e.d=+i[0],r+i[0].length):-1}function CR(e,t,r){var i=Fi.exec(t.slice(r,r+2));return i?(e.H=+i[0],r+i[0].length):-1}function Aue(e,t,r){var i=Fi.exec(t.slice(r,r+2));return i?(e.M=+i[0],r+i[0].length):-1}function Mue(e,t,r){var i=Fi.exec(t.slice(r,r+2));return i?(e.S=+i[0],r+i[0].length):-1}function Cue(e,t,r){var i=Fi.exec(t.slice(r,r+3));return i?(e.L=+i[0],r+i[0].length):-1}function Pue(e,t,r){var i=Fi.exec(t.slice(r,r+6));return i?(e.L=Math.floor(i[0]/1e3),r+i[0].length):-1}function Iue(e,t,r){var i=pue.exec(t.slice(r,r+1));return i?r+i[0].length:-1}function kue(e,t,r){var i=Fi.exec(t.slice(r));return i?(e.Q=+i[0],r+i[0].length):-1}function Oue(e,t,r){var i=Fi.exec(t.slice(r));return i?(e.s=+i[0],r+i[0].length):-1}function PR(e,t){return tn(e.getDate(),t,2)}function Due(e,t){return tn(e.getHours(),t,2)}function Rue(e,t){return tn(e.getHours()%12||12,t,2)}function Lue(e,t){return tn(1+Ry.count(Il(e),e),t,3)}function a$(e,t){return tn(e.getMilliseconds(),t,3)}function zue(e,t){return a$(e,t)+"000"}function Bue(e,t){return tn(e.getMonth()+1,t,2)}function $ue(e,t){return tn(e.getMinutes(),t,2)}function Fue(e,t){return tn(e.getSeconds(),t,2)}function Nue(e){var t=e.getDay();return t===0?7:t}function jue(e,t){return tn(Z1.count(Il(e)-1,e),t,2)}function s$(e){var t=e.getDay();return t>=4||t===0?Ad(e):Ad.ceil(e)}function Uue(e,t){return e=s$(e),tn(Ad.count(Il(e),e)+(Il(e).getDay()===4),t,2)}function Vue(e){return e.getDay()}function Gue(e,t){return tn(Sx.count(Il(e)-1,e),t,2)}function que(e,t){return tn(e.getFullYear()%100,t,2)}function Wue(e,t){return e=s$(e),tn(e.getFullYear()%100,t,2)}function Hue(e,t){return tn(e.getFullYear()%1e4,t,4)}function Zue(e,t){var r=e.getDay();return e=r>=4||r===0?Ad(e):Ad.ceil(e),tn(e.getFullYear()%1e4,t,4)}function Xue(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+tn(t/60|0,"0",2)+tn(t%60,"0",2)}function IR(e,t){return tn(e.getUTCDate(),t,2)}function Kue(e,t){return tn(e.getUTCHours(),t,2)}function Yue(e,t){return tn(e.getUTCHours()%12||12,t,2)}function Jue(e,t){return tn(1+H1.count(kl(e),e),t,3)}function l$(e,t){return tn(e.getUTCMilliseconds(),t,3)}function Que(e,t){return l$(e,t)+"000"}function ehe(e,t){return tn(e.getUTCMonth()+1,t,2)}function the(e,t){return tn(e.getUTCMinutes(),t,2)}function rhe(e,t){return tn(e.getUTCSeconds(),t,2)}function nhe(e){var t=e.getUTCDay();return t===0?7:t}function ihe(e,t){return tn(X1.count(kl(e)-1,e),t,2)}function c$(e){var t=e.getUTCDay();return t>=4||t===0?Md(e):Md.ceil(e)}function ohe(e,t){return e=c$(e),tn(Md.count(kl(e),e)+(kl(e).getUTCDay()===4),t,2)}function ahe(e){return e.getUTCDay()}function she(e,t){return tn(Ex.count(kl(e)-1,e),t,2)}function lhe(e,t){return tn(e.getUTCFullYear()%100,t,2)}function che(e,t){return e=c$(e),tn(e.getUTCFullYear()%100,t,2)}function uhe(e,t){return tn(e.getUTCFullYear()%1e4,t,4)}function hhe(e,t){var r=e.getUTCDay();return e=r>=4||r===0?Md(e):Md.ceil(e),tn(e.getUTCFullYear()%1e4,t,4)}function fhe(){return"+0000"}function kR(){return"%"}function OR(e){return+e}function DR(e){return Math.floor(+e/1e3)}var Af,u$,h$;dhe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function dhe(e){return Af=due(e),u$=Af.format,Af.parse,h$=Af.utcFormat,Af.utcParse,Af}function phe(e){return new Date(e)}function mhe(e){return e instanceof Date?+e:+new Date(+e)}function xM(e,t,r,i,c,u,p,o,v,w){var A=aM(),T=A.invert,P=A.domain,$=w(".%L"),L=w(":%S"),k=w("%I:%M"),N=w("%I %p"),R=w("%a %d"),j=w("%b %d"),D=w("%B"),G=w("%Y");function W(Y){return(v(Y)<Y?$:o(Y)<Y?L:p(Y)<Y?k:u(Y)<Y?N:i(Y)<Y?c(Y)<Y?R:j:r(Y)<Y?D:G)(Y)}return A.invert=function(Y){return new Date(T(Y))},A.domain=function(Y){return arguments.length?P(Array.from(Y,mhe)):P().map(phe)},A.ticks=function(Y){var ee=P();return e(ee[0],ee[ee.length-1],Y??10)},A.tickFormat=function(Y,ee){return ee==null?W:w(ee)},A.nice=function(Y){var ee=P();return(!Y||typeof Y.range!="function")&&(Y=t(ee[0],ee[ee.length-1],Y??10)),Y?P(Y4(ee,Y)):A},A.copy=function(){return Dy(A,xM(e,t,r,i,c,u,p,o,v,w))},A}function ghe(){return Oa.apply(xM(hue,fue,Il,_M,Z1,Ry,gM,pM,Yu,u$).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function yhe(){return Oa.apply(xM(cue,uue,kl,vM,X1,H1,yM,mM,Yu,h$).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function K1(){var e=0,t=1,r,i,c,u,p=xo,o=!1,v;function w(T){return T==null||isNaN(T=+T)?v:p(c===0?.5:(T=(u(T)-r)*c,o?Math.max(0,Math.min(1,T)):T))}w.domain=function(T){return arguments.length?([e,t]=T,r=u(e=+e),i=u(t=+t),c=r===i?0:1/(i-r),w):[e,t]},w.clamp=function(T){return arguments.length?(o=!!T,w):o},w.interpolator=function(T){return arguments.length?(p=T,w):p};function A(T){return function(P){var $,L;return arguments.length?([$,L]=P,p=T($,L),w):[p(0),p(1)]}}return w.range=A(Jd),w.rangeRound=A(oM),w.unknown=function(T){return arguments.length?(v=T,w):v},function(T){return u=T,r=T(e),i=T(t),c=r===i?0:1/(i-r),w}}function Xc(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function f$(){var e=Zc(K1()(xo));return e.copy=function(){return Xc(e,f$())},Ll.apply(e,arguments)}function d$(){var e=cM(K1()).domain([1,10]);return e.copy=function(){return Xc(e,d$()).base(e.base())},Ll.apply(e,arguments)}function p$(){var e=uM(K1());return e.copy=function(){return Xc(e,p$()).constant(e.constant())},Ll.apply(e,arguments)}function bM(){var e=hM(K1());return e.copy=function(){return Xc(e,bM()).exponent(e.exponent())},Ll.apply(e,arguments)}function _he(){return bM.apply(null,arguments).exponent(.5)}function m$(){var e=[],t=xo;function r(i){if(i!=null&&!isNaN(i=+i))return t((ky(e,i,1)-1)/(e.length-1))}return r.domain=function(i){if(!arguments.length)return e.slice();e=[];for(let c of i)c!=null&&!isNaN(c=+c)&&e.push(c);return e.sort(zc),r},r.interpolator=function(i){return arguments.length?(t=i,r):t},r.range=function(){return e.map((i,c)=>t(c/(e.length-1)))},r.quantiles=function(i){return Array.from({length:i+1},(c,u)=>ice(e,u/i))},r.copy=function(){return m$(t).domain(e)},Ll.apply(r,arguments)}function Y1(){var e=0,t=.5,r=1,i=1,c,u,p,o,v,w=xo,A,T=!1,P;function $(k){return isNaN(k=+k)?P:(k=.5+((k=+A(k))-u)*(i*k<i*u?o:v),w(T?Math.max(0,Math.min(1,k)):k))}$.domain=function(k){return arguments.length?([e,t,r]=k,c=A(e=+e),u=A(t=+t),p=A(r=+r),o=c===u?0:.5/(u-c),v=u===p?0:.5/(p-u),i=u<c?-1:1,$):[e,t,r]},$.clamp=function(k){return arguments.length?(T=!!k,$):T},$.interpolator=function(k){return arguments.length?(w=k,$):w};function L(k){return function(N){var R,j,D;return arguments.length?([R,j,D]=N,w=Ice(k,[R,j,D]),$):[w(0),w(.5),w(1)]}}return $.range=L(Jd),$.rangeRound=L(oM),$.unknown=function(k){return arguments.length?(P=k,$):P},function(k){return A=k,c=k(e),u=k(t),p=k(r),o=c===u?0:.5/(u-c),v=u===p?0:.5/(p-u),i=u<c?-1:1,$}}function g$(){var e=Zc(Y1()(xo));return e.copy=function(){return Xc(e,g$())},Ll.apply(e,arguments)}function y$(){var e=cM(Y1()).domain([.1,1,10]);return e.copy=function(){return Xc(e,y$()).base(e.base())},Ll.apply(e,arguments)}function _$(){var e=uM(Y1());return e.copy=function(){return Xc(e,_$()).constant(e.constant())},Ll.apply(e,arguments)}function wM(){var e=hM(Y1());return e.copy=function(){return Xc(e,wM()).exponent(e.exponent())},Ll.apply(e,arguments)}function vhe(){return wM.apply(null,arguments).exponent(.5)}const RR=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Wg,scaleDiverging:g$,scaleDivergingLog:y$,scaleDivergingPow:wM,scaleDivergingSqrt:vhe,scaleDivergingSymlog:_$,scaleIdentity:K4,scaleImplicit:IE,scaleLinear:bx,scaleLog:J4,scaleOrdinal:rM,scalePoint:dg,scalePow:fM,scaleQuantile:t$,scaleQuantize:r$,scaleRadial:e$,scaleSequential:f$,scaleSequentialLog:d$,scaleSequentialPow:bM,scaleSequentialQuantile:m$,scaleSequentialSqrt:_he,scaleSequentialSymlog:p$,scaleSqrt:Qce,scaleSymlog:Q4,scaleThreshold:n$,scaleTime:ghe,scaleUtc:yhe,tickFormat:X4},Symbol.toStringTag,{value:"Module"}));var Qd=1e9,xhe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},EM,jn=!0,ka="[DecimalError] ",nh=ka+"Invalid argument: ",SM=ka+"Exponent out of range: ",ep=Math.floor,Gu=Math.pow,bhe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Jo,Li=1e7,Dn=7,v$=9007199254740991,Tx=ep(v$/Dn),Ht={};Ht.absoluteValue=Ht.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Ht.comparedTo=Ht.cmp=function(e){var t,r,i,c,u=this;if(e=new u.constructor(e),u.s!==e.s)return u.s||-e.s;if(u.e!==e.e)return u.e>e.e^u.s<0?1:-1;for(i=u.d.length,c=e.d.length,t=0,r=i<c?i:c;t<r;++t)if(u.d[t]!==e.d[t])return u.d[t]>e.d[t]^u.s<0?1:-1;return i===c?0:i>c^u.s<0?1:-1};Ht.decimalPlaces=Ht.dp=function(){var e=this,t=e.d.length-1,r=(t-e.e)*Dn;if(t=e.d[t],t)for(;t%10==0;t/=10)r--;return r<0?0:r};Ht.dividedBy=Ht.div=function(e){return wl(this,new this.constructor(e))};Ht.dividedToIntegerBy=Ht.idiv=function(e){var t=this,r=t.constructor;return En(wl(t,new r(e),0,1),r.precision)};Ht.equals=Ht.eq=function(e){return!this.cmp(e)};Ht.exponent=function(){return hi(this)};Ht.greaterThan=Ht.gt=function(e){return this.cmp(e)>0};Ht.greaterThanOrEqualTo=Ht.gte=function(e){return this.cmp(e)>=0};Ht.isInteger=Ht.isint=function(){return this.e>this.d.length-2};Ht.isNegative=Ht.isneg=function(){return this.s<0};Ht.isPositive=Ht.ispos=function(){return this.s>0};Ht.isZero=function(){return this.s===0};Ht.lessThan=Ht.lt=function(e){return this.cmp(e)<0};Ht.lessThanOrEqualTo=Ht.lte=function(e){return this.cmp(e)<1};Ht.logarithm=Ht.log=function(e){var t,r=this,i=r.constructor,c=i.precision,u=c+5;if(e===void 0)e=new i(10);else if(e=new i(e),e.s<1||e.eq(Jo))throw Error(ka+"NaN");if(r.s<1)throw Error(ka+(r.s?"NaN":"-Infinity"));return r.eq(Jo)?new i(0):(jn=!1,t=wl(Yg(r,u),Yg(e,u),u),jn=!0,En(t,c))};Ht.minus=Ht.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?w$(t,e):x$(t,(e.s=-e.s,e))};Ht.modulo=Ht.mod=function(e){var t,r=this,i=r.constructor,c=i.precision;if(e=new i(e),!e.s)throw Error(ka+"NaN");return r.s?(jn=!1,t=wl(r,e,0,1).times(e),jn=!0,r.minus(t)):En(new i(r),c)};Ht.naturalExponential=Ht.exp=function(){return b$(this)};Ht.naturalLogarithm=Ht.ln=function(){return Yg(this)};Ht.negated=Ht.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Ht.plus=Ht.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?x$(t,e):w$(t,(e.s=-e.s,e))};Ht.precision=Ht.sd=function(e){var t,r,i,c=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(nh+e);if(t=hi(c)+1,i=c.d.length-1,r=i*Dn+1,i=c.d[i],i){for(;i%10==0;i/=10)r--;for(i=c.d[0];i>=10;i/=10)r++}return e&&t>r?t:r};Ht.squareRoot=Ht.sqrt=function(){var e,t,r,i,c,u,p,o=this,v=o.constructor;if(o.s<1){if(!o.s)return new v(0);throw Error(ka+"NaN")}for(e=hi(o),jn=!1,c=Math.sqrt(+o),c==0||c==1/0?(t=Ls(o.d),(t.length+e)%2==0&&(t+="0"),c=Math.sqrt(t),e=ep((e+1)/2)-(e<0||e%2),c==1/0?t="5e"+e:(t=c.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),i=new v(t)):i=new v(c.toString()),r=v.precision,c=p=r+3;;)if(u=i,i=u.plus(wl(o,u,p+2)).times(.5),Ls(u.d).slice(0,p)===(t=Ls(i.d)).slice(0,p)){if(t=t.slice(p-3,p+1),c==p&&t=="4999"){if(En(u,r+1,0),u.times(u).eq(o)){i=u;break}}else if(t!="9999")break;p+=4}return jn=!0,En(i,r)};Ht.times=Ht.mul=function(e){var t,r,i,c,u,p,o,v,w,A=this,T=A.constructor,P=A.d,$=(e=new T(e)).d;if(!A.s||!e.s)return new T(0);for(e.s*=A.s,r=A.e+e.e,v=P.length,w=$.length,v<w&&(u=P,P=$,$=u,p=v,v=w,w=p),u=[],p=v+w,i=p;i--;)u.push(0);for(i=w;--i>=0;){for(t=0,c=v+i;c>i;)o=u[c]+$[i]*P[c-i-1]+t,u[c--]=o%Li|0,t=o/Li|0;u[c]=(u[c]+t)%Li|0}for(;!u[--p];)u.pop();return t?++r:u.shift(),e.d=u,e.e=r,jn?En(e,T.precision):e};Ht.toDecimalPlaces=Ht.todp=function(e,t){var r=this,i=r.constructor;return r=new i(r),e===void 0?r:(js(e,0,Qd),t===void 0?t=i.rounding:js(t,0,8),En(r,e+hi(r)+1,t))};Ht.toExponential=function(e,t){var r,i=this,c=i.constructor;return e===void 0?r=uh(i,!0):(js(e,0,Qd),t===void 0?t=c.rounding:js(t,0,8),i=En(new c(i),e+1,t),r=uh(i,!0,e+1)),r};Ht.toFixed=function(e,t){var r,i,c=this,u=c.constructor;return e===void 0?uh(c):(js(e,0,Qd),t===void 0?t=u.rounding:js(t,0,8),i=En(new u(c),e+hi(c)+1,t),r=uh(i.abs(),!1,e+hi(i)+1),c.isneg()&&!c.isZero()?"-"+r:r)};Ht.toInteger=Ht.toint=function(){var e=this,t=e.constructor;return En(new t(e),hi(e)+1,t.rounding)};Ht.toNumber=function(){return+this};Ht.toPower=Ht.pow=function(e){var t,r,i,c,u,p,o=this,v=o.constructor,w=12,A=+(e=new v(e));if(!e.s)return new v(Jo);if(o=new v(o),!o.s){if(e.s<1)throw Error(ka+"Infinity");return o}if(o.eq(Jo))return o;if(i=v.precision,e.eq(Jo))return En(o,i);if(t=e.e,r=e.d.length-1,p=t>=r,u=o.s,p){if((r=A<0?-A:A)<=v$){for(c=new v(Jo),t=Math.ceil(i/Dn+4),jn=!1;r%2&&(c=c.times(o),zR(c.d,t)),r=ep(r/2),r!==0;)o=o.times(o),zR(o.d,t);return jn=!0,e.s<0?new v(Jo).div(c):En(c,i)}}else if(u<0)throw Error(ka+"NaN");return u=u<0&&e.d[Math.max(t,r)]&1?-1:1,o.s=1,jn=!1,c=e.times(Yg(o,i+w)),jn=!0,c=b$(c),c.s=u,c};Ht.toPrecision=function(e,t){var r,i,c=this,u=c.constructor;return e===void 0?(r=hi(c),i=uh(c,r<=u.toExpNeg||r>=u.toExpPos)):(js(e,1,Qd),t===void 0?t=u.rounding:js(t,0,8),c=En(new u(c),e,t),r=hi(c),i=uh(c,e<=r||r<=u.toExpNeg,e)),i};Ht.toSignificantDigits=Ht.tosd=function(e,t){var r=this,i=r.constructor;return e===void 0?(e=i.precision,t=i.rounding):(js(e,1,Qd),t===void 0?t=i.rounding:js(t,0,8)),En(new i(r),e,t)};Ht.toString=Ht.valueOf=Ht.val=Ht.toJSON=Ht[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=hi(e),r=e.constructor;return uh(e,t<=r.toExpNeg||t>=r.toExpPos)};function x$(e,t){var r,i,c,u,p,o,v,w,A=e.constructor,T=A.precision;if(!e.s||!t.s)return t.s||(t=new A(e)),jn?En(t,T):t;if(v=e.d,w=t.d,p=e.e,c=t.e,v=v.slice(),u=p-c,u){for(u<0?(i=v,u=-u,o=w.length):(i=w,c=p,o=v.length),p=Math.ceil(T/Dn),o=p>o?p+1:o+1,u>o&&(u=o,i.length=1),i.reverse();u--;)i.push(0);i.reverse()}for(o=v.length,u=w.length,o-u<0&&(u=o,i=w,w=v,v=i),r=0;u;)r=(v[--u]=v[u]+w[u]+r)/Li|0,v[u]%=Li;for(r&&(v.unshift(r),++c),o=v.length;v[--o]==0;)v.pop();return t.d=v,t.e=c,jn?En(t,T):t}function js(e,t,r){if(e!==~~e||e<t||e>r)throw Error(nh+e)}function Ls(e){var t,r,i,c=e.length-1,u="",p=e[0];if(c>0){for(u+=p,t=1;t<c;t++)i=e[t]+"",r=Dn-i.length,r&&(u+=bc(r)),u+=i;p=e[t],i=p+"",r=Dn-i.length,r&&(u+=bc(r))}else if(p===0)return"0";for(;p%10===0;)p/=10;return u+p}var wl=function(){function e(i,c){var u,p=0,o=i.length;for(i=i.slice();o--;)u=i[o]*c+p,i[o]=u%Li|0,p=u/Li|0;return p&&i.unshift(p),i}function t(i,c,u,p){var o,v;if(u!=p)v=u>p?1:-1;else for(o=v=0;o<u;o++)if(i[o]!=c[o]){v=i[o]>c[o]?1:-1;break}return v}function r(i,c,u){for(var p=0;u--;)i[u]-=p,p=i[u]<c[u]?1:0,i[u]=p*Li+i[u]-c[u];for(;!i[0]&&i.length>1;)i.shift()}return function(i,c,u,p){var o,v,w,A,T,P,$,L,k,N,R,j,D,G,W,Y,ee,de,xe=i.constructor,Me=i.s==c.s?1:-1,Ce=i.d,qe=c.d;if(!i.s)return new xe(i);if(!c.s)throw Error(ka+"Division by zero");for(v=i.e-c.e,ee=qe.length,W=Ce.length,$=new xe(Me),L=$.d=[],w=0;qe[w]==(Ce[w]||0);)++w;if(qe[w]>(Ce[w]||0)&&--v,u==null?j=u=xe.precision:p?j=u+(hi(i)-hi(c))+1:j=u,j<0)return new xe(0);if(j=j/Dn+2|0,w=0,ee==1)for(A=0,qe=qe[0],j++;(w<W||A)&&j--;w++)D=A*Li+(Ce[w]||0),L[w]=D/qe|0,A=D%qe|0;else{for(A=Li/(qe[0]+1)|0,A>1&&(qe=e(qe,A),Ce=e(Ce,A),ee=qe.length,W=Ce.length),G=ee,k=Ce.slice(0,ee),N=k.length;N<ee;)k[N++]=0;de=qe.slice(),de.unshift(0),Y=qe[0],qe[1]>=Li/2&&++Y;do A=0,o=t(qe,k,ee,N),o<0?(R=k[0],ee!=N&&(R=R*Li+(k[1]||0)),A=R/Y|0,A>1?(A>=Li&&(A=Li-1),T=e(qe,A),P=T.length,N=k.length,o=t(T,k,P,N),o==1&&(A--,r(T,ee<P?de:qe,P))):(A==0&&(o=A=1),T=qe.slice()),P=T.length,P<N&&T.unshift(0),r(k,T,N),o==-1&&(N=k.length,o=t(qe,k,ee,N),o<1&&(A++,r(k,ee<N?de:qe,N))),N=k.length):o===0&&(A++,k=[0]),L[w++]=A,o&&k[0]?k[N++]=Ce[G]||0:(k=[Ce[G]],N=1);while((G++<W||k[0]!==void 0)&&j--)}return L[0]||L.shift(),$.e=v,En($,p?u+hi($)+1:u)}}();function b$(e,t){var r,i,c,u,p,o,v=0,w=0,A=e.constructor,T=A.precision;if(hi(e)>16)throw Error(SM+hi(e));if(!e.s)return new A(Jo);for(t==null?(jn=!1,o=T):o=t,p=new A(.03125);e.abs().gte(.1);)e=e.times(p),w+=5;for(i=Math.log(Gu(2,w))/Math.LN10*2+5|0,o+=i,r=c=u=new A(Jo),A.precision=o;;){if(c=En(c.times(e),o),r=r.times(++v),p=u.plus(wl(c,r,o)),Ls(p.d).slice(0,o)===Ls(u.d).slice(0,o)){for(;w--;)u=En(u.times(u),o);return A.precision=T,t==null?(jn=!0,En(u,T)):u}u=p}}function hi(e){for(var t=e.e*Dn,r=e.d[0];r>=10;r/=10)t++;return t}function D2(e,t,r){if(t>e.LN10.sd())throw jn=!0,r&&(e.precision=r),Error(ka+"LN10 precision limit exceeded");return En(new e(e.LN10),t)}function bc(e){for(var t="";e--;)t+="0";return t}function Yg(e,t){var r,i,c,u,p,o,v,w,A,T=1,P=10,$=e,L=$.d,k=$.constructor,N=k.precision;if($.s<1)throw Error(ka+($.s?"NaN":"-Infinity"));if($.eq(Jo))return new k(0);if(t==null?(jn=!1,w=N):w=t,$.eq(10))return t==null&&(jn=!0),D2(k,w);if(w+=P,k.precision=w,r=Ls(L),i=r.charAt(0),u=hi($),Math.abs(u)<15e14){for(;i<7&&i!=1||i==1&&r.charAt(1)>3;)$=$.times(e),r=Ls($.d),i=r.charAt(0),T++;u=hi($),i>1?($=new k("0."+r),u++):$=new k(i+"."+r.slice(1))}else return v=D2(k,w+2,N).times(u+""),$=Yg(new k(i+"."+r.slice(1)),w-P).plus(v),k.precision=N,t==null?(jn=!0,En($,N)):$;for(o=p=$=wl($.minus(Jo),$.plus(Jo),w),A=En($.times($),w),c=3;;){if(p=En(p.times(A),w),v=o.plus(wl(p,new k(c),w)),Ls(v.d).slice(0,w)===Ls(o.d).slice(0,w))return o=o.times(2),u!==0&&(o=o.plus(D2(k,w+2,N).times(u+""))),o=wl(o,new k(T),w),k.precision=N,t==null?(jn=!0,En(o,N)):o;o=v,c+=2}}function LR(e,t){var r,i,c;for((r=t.indexOf("."))>-1&&(t=t.replace(".","")),(i=t.search(/e/i))>0?(r<0&&(r=i),r+=+t.slice(i+1),t=t.substring(0,i)):r<0&&(r=t.length),i=0;t.charCodeAt(i)===48;)++i;for(c=t.length;t.charCodeAt(c-1)===48;)--c;if(t=t.slice(i,c),t){if(c-=i,r=r-i-1,e.e=ep(r/Dn),e.d=[],i=(r+1)%Dn,r<0&&(i+=Dn),i<c){for(i&&e.d.push(+t.slice(0,i)),c-=Dn;i<c;)e.d.push(+t.slice(i,i+=Dn));t=t.slice(i),i=Dn-t.length}else i-=c;for(;i--;)t+="0";if(e.d.push(+t),jn&&(e.e>Tx||e.e<-Tx))throw Error(SM+r)}else e.s=0,e.e=0,e.d=[0];return e}function En(e,t,r){var i,c,u,p,o,v,w,A,T=e.d;for(p=1,u=T[0];u>=10;u/=10)p++;if(i=t-p,i<0)i+=Dn,c=t,w=T[A=0];else{if(A=Math.ceil((i+1)/Dn),u=T.length,A>=u)return e;for(w=u=T[A],p=1;u>=10;u/=10)p++;i%=Dn,c=i-Dn+p}if(r!==void 0&&(u=Gu(10,p-c-1),o=w/u%10|0,v=t<0||T[A+1]!==void 0||w%u,v=r<4?(o||v)&&(r==0||r==(e.s<0?3:2)):o>5||o==5&&(r==4||v||r==6&&(i>0?c>0?w/Gu(10,p-c):0:T[A-1])%10&1||r==(e.s<0?8:7))),t<1||!T[0])return v?(u=hi(e),T.length=1,t=t-u-1,T[0]=Gu(10,(Dn-t%Dn)%Dn),e.e=ep(-t/Dn)||0):(T.length=1,T[0]=e.e=e.s=0),e;if(i==0?(T.length=A,u=1,A--):(T.length=A+1,u=Gu(10,Dn-i),T[A]=c>0?(w/Gu(10,p-c)%Gu(10,c)|0)*u:0),v)for(;;)if(A==0){(T[0]+=u)==Li&&(T[0]=1,++e.e);break}else{if(T[A]+=u,T[A]!=Li)break;T[A--]=0,u=1}for(i=T.length;T[--i]===0;)T.pop();if(jn&&(e.e>Tx||e.e<-Tx))throw Error(SM+hi(e));return e}function w$(e,t){var r,i,c,u,p,o,v,w,A,T,P=e.constructor,$=P.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new P(e),jn?En(t,$):t;if(v=e.d,T=t.d,i=t.e,w=e.e,v=v.slice(),p=w-i,p){for(A=p<0,A?(r=v,p=-p,o=T.length):(r=T,i=w,o=v.length),c=Math.max(Math.ceil($/Dn),o)+2,p>c&&(p=c,r.length=1),r.reverse(),c=p;c--;)r.push(0);r.reverse()}else{for(c=v.length,o=T.length,A=c<o,A&&(o=c),c=0;c<o;c++)if(v[c]!=T[c]){A=v[c]<T[c];break}p=0}for(A&&(r=v,v=T,T=r,t.s=-t.s),o=v.length,c=T.length-o;c>0;--c)v[o++]=0;for(c=T.length;c>p;){if(v[--c]<T[c]){for(u=c;u&&v[--u]===0;)v[u]=Li-1;--v[u],v[c]+=Li}v[c]-=T[c]}for(;v[--o]===0;)v.pop();for(;v[0]===0;v.shift())--i;return v[0]?(t.d=v,t.e=i,jn?En(t,$):t):new P(0)}function uh(e,t,r){var i,c=hi(e),u=Ls(e.d),p=u.length;return t?(r&&(i=r-p)>0?u=u.charAt(0)+"."+u.slice(1)+bc(i):p>1&&(u=u.charAt(0)+"."+u.slice(1)),u=u+(c<0?"e":"e+")+c):c<0?(u="0."+bc(-c-1)+u,r&&(i=r-p)>0&&(u+=bc(i))):c>=p?(u+=bc(c+1-p),r&&(i=r-c-1)>0&&(u=u+"."+bc(i))):((i=c+1)<p&&(u=u.slice(0,i)+"."+u.slice(i)),r&&(i=r-p)>0&&(c+1===p&&(u+="."),u+=bc(i))),e.s<0?"-"+u:u}function zR(e,t){if(e.length>t)return e.length=t,!0}function S$(e){var t,r,i;function c(u){var p=this;if(!(p instanceof c))return new c(u);if(p.constructor=c,u instanceof c){p.s=u.s,p.e=u.e,p.d=(u=u.d)?u.slice():u;return}if(typeof u=="number"){if(u*0!==0)throw Error(nh+u);if(u>0)p.s=1;else if(u<0)u=-u,p.s=-1;else{p.s=0,p.e=0,p.d=[0];return}if(u===~~u&&u<1e7){p.e=0,p.d=[u];return}return LR(p,u.toString())}else if(typeof u!="string")throw Error(nh+u);if(u.charCodeAt(0)===45?(u=u.slice(1),p.s=-1):p.s=1,bhe.test(u))LR(p,u);else throw Error(nh+u)}if(c.prototype=Ht,c.ROUND_UP=0,c.ROUND_DOWN=1,c.ROUND_CEIL=2,c.ROUND_FLOOR=3,c.ROUND_HALF_UP=4,c.ROUND_HALF_DOWN=5,c.ROUND_HALF_EVEN=6,c.ROUND_HALF_CEIL=7,c.ROUND_HALF_FLOOR=8,c.clone=S$,c.config=c.set=whe,e===void 0&&(e={}),e)for(i=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<i.length;)e.hasOwnProperty(r=i[t++])||(e[r]=this[r]);return c.config(e),c}function whe(e){if(!e||typeof e!="object")throw Error(ka+"Object expected");var t,r,i,c=["precision",1,Qd,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<c.length;t+=3)if((i=e[r=c[t]])!==void 0)if(ep(i)===i&&i>=c[t+1]&&i<=c[t+2])this[r]=i;else throw Error(nh+r+": "+i);if((i=e[r="LN10"])!==void 0)if(i==Math.LN10)this[r]=new this(i);else throw Error(nh+r+": "+i);return this}var EM=S$(xhe);Jo=new EM(1);const wn=EM;function She(e){return Mhe(e)||Ahe(e)||The(e)||Ehe()}function Ehe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function The(e,t){if(e){if(typeof e=="string")return RE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return RE(e,t)}}function Ahe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Mhe(e){if(Array.isArray(e))return RE(e)}function RE(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}var Che=function(t){return t},E$={"@@functional/placeholder":!0},T$=function(t){return t===E$},BR=function(t){return function r(){return arguments.length===0||arguments.length===1&&T$(arguments.length<=0?void 0:arguments[0])?r:t.apply(void 0,arguments)}},Phe=function e(t,r){return t===1?r:BR(function(){for(var i=arguments.length,c=new Array(i),u=0;u<i;u++)c[u]=arguments[u];var p=c.filter(function(o){return o!==E$}).length;return p>=t?r.apply(void 0,c):e(t-p,BR(function(){for(var o=arguments.length,v=new Array(o),w=0;w<o;w++)v[w]=arguments[w];var A=c.map(function(T){return T$(T)?v.shift():T});return r.apply(void 0,She(A).concat(v))}))})},J1=function(t){return Phe(t.length,t)},LE=function(t,r){for(var i=[],c=t;c<r;++c)i[c-t]=c;return i},Ihe=J1(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(r){return t[r]}).map(e)}),khe=function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];if(!r.length)return Che;var c=r.reverse(),u=c[0],p=c.slice(1);return function(){return p.reduce(function(o,v){return v(o)},u.apply(void 0,arguments))}},zE=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},A$=function(t){var r=null,i=null;return function(){for(var c=arguments.length,u=new Array(c),p=0;p<c;p++)u[p]=arguments[p];return r&&u.every(function(o,v){return o===r[v]})||(r=u,i=t.apply(void 0,u)),i}};function Ohe(e){var t;return e===0?t=1:t=Math.floor(new wn(e).abs().log(10).toNumber())+1,t}function Dhe(e,t,r){for(var i=new wn(e),c=0,u=[];i.lt(t)&&c<1e5;)u.push(i.toNumber()),i=i.add(r),c++;return u}var Rhe=J1(function(e,t,r){var i=+e,c=+t;return i+r*(c-i)}),Lhe=J1(function(e,t,r){var i=t-+e;return i=i||1/0,(r-e)/i}),zhe=J1(function(e,t,r){var i=t-+e;return i=i||1/0,Math.max(0,Math.min(1,(r-e)/i))});const Q1={rangeStep:Dhe,getDigitCount:Ohe,interpolateNumber:Rhe,uninterpolateNumber:Lhe,uninterpolateTruncation:zhe};function BE(e){return Fhe(e)||$he(e)||M$(e)||Bhe()}function Bhe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $he(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Fhe(e){if(Array.isArray(e))return $E(e)}function Jg(e,t){return Uhe(e)||jhe(e,t)||M$(e,t)||Nhe()}function Nhe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function M$(e,t){if(e){if(typeof e=="string")return $E(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $E(e,t)}}function $E(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function jhe(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var r=[],i=!0,c=!1,u=void 0;try{for(var p=e[Symbol.iterator](),o;!(i=(o=p.next()).done)&&(r.push(o.value),!(t&&r.length===t));i=!0);}catch(v){c=!0,u=v}finally{try{!i&&p.return!=null&&p.return()}finally{if(c)throw u}}return r}}function Uhe(e){if(Array.isArray(e))return e}function C$(e){var t=Jg(e,2),r=t[0],i=t[1],c=r,u=i;return r>i&&(c=i,u=r),[c,u]}function P$(e,t,r){if(e.lte(0))return new wn(0);var i=Q1.getDigitCount(e.toNumber()),c=new wn(10).pow(i),u=e.div(c),p=i!==1?.05:.1,o=new wn(Math.ceil(u.div(p).toNumber())).add(r).mul(p),v=o.mul(c);return t?v:new wn(Math.ceil(v))}function Vhe(e,t,r){var i=1,c=new wn(e);if(!c.isint()&&r){var u=Math.abs(e);u<1?(i=new wn(10).pow(Q1.getDigitCount(e)-1),c=new wn(Math.floor(c.div(i).toNumber())).mul(i)):u>1&&(c=new wn(Math.floor(e)))}else e===0?c=new wn(Math.floor((t-1)/2)):r||(c=new wn(Math.floor(e)));var p=Math.floor((t-1)/2),o=khe(Ihe(function(v){return c.add(new wn(v-p).mul(i)).toNumber()}),LE);return o(0,t)}function I$(e,t,r,i){var c=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(r-1)))return{step:new wn(0),tickMin:new wn(0),tickMax:new wn(0)};var u=P$(new wn(t).sub(e).div(r-1),i,c),p;e<=0&&t>=0?p=new wn(0):(p=new wn(e).add(t).div(2),p=p.sub(new wn(p).mod(u)));var o=Math.ceil(p.sub(e).div(u).toNumber()),v=Math.ceil(new wn(t).sub(p).div(u).toNumber()),w=o+v+1;return w>r?I$(e,t,r,i,c+1):(w<r&&(v=t>0?v+(r-w):v,o=t>0?o:o+(r-w)),{step:u,tickMin:p.sub(new wn(o).mul(u)),tickMax:p.add(new wn(v).mul(u))})}function Ghe(e){var t=Jg(e,2),r=t[0],i=t[1],c=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,p=Math.max(c,2),o=C$([r,i]),v=Jg(o,2),w=v[0],A=v[1];if(w===-1/0||A===1/0){var T=A===1/0?[w].concat(BE(LE(0,c-1).map(function(){return 1/0}))):[].concat(BE(LE(0,c-1).map(function(){return-1/0})),[A]);return r>i?zE(T):T}if(w===A)return Vhe(w,c,u);var P=I$(w,A,p,u),$=P.step,L=P.tickMin,k=P.tickMax,N=Q1.rangeStep(L,k.add(new wn(.1).mul($)),$);return r>i?zE(N):N}function qhe(e,t){var r=Jg(e,2),i=r[0],c=r[1],u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,p=C$([i,c]),o=Jg(p,2),v=o[0],w=o[1];if(v===-1/0||w===1/0)return[i,c];if(v===w)return[v];var A=Math.max(t,2),T=P$(new wn(w).sub(v).div(A-1),u,0),P=[].concat(BE(Q1.rangeStep(new wn(v),new wn(w).sub(new wn(.99).mul(T)),T)),[w]);return i>c?zE(P):P}var Whe=A$(Ghe),Hhe=A$(qhe),Zhe=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Ax(){return Ax=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Ax.apply(this,arguments)}function Xhe(e,t){return Qhe(e)||Jhe(e,t)||Yhe(e,t)||Khe()}function Khe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Yhe(e,t){if(e){if(typeof e=="string")return $R(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return $R(e,t)}}function $R(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function Jhe(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,c,u,p,o=[],v=!0,w=!1;try{if(u=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;v=!1}else for(;!(v=(i=u.call(r)).done)&&(o.push(i.value),o.length!==t);v=!0);}catch(A){w=!0,c=A}finally{try{if(!v&&r.return!=null&&(p=r.return(),Object(p)!==p))return}finally{if(w)throw c}}return o}}function Qhe(e){if(Array.isArray(e))return e}function efe(e,t){if(e==null)return{};var r=tfe(e,t),i,c;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(c=0;c<u.length;c++)i=u[c],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function tfe(e,t){if(e==null)return{};var r={},i=Object.keys(e),c,u;for(u=0;u<i.length;u++)c=i[u],!(t.indexOf(c)>=0)&&(r[c]=e[c]);return r}function Ly(e){var t=e.offset,r=e.layout,i=e.width,c=e.dataKey,u=e.data,p=e.dataPointFormatter,o=e.xAxis,v=e.yAxis,w=efe(e,Zhe),A=en(w),T=u.map(function(P,$){var L=p(P,c),k=L.x,N=L.y,R=L.value,j=L.errorVal;if(!j)return null;var D=[],G,W;if(Array.isArray(j)){var Y=Xhe(j,2);G=Y[0],W=Y[1]}else G=W=j;if(r==="vertical"){var ee=o.scale,de=N+t,xe=de+i,Me=de-i,Ce=ee(R-G),qe=ee(R+W);D.push({x1:qe,y1:xe,x2:qe,y2:Me}),D.push({x1:Ce,y1:de,x2:qe,y2:de}),D.push({x1:Ce,y1:xe,x2:Ce,y2:Me})}else if(r==="horizontal"){var Ue=v.scale,ut=k+t,Be=ut-i,bt=ut+i,kt=Ue(R-G),He=Ue(R+W);D.push({x1:Be,y1:He,x2:bt,y2:He}),D.push({x1:ut,y1:kt,x2:ut,y2:He}),D.push({x1:Be,y1:kt,x2:bt,y2:kt})}return Ze.createElement(ui,Ax({className:"recharts-errorBar",key:"bar-".concat($)},A),D.map(function(nt,gt){return Ze.createElement("line",Ax({},nt,{key:"line-".concat(gt)}))}))});return Ze.createElement(ui,{className:"recharts-errorBars"},T)}Ly.defaultProps={stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"};Ly.displayName="ErrorBar";function Qg(e){return Qg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qg(e)}function FR(e){return ofe(e)||ife(e)||nfe(e)||rfe()}function rfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nfe(e,t){if(e){if(typeof e=="string")return FE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return FE(e,t)}}function ife(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ofe(e){if(Array.isArray(e))return FE(e)}function FE(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function NR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,i)}return r}function vo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?NR(Object(r),!0).forEach(function(i){nd(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):NR(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function nd(e,t,r){return t=afe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function afe(e){var t=sfe(e,"string");return Qg(t)==="symbol"?t:String(t)}function sfe(e,t){if(Qg(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(Qg(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function na(e,t,r){return ur(e)||ur(t)?r:wi(t)?Ma(e,t,r):gr(t)?t(e):r}function pg(e,t,r,i){var c=qle(e,function(o){return na(o,t)});if(r==="number"){var u=c.filter(function(o){return Rt(o)||parseFloat(o)});return u.length?[q1(u),G1(u)]:[1/0,-1/0]}var p=i?c.filter(function(o){return!ur(o)}):c;return p.map(function(o){return wi(o)||o instanceof Date?o:""})}var lfe=function(t){var r,i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],c=arguments.length>2?arguments[2]:void 0,u=arguments.length>3?arguments[3]:void 0,p=-1,o=(r=i==null?void 0:i.length)!==null&&r!==void 0?r:0;if(o<=1)return 0;if(u&&u.axisType==="angleAxis"&&Math.abs(Math.abs(u.range[1]-u.range[0])-360)<=1e-6)for(var v=u.range,w=0;w<o;w++){var A=w>0?c[w-1].coordinate:c[o-1].coordinate,T=c[w].coordinate,P=w>=o-1?c[0].coordinate:c[w+1].coordinate,$=void 0;if(Sa(T-A)!==Sa(P-T)){var L=[];if(Sa(P-T)===Sa(v[1]-v[0])){$=P;var k=T+v[1]-v[0];L[0]=Math.min(k,(k+A)/2),L[1]=Math.max(k,(k+A)/2)}else{$=A;var N=P+v[1]-v[0];L[0]=Math.min(T,(N+T)/2),L[1]=Math.max(T,(N+T)/2)}var R=[Math.min(T,($+T)/2),Math.max(T,($+T)/2)];if(t>R[0]&&t<=R[1]||t>=L[0]&&t<=L[1]){p=c[w].index;break}}else{var j=Math.min(A,P),D=Math.max(A,P);if(t>(j+T)/2&&t<=(D+T)/2){p=c[w].index;break}}}else for(var G=0;G<o;G++)if(G===0&&t<=(i[G].coordinate+i[G+1].coordinate)/2||G>0&&G<o-1&&t>(i[G].coordinate+i[G-1].coordinate)/2&&t<=(i[G].coordinate+i[G+1].coordinate)/2||G===o-1&&t>(i[G].coordinate+i[G-1].coordinate)/2){p=i[G].index;break}return p},TM=function(t){var r=t,i=r.type.displayName,c=t.props,u=c.stroke,p=c.fill,o;switch(i){case"Line":o=u;break;case"Area":case"Radar":o=u&&u!=="none"?u:p;break;default:o=p;break}return o},k$=function(t){var r=t.children,i=t.formattedGraphicalItems,c=t.legendWidth,u=t.legendContent,p=pl(r,bd);if(!p)return null;var o;return p.props&&p.props.payload?o=p.props&&p.props.payload:u==="children"?o=(i||[]).reduce(function(v,w){var A=w.item,T=w.props,P=T.sectors||T.data||[];return v.concat(P.map(function($){return{type:p.props.iconType||A.props.legendType,value:$.name,color:$.fill,payload:$}}))},[]):o=(i||[]).map(function(v){var w=v.item,A=w.props,T=A.dataKey,P=A.name,$=A.legendType,L=A.hide;return{inactive:L,dataKey:T,type:p.props.iconType||$||"square",color:TM(w),value:P||T,payload:w.props}}),vo(vo(vo({},p.props),bd.getWithHeight(p,c)),{},{payload:o,item:p})},cfe=function(t){var r=t.barSize,i=t.stackGroups,c=i===void 0?{}:i;if(!c)return{};for(var u={},p=Object.keys(c),o=0,v=p.length;o<v;o++)for(var w=c[p[o]].stackGroups,A=Object.keys(w),T=0,P=A.length;T<P;T++){var $=w[A[T]],L=$.items,k=$.cateAxisId,N=L.filter(function(D){return Lc(D.type).indexOf("Bar")>=0});if(N&&N.length){var R=N[0].props.barSize,j=N[0].props[k];u[j]||(u[j]=[]),u[j].push({item:N[0],stackList:N.slice(1),barSize:ur(R)?r:R})}}return u},ufe=function(t){var r=t.barGap,i=t.barCategoryGap,c=t.bandSize,u=t.sizeList,p=u===void 0?[]:u,o=t.maxBarSize,v=p.length;if(v<1)return null;var w=gd(r,c,0,!0),A;if(p[0].barSize===+p[0].barSize){var T=!1,P=c/v,$=p.reduce(function(D,G){return D+G.barSize||0},0);$+=(v-1)*w,$>=c&&($-=(v-1)*w,w=0),$>=c&&P>0&&(T=!0,P*=.9,$=v*P);var L=(c-$)/2>>0,k={offset:L-w,size:0};A=p.reduce(function(D,G){var W=[].concat(FR(D),[{item:G.item,position:{offset:k.offset+k.size+w,size:T?P:G.barSize}}]);return k=W[W.length-1].position,G.stackList&&G.stackList.length&&G.stackList.forEach(function(Y){W.push({item:Y,position:k})}),W},[])}else{var N=gd(i,c,0,!0);c-2*N-(v-1)*w<=0&&(w=0);var R=(c-2*N-(v-1)*w)/v;R>1&&(R>>=0);var j=o===+o?Math.min(R,o):R;A=p.reduce(function(D,G,W){var Y=[].concat(FR(D),[{item:G.item,position:{offset:N+(R+w)*W+(R-j)/2,size:j}}]);return G.stackList&&G.stackList.length&&G.stackList.forEach(function(ee){Y.push({item:ee,position:Y[Y.length-1].position})}),Y},[])}return A},hfe=function(t,r,i,c){var u=i.children,p=i.width,o=i.margin,v=p-(o.left||0)-(o.right||0),w=k$({children:u,legendWidth:v}),A=t;if(w){var T=c||{},P=w.align,$=w.verticalAlign,L=w.layout;(L==="vertical"||L==="horizontal"&&$==="middle")&&Rt(t[P])&&(A=vo(vo({},t),{},nd({},P,A[P]+(T.width||0)))),(L==="horizontal"||L==="vertical"&&P==="center")&&Rt(t[$])&&(A=vo(vo({},t),{},nd({},$,A[$]+(T.height||0))))}return A},ffe=function(t,r,i){return ur(r)?!0:t==="horizontal"?r==="yAxis":t==="vertical"||i==="x"?r==="xAxis":i==="y"?r==="yAxis":!0},O$=function(t,r,i,c,u){var p=r.props.children,o=Ca(p,Ly).filter(function(w){return ffe(c,u,w.props.direction)});if(o&&o.length){var v=o.map(function(w){return w.props.dataKey});return t.reduce(function(w,A){var T=na(A,i,0),P=Hi(T)?[q1(T),G1(T)]:[T,T],$=v.reduce(function(L,k){var N=na(A,k,0),R=P[0]-Math.abs(Hi(N)?N[0]:N),j=P[1]+Math.abs(Hi(N)?N[1]:N);return[Math.min(R,L[0]),Math.max(j,L[1])]},[1/0,-1/0]);return[Math.min($[0],w[0]),Math.max($[1],w[1])]},[1/0,-1/0])}return null},dfe=function(t,r,i,c,u){var p=r.map(function(o){return O$(t,o,i,u,c)}).filter(function(o){return!ur(o)});return p&&p.length?p.reduce(function(o,v){return[Math.min(o[0],v[0]),Math.max(o[1],v[1])]},[1/0,-1/0]):null},D$=function(t,r,i,c,u){var p=r.map(function(v){var w=v.props.dataKey;return i==="number"&&w&&O$(t,v,w,c)||pg(t,w,i,u)});if(i==="number")return p.reduce(function(v,w){return[Math.min(v[0],w[0]),Math.max(v[1],w[1])]},[1/0,-1/0]);var o={};return p.reduce(function(v,w){for(var A=0,T=w.length;A<T;A++)o[w[A]]||(o[w[A]]=!0,v.push(w[A]));return v},[])},R$=function(t,r){return t==="horizontal"&&r==="xAxis"||t==="vertical"&&r==="yAxis"||t==="centric"&&r==="angleAxis"||t==="radial"&&r==="radiusAxis"},jR=function(t,r,i){var c,u,p=t.map(function(o){return o.coordinate===r&&(c=!0),o.coordinate===i&&(u=!0),o.coordinate});return c||p.push(r),u||p.push(i),p},_c=function(t,r,i){if(!t)return null;var c=t.scale,u=t.duplicateDomain,p=t.type,o=t.range,v=t.realScaleType==="scaleBand"?c.bandwidth()/2:2,w=(r||i)&&p==="category"&&c.bandwidth?c.bandwidth()/v:0;if(w=t.axisType==="angleAxis"&&(o==null?void 0:o.length)>=2?Sa(o[0]-o[1])*2*w:w,r&&(t.ticks||t.niceTicks)){var A=(t.ticks||t.niceTicks).map(function(T){var P=u?u.indexOf(T):T;return{coordinate:c(P)+w,value:T,offset:w}});return A.filter(function(T){return!My(T.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(T,P){return{coordinate:c(T)+w,value:T,index:P,offset:w}}):c.ticks&&!i?c.ticks(t.tickCount).map(function(T){return{coordinate:c(T)+w,value:T,offset:w}}):c.domain().map(function(T,P){return{coordinate:c(T)+w,value:u?u[T]:T,index:P,offset:w}})},Zv=function(t,r,i){var c;return gr(i)?c=i:gr(r)&&(c=r),gr(t)||c?function(u,p,o,v){gr(t)&&t(u,p,o,v),gr(c)&&c(u,p,o,v)}:null},pfe=function(t,r,i){var c=t.scale,u=t.type,p=t.layout,o=t.axisType;if(c==="auto")return p==="radial"&&o==="radiusAxis"?{scale:Wg(),realScaleType:"band"}:p==="radial"&&o==="angleAxis"?{scale:bx(),realScaleType:"linear"}:u==="category"&&r&&(r.indexOf("LineChart")>=0||r.indexOf("AreaChart")>=0||r.indexOf("ComposedChart")>=0&&!i)?{scale:dg(),realScaleType:"point"}:u==="category"?{scale:Wg(),realScaleType:"band"}:{scale:bx(),realScaleType:"linear"};if(Ay(c)){var v="scale".concat($1(c));return{scale:(RR[v]||dg)(),realScaleType:RR[v]?v:"point"}}return gr(c)?{scale:c}:{scale:dg(),realScaleType:"point"}},UR=1e-4,mfe=function(t){var r=t.domain();if(!(!r||r.length<=2)){var i=r.length,c=t.range(),u=Math.min(c[0],c[1])-UR,p=Math.max(c[0],c[1])+UR,o=t(r[0]),v=t(r[i-1]);(o<u||o>p||v<u||v>p)&&t.domain([r[0],r[i-1]])}},gfe=function(t,r){if(!t)return null;for(var i=0,c=t.length;i<c;i++)if(t[i].item===r)return t[i].position;return null},yfe=function(t,r){if(!r||r.length!==2||!Rt(r[0])||!Rt(r[1]))return t;var i=Math.min(r[0],r[1]),c=Math.max(r[0],r[1]),u=[t[0],t[1]];return(!Rt(t[0])||t[0]<i)&&(u[0]=i),(!Rt(t[1])||t[1]>c)&&(u[1]=c),u[0]>c&&(u[0]=c),u[1]<i&&(u[1]=i),u},_fe=function(t){var r=t.length;if(!(r<=0))for(var i=0,c=t[0].length;i<c;++i)for(var u=0,p=0,o=0;o<r;++o){var v=My(t[o][i][1])?t[o][i][0]:t[o][i][1];v>=0?(t[o][i][0]=u,t[o][i][1]=u+v,u=t[o][i][1]):(t[o][i][0]=p,t[o][i][1]=p+v,p=t[o][i][1])}},vfe=function(t){var r=t.length;if(!(r<=0))for(var i=0,c=t[0].length;i<c;++i)for(var u=0,p=0;p<r;++p){var o=My(t[p][i][1])?t[p][i][0]:t[p][i][1];o>=0?(t[p][i][0]=u,t[p][i][1]=u+o,u=t[p][i][1]):(t[p][i][0]=0,t[p][i][1]=0)}},xfe={sign:_fe,expand:rne,none:yd,silhouette:nne,wiggle:ine,positive:vfe},bfe=function(t,r,i){var c=r.map(function(p){return p.props.dataKey}),u=tne().keys(c).value(function(p,o){return+na(p,o,0)}).order(nE).offset(xfe[i]);return u(t)},wfe=function(t,r,i,c,u,p){if(!t)return null;var o=p?r.reverse():r,v=o.reduce(function(w,A){var T=A.props,P=T.stackId,$=T.hide;if($)return w;var L=A.props[i],k=w[L]||{hasStack:!1,stackGroups:{}};if(wi(P)){var N=k.stackGroups[P]||{numericAxisId:i,cateAxisId:c,items:[]};N.items.push(A),k.hasStack=!0,k.stackGroups[P]=N}else k.stackGroups[Cy("_stackId_")]={numericAxisId:i,cateAxisId:c,items:[A]};return vo(vo({},w),{},nd({},L,k))},{});return Object.keys(v).reduce(function(w,A){var T=v[A];return T.hasStack&&(T.stackGroups=Object.keys(T.stackGroups).reduce(function(P,$){var L=T.stackGroups[$];return vo(vo({},P),{},nd({},$,{numericAxisId:i,cateAxisId:c,items:L.items,stackedData:bfe(t,L.items,u)}))},{})),vo(vo({},w),{},nd({},A,T))},{})},Sfe=function(t,r){var i=r.realScaleType,c=r.type,u=r.tickCount,p=r.originalDomain,o=r.allowDecimals,v=i||r.scale;if(v!=="auto"&&v!=="linear")return null;if(u&&c==="number"&&p&&(p[0]==="auto"||p[1]==="auto")){var w=t.domain();if(!w.length)return null;var A=Whe(w,u,o);return t.domain([q1(A),G1(A)]),{niceTicks:A}}if(u&&c==="number"){var T=t.domain(),P=Hhe(T,u,o);return{niceTicks:P}}return null},VR=function(t){var r=t.axis,i=t.ticks,c=t.bandSize,u=t.entry,p=t.index,o=t.dataKey;if(r.type==="category"){if(!r.allowDuplicatedCategory&&r.dataKey&&!ur(u[r.dataKey])){var v=X0(i,"value",u[r.dataKey]);if(v)return v.coordinate+c/2}return i[p]?i[p].coordinate+c/2:null}var w=na(u,ur(o)?r.dataKey:o);return ur(w)?null:r.scale(w)},GR=function(t){var r=t.axis,i=t.ticks,c=t.offset,u=t.bandSize,p=t.entry,o=t.index;if(r.type==="category")return i[o]?i[o].coordinate+c:null;var v=na(p,r.dataKey,r.domain[o]);return ur(v)?null:r.scale(v)-u/2+c},Efe=function(t){var r=t.numericAxis,i=r.scale.domain();if(r.type==="number"){var c=Math.min(i[0],i[1]),u=Math.max(i[0],i[1]);return c<=0&&u>=0?0:u<0?u:c}return i[0]},Tfe=function(t,r){var i=t.props.stackId;if(wi(i)){var c=r[i];if(c&&c.items.length){for(var u=-1,p=0,o=c.items.length;p<o;p++)if(c.items[p]===t){u=p;break}return u>=0?c.stackedData[u]:null}}return null},Afe=function(t){return t.reduce(function(r,i){return[q1(i.concat([r[0]]).filter(Rt)),G1(i.concat([r[1]]).filter(Rt))]},[1/0,-1/0])},L$=function(t,r,i){return Object.keys(t).reduce(function(c,u){var p=t[u],o=p.stackedData,v=o.reduce(function(w,A){var T=Afe(A.slice(r,i+1));return[Math.min(w[0],T[0]),Math.max(w[1],T[1])]},[1/0,-1/0]);return[Math.min(v[0],c[0]),Math.max(v[1],c[1])]},[1/0,-1/0]).map(function(c){return c===1/0||c===-1/0?0:c})},qR=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,WR=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,NE=function(t,r,i){if(gr(t))return t(r,i);if(!Hi(t))return r;var c=[];if(Rt(t[0]))c[0]=i?t[0]:Math.min(t[0],r[0]);else if(qR.test(t[0])){var u=+qR.exec(t[0])[1];c[0]=r[0]-u}else gr(t[0])?c[0]=t[0](r[0]):c[0]=r[0];if(Rt(t[1]))c[1]=i?t[1]:Math.max(t[1],r[1]);else if(WR.test(t[1])){var p=+WR.exec(t[1])[1];c[1]=r[1]+p}else gr(t[1])?c[1]=t[1](r[1]):c[1]=r[1];return c},Mx=function(t,r,i){if(t&&t.scale&&t.scale.bandwidth){var c=t.scale.bandwidth();if(!i||c>0)return c}if(t&&r&&r.length>=2){for(var u=KA(r,function(T){return T.coordinate}),p=1/0,o=1,v=u.length;o<v;o++){var w=u[o],A=u[o-1];p=Math.min((w.coordinate||0)-(A.coordinate||0),p)}return p===1/0?0:p}return i?void 0:0},HR=function(t,r,i){return!t||!t.length||eM(t,Ma(i,"type.defaultProps.domain"))?r:t},z$=function(t,r){var i=t.props,c=i.dataKey,u=i.name,p=i.unit,o=i.formatter,v=i.tooltipType,w=i.chartType;return vo(vo({},en(t)),{},{dataKey:c,unit:p,formatter:o,name:u||c,color:TM(t),value:na(r,c),type:v,payload:r,chartType:w})};function ey(e){return ey=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ey(e)}function ZR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,i)}return r}function XR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ZR(Object(r),!0).forEach(function(i){Mfe(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ZR(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function Mfe(e,t,r){return t=Cfe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Cfe(e){var t=Pfe(e,"string");return ey(t)==="symbol"?t:String(t)}function Pfe(e,t){if(ey(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(ey(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Cx=Math.PI/180,Ife=function(t){return t*180/Math.PI},Zi=function(t,r,i,c){return{x:t+Math.cos(-Cx*c)*i,y:r+Math.sin(-Cx*c)*i}},kfe=function(t,r){var i=t.x,c=t.y,u=r.x,p=r.y;return Math.sqrt(Math.pow(i-u,2)+Math.pow(c-p,2))},Ofe=function(t,r){var i=t.x,c=t.y,u=r.cx,p=r.cy,o=kfe({x:i,y:c},{x:u,y:p});if(o<=0)return{radius:o};var v=(i-u)/o,w=Math.acos(v);return c>p&&(w=2*Math.PI-w),{radius:o,angle:Ife(w),angleInRadian:w}},Dfe=function(t){var r=t.startAngle,i=t.endAngle,c=Math.floor(r/360),u=Math.floor(i/360),p=Math.min(c,u);return{startAngle:r-p*360,endAngle:i-p*360}},Rfe=function(t,r){var i=r.startAngle,c=r.endAngle,u=Math.floor(i/360),p=Math.floor(c/360),o=Math.min(u,p);return t+o*360},KR=function(t,r){var i=t.x,c=t.y,u=Ofe({x:i,y:c},r),p=u.radius,o=u.angle,v=r.innerRadius,w=r.outerRadius;if(p<v||p>w)return!1;if(p===0)return!0;var A=Dfe(r),T=A.startAngle,P=A.endAngle,$=o,L;if(T<=P){for(;$>P;)$-=360;for(;$<T;)$+=360;L=$>=T&&$<=P}else{for(;$>T;)$-=360;for(;$<P;)$+=360;L=$>=P&&$<=T}return L?XR(XR({},r),{},{radius:p,angle:Rfe($,r)}):null};function ty(e){return ty=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ty(e)}function Lfe(e){return Ffe(e)||$fe(e)||Bfe(e)||zfe()}function zfe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Bfe(e,t){if(e){if(typeof e=="string")return jE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return jE(e,t)}}function $fe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Ffe(e){if(Array.isArray(e))return jE(e)}function jE(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function YR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,i)}return r}function Di(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?YR(Object(r),!0).forEach(function(i){Nfe(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):YR(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function Nfe(e,t,r){return t=jfe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function jfe(e){var t=Ufe(e,"string");return ty(t)==="symbol"?t:String(t)}function Ufe(e,t){if(ty(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(ty(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ry(){return ry=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},ry.apply(this,arguments)}var Vfe=function(t){var r=t.value,i=t.formatter,c=ur(t.children)?r:t.children;return gr(i)?i(c):c},Gfe=function(t,r){var i=Sa(r-t),c=Math.min(Math.abs(r-t),360);return i*c},qfe=function(t,r,i){var c=t.position,u=t.viewBox,p=t.offset,o=t.className,v=u,w=v.cx,A=v.cy,T=v.innerRadius,P=v.outerRadius,$=v.startAngle,L=v.endAngle,k=v.clockWise,N=(T+P)/2,R=Gfe($,L),j=R>=0?1:-1,D,G;c==="insideStart"?(D=$+j*p,G=k):c==="insideEnd"?(D=L-j*p,G=!k):c==="end"&&(D=L+j*p,G=k),G=R<=0?G:!G;var W=Zi(w,A,N,D),Y=Zi(w,A,N,D+(G?1:-1)*359),ee="M".concat(W.x,",").concat(W.y,`
    A`).concat(N,",").concat(N,",0,1,").concat(G?0:1,`,
    `).concat(Y.x,",").concat(Y.y),de=ur(t.id)?Cy("recharts-radial-line-"):t.id;return Ze.createElement("text",ry({},i,{dominantBaseline:"central",className:Mn("recharts-radial-bar-label",o)}),Ze.createElement("defs",null,Ze.createElement("path",{id:de,d:ee})),Ze.createElement("textPath",{xlinkHref:"#".concat(de)},r))},Wfe=function(t){var r=t.viewBox,i=t.offset,c=t.position,u=r,p=u.cx,o=u.cy,v=u.innerRadius,w=u.outerRadius,A=u.startAngle,T=u.endAngle,P=(A+T)/2;if(c==="outside"){var $=Zi(p,o,w+i,P),L=$.x,k=$.y;return{x:L,y:k,textAnchor:L>=p?"start":"end",verticalAnchor:"middle"}}if(c==="center")return{x:p,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(c==="centerTop")return{x:p,y:o,textAnchor:"middle",verticalAnchor:"start"};if(c==="centerBottom")return{x:p,y:o,textAnchor:"middle",verticalAnchor:"end"};var N=(v+w)/2,R=Zi(p,o,N,P),j=R.x,D=R.y;return{x:j,y:D,textAnchor:"middle",verticalAnchor:"middle"}},Hfe=function(t){var r=t.viewBox,i=t.parentViewBox,c=t.offset,u=t.position,p=r,o=p.x,v=p.y,w=p.width,A=p.height,T=A>=0?1:-1,P=T*c,$=T>0?"end":"start",L=T>0?"start":"end",k=w>=0?1:-1,N=k*c,R=k>0?"end":"start",j=k>0?"start":"end";if(u==="top"){var D={x:o+w/2,y:v-T*c,textAnchor:"middle",verticalAnchor:$};return Di(Di({},D),i?{height:Math.max(v-i.y,0),width:w}:{})}if(u==="bottom"){var G={x:o+w/2,y:v+A+P,textAnchor:"middle",verticalAnchor:L};return Di(Di({},G),i?{height:Math.max(i.y+i.height-(v+A),0),width:w}:{})}if(u==="left"){var W={x:o-N,y:v+A/2,textAnchor:R,verticalAnchor:"middle"};return Di(Di({},W),i?{width:Math.max(W.x-i.x,0),height:A}:{})}if(u==="right"){var Y={x:o+w+N,y:v+A/2,textAnchor:j,verticalAnchor:"middle"};return Di(Di({},Y),i?{width:Math.max(i.x+i.width-Y.x,0),height:A}:{})}var ee=i?{width:w,height:A}:{};return u==="insideLeft"?Di({x:o+N,y:v+A/2,textAnchor:j,verticalAnchor:"middle"},ee):u==="insideRight"?Di({x:o+w-N,y:v+A/2,textAnchor:R,verticalAnchor:"middle"},ee):u==="insideTop"?Di({x:o+w/2,y:v+P,textAnchor:"middle",verticalAnchor:L},ee):u==="insideBottom"?Di({x:o+w/2,y:v+A-P,textAnchor:"middle",verticalAnchor:$},ee):u==="insideTopLeft"?Di({x:o+N,y:v+P,textAnchor:j,verticalAnchor:L},ee):u==="insideTopRight"?Di({x:o+w-N,y:v+P,textAnchor:R,verticalAnchor:L},ee):u==="insideBottomLeft"?Di({x:o+N,y:v+A-P,textAnchor:j,verticalAnchor:$},ee):u==="insideBottomRight"?Di({x:o+w-N,y:v+A-P,textAnchor:R,verticalAnchor:$},ee):Vd(u)&&(Rt(u.x)||US(u.x))&&(Rt(u.y)||US(u.y))?Di({x:o+gd(u.x,w),y:v+gd(u.y,A),textAnchor:"end",verticalAnchor:"end"},ee):Di({x:o+w/2,y:v+A/2,textAnchor:"middle",verticalAnchor:"middle"},ee)},Zfe=function(t){return"cx"in t&&Rt(t.cx)};function Wi(e){var t=e.viewBox,r=e.position,i=e.value,c=e.children,u=e.content,p=e.className,o=p===void 0?"":p,v=e.textBreakAll;if(!t||ur(i)&&ur(c)&&!Ke.isValidElement(u)&&!gr(u))return null;if(Ke.isValidElement(u))return Ke.cloneElement(u,e);var w;if(gr(u)){if(w=Ke.createElement(u,e),Ke.isValidElement(w))return w}else w=Vfe(e);var A=Zfe(t),T=en(e,!0);if(A&&(r==="insideStart"||r==="insideEnd"||r==="end"))return qfe(e,w,T);var P=A?Wfe(e):Hfe(e);return Ze.createElement(qg,ry({className:Mn("recharts-label",o)},T,P,{breakAll:v}),w)}Wi.displayName="Label";Wi.defaultProps={offset:5};var B$=function(t){var r=t.cx,i=t.cy,c=t.angle,u=t.startAngle,p=t.endAngle,o=t.r,v=t.radius,w=t.innerRadius,A=t.outerRadius,T=t.x,P=t.y,$=t.top,L=t.left,k=t.width,N=t.height,R=t.clockWise,j=t.labelViewBox;if(j)return j;if(Rt(k)&&Rt(N)){if(Rt(T)&&Rt(P))return{x:T,y:P,width:k,height:N};if(Rt($)&&Rt(L))return{x:$,y:L,width:k,height:N}}return Rt(T)&&Rt(P)?{x:T,y:P,width:0,height:0}:Rt(r)&&Rt(i)?{cx:r,cy:i,startAngle:u||c||0,endAngle:p||c||0,innerRadius:w||0,outerRadius:A||v||o||0,clockWise:R}:t.viewBox?t.viewBox:{}},Xfe=function(t,r){return t?t===!0?Ze.createElement(Wi,{key:"label-implicit",viewBox:r}):wi(t)?Ze.createElement(Wi,{key:"label-implicit",viewBox:r,value:t}):Ke.isValidElement(t)?t.type===Wi?Ke.cloneElement(t,{key:"label-implicit",viewBox:r}):Ze.createElement(Wi,{key:"label-implicit",content:t,viewBox:r}):gr(t)?Ze.createElement(Wi,{key:"label-implicit",content:t,viewBox:r}):Vd(t)?Ze.createElement(Wi,ry({viewBox:r},t,{key:"label-implicit"})):null:null},Kfe=function(t,r){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&i&&!t.label)return null;var c=t.children,u=B$(t),p=Ca(c,Wi).map(function(v,w){return Ke.cloneElement(v,{viewBox:r||u,key:"label-".concat(w)})});if(!i)return p;var o=Xfe(t.label,r||u);return[o].concat(Lfe(p))};Wi.parseViewBox=B$;Wi.renderCallByParent=Kfe;function Yfe(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var Jfe=Yfe;const Qfe=vn(Jfe);function ny(e){return ny=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ny(e)}var ede=["data","valueAccessor","dataKey","clockWise","id","textBreakAll"];function tde(e){return ode(e)||ide(e)||nde(e)||rde()}function rde(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nde(e,t){if(e){if(typeof e=="string")return UE(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return UE(e,t)}}function ide(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ode(e){if(Array.isArray(e))return UE(e)}function UE(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function Px(){return Px=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Px.apply(this,arguments)}function JR(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,i)}return r}function QR(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?JR(Object(r),!0).forEach(function(i){ade(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):JR(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function ade(e,t,r){return t=sde(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function sde(e){var t=lde(e,"string");return ny(t)==="symbol"?t:String(t)}function lde(e,t){if(ny(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(ny(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function cde(e,t){if(e==null)return{};var r=ude(e,t),i,c;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(c=0;c<u.length;c++)i=u[c],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function ude(e,t){if(e==null)return{};var r={},i=Object.keys(e),c,u;for(u=0;u<i.length;u++)c=i[u],!(t.indexOf(c)>=0)&&(r[c]=e[c]);return r}var hde={valueAccessor:function(t){return Hi(t.value)?Qfe(t.value):t.value}};function Sl(e){var t=e.data,r=e.valueAccessor,i=e.dataKey,c=e.clockWise,u=e.id,p=e.textBreakAll,o=cde(e,ede);return!t||!t.length?null:Ze.createElement(ui,{className:"recharts-label-list"},t.map(function(v,w){var A=ur(i)?r(v,w):na(v&&v.payload,i),T=ur(u)?{}:{id:"".concat(u,"-").concat(w)};return Ze.createElement(Wi,Px({},en(v,!0),o,T,{parentViewBox:v.parentViewBox,index:w,value:A,textBreakAll:p,viewBox:Wi.parseViewBox(ur(c)?v:QR(QR({},v),{},{clockWise:c})),key:"label-".concat(w)}))}))}Sl.displayName="LabelList";function fde(e,t){return e?e===!0?Ze.createElement(Sl,{key:"labelList-implicit",data:t}):Ze.isValidElement(e)||gr(e)?Ze.createElement(Sl,{key:"labelList-implicit",data:t,content:e}):Vd(e)?Ze.createElement(Sl,Px({data:t},e,{key:"labelList-implicit"})):null:null}function dde(e,t){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&r&&!e.label)return null;var i=e.children,c=Ca(i,Sl).map(function(p,o){return Ke.cloneElement(p,{data:t,key:"labelList-".concat(o)})});if(!r)return c;var u=fde(e.label,t);return[u].concat(tde(c))}Sl.renderCallByParent=dde;Sl.defaultProps=hde;function Cd(e){return Cd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cd(e)}function VE(){return VE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},VE.apply(this,arguments)}function pde(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function eL(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,$$(i.key),i)}}function mde(e,t,r){return t&&eL(e.prototype,t),r&&eL(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function gde(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&GE(e,t)}function GE(e,t){return GE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,c){return i.__proto__=c,i},GE(e,t)}function yde(e){var t=xde();return function(){var i=Ix(e),c;if(t){var u=Ix(this).constructor;c=Reflect.construct(i,arguments,u)}else c=i.apply(this,arguments);return _de(this,c)}}function _de(e,t){if(t&&(Cd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vde(e)}function vde(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function xde(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ix(e){return Ix=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ix(e)}function bde(e,t,r){return t=$$(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $$(e){var t=wde(e,"string");return Cd(t)==="symbol"?t:String(t)}function wde(e,t){if(Cd(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(Cd(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Sde=function(t,r){var i=Sa(r-t),c=Math.min(Math.abs(r-t),359.999);return i*c},Xv=function(t){var r=t.cx,i=t.cy,c=t.radius,u=t.angle,p=t.sign,o=t.isExternal,v=t.cornerRadius,w=t.cornerIsExternal,A=v*(o?1:-1)+c,T=Math.asin(v/A)/Cx,P=w?u:u+p*T,$=Zi(r,i,A,P),L=Zi(r,i,c,P),k=w?u-p*T:u,N=Zi(r,i,A*Math.cos(T*Cx),k);return{center:$,circleTangency:L,lineTangency:N,theta:T}},F$=function(t){var r=t.cx,i=t.cy,c=t.innerRadius,u=t.outerRadius,p=t.startAngle,o=t.endAngle,v=Sde(p,o),w=p+v,A=Zi(r,i,u,p),T=Zi(r,i,u,w),P="M ".concat(A.x,",").concat(A.y,`
    A `).concat(u,",").concat(u,`,0,
    `).concat(+(Math.abs(v)>180),",").concat(+(p>w),`,
    `).concat(T.x,",").concat(T.y,`
  `);if(c>0){var $=Zi(r,i,c,p),L=Zi(r,i,c,w);P+="L ".concat(L.x,",").concat(L.y,`
            A `).concat(c,",").concat(c,`,0,
            `).concat(+(Math.abs(v)>180),",").concat(+(p<=w),`,
            `).concat($.x,",").concat($.y," Z")}else P+="L ".concat(r,",").concat(i," Z");return P},Ede=function(t){var r=t.cx,i=t.cy,c=t.innerRadius,u=t.outerRadius,p=t.cornerRadius,o=t.forceCornerRadius,v=t.cornerIsExternal,w=t.startAngle,A=t.endAngle,T=Sa(A-w),P=Xv({cx:r,cy:i,radius:u,angle:w,sign:T,cornerRadius:p,cornerIsExternal:v}),$=P.circleTangency,L=P.lineTangency,k=P.theta,N=Xv({cx:r,cy:i,radius:u,angle:A,sign:-T,cornerRadius:p,cornerIsExternal:v}),R=N.circleTangency,j=N.lineTangency,D=N.theta,G=v?Math.abs(w-A):Math.abs(w-A)-k-D;if(G<0)return o?"M ".concat(L.x,",").concat(L.y,`
        a`).concat(p,",").concat(p,",0,0,1,").concat(p*2,`,0
        a`).concat(p,",").concat(p,",0,0,1,").concat(-p*2,`,0
      `):F$({cx:r,cy:i,innerRadius:c,outerRadius:u,startAngle:w,endAngle:A});var W="M ".concat(L.x,",").concat(L.y,`
    A`).concat(p,",").concat(p,",0,0,").concat(+(T<0),",").concat($.x,",").concat($.y,`
    A`).concat(u,",").concat(u,",0,").concat(+(G>180),",").concat(+(T<0),",").concat(R.x,",").concat(R.y,`
    A`).concat(p,",").concat(p,",0,0,").concat(+(T<0),",").concat(j.x,",").concat(j.y,`
  `);if(c>0){var Y=Xv({cx:r,cy:i,radius:c,angle:w,sign:T,isExternal:!0,cornerRadius:p,cornerIsExternal:v}),ee=Y.circleTangency,de=Y.lineTangency,xe=Y.theta,Me=Xv({cx:r,cy:i,radius:c,angle:A,sign:-T,isExternal:!0,cornerRadius:p,cornerIsExternal:v}),Ce=Me.circleTangency,qe=Me.lineTangency,Ue=Me.theta,ut=v?Math.abs(w-A):Math.abs(w-A)-xe-Ue;if(ut<0&&p===0)return"".concat(W,"L").concat(r,",").concat(i,"Z");W+="L".concat(qe.x,",").concat(qe.y,`
      A`).concat(p,",").concat(p,",0,0,").concat(+(T<0),",").concat(Ce.x,",").concat(Ce.y,`
      A`).concat(c,",").concat(c,",0,").concat(+(ut>180),",").concat(+(T>0),",").concat(ee.x,",").concat(ee.y,`
      A`).concat(p,",").concat(p,",0,0,").concat(+(T<0),",").concat(de.x,",").concat(de.y,"Z")}else W+="L".concat(r,",").concat(i,"Z");return W},N$=function(e){gde(r,e);var t=yde(r);function r(){return pde(this,r),t.apply(this,arguments)}return mde(r,[{key:"render",value:function(){var c=this.props,u=c.cx,p=c.cy,o=c.innerRadius,v=c.outerRadius,w=c.cornerRadius,A=c.forceCornerRadius,T=c.cornerIsExternal,P=c.startAngle,$=c.endAngle,L=c.className;if(v<o||P===$)return null;var k=Mn("recharts-sector",L),N=v-o,R=gd(w,N,0,!0),j;return R>0&&Math.abs(P-$)<360?j=Ede({cx:u,cy:p,innerRadius:o,outerRadius:v,cornerRadius:Math.min(R,N/2),forceCornerRadius:A,cornerIsExternal:T,startAngle:P,endAngle:$}):j=F$({cx:u,cy:p,innerRadius:o,outerRadius:v,startAngle:P,endAngle:$}),Ze.createElement("path",VE({},en(this.props,!0),{className:k,d:j,role:"img"}))}}]),r}(Ke.PureComponent);bde(N$,"defaultProps",{cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1});function iy(e){return iy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},iy(e)}function qE(){return qE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},qE.apply(this,arguments)}function tL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,i)}return r}function rL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?tL(Object(r),!0).forEach(function(i){Tde(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tL(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function Tde(e,t,r){return t=Ade(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ade(e){var t=Mde(e,"string");return iy(t)==="symbol"?t:String(t)}function Mde(e,t){if(iy(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(iy(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var nL={curveBasisClosed:Gre,curveBasisOpen:qre,curveBasis:Vre,curveLinearClosed:Wre,curveLinear:N1,curveMonotoneX:Hre,curveMonotoneY:Zre,curveNatural:Xre,curveStep:Kre,curveStepAfter:Jre,curveStepBefore:Yre},Kv=function(t){return t.x===+t.x&&t.y===+t.y},Vm=function(t){return t.x},Gm=function(t){return t.y},Cde=function(t,r){if(gr(t))return t;var i="curve".concat($1(t));return i==="curveMonotone"&&r?nL["".concat(i).concat(r==="vertical"?"Y":"X")]:nL[i]||N1},Pde=function(t){var r=t.type,i=t.points,c=t.baseLine,u=t.layout,p=t.connectNulls,o=Cde(r,u),v=p?i.filter(function(P){return Kv(P)}):i,w;if(Hi(c)){var A=p?c.filter(function(P){return Kv(P)}):c,T=v.map(function(P,$){return rL(rL({},P),{},{base:A[$]})});return u==="vertical"?w=Nv().y(Gm).x1(Vm).x0(function(P){return P.base.x}):w=Nv().x(Vm).y1(Gm).y0(function(P){return P.base.y}),w.defined(Kv).curve(o),w(T)}return u==="vertical"&&Rt(c)?w=Nv().y(Gm).x1(Vm).x0(c):Rt(c)?w=Nv().x(Vm).y1(Gm).y0(c):w=t4().x(Vm).y(Gm),w.defined(Kv).curve(o),w(v)},kx=function(t){var r=t.className,i=t.points,c=t.path,u=t.pathRef;if((!i||!i.length)&&!c)return null;var p=i&&i.length?Pde(t):c;return Ze.createElement("path",qE({},en(t),K0(t),{className:Mn("recharts-curve",r),d:p,ref:u}))};kx.defaultProps={type:"linear",points:[],connectNulls:!1};function Pd(e){return Pd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Pd(e)}function Ox(){return Ox=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Ox.apply(this,arguments)}function Ide(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iL(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,V$(i.key),i)}}function kde(e,t,r){return t&&iL(e.prototype,t),r&&iL(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ode(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&WE(e,t)}function WE(e,t){return WE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,c){return i.__proto__=c,i},WE(e,t)}function Dde(e){var t=Lde();return function(){var i=Dx(e),c;if(t){var u=Dx(this).constructor;c=Reflect.construct(i,arguments,u)}else c=i.apply(this,arguments);return Rde(this,c)}}function Rde(e,t){if(t&&(Pd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return j$(e)}function j$(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lde(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Dx(e){return Dx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Dx(e)}function U$(e,t,r){return t=V$(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V$(e){var t=zde(e,"string");return Pd(t)==="symbol"?t:String(t)}function zde(e,t){if(Pd(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(Pd(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var oL=function(t,r,i,c,u){var p=Math.min(Math.abs(i)/2,Math.abs(c)/2),o=c>=0?1:-1,v=i>=0?1:-1,w=c>=0&&i>=0||c<0&&i<0?1:0,A;if(p>0&&u instanceof Array){for(var T=[0,0,0,0],P=0,$=4;P<$;P++)T[P]=u[P]>p?p:u[P];A="M".concat(t,",").concat(r+o*T[0]),T[0]>0&&(A+="A ".concat(T[0],",").concat(T[0],",0,0,").concat(w,",").concat(t+v*T[0],",").concat(r)),A+="L ".concat(t+i-v*T[1],",").concat(r),T[1]>0&&(A+="A ".concat(T[1],",").concat(T[1],",0,0,").concat(w,`,
        `).concat(t+i,",").concat(r+o*T[1])),A+="L ".concat(t+i,",").concat(r+c-o*T[2]),T[2]>0&&(A+="A ".concat(T[2],",").concat(T[2],",0,0,").concat(w,`,
        `).concat(t+i-v*T[2],",").concat(r+c)),A+="L ".concat(t+v*T[3],",").concat(r+c),T[3]>0&&(A+="A ".concat(T[3],",").concat(T[3],",0,0,").concat(w,`,
        `).concat(t,",").concat(r+c-o*T[3])),A+="Z"}else if(p>0&&u===+u&&u>0){var L=Math.min(p,u);A="M ".concat(t,",").concat(r+o*L,`
            A `).concat(L,",").concat(L,",0,0,").concat(w,",").concat(t+v*L,",").concat(r,`
            L `).concat(t+i-v*L,",").concat(r,`
            A `).concat(L,",").concat(L,",0,0,").concat(w,",").concat(t+i,",").concat(r+o*L,`
            L `).concat(t+i,",").concat(r+c-o*L,`
            A `).concat(L,",").concat(L,",0,0,").concat(w,",").concat(t+i-v*L,",").concat(r+c,`
            L `).concat(t+v*L,",").concat(r+c,`
            A `).concat(L,",").concat(L,",0,0,").concat(w,",").concat(t,",").concat(r+c-o*L," Z")}else A="M ".concat(t,",").concat(r," h ").concat(i," v ").concat(c," h ").concat(-i," Z");return A},Bde=function(t,r){if(!t||!r)return!1;var i=t.x,c=t.y,u=r.x,p=r.y,o=r.width,v=r.height;if(Math.abs(o)>0&&Math.abs(v)>0){var w=Math.min(u,u+o),A=Math.max(u,u+o),T=Math.min(p,p+v),P=Math.max(p,p+v);return i>=w&&i<=A&&c>=T&&c<=P}return!1},eb=function(e){Ode(r,e);var t=Dde(r);function r(){var i;Ide(this,r);for(var c=arguments.length,u=new Array(c),p=0;p<c;p++)u[p]=arguments[p];return i=t.call.apply(t,[this].concat(u)),U$(j$(i),"state",{totalLength:-1}),i}return kde(r,[{key:"componentDidMount",value:function(){if(this.node&&this.node.getTotalLength)try{var c=this.node.getTotalLength();c&&this.setState({totalLength:c})}catch{}}},{key:"render",value:function(){var c=this,u=this.props,p=u.x,o=u.y,v=u.width,w=u.height,A=u.radius,T=u.className,P=this.state.totalLength,$=this.props,L=$.animationEasing,k=$.animationDuration,N=$.animationBegin,R=$.isAnimationActive,j=$.isUpdateAnimationActive;if(p!==+p||o!==+o||v!==+v||w!==+w||v===0||w===0)return null;var D=Mn("recharts-rectangle",T);return j?Ze.createElement(ch,{canBegin:P>0,from:{width:v,height:w,x:p,y:o},to:{width:v,height:w,x:p,y:o},duration:k,animationEasing:L,isActive:j},function(G){var W=G.width,Y=G.height,ee=G.x,de=G.y;return Ze.createElement(ch,{canBegin:P>0,from:"0px ".concat(P===-1?1:P,"px"),to:"".concat(P,"px 0px"),attributeName:"strokeDasharray",begin:N,duration:k,isActive:R,easing:L},Ze.createElement("path",Ox({},en(c.props,!0),{className:D,d:oL(ee,de,W,Y,A),ref:function(Me){c.node=Me}})))}):Ze.createElement("path",Ox({},en(this.props,!0),{className:D,d:oL(p,o,v,w,A)}))}}]),r}(Ke.PureComponent);U$(eb,"defaultProps",{x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"});function Id(e){return Id=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Id(e)}function HE(){return HE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},HE.apply(this,arguments)}function $de(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function aL(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,Nde(i.key),i)}}function Fde(e,t,r){return t&&aL(e.prototype,t),r&&aL(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Nde(e){var t=jde(e,"string");return Id(t)==="symbol"?t:String(t)}function jde(e,t){if(Id(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(Id(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Ude(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ZE(e,t)}function ZE(e,t){return ZE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,c){return i.__proto__=c,i},ZE(e,t)}function Vde(e){var t=Wde();return function(){var i=Rx(e),c;if(t){var u=Rx(this).constructor;c=Reflect.construct(i,arguments,u)}else c=i.apply(this,arguments);return Gde(this,c)}}function Gde(e,t){if(t&&(Id(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qde(e)}function qde(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wde(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Rx(e){return Rx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Rx(e)}var AM=function(e){Ude(r,e);var t=Vde(r);function r(){return $de(this,r),t.apply(this,arguments)}return Fde(r,[{key:"render",value:function(){var c=this.props,u=c.cx,p=c.cy,o=c.r,v=c.className,w=Mn("recharts-dot",v);return u===+u&&p===+p&&o===+o?Ze.createElement("circle",HE({},en(this.props),K0(this.props),{className:w,cx:u,cy:p,r:o})):null}}]),r}(Ke.PureComponent);function XE(){return XE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},XE.apply(this,arguments)}var Hde=function(t,r,i,c,u,p){return"M".concat(t,",").concat(u,"v").concat(c,"M").concat(p,",").concat(r,"h").concat(i)},G$=function(t){var r=t.x,i=t.y,c=t.width,u=t.height,p=t.top,o=t.left,v=t.className;return!Rt(r)||!Rt(i)||!Rt(c)||!Rt(u)||!Rt(p)||!Rt(o)?null:Ze.createElement("path",XE({},en(t,!0),{className:Mn("recharts-cross",v),d:Hde(r,i,c,u,p,o)}))};G$.defaultProps={x:0,y:0,top:0,left:0,width:0,height:0};var Zde=Math.ceil,Xde=Math.max;function Kde(e,t,r,i){for(var c=-1,u=Xde(Zde((t-e)/(r||1)),0),p=Array(u);u--;)p[i?u:++c]=e,e+=r;return p}var Yde=Kde,Jde=I4,sL=1/0,Qde=17976931348623157e292;function epe(e){if(!e)return e===0?e:0;if(e=Jde(e),e===sL||e===-sL){var t=e<0?-1:1;return t*Qde}return e===e?e:0}var q$=epe,tpe=Yde,rpe=V1,R2=q$;function npe(e){return function(t,r,i){return i&&typeof i!="number"&&rpe(t,r,i)&&(r=i=void 0),t=R2(t),r===void 0?(r=t,t=0):r=R2(r),i=i===void 0?t<r?1:-1:R2(i),tpe(t,r,i,e)}}var ipe=npe,ope=ipe,ape=ope(),spe=ape;const Lx=vn(spe);function oy(e){return oy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},oy(e)}function lL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,i)}return r}function cL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?lL(Object(r),!0).forEach(function(i){W$(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):lL(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function W$(e,t,r){return t=lpe(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function lpe(e){var t=cpe(e,"string");return oy(t)==="symbol"?t:String(t)}function cpe(e,t){if(oy(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(oy(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var upe=["Webkit","Moz","O","ms"],hpe=function(t,r){if(!t)return null;var i=t.replace(/(\w)/,function(u){return u.toUpperCase()}),c=upe.reduce(function(u,p){return cL(cL({},u),{},W$({},p+i,r))},{});return c[t]=r,c};function kd(e){return kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kd(e)}function zx(){return zx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},zx.apply(this,arguments)}function uL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,i)}return r}function L2(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?uL(Object(r),!0).forEach(function(i){va(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):uL(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function fpe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hL(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,H$(i.key),i)}}function dpe(e,t,r){return t&&hL(e.prototype,t),r&&hL(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function ppe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&KE(e,t)}function KE(e,t){return KE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,c){return i.__proto__=c,i},KE(e,t)}function mpe(e){var t=ype();return function(){var i=Bx(e),c;if(t){var u=Bx(this).constructor;c=Reflect.construct(i,arguments,u)}else c=i.apply(this,arguments);return gpe(this,c)}}function gpe(e,t){if(t&&(kd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ms(e)}function Ms(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ype(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Bx(e){return Bx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Bx(e)}function va(e,t,r){return t=H$(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function H$(e){var t=_pe(e,"string");return kd(t)==="symbol"?t:String(t)}function _pe(e,t){if(kd(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(kd(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var vpe=function(t){var r=t.data,i=t.startIndex,c=t.endIndex,u=t.x,p=t.width,o=t.travellerWidth;if(!r||!r.length)return{};var v=r.length,w=dg().domain(Lx(0,v)).range([u,u+p-o]),A=w.domain().map(function(T){return w(T)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,startX:w(i),endX:w(c),scale:w,scaleValues:A}},fL=function(t){return t.changedTouches&&!!t.changedTouches.length},ay=function(e){ppe(r,e);var t=mpe(r);function r(i){var c;return fpe(this,r),c=t.call(this,i),va(Ms(c),"handleDrag",function(u){c.leaveTimer&&(clearTimeout(c.leaveTimer),c.leaveTimer=null),c.state.isTravellerMoving?c.handleTravellerMove(u):c.state.isSlideMoving&&c.handleSlideDrag(u)}),va(Ms(c),"handleTouchMove",function(u){u.changedTouches!=null&&u.changedTouches.length>0&&c.handleDrag(u.changedTouches[0])}),va(Ms(c),"handleDragEnd",function(){c.setState({isTravellerMoving:!1,isSlideMoving:!1}),c.detachDragEndListener()}),va(Ms(c),"handleLeaveWrapper",function(){(c.state.isTravellerMoving||c.state.isSlideMoving)&&(c.leaveTimer=window.setTimeout(c.handleDragEnd,c.props.leaveTimeOut))}),va(Ms(c),"handleEnterSlideOrTraveller",function(){c.setState({isTextActive:!0})}),va(Ms(c),"handleLeaveSlideOrTraveller",function(){c.setState({isTextActive:!1})}),va(Ms(c),"handleSlideDragStart",function(u){var p=fL(u)?u.changedTouches[0]:u;c.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:p.pageX}),c.attachDragEndListener()}),c.travellerDragStartHandlers={startX:c.handleTravellerDragStart.bind(Ms(c),"startX"),endX:c.handleTravellerDragStart.bind(Ms(c),"endX")},c.state={},c}return dpe(r,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(c){var u=c.startX,p=c.endX,o=this.state.scaleValues,v=this.props,w=v.gap,A=v.data,T=A.length-1,P=Math.min(u,p),$=Math.max(u,p),L=r.getIndexInRange(o,P),k=r.getIndexInRange(o,$);return{startIndex:L-L%w,endIndex:k===T?T:k-k%w}}},{key:"getTextOfTick",value:function(c){var u=this.props,p=u.data,o=u.tickFormatter,v=u.dataKey,w=na(p[c],v,c);return gr(o)?o(w,c):w}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(c){var u=this.state,p=u.slideMoveStartX,o=u.startX,v=u.endX,w=this.props,A=w.x,T=w.width,P=w.travellerWidth,$=w.startIndex,L=w.endIndex,k=w.onChange,N=c.pageX-p;N>0?N=Math.min(N,A+T-P-v,A+T-P-o):N<0&&(N=Math.max(N,A-o,A-v));var R=this.getIndex({startX:o+N,endX:v+N});(R.startIndex!==$||R.endIndex!==L)&&k&&k(R),this.setState({startX:o+N,endX:v+N,slideMoveStartX:c.pageX})}},{key:"handleTravellerDragStart",value:function(c,u){var p=fL(u)?u.changedTouches[0]:u;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:c,brushMoveStartX:p.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(c){var u,p=this.state,o=p.brushMoveStartX,v=p.movingTravellerId,w=p.endX,A=p.startX,T=this.state[v],P=this.props,$=P.x,L=P.width,k=P.travellerWidth,N=P.onChange,R=P.gap,j=P.data,D={startX:this.state.startX,endX:this.state.endX},G=c.pageX-o;G>0?G=Math.min(G,$+L-k-T):G<0&&(G=Math.max(G,$-T)),D[v]=T+G;var W=this.getIndex(D),Y=W.startIndex,ee=W.endIndex,de=function(){var Me=j.length-1;return v==="startX"&&(w>A?Y%R===0:ee%R===0)||w<A&&ee===Me||v==="endX"&&(w>A?ee%R===0:Y%R===0)||w>A&&ee===Me};this.setState((u={},va(u,v,T+G),va(u,"brushMoveStartX",c.pageX),u),function(){N&&de()&&N(W)})}},{key:"renderBackground",value:function(){var c=this.props,u=c.x,p=c.y,o=c.width,v=c.height,w=c.fill,A=c.stroke;return Ze.createElement("rect",{stroke:A,fill:w,x:u,y:p,width:o,height:v})}},{key:"renderPanorama",value:function(){var c=this.props,u=c.x,p=c.y,o=c.width,v=c.height,w=c.data,A=c.children,T=c.padding,P=Ke.Children.only(A);return P?Ze.cloneElement(P,{x:u,y:p,width:o,height:v,margin:T,compact:!0,data:w}):null}},{key:"renderTravellerLayer",value:function(c,u){var p=this.props,o=p.y,v=p.travellerWidth,w=p.height,A=p.traveller,T=Math.max(c,this.props.x),P=L2(L2({},en(this.props)),{},{x:T,y:o,width:v,height:w});return Ze.createElement(ui,{className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[u],onTouchStart:this.travellerDragStartHandlers[u],style:{cursor:"col-resize"}},r.renderTraveller(A,P))}},{key:"renderSlide",value:function(c,u){var p=this.props,o=p.y,v=p.height,w=p.stroke,A=p.travellerWidth,T=Math.min(c,u)+A,P=Math.max(Math.abs(u-c)-A,0);return Ze.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:w,fillOpacity:.2,x:T,y:o,width:P,height:v})}},{key:"renderText",value:function(){var c=this.props,u=c.startIndex,p=c.endIndex,o=c.y,v=c.height,w=c.travellerWidth,A=c.stroke,T=this.state,P=T.startX,$=T.endX,L=5,k={pointerEvents:"none",fill:A};return Ze.createElement(ui,{className:"recharts-brush-texts"},Ze.createElement(qg,zx({textAnchor:"end",verticalAnchor:"middle",x:Math.min(P,$)-L,y:o+v/2},k),this.getTextOfTick(u)),Ze.createElement(qg,zx({textAnchor:"start",verticalAnchor:"middle",x:Math.max(P,$)+w+L,y:o+v/2},k),this.getTextOfTick(p)))}},{key:"render",value:function(){var c=this.props,u=c.data,p=c.className,o=c.children,v=c.x,w=c.y,A=c.width,T=c.height,P=c.alwaysShowText,$=this.state,L=$.startX,k=$.endX,N=$.isTextActive,R=$.isSlideMoving,j=$.isTravellerMoving;if(!u||!u.length||!Rt(v)||!Rt(w)||!Rt(A)||!Rt(T)||A<=0||T<=0)return null;var D=Mn("recharts-brush",p),G=Ze.Children.count(o)===1,W=hpe("userSelect","none");return Ze.createElement(ui,{className:D,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:W},this.renderBackground(),G&&this.renderPanorama(),this.renderSlide(L,k),this.renderTravellerLayer(L,"startX"),this.renderTravellerLayer(k,"endX"),(N||R||j||P)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(c){var u=c.x,p=c.y,o=c.width,v=c.height,w=c.stroke,A=Math.floor(p+v/2)-1;return Ze.createElement(Ze.Fragment,null,Ze.createElement("rect",{x:u,y:p,width:o,height:v,fill:w,stroke:"none"}),Ze.createElement("line",{x1:u+1,y1:A,x2:u+o-1,y2:A,fill:"none",stroke:"#fff"}),Ze.createElement("line",{x1:u+1,y1:A+2,x2:u+o-1,y2:A+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(c,u){var p;return Ze.isValidElement(c)?p=Ze.cloneElement(c,u):gr(c)?p=c(u):p=r.renderDefaultTraveller(u),p}},{key:"getDerivedStateFromProps",value:function(c,u){var p=c.data,o=c.width,v=c.x,w=c.travellerWidth,A=c.updateId,T=c.startIndex,P=c.endIndex;if(p!==u.prevData||A!==u.prevUpdateId)return L2({prevData:p,prevTravellerWidth:w,prevUpdateId:A,prevX:v,prevWidth:o},p&&p.length?vpe({data:p,width:o,x:v,travellerWidth:w,startIndex:T,endIndex:P}):{scale:null,scaleValues:null});if(u.scale&&(o!==u.prevWidth||v!==u.prevX||w!==u.prevTravellerWidth)){u.scale.range([v,v+o-w]);var $=u.scale.domain().map(function(L){return u.scale(L)});return{prevData:p,prevTravellerWidth:w,prevUpdateId:A,prevX:v,prevWidth:o,startX:u.scale(c.startIndex),endX:u.scale(c.endIndex),scaleValues:$}}return null}},{key:"getIndexInRange",value:function(c,u){for(var p=c.length,o=0,v=p-1;v-o>1;){var w=Math.floor((o+v)/2);c[w]>u?v=w:o=w}return u>=c[v]?v:o}}]),r}(Ke.PureComponent);va(ay,"displayName","Brush");va(ay,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var xpe=XA;function bpe(e,t){var r;return xpe(e,function(i,c,u){return r=t(i,c,u),!r}),!!r}var wpe=bpe,Spe=PB,Epe=Wc,Tpe=wpe,Ape=Eo,Mpe=V1;function Cpe(e,t,r){var i=Ape(e)?Spe:Tpe;return r&&Mpe(e,t,r)&&(t=void 0),i(e,Epe(t))}var Ppe=Cpe;const Ipe=vn(Ppe);var Ns=function(t,r){var i=t.alwaysShow,c=t.ifOverflow;return i&&(c="extendDomain"),c===r};function kpe(e,t){for(var r=-1,i=e==null?0:e.length;++r<i;)if(!t(e[r],r,e))return!1;return!0}var Ope=kpe,Dpe=XA;function Rpe(e,t){var r=!0;return Dpe(e,function(i,c,u){return r=!!t(i,c,u),r}),r}var Lpe=Rpe,zpe=Ope,Bpe=Lpe,$pe=Wc,Fpe=Eo,Npe=V1;function jpe(e,t,r){var i=Fpe(e)?zpe:Bpe;return r&&Npe(e,t,r)&&(t=void 0),i(e,$pe(t))}var Upe=jpe;const Z$=vn(Upe);var dL=C4;function Vpe(e,t,r){t=="__proto__"&&dL?dL(e,t,{configurable:!0,enumerable:!0,value:r,writable:!0}):e[t]=r}var Gpe=Vpe,qpe=Gpe,Wpe=A4,Hpe=Wc;function Zpe(e,t){var r={};return t=Hpe(t),Wpe(e,function(i,c,u){qpe(r,c,t(i,c,u))}),r}var Xpe=Zpe;const Kpe=vn(Xpe);var Ype=["value","background"];function Od(e){return Od=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Od(e)}function Jpe(e,t){if(e==null)return{};var r=Qpe(e,t),i,c;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(c=0;c<u.length;c++)i=u[c],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function Qpe(e,t){if(e==null)return{};var r={},i=Object.keys(e),c,u;for(u=0;u<i.length;u++)c=i[u],!(t.indexOf(c)>=0)&&(r[c]=e[c]);return r}function YE(){return YE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},YE.apply(this,arguments)}function pL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,i)}return r}function Ri(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?pL(Object(r),!0).forEach(function(i){Ac(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):pL(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function eme(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mL(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,X$(i.key),i)}}function tme(e,t,r){return t&&mL(e.prototype,t),r&&mL(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function rme(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&JE(e,t)}function JE(e,t){return JE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,c){return i.__proto__=c,i},JE(e,t)}function nme(e){var t=ome();return function(){var i=$x(e),c;if(t){var u=$x(this).constructor;c=Reflect.construct(i,arguments,u)}else c=i.apply(this,arguments);return ime(this,c)}}function ime(e,t){if(t&&(Od(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jm(e)}function Jm(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ome(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function $x(e){return $x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},$x(e)}function Ac(e,t,r){return t=X$(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function X$(e){var t=ame(e,"string");return Od(t)==="symbol"?t:String(t)}function ame(e,t){if(Od(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(Od(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tb=function(e){rme(r,e);var t=nme(r);function r(){var i;eme(this,r);for(var c=arguments.length,u=new Array(c),p=0;p<c;p++)u[p]=arguments[p];return i=t.call.apply(t,[this].concat(u)),Ac(Jm(i),"state",{isAnimationFinished:!1}),Ac(Jm(i),"id",Cy("recharts-bar-")),Ac(Jm(i),"handleAnimationEnd",function(){var o=i.props.onAnimationEnd;i.setState({isAnimationFinished:!0}),o&&o()}),Ac(Jm(i),"handleAnimationStart",function(){var o=i.props.onAnimationStart;i.setState({isAnimationFinished:!1}),o&&o()}),i}return tme(r,[{key:"renderRectanglesStatically",value:function(c){var u=this,p=this.props.shape,o=en(this.props);return c&&c.map(function(v,w){var A=Ri(Ri(Ri({},o),v),{},{index:w});return Ze.createElement(ui,YE({className:"recharts-bar-rectangle"},Y0(u.props,v,w),{key:"rectangle-".concat(w),role:"img"}),r.renderRectangle(p,A))})}},{key:"renderRectanglesWithAnimation",value:function(){var c=this,u=this.props,p=u.data,o=u.layout,v=u.isAnimationActive,w=u.animationBegin,A=u.animationDuration,T=u.animationEasing,P=u.animationId,$=this.state.prevData;return Ze.createElement(ch,{begin:w,duration:A,isActive:v,easing:T,from:{t:0},to:{t:1},key:"bar-".concat(P),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(L){var k=L.t,N=p.map(function(R,j){var D=$&&$[j];if(D){var G=ts(D.x,R.x),W=ts(D.y,R.y),Y=ts(D.width,R.width),ee=ts(D.height,R.height);return Ri(Ri({},R),{},{x:G(k),y:W(k),width:Y(k),height:ee(k)})}if(o==="horizontal"){var de=ts(0,R.height),xe=de(k);return Ri(Ri({},R),{},{y:R.y+R.height-xe,height:xe})}var Me=ts(0,R.width),Ce=Me(k);return Ri(Ri({},R),{},{width:Ce})});return Ze.createElement(ui,null,c.renderRectanglesStatically(N))})}},{key:"renderRectangles",value:function(){var c=this.props,u=c.data,p=c.isAnimationActive,o=this.state.prevData;return p&&u&&u.length&&(!o||!eM(o,u))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(u)}},{key:"renderBackground",value:function(){var c=this,u=this.props.data,p=en(this.props.background);return u.map(function(o,v){o.value;var w=o.background,A=Jpe(o,Ype);if(!w)return null;var T=Ri(Ri(Ri(Ri(Ri({},A),{},{fill:"#eee"},w),p),Y0(c.props,o,v)),{},{index:v,key:"background-bar-".concat(v),className:"recharts-bar-background-rectangle"});return r.renderRectangle(c.props.background,T)})}},{key:"renderErrorBar",value:function(c,u){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var p=this.props,o=p.data,v=p.xAxis,w=p.yAxis,A=p.layout,T=p.children,P=Ca(T,Ly);if(!P)return null;var $=A==="vertical"?o[0].height/2:o[0].width/2;function L(N,R){return{x:N.x,y:N.y,value:N.value,errorVal:na(N,R)}}var k={clipPath:c?"url(#clipPath-".concat(u,")"):null};return Ze.createElement(ui,k,P.map(function(N,R){return Ze.cloneElement(N,{key:"error-bar-".concat(R),data:o,xAxis:v,yAxis:w,layout:A,offset:$,dataPointFormatter:L})}))}},{key:"render",value:function(){var c=this.props,u=c.hide,p=c.data,o=c.className,v=c.xAxis,w=c.yAxis,A=c.left,T=c.top,P=c.width,$=c.height,L=c.isAnimationActive,k=c.background,N=c.id;if(u||!p||!p.length)return null;var R=this.state.isAnimationFinished,j=Mn("recharts-bar",o),D=v&&v.allowDataOverflow||w&&w.allowDataOverflow,G=ur(N)?this.id:N;return Ze.createElement(ui,{className:j},D?Ze.createElement("defs",null,Ze.createElement("clipPath",{id:"clipPath-".concat(G)},Ze.createElement("rect",{x:A,y:T,width:P,height:$}))):null,Ze.createElement(ui,{className:"recharts-bar-rectangles",clipPath:D?"url(#clipPath-".concat(G,")"):null},k?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(D,G),(!L||R)&&Sl.renderCallByParent(this.props,p))}}],[{key:"getDerivedStateFromProps",value:function(c,u){return c.animationId!==u.prevAnimationId?{prevAnimationId:c.animationId,curData:c.data,prevData:u.curData}:c.data!==u.curData?{curData:c.data}:null}},{key:"renderRectangle",value:function(c,u){var p;return Ze.isValidElement(c)?p=Ze.cloneElement(c,u):gr(c)?p=c(u):p=Ze.createElement(eb,u),p}}]),r}(Ke.PureComponent);Ac(tb,"displayName","Bar");Ac(tb,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",isAnimationActive:!bl.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Ac(tb,"getComposedData",function(e){var t=e.props,r=e.item,i=e.barPosition,c=e.bandSize,u=e.xAxis,p=e.yAxis,o=e.xAxisTicks,v=e.yAxisTicks,w=e.stackedData,A=e.dataStartIndex,T=e.displayedData,P=e.offset,$=gfe(i,r);if(!$)return null;var L=t.layout,k=r.props,N=k.dataKey,R=k.children,j=k.minPointSize,D=L==="horizontal"?p:u,G=w?D.scale.domain():null,W=Efe({numericAxis:D}),Y=Ca(R,k4),ee=T.map(function(de,xe){var Me,Ce,qe,Ue,ut,Be;if(w?Me=yfe(w[A+xe],G):(Me=na(de,N),Hi(Me)||(Me=[W,Me])),L==="horizontal"){var bt,kt=[p.scale(Me[0]),p.scale(Me[1])],He=kt[0],nt=kt[1];Ce=GR({axis:u,ticks:o,bandSize:c,offset:$.offset,entry:de,index:xe}),qe=(bt=nt??He)!==null&&bt!==void 0?bt:void 0,Ue=$.size;var gt=He-nt;if(ut=Number.isNaN(gt)?0:gt,Be={x:Ce,y:p.y,width:Ue,height:p.height},Math.abs(j)>0&&Math.abs(ut)<Math.abs(j)){var xt=Sa(ut||j)*(Math.abs(j)-Math.abs(ut));qe-=xt,ut+=xt}}else{var zt=[u.scale(Me[0]),u.scale(Me[1])],Vt=zt[0],Zt=zt[1];if(Ce=Vt,qe=GR({axis:p,ticks:v,bandSize:c,offset:$.offset,entry:de,index:xe}),Ue=Zt-Vt,ut=$.size,Be={x:u.x,y:qe,width:u.width,height:ut},Math.abs(j)>0&&Math.abs(Ue)<Math.abs(j)){var hr=Sa(Ue||j)*(Math.abs(j)-Math.abs(Ue));Ue+=hr}}return Ri(Ri(Ri({},de),{},{x:Ce,y:qe,width:Ue,height:ut,value:w?Me:Me[1],payload:de,background:Be},Y&&Y[xe]&&Y[xe].props),{},{tooltipPayload:[z$(r,de)],tooltipPosition:{x:Ce+Ue/2,y:qe+ut/2}})});return Ri({data:ee,layout:L},P)});function sy(e){return sy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sy(e)}function sme(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gL(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,K$(i.key),i)}}function lme(e,t,r){return t&&gL(e.prototype,t),r&&gL(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function yL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,i)}return r}function Qa(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?yL(Object(r),!0).forEach(function(i){rb(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):yL(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function rb(e,t,r){return t=K$(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function K$(e){var t=cme(e,"string");return sy(t)==="symbol"?t:String(t)}function cme(e,t){if(sy(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(sy(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ume=function(t,r,i,c,u){var p=t.width,o=t.height,v=t.layout,w=t.children,A=Object.keys(r),T={left:i.left,leftMirror:i.left,right:p-i.right,rightMirror:p-i.right,top:i.top,topMirror:i.top,bottom:o-i.bottom,bottomMirror:o-i.bottom},P=!!pl(w,tb);return A.reduce(function($,L){var k=r[L],N=k.orientation,R=k.domain,j=k.padding,D=j===void 0?{}:j,G=k.mirror,W=k.reversed,Y="".concat(N).concat(G?"Mirror":""),ee,de,xe,Me,Ce;if(k.type==="number"&&(k.padding==="gap"||k.padding==="no-gap")){var qe=R[1]-R[0],Ue=1/0,ut=k.categoricalDomain.sort();ut.forEach(function(Zt,hr){hr>0&&(Ue=Math.min((Zt||0)-(ut[hr-1]||0),Ue))});var Be=Ue/qe,bt=k.layout==="vertical"?i.height:i.width;if(k.padding==="gap"&&(ee=Be*bt/2),k.padding==="no-gap"){var kt=gd(t.barCategoryGap,Be*bt),He=Be*bt/2;ee=He-kt-(He-kt)/bt*kt}}c==="xAxis"?de=[i.left+(D.left||0)+(ee||0),i.left+i.width-(D.right||0)-(ee||0)]:c==="yAxis"?de=v==="horizontal"?[i.top+i.height-(D.bottom||0),i.top+(D.top||0)]:[i.top+(D.top||0)+(ee||0),i.top+i.height-(D.bottom||0)-(ee||0)]:de=k.range,W&&(de=[de[1],de[0]]);var nt=pfe(k,u,P),gt=nt.scale,xt=nt.realScaleType;gt.domain(R).range(de),mfe(gt);var zt=Sfe(gt,Qa(Qa({},k),{},{realScaleType:xt}));c==="xAxis"?(Ce=N==="top"&&!G||N==="bottom"&&G,xe=i.left,Me=T[Y]-Ce*k.height):c==="yAxis"&&(Ce=N==="left"&&!G||N==="right"&&G,xe=T[Y]-Ce*k.width,Me=i.top);var Vt=Qa(Qa(Qa({},k),zt),{},{realScaleType:xt,x:xe,y:Me,scale:gt,width:c==="xAxis"?i.width:k.width,height:c==="yAxis"?i.height:k.height});return Vt.bandSize=Mx(Vt,zt),!k.hide&&c==="xAxis"?T[Y]+=(Ce?-1:1)*Vt.height:k.hide||(T[Y]+=(Ce?-1:1)*Vt.width),Qa(Qa({},$),{},rb({},L,Vt))},{})},Y$=function(t,r){var i=t.x,c=t.y,u=r.x,p=r.y;return{x:Math.min(i,u),y:Math.min(c,p),width:Math.abs(u-i),height:Math.abs(p-c)}},hme=function(t){var r=t.x1,i=t.y1,c=t.x2,u=t.y2;return Y$({x:r,y:i},{x:c,y:u})},J$=function(){function e(t){sme(this,e),this.scale=t}return lme(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(r){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},c=i.bandAware,u=i.position;if(r!==void 0){if(u)switch(u){case"start":return this.scale(r);case"middle":{var p=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+p}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(r)+o}default:return this.scale(r)}if(c){var v=this.bandwidth?this.bandwidth()/2:0;return this.scale(r)+v}return this.scale(r)}}},{key:"isInRange",value:function(r){var i=this.range(),c=i[0],u=i[i.length-1];return c<=u?r>=c&&r<=u:r>=u&&r<=c}}],[{key:"create",value:function(r){return new e(r)}}]),e}();rb(J$,"EPS",1e-4);var MM=function(t){var r=Object.keys(t).reduce(function(i,c){return Qa(Qa({},i),{},rb({},c,J$.create(t[c])))},{});return Qa(Qa({},r),{},{apply:function(c){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},p=u.bandAware,o=u.position;return Kpe(c,function(v,w){return r[w].apply(v,{bandAware:p,position:o})})},isInRange:function(c){return Z$(c,function(u,p){return r[p].isInRange(u)})}})};function ly(e){return ly=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ly(e)}function _L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,i)}return r}function vL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?_L(Object(r),!0).forEach(function(i){fme(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):_L(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function fme(e,t,r){return t=dme(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function dme(e){var t=pme(e,"string");return ly(t)==="symbol"?t:String(t)}function pme(e,t){if(ly(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(ly(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mme(e,t){return vme(e)||_me(e,t)||yme(e,t)||gme()}function gme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yme(e,t){if(e){if(typeof e=="string")return xL(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return xL(e,t)}}function xL(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function _me(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,c,u,p,o=[],v=!0,w=!1;try{if(u=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;v=!1}else for(;!(v=(i=u.call(r)).done)&&(o.push(i.value),o.length!==t);v=!0);}catch(A){w=!0,c=A}finally{try{if(!v&&r.return!=null&&(p=r.return(),Object(p)!==p))return}finally{if(w)throw c}}return o}}function vme(e){if(Array.isArray(e))return e}function QE(){return QE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},QE.apply(this,arguments)}var xme=function(t,r){var i;return Ze.isValidElement(t)?i=Ze.cloneElement(t,r):gr(t)?i=t(r):i=Ze.createElement("line",QE({},r,{className:"recharts-reference-line-line"})),i},bme=function(t,r,i,c,u){var p=u.viewBox,o=p.x,v=p.y,w=p.width,A=p.height,T=u.position;if(i){var P=u.y,$=u.yAxis.orientation,L=t.y.apply(P,{position:T});if(Ns(u,"discard")&&!t.y.isInRange(L))return null;var k=[{x:o+w,y:L},{x:o,y:L}];return $==="left"?k.reverse():k}if(r){var N=u.x,R=u.xAxis.orientation,j=t.x.apply(N,{position:T});if(Ns(u,"discard")&&!t.x.isInRange(j))return null;var D=[{x:j,y:v+A},{x:j,y:v}];return R==="top"?D.reverse():D}if(c){var G=u.segment,W=G.map(function(Y){return t.apply(Y,{position:T})});return Ns(u,"discard")&&Ipe(W,function(Y){return!t.isInRange(Y)})?null:W}return null};function CM(e){var t=e.x,r=e.y,i=e.segment,c=e.xAxis,u=e.yAxis,p=e.shape,o=e.className,v=e.alwaysShow,w=e.clipPathId;QA(v===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var A=MM({x:c.scale,y:u.scale}),T=wi(t),P=wi(r),$=i&&i.length===2,L=bme(A,T,P,$,e);if(!L)return null;var k=mme(L,2),N=k[0],R=N.x,j=N.y,D=k[1],G=D.x,W=D.y,Y=Ns(e,"hidden")?"url(#".concat(w,")"):void 0,ee=vL(vL({clipPath:Y},en(e,!0)),{},{x1:R,y1:j,x2:G,y2:W});return Ze.createElement(ui,{className:Mn("recharts-reference-line",o)},xme(p,ee),Wi.renderCallByParent(e,hme({x1:R,y1:j,x2:G,y2:W})))}CM.displayName="ReferenceLine";CM.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"};function cy(e){return cy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cy(e)}function eT(){return eT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},eT.apply(this,arguments)}function bL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,i)}return r}function wL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?bL(Object(r),!0).forEach(function(i){wme(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):bL(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function wme(e,t,r){return t=Sme(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Sme(e){var t=Eme(e,"string");return cy(t)==="symbol"?t:String(t)}function Eme(e,t){if(cy(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(cy(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Tme=function(t){var r=t.x,i=t.y,c=t.xAxis,u=t.yAxis,p=MM({x:c.scale,y:u.scale}),o=p.apply({x:r,y:i},{bandAware:!0});return Ns(t,"discard")&&!p.isInRange(o)?null:o};function zy(e){var t=e.x,r=e.y,i=e.r,c=e.alwaysShow,u=e.clipPathId,p=wi(t),o=wi(r);if(QA(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!p||!o)return null;var v=Tme(e);if(!v)return null;var w=v.x,A=v.y,T=e.shape,P=e.className,$=Ns(e,"hidden")?"url(#".concat(u,")"):void 0,L=wL(wL({clipPath:$},en(e,!0)),{},{cx:w,cy:A});return Ze.createElement(ui,{className:Mn("recharts-reference-dot",P)},zy.renderDot(T,L),Wi.renderCallByParent(e,{x:w-i,y:A-i,width:2*i,height:2*i}))}zy.displayName="ReferenceDot";zy.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1};zy.renderDot=function(e,t){var r;return Ze.isValidElement(e)?r=Ze.cloneElement(e,t):gr(e)?r=e(t):r=Ze.createElement(AM,eT({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),r};function uy(e){return uy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},uy(e)}function tT(){return tT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},tT.apply(this,arguments)}function SL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,i)}return r}function EL(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?SL(Object(r),!0).forEach(function(i){Ame(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):SL(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function Ame(e,t,r){return t=Mme(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Mme(e){var t=Cme(e,"string");return uy(t)==="symbol"?t:String(t)}function Cme(e,t){if(uy(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(uy(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Pme=function(t,r,i,c,u){var p=u.x1,o=u.x2,v=u.y1,w=u.y2,A=u.xAxis,T=u.yAxis;if(!A||!T)return null;var P=MM({x:A.scale,y:T.scale}),$={x:t?P.x.apply(p,{position:"start"}):P.x.rangeMin,y:i?P.y.apply(v,{position:"start"}):P.y.rangeMin},L={x:r?P.x.apply(o,{position:"end"}):P.x.rangeMax,y:c?P.y.apply(w,{position:"end"}):P.y.rangeMax};return Ns(u,"discard")&&(!P.isInRange($)||!P.isInRange(L))?null:Y$($,L)};function By(e){var t=e.x1,r=e.x2,i=e.y1,c=e.y2,u=e.className,p=e.alwaysShow,o=e.clipPathId;QA(p===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var v=wi(t),w=wi(r),A=wi(i),T=wi(c),P=e.shape;if(!v&&!w&&!A&&!T&&!P)return null;var $=Pme(v,w,A,T,e);if(!$&&!P)return null;var L=Ns(e,"hidden")?"url(#".concat(o,")"):void 0;return Ze.createElement(ui,{className:Mn("recharts-reference-area",u)},By.renderRect(P,EL(EL({clipPath:L},en(e,!0)),$)),Wi.renderCallByParent(e,$))}By.displayName="ReferenceArea";By.defaultProps={isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1};By.renderRect=function(e,t){var r;return Ze.isValidElement(e)?r=Ze.cloneElement(e,t):gr(e)?r=e(t):r=Ze.createElement(eb,tT({},t,{className:"recharts-reference-area-rect"})),r};function rT(e,t,r){if(t<1)return[];if(t===1&&r===void 0)return e;for(var i=[],c=0;c<e.length;c+=t)if(r===void 0||r(e[c])===!0)i.push(e[c]);else return;return i}function hy(e){return hy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hy(e)}function TL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,i)}return r}function co(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?TL(Object(r),!0).forEach(function(i){Ime(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):TL(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function Ime(e,t,r){return t=kme(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kme(e){var t=Ome(e,"string");return hy(t)==="symbol"?t:String(t)}function Ome(e,t){if(hy(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(hy(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Dme(e){for(var t=1,r=rT(e,t,function(i){return i.isShow});t<=e.length;){if(r!==void 0)return r;t++,r=rT(e,t,function(i){return i.isShow})}return e.slice(0,1)}function Rme(e,t){return rT(e,t+1)}function Lme(e){var t=e.ticks,r=e.tickFormatter,i=e.viewBox,c=e.orientation,u=e.minTickGap,p=e.unit,o=e.fontSize,v=e.letterSpacing,w=i.x,A=i.y,T=i.width,P=i.height,$=c==="top"||c==="bottom"?"width":"height",L=p&&$==="width"?th(p,{fontSize:o,letterSpacing:v})[$]:0,k=(t||[]).slice(),N=k.length,R=N>=2?Sa(k[1].coordinate-k[0].coordinate):1,j,D;R===1?(j=$==="width"?w:A,D=$==="width"?w+T:A+P):(j=$==="width"?w+T:A+P,D=$==="width"?w:A);for(var G=N-1;G>=0;G--){var W=k[G],Y=gr(r)?r(W.value,N-G-1):W.value,ee=th(Y,{fontSize:o,letterSpacing:v})[$]+L;if(G===N-1){var de=R*(W.coordinate+R*ee/2-D);k[G]=W=co(co({},W),{},{tickCoord:de>0?W.coordinate-de*R:W.coordinate})}else k[G]=W=co(co({},W),{},{tickCoord:W.coordinate});var xe=R*(W.tickCoord-R*ee/2-j)>=0&&R*(W.tickCoord+R*ee/2-D)<=0;xe&&(D=W.tickCoord-R*(ee/2+u),k[G]=co(co({},W),{},{isShow:!0}))}return k}function AL(e,t){var r=e.ticks,i=e.tickFormatter,c=e.viewBox,u=e.orientation,p=e.minTickGap,o=e.unit,v=e.fontSize,w=e.letterSpacing,A=c.x,T=c.y,P=c.width,$=c.height,L=u==="top"||u==="bottom"?"width":"height",k=(r||[]).slice(),N=o&&L==="width"?th(o,{fontSize:v,letterSpacing:w})[L]:0,R=k.length,j=R>=2?Sa(k[1].coordinate-k[0].coordinate):1,D,G;if(j===1?(D=L==="width"?A:T,G=L==="width"?A+P:T+$):(D=L==="width"?A+P:T+$,G=L==="width"?A:T),t){var W=r[R-1],Y=gr(i)?i(W.value,R-1):W.value,ee=th(Y,{fontSize:v,letterSpacing:w})[L]+N,de=j*(W.coordinate+j*ee/2-G);k[R-1]=W=co(co({},W),{},{tickCoord:de>0?W.coordinate-de*j:W.coordinate});var xe=j*(W.tickCoord-j*ee/2-D)>=0&&j*(W.tickCoord+j*ee/2-G)<=0;xe&&(G=W.tickCoord-j*(ee/2+p),k[R-1]=co(co({},W),{},{isShow:!0}))}for(var Me=t?R-1:R,Ce=0;Ce<Me;Ce++){var qe=k[Ce],Ue=gr(i)?i(qe.value,Ce):qe.value,ut=th(Ue,{fontSize:v,letterSpacing:w})[L]+N;if(Ce===0){var Be=j*(qe.coordinate-j*ut/2-D);k[Ce]=qe=co(co({},qe),{},{tickCoord:Be<0?qe.coordinate-Be*j:qe.coordinate})}else k[Ce]=qe=co(co({},qe),{},{tickCoord:qe.coordinate});var bt=j*(qe.tickCoord-j*ut/2-D)>=0&&j*(qe.tickCoord+j*ut/2-G)<=0;bt&&(D=qe.tickCoord+j*(ut/2+p),k[Ce]=co(co({},qe),{},{isShow:!0}))}return k}function nT(e,t,r){var i=e.tick,c=e.ticks,u=e.viewBox,p=e.minTickGap,o=e.orientation,v=e.interval,w=e.tickFormatter,A=e.unit;if(!c||!c.length||!i)return[];if(Rt(v)||bl.isSsr)return Rme(c,typeof v=="number"&&Rt(v)?v:0);var T=[];return v==="equidistantPreserveStart"?(T=AL({ticks:c,tickFormatter:w,viewBox:u,orientation:o,minTickGap:p,unit:A,fontSize:t,letterSpacing:r}),Dme(T)):(v==="preserveStart"||v==="preserveStartEnd"?T=AL({ticks:c,tickFormatter:w,viewBox:u,orientation:o,minTickGap:p,unit:A,fontSize:t,letterSpacing:r},v==="preserveStartEnd"):T=Lme({ticks:c,tickFormatter:w,viewBox:u,orientation:o,minTickGap:p,unit:A,fontSize:t,letterSpacing:r}),T.filter(function(P){return P.isShow}))}var zme=["viewBox"],Bme=["viewBox"],$me=["ticks"];function Dd(e){return Dd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dd(e)}function Gf(){return Gf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},Gf.apply(this,arguments)}function ML(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,i)}return r}function yo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ML(Object(r),!0).forEach(function(i){PM(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ML(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function z2(e,t){if(e==null)return{};var r=Fme(e,t),i,c;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(c=0;c<u.length;c++)i=u[c],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function Fme(e,t){if(e==null)return{};var r={},i=Object.keys(e),c,u;for(u=0;u<i.length;u++)c=i[u],!(t.indexOf(c)>=0)&&(r[c]=e[c]);return r}function Nme(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function CL(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,Q$(i.key),i)}}function jme(e,t,r){return t&&CL(e.prototype,t),r&&CL(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ume(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&iT(e,t)}function iT(e,t){return iT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,c){return i.__proto__=c,i},iT(e,t)}function Vme(e){var t=Wme();return function(){var i=Fx(e),c;if(t){var u=Fx(this).constructor;c=Reflect.construct(i,arguments,u)}else c=i.apply(this,arguments);return Gme(this,c)}}function Gme(e,t){if(t&&(Dd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qme(e)}function qme(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Wme(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Fx(e){return Fx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Fx(e)}function PM(e,t,r){return t=Q$(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Q$(e){var t=Hme(e,"string");return Dd(t)==="symbol"?t:String(t)}function Hme(e,t){if(Dd(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(Dd(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var mg=function(e){Ume(r,e);var t=Vme(r);function r(i){var c;return Nme(this,r),c=t.call(this,i),c.state={fontSize:"",letterSpacing:""},c}return jme(r,[{key:"shouldComponentUpdate",value:function(c,u){var p=c.viewBox,o=z2(c,zme),v=this.props,w=v.viewBox,A=z2(v,Bme);return!td(p,w)||!td(o,A)||!td(u,this.state)}},{key:"componentDidMount",value:function(){var c=this.layerReference;if(c){var u=c.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];u&&this.setState({fontSize:window.getComputedStyle(u).fontSize,letterSpacing:window.getComputedStyle(u).letterSpacing})}}},{key:"getTickLineCoord",value:function(c){var u=this.props,p=u.x,o=u.y,v=u.width,w=u.height,A=u.orientation,T=u.tickSize,P=u.mirror,$=u.tickMargin,L,k,N,R,j,D,G=P?-1:1,W=c.tickSize||T,Y=Rt(c.tickCoord)?c.tickCoord:c.coordinate;switch(A){case"top":L=k=c.coordinate,R=o+ +!P*w,N=R-G*W,D=N-G*$,j=Y;break;case"left":N=R=c.coordinate,k=p+ +!P*v,L=k-G*W,j=L-G*$,D=Y;break;case"right":N=R=c.coordinate,k=p+ +P*v,L=k+G*W,j=L+G*$,D=Y;break;default:L=k=c.coordinate,R=o+ +P*w,N=R+G*W,D=N+G*$,j=Y;break}return{line:{x1:L,y1:N,x2:k,y2:R},tick:{x:j,y:D}}}},{key:"getTickTextAnchor",value:function(){var c=this.props,u=c.orientation,p=c.mirror,o;switch(u){case"left":o=p?"start":"end";break;case"right":o=p?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var c=this.props,u=c.orientation,p=c.mirror,o="end";switch(u){case"left":case"right":o="middle";break;case"top":o=p?"start":"end";break;default:o=p?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var c=this.props,u=c.x,p=c.y,o=c.width,v=c.height,w=c.orientation,A=c.mirror,T=c.axisLine,P=yo(yo(yo({},en(this.props)),en(T)),{},{fill:"none"});if(w==="top"||w==="bottom"){var $=+(w==="top"&&!A||w==="bottom"&&A);P=yo(yo({},P),{},{x1:u,y1:p+$*v,x2:u+o,y2:p+$*v})}else{var L=+(w==="left"&&!A||w==="right"&&A);P=yo(yo({},P),{},{x1:u+L*o,y1:p,x2:u+L*o,y2:p+v})}return Ze.createElement("line",Gf({},P,{className:Mn("recharts-cartesian-axis-line",Ma(T,"className"))}))}},{key:"renderTicks",value:function(c,u,p){var o=this,v=this.props,w=v.tickLine,A=v.stroke,T=v.tick,P=v.tickFormatter,$=v.unit,L=nT(yo(yo({},this.props),{},{ticks:c}),u,p),k=this.getTickTextAnchor(),N=this.getTickVerticalAnchor(),R=en(this.props),j=en(T),D=yo(yo({},R),{},{fill:"none"},en(w)),G=L.map(function(W,Y){var ee=o.getTickLineCoord(W),de=ee.line,xe=ee.tick,Me=yo(yo(yo(yo({textAnchor:k,verticalAnchor:N},R),{},{stroke:"none",fill:A},j),xe),{},{index:Y,payload:W,visibleTicksCount:L.length,tickFormatter:P});return Ze.createElement(ui,Gf({className:"recharts-cartesian-axis-tick",key:"tick-".concat(Y)},Y0(o.props,W,Y)),w&&Ze.createElement("line",Gf({},D,de,{className:Mn("recharts-cartesian-axis-tick-line",Ma(w,"className"))})),T&&r.renderTickItem(T,Me,"".concat(gr(P)?P(W.value,Y):W.value).concat($||"")))});return Ze.createElement("g",{className:"recharts-cartesian-axis-ticks"},G)}},{key:"render",value:function(){var c=this,u=this.props,p=u.axisLine,o=u.width,v=u.height,w=u.ticksGenerator,A=u.className,T=u.hide;if(T)return null;var P=this.props,$=P.ticks,L=z2(P,$me),k=$;return gr(w)&&(k=$&&$.length>0?w(this.props):w(L)),o<=0||v<=0||!k||!k.length?null:Ze.createElement(ui,{className:Mn("recharts-cartesian-axis",A),ref:function(R){c.layerReference=R}},p&&this.renderAxisLine(),this.renderTicks(k,this.state.fontSize,this.state.letterSpacing),Wi.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(c,u,p){var o;return Ze.isValidElement(c)?o=Ze.cloneElement(c,u):gr(c)?o=c(u):o=Ze.createElement(qg,Gf({},u,{className:"recharts-cartesian-axis-tick-value"}),p),o}}]),r}(Ke.Component);PM(mg,"displayName","CartesianAxis");PM(mg,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Zme=["x1","y1","x2","y2","key"];function Rd(e){return Rd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rd(e)}function oT(){return oT=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},oT.apply(this,arguments)}function Xme(e,t){if(e==null)return{};var r=Kme(e,t),i,c;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(c=0;c<u.length;c++)i=u[c],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function Kme(e,t){if(e==null)return{};var r={},i=Object.keys(e),c,u;for(u=0;u<i.length;u++)c=i[u],!(t.indexOf(c)>=0)&&(r[c]=e[c]);return r}function PL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,i)}return r}function Yv(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?PL(Object(r),!0).forEach(function(i){IM(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):PL(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function Yme(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function IL(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,eF(i.key),i)}}function Jme(e,t,r){return t&&IL(e.prototype,t),r&&IL(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function Qme(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&aT(e,t)}function aT(e,t){return aT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,c){return i.__proto__=c,i},aT(e,t)}function ege(e){var t=nge();return function(){var i=Nx(e),c;if(t){var u=Nx(this).constructor;c=Reflect.construct(i,arguments,u)}else c=i.apply(this,arguments);return tge(this,c)}}function tge(e,t){if(t&&(Rd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return rge(e)}function rge(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function nge(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Nx(e){return Nx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Nx(e)}function IM(e,t,r){return t=eF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function eF(e){var t=ige(e,"string");return Rd(t)==="symbol"?t:String(t)}function ige(e,t){if(Rd(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(Rd(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var kM=function(e){Qme(r,e);var t=ege(r);function r(){return Yme(this,r),t.apply(this,arguments)}return Jme(r,[{key:"renderHorizontal",value:function(c){var u=this,p=this.props,o=p.x,v=p.width,w=p.horizontal;if(!c||!c.length)return null;var A=c.map(function(T,P){var $=Yv(Yv({},u.props),{},{x1:o,y1:T,x2:o+v,y2:T,key:"line-".concat(P),index:P});return r.renderLineItem(w,$)});return Ze.createElement("g",{className:"recharts-cartesian-grid-horizontal"},A)}},{key:"renderVertical",value:function(c){var u=this,p=this.props,o=p.y,v=p.height,w=p.vertical;if(!c||!c.length)return null;var A=c.map(function(T,P){var $=Yv(Yv({},u.props),{},{x1:T,y1:o,x2:T,y2:o+v,key:"line-".concat(P),index:P});return r.renderLineItem(w,$)});return Ze.createElement("g",{className:"recharts-cartesian-grid-vertical"},A)}},{key:"renderVerticalStripes",value:function(c){var u=this.props.verticalFill;if(!u||!u.length)return null;var p=this.props,o=p.fillOpacity,v=p.x,w=p.y,A=p.width,T=p.height,P=c.map(function(L){return Math.round(L+v-v)}).sort(function(L,k){return L-k});v!==P[0]&&P.unshift(0);var $=P.map(function(L,k){var N=!P[k+1],R=N?v+A-L:P[k+1]-L;if(R<=0)return null;var j=k%u.length;return Ze.createElement("rect",{key:"react-".concat(k),x:L,y:w,width:R,height:T,stroke:"none",fill:u[j],fillOpacity:o,className:"recharts-cartesian-grid-bg"})});return Ze.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},$)}},{key:"renderHorizontalStripes",value:function(c){var u=this.props.horizontalFill;if(!u||!u.length)return null;var p=this.props,o=p.fillOpacity,v=p.x,w=p.y,A=p.width,T=p.height,P=c.map(function(L){return Math.round(L+w-w)}).sort(function(L,k){return L-k});w!==P[0]&&P.unshift(0);var $=P.map(function(L,k){var N=!P[k+1],R=N?w+T-L:P[k+1]-L;if(R<=0)return null;var j=k%u.length;return Ze.createElement("rect",{key:"react-".concat(k),y:L,x:v,height:R,width:A,stroke:"none",fill:u[j],fillOpacity:o,className:"recharts-cartesian-grid-bg"})});return Ze.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},$)}},{key:"renderBackground",value:function(){var c=this.props.fill;if(!c||c==="none")return null;var u=this.props,p=u.fillOpacity,o=u.x,v=u.y,w=u.width,A=u.height;return Ze.createElement("rect",{x:o,y:v,width:w,height:A,stroke:"none",fill:c,fillOpacity:p,className:"recharts-cartesian-grid-bg"})}},{key:"render",value:function(){var c=this.props,u=c.x,p=c.y,o=c.width,v=c.height,w=c.horizontal,A=c.vertical,T=c.horizontalCoordinatesGenerator,P=c.verticalCoordinatesGenerator,$=c.xAxis,L=c.yAxis,k=c.offset,N=c.chartWidth,R=c.chartHeight;if(!Rt(o)||o<=0||!Rt(v)||v<=0||!Rt(u)||u!==+u||!Rt(p)||p!==+p)return null;var j=this.props,D=j.horizontalPoints,G=j.verticalPoints;return(!D||!D.length)&&gr(T)&&(D=T({yAxis:L,width:N,height:R,offset:k})),(!G||!G.length)&&gr(P)&&(G=P({xAxis:$,width:N,height:R,offset:k})),Ze.createElement("g",{className:"recharts-cartesian-grid"},this.renderBackground(),w&&this.renderHorizontal(D),A&&this.renderVertical(G),w&&this.renderHorizontalStripes(D),A&&this.renderVerticalStripes(G))}}],[{key:"renderLineItem",value:function(c,u){var p;if(Ze.isValidElement(c))p=Ze.cloneElement(c,u);else if(gr(c))p=c(u);else{var o=u.x1,v=u.y1,w=u.x2,A=u.y2,T=u.key,P=Xme(u,Zme);p=Ze.createElement("line",oT({},en(P),{x1:o,y1:v,x2:w,y2:A,fill:"none",key:T}))}return p}}]),r}(Ke.PureComponent);IM(kM,"displayName","CartesianGrid");IM(kM,"defaultProps",{horizontal:!0,vertical:!0,horizontalPoints:[],verticalPoints:[],stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]});var oge=["type","layout","connectNulls","ref"];function Ld(e){return Ld=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ld(e)}function age(e,t){if(e==null)return{};var r=sge(e,t),i,c;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(c=0;c<u.length;c++)i=u[c],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function sge(e,t){if(e==null)return{};var r={},i=Object.keys(e),c,u;for(u=0;u<i.length;u++)c=i[u],!(t.indexOf(c)>=0)&&(r[c]=e[c]);return r}function gg(){return gg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},gg.apply(this,arguments)}function kL(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,i)}return r}function Zo(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?kL(Object(r),!0).forEach(function(i){ks(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kL(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function Mf(e){return hge(e)||uge(e)||cge(e)||lge()}function lge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function cge(e,t){if(e){if(typeof e=="string")return sT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return sT(e,t)}}function uge(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function hge(e){if(Array.isArray(e))return sT(e)}function sT(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function fge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function OL(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,tF(i.key),i)}}function dge(e,t,r){return t&&OL(e.prototype,t),r&&OL(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function pge(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&lT(e,t)}function lT(e,t){return lT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,c){return i.__proto__=c,i},lT(e,t)}function mge(e){var t=yge();return function(){var i=jx(e),c;if(t){var u=jx(this).constructor;c=Reflect.construct(i,arguments,u)}else c=i.apply(this,arguments);return gge(this,c)}}function gge(e,t){if(t&&(Ld(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qu(e)}function qu(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function yge(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function jx(e){return jx=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},jx(e)}function ks(e,t,r){return t=tF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function tF(e){var t=_ge(e,"string");return Ld(t)==="symbol"?t:String(t)}function _ge(e,t){if(Ld(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(Ld(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $y=function(e){pge(r,e);var t=mge(r);function r(){var i;fge(this,r);for(var c=arguments.length,u=new Array(c),p=0;p<c;p++)u[p]=arguments[p];return i=t.call.apply(t,[this].concat(u)),ks(qu(i),"state",{isAnimationFinished:!0,totalLength:0}),ks(qu(i),"getStrokeDasharray",function(o,v,w){for(var A=w.reduce(function(j,D){return j+D}),T=Math.floor(o/A),P=o%A,$=v-o,L=[],k=0,N=0;;N+=w[k],++k)if(N+w[k]>P){L=[].concat(Mf(w.slice(0,k)),[P-N]);break}var R=L.length%2===0?[0,$]:[$];return[].concat(Mf(r.repeat(w,T)),Mf(L),R).map(function(j){return"".concat(j,"px")}).join(", ")}),ks(qu(i),"id",Cy("recharts-line-")),ks(qu(i),"pathRef",function(o){i.mainCurve=o}),ks(qu(i),"handleAnimationEnd",function(){i.setState({isAnimationFinished:!0}),i.props.onAnimationEnd&&i.props.onAnimationEnd()}),ks(qu(i),"handleAnimationStart",function(){i.setState({isAnimationFinished:!1}),i.props.onAnimationStart&&i.props.onAnimationStart()}),i}return dge(r,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var c=this.getTotalLength();this.setState({totalLength:c})}}},{key:"getTotalLength",value:function(){var c=this.mainCurve;try{return c&&c.getTotalLength&&c.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(c,u){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var p=this.props,o=p.points,v=p.xAxis,w=p.yAxis,A=p.layout,T=p.children,P=Ca(T,Ly);if(!P)return null;function $(k,N){return{x:k.x,y:k.y,value:k.value,errorVal:na(k.payload,N)}}var L={clipPath:c?"url(#clipPath-".concat(u,")"):null};return Ze.createElement(ui,L,P.map(function(k,N){return Ze.cloneElement(k,{key:"bar-".concat(N),data:o,xAxis:v,yAxis:w,layout:A,dataPointFormatter:$})}))}},{key:"renderDots",value:function(c,u){var p=this.props.isAnimationActive;if(p&&!this.state.isAnimationFinished)return null;var o=this.props,v=o.dot,w=o.points,A=o.dataKey,T=en(this.props),P=en(v,!0),$=w.map(function(k,N){var R=Zo(Zo(Zo({key:"dot-".concat(N),r:3},T),P),{},{value:k.value,dataKey:A,cx:k.x,cy:k.y,index:N,payload:k.payload});return r.renderDotItem(v,R)}),L={clipPath:c?"url(#clipPath-".concat(u,")"):null};return Ze.createElement(ui,gg({className:"recharts-line-dots",key:"dots"},L,{role:"img"}),$)}},{key:"renderCurveStatically",value:function(c,u,p,o){var v=this.props,w=v.type,A=v.layout,T=v.connectNulls;v.ref;var P=age(v,oge),$=Zo(Zo(Zo({},en(P,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:u?"url(#clipPath-".concat(p,")"):null,points:c},o),{},{type:w,layout:A,connectNulls:T});return Ze.createElement(kx,gg({},$,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(c,u){var p=this,o=this.props,v=o.points,w=o.strokeDasharray,A=o.isAnimationActive,T=o.animationBegin,P=o.animationDuration,$=o.animationEasing,L=o.animationId,k=o.animateNewValues,N=o.width,R=o.height,j=this.state,D=j.prevPoints,G=j.totalLength;return Ze.createElement(ch,{begin:T,duration:P,isActive:A,easing:$,from:{t:0},to:{t:1},key:"line-".concat(L),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(W){var Y=W.t;if(D){var ee=D.length/v.length,de=v.map(function(Ue,ut){var Be=Math.floor(ut*ee);if(D[Be]){var bt=D[Be],kt=ts(bt.x,Ue.x),He=ts(bt.y,Ue.y);return Zo(Zo({},Ue),{},{x:kt(Y),y:He(Y)})}if(k){var nt=ts(N*2,Ue.x),gt=ts(R/2,Ue.y);return Zo(Zo({},Ue),{},{x:nt(Y),y:gt(Y)})}return Zo(Zo({},Ue),{},{x:Ue.x,y:Ue.y})});return p.renderCurveStatically(de,c,u)}var xe=ts(0,G),Me=xe(Y),Ce;if(w){var qe="".concat(w).split(/[,\s]+/gim).map(function(Ue){return parseFloat(Ue)});Ce=p.getStrokeDasharray(Me,G,qe)}else Ce="".concat(Me,"px ").concat(G-Me,"px");return p.renderCurveStatically(v,c,u,{strokeDasharray:Ce})})}},{key:"renderCurve",value:function(c,u){var p=this.props,o=p.points,v=p.isAnimationActive,w=this.state,A=w.prevPoints,T=w.totalLength;return v&&o&&o.length&&(!A&&T>0||!eM(A,o))?this.renderCurveWithAnimation(c,u):this.renderCurveStatically(o,c,u)}},{key:"render",value:function(){var c=this.props,u=c.hide,p=c.dot,o=c.points,v=c.className,w=c.xAxis,A=c.yAxis,T=c.top,P=c.left,$=c.width,L=c.height,k=c.isAnimationActive,N=c.id;if(u||!o||!o.length)return null;var R=this.state.isAnimationFinished,j=o.length===1,D=Mn("recharts-line",v),G=w&&w.allowDataOverflow||A&&A.allowDataOverflow,W=ur(N)?this.id:N;return Ze.createElement(ui,{className:D},G?Ze.createElement("defs",null,Ze.createElement("clipPath",{id:"clipPath-".concat(W)},Ze.createElement("rect",{x:P,y:T,width:$,height:L}))):null,!j&&this.renderCurve(G,W),this.renderErrorBar(G,W),(j||p)&&this.renderDots(G,W),(!k||R)&&Sl.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(c,u){return c.animationId!==u.prevAnimationId?{prevAnimationId:c.animationId,curPoints:c.points,prevPoints:u.curPoints}:c.points!==u.curPoints?{curPoints:c.points}:null}},{key:"repeat",value:function(c,u){for(var p=c.length%2!==0?[].concat(Mf(c),[0]):c,o=[],v=0;v<u;++v)o=[].concat(Mf(o),Mf(p));return o}},{key:"renderDotItem",value:function(c,u){var p;if(Ze.isValidElement(c))p=Ze.cloneElement(c,u);else if(gr(c))p=c(u);else{var o=Mn("recharts-line-dot",c?c.className:"");p=Ze.createElement(AM,gg({},u,{className:o}))}return p}}]),r}(Ke.PureComponent);ks($y,"displayName","Line");ks($y,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!bl.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});ks($y,"getComposedData",function(e){var t=e.props,r=e.xAxis,i=e.yAxis,c=e.xAxisTicks,u=e.yAxisTicks,p=e.dataKey,o=e.bandSize,v=e.displayedData,w=e.offset,A=t.layout,T=v.map(function(P,$){var L=na(P,p);return A==="horizontal"?{x:VR({axis:r,ticks:c,bandSize:o,entry:P,index:$}),y:ur(L)?null:i.scale(L),value:L,payload:P}:{x:ur(L)?null:r.scale(L),y:VR({axis:i,ticks:u,bandSize:o,entry:P,index:$}),value:L,payload:P}});return Zo({points:T,layout:A},w)});var nb=function(){return null};nb.displayName="XAxis";nb.defaultProps={allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0};var ib=function(){return null};ib.displayName="YAxis";ib.defaultProps={allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1};var vge=Wc,xge=Py,bge=B1;function wge(e){return function(t,r,i){var c=Object(t);if(!xge(t)){var u=vge(r);t=bge(t),r=function(o){return u(c[o],o,c)}}var p=e(t,r,i);return p>-1?c[u?t[p]:p]:void 0}}var Sge=wge,Ege=q$;function Tge(e){var t=Ege(e),r=t%1;return t===t?r?t-r:t:0}var Age=Tge,Mge=UB,Cge=Wc,Pge=Age,Ige=Math.max;function kge(e,t,r){var i=e==null?0:e.length;if(!i)return-1;var c=r==null?0:Pge(r);return c<0&&(c=Ige(i+c,0)),Mge(e,Cge(t),c)}var Oge=kge,Dge=Sge,Rge=Oge,Lge=Dge(Rge),zge=Lge;const Bge=vn(zge);var $ge=Gc,Fge=qc,Nge="[object Boolean]";function jge(e){return e===!0||e===!1||Fge(e)&&$ge(e)==Nge}var Uge=jge;const Vge=vn(Uge);function DL(e){return Hge(e)||Wge(e)||qge(e)||Gge()}function Gge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qge(e,t){if(e){if(typeof e=="string")return cT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return cT(e,t)}}function Wge(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Hge(e){if(Array.isArray(e))return cT(e)}function cT(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}var uT=function(t,r,i,c,u){var p=Ca(t,CM),o=Ca(t,zy),v=[].concat(DL(p),DL(o)),w=Ca(t,By),A="".concat(c,"Id"),T=c[0],P=r;if(v.length&&(P=v.reduce(function(k,N){if(N.props[A]===i&&Ns(N.props,"extendDomain")&&Rt(N.props[T])){var R=N.props[T];return[Math.min(k[0],R),Math.max(k[1],R)]}return k},P)),w.length){var $="".concat(T,"1"),L="".concat(T,"2");P=w.reduce(function(k,N){if(N.props[A]===i&&Ns(N.props,"extendDomain")&&Rt(N.props[$])&&Rt(N.props[L])){var R=N.props[$],j=N.props[L];return[Math.min(k[0],R,j),Math.max(k[1],R,j)]}return k},P)}return u&&u.length&&(P=u.reduce(function(k,N){return Rt(N)?[Math.min(k[0],N),Math.max(k[1],N)]:k},P)),P},rF={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,r="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(r=!1));function c(v,w,A){this.fn=v,this.context=w,this.once=A||!1}function u(v,w,A,T,P){if(typeof A!="function")throw new TypeError("The listener must be a function");var $=new c(A,T||v,P),L=r?r+w:w;return v._events[L]?v._events[L].fn?v._events[L]=[v._events[L],$]:v._events[L].push($):(v._events[L]=$,v._eventsCount++),v}function p(v,w){--v._eventsCount===0?v._events=new i:delete v._events[w]}function o(){this._events=new i,this._eventsCount=0}o.prototype.eventNames=function(){var w=[],A,T;if(this._eventsCount===0)return w;for(T in A=this._events)t.call(A,T)&&w.push(r?T.slice(1):T);return Object.getOwnPropertySymbols?w.concat(Object.getOwnPropertySymbols(A)):w},o.prototype.listeners=function(w){var A=r?r+w:w,T=this._events[A];if(!T)return[];if(T.fn)return[T.fn];for(var P=0,$=T.length,L=new Array($);P<$;P++)L[P]=T[P].fn;return L},o.prototype.listenerCount=function(w){var A=r?r+w:w,T=this._events[A];return T?T.fn?1:T.length:0},o.prototype.emit=function(w,A,T,P,$,L){var k=r?r+w:w;if(!this._events[k])return!1;var N=this._events[k],R=arguments.length,j,D;if(N.fn){switch(N.once&&this.removeListener(w,N.fn,void 0,!0),R){case 1:return N.fn.call(N.context),!0;case 2:return N.fn.call(N.context,A),!0;case 3:return N.fn.call(N.context,A,T),!0;case 4:return N.fn.call(N.context,A,T,P),!0;case 5:return N.fn.call(N.context,A,T,P,$),!0;case 6:return N.fn.call(N.context,A,T,P,$,L),!0}for(D=1,j=new Array(R-1);D<R;D++)j[D-1]=arguments[D];N.fn.apply(N.context,j)}else{var G=N.length,W;for(D=0;D<G;D++)switch(N[D].once&&this.removeListener(w,N[D].fn,void 0,!0),R){case 1:N[D].fn.call(N[D].context);break;case 2:N[D].fn.call(N[D].context,A);break;case 3:N[D].fn.call(N[D].context,A,T);break;case 4:N[D].fn.call(N[D].context,A,T,P);break;default:if(!j)for(W=1,j=new Array(R-1);W<R;W++)j[W-1]=arguments[W];N[D].fn.apply(N[D].context,j)}}return!0},o.prototype.on=function(w,A,T){return u(this,w,A,T,!1)},o.prototype.once=function(w,A,T){return u(this,w,A,T,!0)},o.prototype.removeListener=function(w,A,T,P){var $=r?r+w:w;if(!this._events[$])return this;if(!A)return p(this,$),this;var L=this._events[$];if(L.fn)L.fn===A&&(!P||L.once)&&(!T||L.context===T)&&p(this,$);else{for(var k=0,N=[],R=L.length;k<R;k++)(L[k].fn!==A||P&&!L[k].once||T&&L[k].context!==T)&&N.push(L[k]);N.length?this._events[$]=N.length===1?N[0]:N:p(this,$)}return this},o.prototype.removeAllListeners=function(w){var A;return w?(A=r?r+w:w,this._events[A]&&p(this,A)):(this._events=new i,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=r,o.EventEmitter=o,e.exports=o})(rF);var Zge=rF.exports;const Xge=vn(Zge);var Xo=new Xge;Xo.setMaxListeners&&Xo.setMaxListeners(10);var B2="recharts.syncMouseEvents";function fy(e){return fy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fy(e)}function Kge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RL(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,nF(i.key),i)}}function Yge(e,t,r){return t&&RL(e.prototype,t),r&&RL(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function $2(e,t,r){return t=nF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function nF(e){var t=Jge(e,"string");return fy(t)==="symbol"?t:String(t)}function Jge(e,t){if(fy(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(fy(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Qge=function(){function e(){Kge(this,e),$2(this,"activeIndex",0),$2(this,"coordinateList",[]),$2(this,"layout","horizontal")}return Yge(e,[{key:"setDetails",value:function(r){var i=r.coordinateList,c=i===void 0?[]:i,u=r.container,p=u===void 0?null:u,o=r.layout,v=o===void 0?null:o,w=r.offset,A=w===void 0?null:w,T=r.mouseHandlerCallback,P=T===void 0?null:T;this.coordinateList=c??this.coordinateList,this.container=p??this.container,this.layout=v??this.layout,this.offset=A??this.offset,this.mouseHandlerCallback=P??this.mouseHandlerCallback,this.activeIndex>=this.coordinateList.length&&(this.activeIndex=this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(r){switch(r.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"spoofMouse",value:function(){if(this.layout==="horizontal"){var r=this.container.getBoundingClientRect(),i=r.x,c=r.y,u=this.coordinateList[this.activeIndex].coordinate,p=i+u,o=c+this.offset.top;this.mouseHandlerCallback({pageX:p,pageY:o})}}}]),e}(),eye=["item"],tye=["children","className","width","height","style","compact","title","desc"];function zd(e){return zd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zd(e)}function LL(e,t){return iye(e)||nye(e,t)||iF(e,t)||rye()}function rye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nye(e,t){var r=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(r!=null){var i,c,u,p,o=[],v=!0,w=!1;try{if(u=(r=r.call(e)).next,t===0){if(Object(r)!==r)return;v=!1}else for(;!(v=(i=u.call(r)).done)&&(o.push(i.value),o.length!==t);v=!0);}catch(A){w=!0,c=A}finally{try{if(!v&&r.return!=null&&(p=r.return(),Object(p)!==p))return}finally{if(w)throw c}}return o}}function iye(e){if(Array.isArray(e))return e}function qf(){return qf=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var i in r)Object.prototype.hasOwnProperty.call(r,i)&&(e[i]=r[i])}return e},qf.apply(this,arguments)}function zL(e,t){if(e==null)return{};var r=oye(e,t),i,c;if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);for(c=0;c<u.length;c++)i=u[c],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(r[i]=e[i])}return r}function oye(e,t){if(e==null)return{};var r={},i=Object.keys(e),c,u;for(u=0;u<i.length;u++)c=i[u],!(t.indexOf(c)>=0)&&(r[c]=e[c]);return r}function aye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function BL(e,t){for(var r=0;r<t.length;r++){var i=t[r];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,oF(i.key),i)}}function sye(e,t,r){return t&&BL(e.prototype,t),r&&BL(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}function lye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hT(e,t)}function hT(e,t){return hT=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,c){return i.__proto__=c,i},hT(e,t)}function cye(e){var t=hye();return function(){var i=Ux(e),c;if(t){var u=Ux(this).constructor;c=Reflect.construct(i,arguments,u)}else c=i.apply(this,arguments);return uye(this,c)}}function uye(e,t){if(t&&(zd(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Br(e)}function Br(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function hye(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ux(e){return Ux=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(r){return r.__proto__||Object.getPrototypeOf(r)},Ux(e)}function Bd(e){return pye(e)||dye(e)||iF(e)||fye()}function fye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function iF(e,t){if(e){if(typeof e=="string")return fT(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if(r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set")return Array.from(e);if(r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return fT(e,t)}}function dye(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function pye(e){if(Array.isArray(e))return fT(e)}function fT(e,t){(t==null||t>e.length)&&(t=e.length);for(var r=0,i=new Array(t);r<t;r++)i[r]=e[r];return i}function $L(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(c){return Object.getOwnPropertyDescriptor(e,c).enumerable})),r.push.apply(r,i)}return r}function mt(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?$L(Object(r),!0).forEach(function(i){cr(e,i,r[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):$L(Object(r)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(r,i))})}return e}function cr(e,t,r){return t=oF(t),t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function oF(e){var t=mye(e,"string");return zd(t)==="symbol"?t:String(t)}function mye(e,t){if(zd(e)!=="object"||e===null)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var i=r.call(e,t||"default");if(zd(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gye={xAxis:["bottom","top"],yAxis:["left","right"]},aF={x:0,y:0},yye=Number.isFinite?Number.isFinite:isFinite,FL=typeof requestAnimationFrame=="function"?requestAnimationFrame:typeof setImmediate=="function"?setImmediate:setTimeout,NL=typeof cancelAnimationFrame=="function"?cancelAnimationFrame:typeof clearImmediate=="function"?clearImmediate:clearTimeout,_ye=function(t,r){return r==="horizontal"?t.x:r==="vertical"?t.y:r==="centric"?t.angle:t.radius},vye=function(t,r,i,c){var u=r.find(function(A){return A&&A.index===i});if(u){if(t==="horizontal")return{x:u.coordinate,y:c.y};if(t==="vertical")return{x:c.x,y:u.coordinate};if(t==="centric"){var p=u.coordinate,o=c.radius;return mt(mt(mt({},c),Zi(c.cx,c.cy,o,p)),{},{angle:p,radius:o})}var v=u.coordinate,w=c.angle;return mt(mt(mt({},c),Zi(c.cx,c.cy,v,w)),{},{angle:w,radius:v})}return aF},ob=function(t,r,i){var c=r.graphicalItems,u=r.dataStartIndex,p=r.dataEndIndex,o=(c||[]).reduce(function(v,w){var A=w.props.data;return A&&A.length?[].concat(Bd(v),Bd(A)):v},[]);return o&&o.length>0?o:i&&i.props&&i.props.data&&i.props.data.length>0?i.props.data:t&&t.length&&Rt(u)&&Rt(p)?t.slice(u,p+1):[]};function xye(e,t,r){if(r==="number"&&t===!0&&Array.isArray(e)){var i=e==null?void 0:e[0],c=e==null?void 0:e[1];if(i&&c&&Rt(i)&&Rt(c))return!0}return!1}function sF(e){return e==="number"?[0,"auto"]:void 0}var lF=function(t,r,i,c){var u=t.graphicalItems,p=t.tooltipAxis,o=ob(r,t);return i<0||!u||!u.length||i>=o.length?null:u.reduce(function(v,w){var A=w.props.hide;if(A)return v;var T=w.props.data,P;if(p.dataKey&&!p.allowDuplicatedCategory){var $=T===void 0?o:T;P=X0($,p.dataKey,c)}else P=T&&T[i]||o[i];return P?[].concat(Bd(v),[z$(w,P)]):v},[])},jL=function(t,r,i,c){var u=c||{x:t.chartX,y:t.chartY},p=_ye(u,i),o=t.orderedTooltipTicks,v=t.tooltipAxis,w=t.tooltipTicks,A=lfe(p,o,w,v);if(A>=0&&w){var T=w[A]&&w[A].value,P=lF(t,r,A,T),$=vye(i,o,A,u);return{activeTooltipIndex:A,activeLabel:T,activePayload:P,activeCoordinate:$}}return null},bye=function(t,r){var i=r.axes,c=r.graphicalItems,u=r.axisType,p=r.axisIdKey,o=r.stackGroups,v=r.dataStartIndex,w=r.dataEndIndex,A=t.layout,T=t.children,P=t.stackOffset,$=R$(A,u),L=i.reduce(function(k,N){var R,j=N.props,D=j.type,G=j.dataKey,W=j.allowDataOverflow,Y=j.allowDuplicatedCategory,ee=j.scale,de=j.ticks,xe=j.includeHidden,Me=N.props[p];if(k[Me])return k;var Ce=ob(t.data,{graphicalItems:c.filter(function(Vt){return Vt.props[p]===Me}),dataStartIndex:v,dataEndIndex:w}),qe=Ce.length,Ue,ut,Be;xye(N.props.domain,W,D)&&(Ue=NE(N.props.domain,null,W),$&&(D==="number"||ee!=="auto")&&(Be=pg(Ce,G,"category")));var bt=sF(D);if(!Ue||Ue.length===0){var kt,He=(kt=N.props.domain)!==null&&kt!==void 0?kt:bt;if(G){if(Ue=pg(Ce,G,D),D==="category"&&$){var nt=HX(Ue);Y&&nt?(ut=Ue,Ue=Lx(0,qe)):Y||(Ue=HR(He,Ue,N).reduce(function(Vt,Zt){return Vt.indexOf(Zt)>=0?Vt:[].concat(Bd(Vt),[Zt])},[]))}else if(D==="category")Y?Ue=Ue.filter(function(Vt){return Vt!==""&&!ur(Vt)}):Ue=HR(He,Ue,N).reduce(function(Vt,Zt){return Vt.indexOf(Zt)>=0||Zt===""||ur(Zt)?Vt:[].concat(Bd(Vt),[Zt])},[]);else if(D==="number"){var gt=dfe(Ce,c.filter(function(Vt){return Vt.props[p]===Me&&(xe||!Vt.props.hide)}),G,u,A);gt&&(Ue=gt)}$&&(D==="number"||ee!=="auto")&&(Be=pg(Ce,G,"category"))}else $?Ue=Lx(0,qe):o&&o[Me]&&o[Me].hasStack&&D==="number"?Ue=P==="expand"?[0,1]:L$(o[Me].stackGroups,v,w):Ue=D$(Ce,c.filter(function(Vt){return Vt.props[p]===Me&&(xe||!Vt.props.hide)}),D,A,!0);if(D==="number")Ue=uT(T,Ue,Me,u,de),He&&(Ue=NE(He,Ue,W));else if(D==="category"&&He){var xt=He,zt=Ue.every(function(Vt){return xt.indexOf(Vt)>=0});zt&&(Ue=xt)}}return mt(mt({},k),{},cr({},Me,mt(mt({},N.props),{},{axisType:u,domain:Ue,categoricalDomain:Be,duplicateDomain:ut,originalDomain:(R=N.props.domain)!==null&&R!==void 0?R:bt,isCategorical:$,layout:A})))},{});return L},wye=function(t,r){var i=r.graphicalItems,c=r.Axis,u=r.axisType,p=r.axisIdKey,o=r.stackGroups,v=r.dataStartIndex,w=r.dataEndIndex,A=t.layout,T=t.children,P=ob(t.data,{graphicalItems:i,dataStartIndex:v,dataEndIndex:w}),$=P.length,L=R$(A,u),k=-1,N=i.reduce(function(R,j){var D=j.props[p],G=sF("number");if(!R[D]){k++;var W;return L?W=Lx(0,$):o&&o[D]&&o[D].hasStack?(W=L$(o[D].stackGroups,v,w),W=uT(T,W,D,u)):(W=NE(G,D$(P,i.filter(function(Y){return Y.props[p]===D&&!Y.props.hide}),"number",A),c.defaultProps.allowDataOverflow),W=uT(T,W,D,u)),mt(mt({},R),{},cr({},D,mt(mt({axisType:u},c.defaultProps),{},{hide:!0,orientation:Ma(gye,"".concat(u,".").concat(k%2),null),domain:W,originalDomain:G,isCategorical:L,layout:A})))}return R},{});return N},Sye=function(t,r){var i=r.axisType,c=i===void 0?"xAxis":i,u=r.AxisComp,p=r.graphicalItems,o=r.stackGroups,v=r.dataStartIndex,w=r.dataEndIndex,A=t.children,T="".concat(c,"Id"),P=Ca(A,u),$={};return P&&P.length?$=bye(t,{axes:P,graphicalItems:p,axisType:c,axisIdKey:T,stackGroups:o,dataStartIndex:v,dataEndIndex:w}):p&&p.length&&($=wye(t,{Axis:u,graphicalItems:p,axisType:c,axisIdKey:T,stackGroups:o,dataStartIndex:v,dataEndIndex:w})),$},Eye=function(t){var r=yc(t),i=_c(r,!1,!0);return{tooltipTicks:i,orderedTooltipTicks:KA(i,function(c){return c.coordinate}),tooltipAxis:r,tooltipAxisBandSize:Mx(r,i)}},UL=function(t){var r,i,c=t.children,u=t.defaultShowTooltip,p=pl(c,ay),o=p&&p.props&&p.props.startIndex||0,v=(p==null||(r=p.props)===null||r===void 0?void 0:r.endIndex)!==void 0?p==null||(i=p.props)===null||i===void 0?void 0:i.endIndex:t.data&&t.data.length-1||0;return{chartX:0,chartY:0,dataStartIndex:o,dataEndIndex:v,activeTooltipIndex:-1,isTooltipActive:ur(u)?!1:u}},Tye=function(t){return!t||!t.length?!1:t.some(function(r){var i=Lc(r&&r.type);return i&&i.indexOf("Bar")>=0})},VL=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Aye=function(t,r){var i=t.props,c=t.graphicalItems,u=t.xAxisMap,p=u===void 0?{}:u,o=t.yAxisMap,v=o===void 0?{}:o,w=i.width,A=i.height,T=i.children,P=i.margin||{},$=pl(T,ay),L=pl(T,bd),k=Object.keys(v).reduce(function(D,G){var W=v[G],Y=W.orientation;return!W.mirror&&!W.hide?mt(mt({},D),{},cr({},Y,D[Y]+W.width)):D},{left:P.left||0,right:P.right||0}),N=Object.keys(p).reduce(function(D,G){var W=p[G],Y=W.orientation;return!W.mirror&&!W.hide?mt(mt({},D),{},cr({},Y,Ma(D,"".concat(Y))+W.height)):D},{top:P.top||0,bottom:P.bottom||0}),R=mt(mt({},N),k),j=R.bottom;return $&&(R.bottom+=$.props.height||ay.defaultProps.height),L&&r&&(R=hfe(R,c,i,r)),mt(mt({brushBottom:j},R),{},{width:w-R.left-R.right,height:A-R.top-R.bottom})},Mye=function(t){var r,i=t.chartName,c=t.GraphicalChild,u=t.defaultTooltipEventType,p=u===void 0?"axis":u,o=t.validateTooltipEventTypes,v=o===void 0?["axis"]:o,w=t.axisComponents,A=t.legendContent,T=t.formatAxisMap,P=t.defaultProps,$=function(N,R){var j=R.graphicalItems,D=R.stackGroups,G=R.offset,W=R.updateId,Y=R.dataStartIndex,ee=R.dataEndIndex,de=N.barSize,xe=N.layout,Me=N.barGap,Ce=N.barCategoryGap,qe=N.maxBarSize,Ue=VL(xe),ut=Ue.numericAxisName,Be=Ue.cateAxisName,bt=Tye(j),kt=bt&&cfe({barSize:de,stackGroups:D}),He=[];return j.forEach(function(nt,gt){var xt=ob(N.data,{dataStartIndex:Y,dataEndIndex:ee},nt),zt=nt.props,Vt=zt.dataKey,Zt=zt.maxBarSize,hr=nt.props["".concat(ut,"Id")],Tr=nt.props["".concat(Be,"Id")],Rr=w.reduce(function(Ti,po){var Ln,ii=R["".concat(po.axisType,"Map")],jo=nt.props["".concat(po.axisType,"Id")],mo=ii&&ii[jo];return mt(mt({},Ti),{},(Ln={},cr(Ln,po.axisType,mo),cr(Ln,"".concat(po.axisType,"Ticks"),_c(mo)),Ln))},{}),ir=Rr[Be],_t=Rr["".concat(Be,"Ticks")],Mt=D&&D[hr]&&D[hr].hasStack&&Tfe(nt,D[hr].stackGroups),or=Lc(nt.type).indexOf("Bar")>=0,Qe=Mx(ir,_t),lr=[];if(or){var Ot,Sr,Lr=ur(Zt)?qe:Zt,mn=(Ot=(Sr=Mx(ir,_t,!0))!==null&&Sr!==void 0?Sr:Lr)!==null&&Ot!==void 0?Ot:0;lr=ufe({barGap:Me,barCategoryGap:Ce,bandSize:mn!==Qe?mn:Qe,sizeList:kt[Tr],maxBarSize:Lr}),mn!==Qe&&(lr=lr.map(function(Ti){return mt(mt({},Ti),{},{position:mt(mt({},Ti.position),{},{offset:Ti.position.offset-mn/2})})}))}var Kn=nt&&nt.type&&nt.type.getComposedData;if(Kn){var Yi;He.push({props:mt(mt({},Kn(mt(mt({},Rr),{},{displayedData:xt,props:N,dataKey:Vt,item:nt,bandSize:Qe,barPosition:lr,offset:G,stackedData:Mt,layout:xe,dataStartIndex:Y,dataEndIndex:ee}))),{},(Yi={key:nt.key||"item-".concat(gt)},cr(Yi,ut,Rr[ut]),cr(Yi,Be,Rr[Be]),cr(Yi,"animationId",W),Yi)),childIndex:iK(nt,N.children),item:nt})}}),He},L=function(N,R){var j=N.props,D=N.dataStartIndex,G=N.dataEndIndex,W=N.updateId;if(!CO({props:j}))return null;var Y=j.children,ee=j.layout,de=j.stackOffset,xe=j.data,Me=j.reverseStackOrder,Ce=VL(ee),qe=Ce.numericAxisName,Ue=Ce.cateAxisName,ut=Ca(Y,c),Be=wfe(xe,ut,"".concat(qe,"Id"),"".concat(Ue,"Id"),de,Me),bt=w.reduce(function(xt,zt){var Vt="".concat(zt.axisType,"Map");return mt(mt({},xt),{},cr({},Vt,Sye(j,mt(mt({},zt),{},{graphicalItems:ut,stackGroups:zt.axisType===qe&&Be,dataStartIndex:D,dataEndIndex:G}))))},{}),kt=Aye(mt(mt({},bt),{},{props:j,graphicalItems:ut}),R==null?void 0:R.legendBBox);Object.keys(bt).forEach(function(xt){bt[xt]=T(j,bt[xt],kt,xt.replace("Map",""),i)});var He=bt["".concat(Ue,"Map")],nt=Eye(He),gt=$(j,mt(mt({},bt),{},{dataStartIndex:D,dataEndIndex:G,updateId:W,graphicalItems:ut,stackGroups:Be,offset:kt}));return mt(mt({formattedGraphicalItems:gt,graphicalItems:ut,offset:kt,stackGroups:Be},nt),bt)};return r=function(k){lye(R,k);var N=cye(R);function R(j){var D;return aye(this,R),D=N.call(this,j),cr(Br(D),"accessibilityManager",new Qge),cr(Br(D),"clearDeferId",function(){!ur(D.deferId)&&NL&&NL(D.deferId),D.deferId=null}),cr(Br(D),"handleLegendBBoxUpdate",function(G){if(G){var W=D.state,Y=W.dataStartIndex,ee=W.dataEndIndex,de=W.updateId;D.setState(mt({legendBBox:G},L({props:D.props,dataStartIndex:Y,dataEndIndex:ee,updateId:de},mt(mt({},D.state),{},{legendBBox:G}))))}}),cr(Br(D),"handleReceiveSyncEvent",function(G,W,Y){var ee=D.props.syncId;ee===G&&W!==D.uniqueChartId&&(D.clearDeferId(),D.deferId=FL&&FL(D.applySyncEvent.bind(Br(D),Y)))}),cr(Br(D),"handleBrushChange",function(G){var W=G.startIndex,Y=G.endIndex;if(W!==D.state.dataStartIndex||Y!==D.state.dataEndIndex){var ee=D.state.updateId;D.setState(function(){return mt({dataStartIndex:W,dataEndIndex:Y},L({props:D.props,dataStartIndex:W,dataEndIndex:Y,updateId:ee},D.state))}),D.triggerSyncEvent({dataStartIndex:W,dataEndIndex:Y})}}),cr(Br(D),"handleMouseEnter",function(G){var W=D.props.onMouseEnter,Y=D.getMouseInfo(G);if(Y){var ee=mt(mt({},Y),{},{isTooltipActive:!0});D.setState(ee),D.triggerSyncEvent(ee),gr(W)&&W(ee,G)}}),cr(Br(D),"triggeredAfterMouseMove",function(G){var W=D.props.onMouseMove,Y=D.getMouseInfo(G),ee=Y?mt(mt({},Y),{},{isTooltipActive:!0}):{isTooltipActive:!1};D.setState(ee),D.triggerSyncEvent(ee),gr(W)&&W(ee,G)}),cr(Br(D),"handleItemMouseEnter",function(G){D.setState(function(){return{isTooltipActive:!0,activeItem:G,activePayload:G.tooltipPayload,activeCoordinate:G.tooltipPosition||{x:G.cx,y:G.cy}}})}),cr(Br(D),"handleItemMouseLeave",function(){D.setState(function(){return{isTooltipActive:!1}})}),cr(Br(D),"handleMouseMove",function(G){G&&gr(G.persist)&&G.persist(),D.triggeredAfterMouseMove(G)}),cr(Br(D),"handleMouseLeave",function(G){var W=D.props.onMouseLeave,Y={isTooltipActive:!1};D.setState(Y),D.triggerSyncEvent(Y),gr(W)&&W(Y,G),D.cancelThrottledTriggerAfterMouseMove()}),cr(Br(D),"handleOuterEvent",function(G){var W=nK(G),Y=Ma(D.props,"".concat(W));if(W&&gr(Y)){var ee;/.*touch.*/i.test(W)?ee=D.getMouseInfo(G.changedTouches[0]):ee=D.getMouseInfo(G);var de=Y;de(ee,G)}}),cr(Br(D),"handleClick",function(G){var W=D.props.onClick,Y=D.getMouseInfo(G);if(Y){var ee=mt(mt({},Y),{},{isTooltipActive:!0});D.setState(ee),D.triggerSyncEvent(ee),gr(W)&&W(ee,G)}}),cr(Br(D),"handleMouseDown",function(G){var W=D.props.onMouseDown;if(gr(W)){var Y=D.getMouseInfo(G);W(Y,G)}}),cr(Br(D),"handleMouseUp",function(G){var W=D.props.onMouseUp;if(gr(W)){var Y=D.getMouseInfo(G);W(Y,G)}}),cr(Br(D),"handleTouchMove",function(G){G.changedTouches!=null&&G.changedTouches.length>0&&D.handleMouseMove(G.changedTouches[0])}),cr(Br(D),"handleTouchStart",function(G){G.changedTouches!=null&&G.changedTouches.length>0&&D.handleMouseDown(G.changedTouches[0])}),cr(Br(D),"handleTouchEnd",function(G){G.changedTouches!=null&&G.changedTouches.length>0&&D.handleMouseUp(G.changedTouches[0])}),cr(Br(D),"verticalCoordinatesGenerator",function(G){var W=G.xAxis,Y=G.width,ee=G.height,de=G.offset;return jR(nT(mt(mt(mt({},mg.defaultProps),W),{},{ticks:_c(W,!0),viewBox:{x:0,y:0,width:Y,height:ee}})),de.left,de.left+de.width)}),cr(Br(D),"horizontalCoordinatesGenerator",function(G){var W=G.yAxis,Y=G.width,ee=G.height,de=G.offset;return jR(nT(mt(mt(mt({},mg.defaultProps),W),{},{ticks:_c(W,!0),viewBox:{x:0,y:0,width:Y,height:ee}})),de.top,de.top+de.height)}),cr(Br(D),"axesTicksGenerator",function(G){return _c(G,!0)}),cr(Br(D),"renderCursor",function(G){var W=D.state,Y=W.isTooltipActive,ee=W.activeCoordinate,de=W.activePayload,xe=W.offset,Me=W.activeTooltipIndex,Ce=D.getTooltipEventType();if(!G||!G.props.cursor||!Y||!ee||i!=="ScatterChart"&&Ce!=="axis")return null;var qe=D.props.layout,Ue,ut=kx;if(i==="ScatterChart")Ue=ee,ut=G$;else if(i==="BarChart")Ue=D.getCursorRectangle(),ut=eb;else if(qe==="radial"){var Be=D.getCursorPoints(),bt=Be.cx,kt=Be.cy,He=Be.radius,nt=Be.startAngle,gt=Be.endAngle;Ue={cx:bt,cy:kt,startAngle:nt,endAngle:gt,innerRadius:He,outerRadius:He},ut=N$}else Ue={points:D.getCursorPoints()},ut=kx;var xt=G.key||"_recharts-cursor",zt=mt(mt(mt(mt({stroke:"#ccc",pointerEvents:"none"},xe),Ue),en(G.props.cursor)),{},{payload:de,payloadIndex:Me,key:xt,className:"recharts-tooltip-cursor"});return Ke.isValidElement(G.props.cursor)?Ke.cloneElement(G.props.cursor,zt):Ke.createElement(ut,zt)}),cr(Br(D),"renderPolarAxis",function(G,W,Y){var ee=Ma(G,"type.axisType"),de=Ma(D.state,"".concat(ee,"Map")),xe=de&&de[G.props["".concat(ee,"Id")]];return Ke.cloneElement(G,mt(mt({},xe),{},{className:ee,key:G.key||"".concat(W,"-").concat(Y),ticks:_c(xe,!0)}))}),cr(Br(D),"renderXAxis",function(G,W,Y){var ee=D.state.xAxisMap,de=ee[G.props.xAxisId];return D.renderAxis(de,G,W,Y)}),cr(Br(D),"renderYAxis",function(G,W,Y){var ee=D.state.yAxisMap,de=ee[G.props.yAxisId];return D.renderAxis(de,G,W,Y)}),cr(Br(D),"renderGrid",function(G){var W=D.state,Y=W.xAxisMap,ee=W.yAxisMap,de=W.offset,xe=D.props,Me=xe.width,Ce=xe.height,qe=yc(Y),Ue=Bge(ee,function(bt){return Z$(bt.domain,yye)}),ut=Ue||yc(ee),Be=G.props||{};return Ke.cloneElement(G,{key:G.key||"grid",x:Rt(Be.x)?Be.x:de.left,y:Rt(Be.y)?Be.y:de.top,width:Rt(Be.width)?Be.width:de.width,height:Rt(Be.height)?Be.height:de.height,xAxis:qe,yAxis:ut,offset:de,chartWidth:Me,chartHeight:Ce,verticalCoordinatesGenerator:Be.verticalCoordinatesGenerator||D.verticalCoordinatesGenerator,horizontalCoordinatesGenerator:Be.horizontalCoordinatesGenerator||D.horizontalCoordinatesGenerator})}),cr(Br(D),"renderPolarGrid",function(G){var W=G.props,Y=W.radialLines,ee=W.polarAngles,de=W.polarRadius,xe=D.state,Me=xe.radiusAxisMap,Ce=xe.angleAxisMap,qe=yc(Me),Ue=yc(Ce),ut=Ue.cx,Be=Ue.cy,bt=Ue.innerRadius,kt=Ue.outerRadius;return Ke.cloneElement(G,{polarAngles:Hi(ee)?ee:_c(Ue,!0).map(function(He){return He.coordinate}),polarRadius:Hi(de)?de:_c(qe,!0).map(function(He){return He.coordinate}),cx:ut,cy:Be,innerRadius:bt,outerRadius:kt,key:G.key||"polar-grid",radialLines:Y})}),cr(Br(D),"renderLegend",function(){var G=D.state.formattedGraphicalItems,W=D.props,Y=W.children,ee=W.width,de=W.height,xe=D.props.margin||{},Me=ee-(xe.left||0)-(xe.right||0),Ce=k$({children:Y,formattedGraphicalItems:G,legendWidth:Me,legendContent:A});if(!Ce)return null;var qe=Ce.item,Ue=zL(Ce,eye);return Ke.cloneElement(qe,mt(mt({},Ue),{},{chartWidth:ee,chartHeight:de,margin:xe,ref:function(Be){D.legendInstance=Be},onBBoxUpdate:D.handleLegendBBoxUpdate}))}),cr(Br(D),"renderTooltip",function(){var G=D.props.children,W=pl(G,Vf);if(!W)return null;var Y=D.state,ee=Y.isTooltipActive,de=Y.activeCoordinate,xe=Y.activePayload,Me=Y.activeLabel,Ce=Y.offset;return Ke.cloneElement(W,{viewBox:mt(mt({},Ce),{},{x:Ce.left,y:Ce.top}),active:ee,label:Me,payload:ee?xe:[],coordinate:de})}),cr(Br(D),"renderBrush",function(G){var W=D.props,Y=W.margin,ee=W.data,de=D.state,xe=de.offset,Me=de.dataStartIndex,Ce=de.dataEndIndex,qe=de.updateId;return Ke.cloneElement(G,{key:G.key||"_recharts-brush",onChange:Zv(D.handleBrushChange,null,G.props.onChange),data:ee,x:Rt(G.props.x)?G.props.x:xe.left,y:Rt(G.props.y)?G.props.y:xe.top+xe.height+xe.brushBottom-(Y.bottom||0),width:Rt(G.props.width)?G.props.width:xe.width,startIndex:Me,endIndex:Ce,updateId:"brush-".concat(qe)})}),cr(Br(D),"renderReferenceElement",function(G,W,Y){if(!G)return null;var ee=Br(D),de=ee.clipPathId,xe=D.state,Me=xe.xAxisMap,Ce=xe.yAxisMap,qe=xe.offset,Ue=G.props,ut=Ue.xAxisId,Be=Ue.yAxisId;return Ke.cloneElement(G,{key:G.key||"".concat(W,"-").concat(Y),xAxis:Me[ut],yAxis:Ce[Be],viewBox:{x:qe.left,y:qe.top,width:qe.width,height:qe.height},clipPathId:de})}),cr(Br(D),"renderActivePoints",function(G){var W=G.item,Y=G.activePoint,ee=G.basePoint,de=G.childIndex,xe=G.isRange,Me=[],Ce=W.props.key,qe=W.item.props,Ue=qe.activeDot,ut=qe.dataKey,Be=mt(mt({index:de,dataKey:ut,cx:Y.x,cy:Y.y,r:4,fill:TM(W.item),strokeWidth:2,stroke:"#fff",payload:Y.payload,value:Y.value,key:"".concat(Ce,"-activePoint-").concat(de)},en(Ue)),K0(Ue));return Me.push(R.renderActiveDot(Ue,Be)),ee?Me.push(R.renderActiveDot(Ue,mt(mt({},Be),{},{cx:ee.x,cy:ee.y,key:"".concat(Ce,"-basePoint-").concat(de)}))):xe&&Me.push(null),Me}),cr(Br(D),"renderGraphicChild",function(G,W,Y){var ee=D.filterFormatItem(G,W,Y);if(!ee)return null;var de=D.getTooltipEventType(),xe=D.state,Me=xe.isTooltipActive,Ce=xe.tooltipAxis,qe=xe.activeTooltipIndex,Ue=xe.activeLabel,ut=D.props.children,Be=pl(ut,Vf),bt=ee.props,kt=bt.points,He=bt.isRange,nt=bt.baseLine,gt=ee.item.props,xt=gt.activeDot,zt=gt.hide,Vt=!zt&&Me&&Be&&xt&&qe>=0,Zt={};de!=="axis"&&Be&&Be.props.trigger==="click"?Zt={onClick:Zv(D.handleItemMouseEnter,null,G.props.onCLick)}:de!=="axis"&&(Zt={onMouseLeave:Zv(D.handleItemMouseLeave,null,G.props.onMouseLeave),onMouseEnter:Zv(D.handleItemMouseEnter,null,G.props.onMouseEnter)});var hr=Ke.cloneElement(G,mt(mt({},ee.props),Zt));function Tr(Mt){return typeof Ce.dataKey=="function"?Ce.dataKey(Mt.payload):null}if(Vt){var Rr,ir;if(Ce.dataKey&&!Ce.allowDuplicatedCategory){var _t=typeof Ce.dataKey=="function"?Tr:"payload.".concat(Ce.dataKey.toString());Rr=X0(kt,_t,Ue),ir=He&&nt&&X0(nt,_t,Ue)}else Rr=kt[qe],ir=He&&nt&&nt[qe];if(!ur(Rr))return[hr].concat(Bd(D.renderActivePoints({item:ee,activePoint:Rr,basePoint:ir,childIndex:qe,isRange:He})))}return He?[hr,null,null]:[hr,null]}),cr(Br(D),"renderCustomized",function(G,W,Y){return Ke.cloneElement(G,mt(mt({key:"recharts-customized-".concat(Y)},D.props),D.state))}),D.uniqueChartId=ur(j.id)?Cy("recharts"):j.id,D.clipPathId="".concat(D.uniqueChartId,"-clip"),j.throttleDelay&&(D.triggeredAfterMouseMove=Mse(D.triggeredAfterMouseMove,j.throttleDelay)),D.state={},D}return sye(R,[{key:"componentDidMount",value:function(){var D,G;ur(this.props.syncId)||this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(D=this.props.margin.left)!==null&&D!==void 0?D:0,top:(G=this.props.margin.top)!==null&&G!==void 0?G:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.handleMouseMove,layout:this.props.layout})}},{key:"getSnapshotBeforeUpdate",value:function(D,G){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==G.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==D.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==D.margin){var W,Y;this.accessibilityManager.setDetails({offset:{left:(W=this.props.margin.left)!==null&&W!==void 0?W:0,top:(Y=this.props.margin.top)!==null&&Y!==void 0?Y:0}})}return null}},{key:"componentDidUpdate",value:function(D){ur(D.syncId)&&!ur(this.props.syncId)&&this.addListener(),!ur(D.syncId)&&ur(this.props.syncId)&&this.removeListener()}},{key:"componentWillUnmount",value:function(){this.clearDeferId(),ur(this.props.syncId)||this.removeListener(),this.cancelThrottledTriggerAfterMouseMove()}},{key:"cancelThrottledTriggerAfterMouseMove",value:function(){typeof this.triggeredAfterMouseMove.cancel=="function"&&this.triggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var D=pl(this.props.children,Vf);if(D&&Vge(D.props.shared)){var G=D.props.shared?"axis":"item";return v.indexOf(G)>=0?G:p}return p}},{key:"getMouseInfo",value:function(D){if(!this.container)return null;var G=ole(this.container),W=ale(D,G),Y=this.inRange(W.chartX,W.chartY);if(!Y)return null;var ee=this.state,de=ee.xAxisMap,xe=ee.yAxisMap,Me=this.getTooltipEventType();if(Me!=="axis"&&de&&xe){var Ce=yc(de).scale,qe=yc(xe).scale,Ue=Ce&&Ce.invert?Ce.invert(W.chartX):null,ut=qe&&qe.invert?qe.invert(W.chartY):null;return mt(mt({},W),{},{xValue:Ue,yValue:ut})}var Be=jL(this.state,this.props.data,this.props.layout,Y);return Be?mt(mt({},W),Be):null}},{key:"getCursorRectangle",value:function(){var D=this.props.layout,G=this.state,W=G.activeCoordinate,Y=G.offset,ee=G.tooltipAxisBandSize,de=ee/2;return{stroke:"none",fill:"#ccc",x:D==="horizontal"?W.x-de:Y.left+.5,y:D==="horizontal"?Y.top+.5:W.y-de,width:D==="horizontal"?ee:Y.width-1,height:D==="horizontal"?Y.height-1:ee}}},{key:"getCursorPoints",value:function(){var D=this.props.layout,G=this.state,W=G.activeCoordinate,Y=G.offset,ee,de,xe,Me;if(D==="horizontal")ee=W.x,xe=ee,de=Y.top,Me=Y.top+Y.height;else if(D==="vertical")de=W.y,Me=de,ee=Y.left,xe=Y.left+Y.width;else if(!ur(W.cx)||!ur(W.cy))if(D==="centric"){var Ce=W.cx,qe=W.cy,Ue=W.innerRadius,ut=W.outerRadius,Be=W.angle,bt=Zi(Ce,qe,Ue,Be),kt=Zi(Ce,qe,ut,Be);ee=bt.x,de=bt.y,xe=kt.x,Me=kt.y}else{var He=W.cx,nt=W.cy,gt=W.radius,xt=W.startAngle,zt=W.endAngle,Vt=Zi(He,nt,gt,xt),Zt=Zi(He,nt,gt,zt);return{points:[Vt,Zt],cx:He,cy:nt,radius:gt,startAngle:xt,endAngle:zt}}return[{x:ee,y:de},{x:xe,y:Me}]}},{key:"inRange",value:function(D,G){var W=this.props.layout;if(W==="horizontal"||W==="vertical"){var Y=this.state.offset,ee=D>=Y.left&&D<=Y.left+Y.width&&G>=Y.top&&G<=Y.top+Y.height;return ee?{x:D,y:G}:null}var de=this.state,xe=de.angleAxisMap,Me=de.radiusAxisMap;if(xe&&Me){var Ce=yc(xe);return KR({x:D,y:G},Ce)}return null}},{key:"parseEventsOfWrapper",value:function(){var D=this.props.children,G=this.getTooltipEventType(),W=pl(D,Vf),Y={};W&&G==="axis"&&(W.props.trigger==="click"?Y={onClick:this.handleClick}:Y={onMouseEnter:this.handleMouseEnter,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd});var ee=K0(this.props,this.handleOuterEvent);return mt(mt({},ee),Y)}},{key:"addListener",value:function(){Xo.on(B2,this.handleReceiveSyncEvent),Xo.setMaxListeners&&Xo._maxListeners&&Xo.setMaxListeners(Xo._maxListeners+1)}},{key:"removeListener",value:function(){Xo.removeListener(B2,this.handleReceiveSyncEvent),Xo.setMaxListeners&&Xo._maxListeners&&Xo.setMaxListeners(Xo._maxListeners-1)}},{key:"triggerSyncEvent",value:function(D){var G=this.props.syncId;ur(G)||Xo.emit(B2,G,this.uniqueChartId,D)}},{key:"applySyncEvent",value:function(D){var G=this.props,W=G.layout,Y=G.syncMethod,ee=this.state.updateId,de=D.dataStartIndex,xe=D.dataEndIndex;if(!ur(D.dataStartIndex)||!ur(D.dataEndIndex))this.setState(mt({dataStartIndex:de,dataEndIndex:xe},L({props:this.props,dataStartIndex:de,dataEndIndex:xe,updateId:ee},this.state)));else if(ur(D.activeTooltipIndex))this.setState(D);else{var Me=D.chartX,Ce=D.chartY,qe=D.activeTooltipIndex,Ue=this.state,ut=Ue.offset,Be=Ue.tooltipTicks;if(!ut)return;if(typeof Y=="function")qe=Y(Be,D);else if(Y==="value"){qe=-1;for(var bt=0;bt<Be.length;bt++)if(Be[bt].value===D.activeLabel){qe=bt;break}}var kt=mt(mt({},ut),{},{x:ut.left,y:ut.top}),He=Math.min(Me,kt.x+kt.width),nt=Math.min(Ce,kt.y+kt.height),gt=Be[qe]&&Be[qe].value,xt=lF(this.state,this.props.data,qe),zt=Be[qe]?{x:W==="horizontal"?Be[qe].coordinate:He,y:W==="horizontal"?nt:Be[qe].coordinate}:aF;this.setState(mt(mt({},D),{},{activeLabel:gt,activeCoordinate:zt,activePayload:xt,activeTooltipIndex:qe}))}}},{key:"filterFormatItem",value:function(D,G,W){for(var Y=this.state.formattedGraphicalItems,ee=0,de=Y.length;ee<de;ee++){var xe=Y[ee];if(xe.item===D||xe.props.key===D.key||G===Lc(xe.item.type)&&W===xe.childIndex)return xe}return null}},{key:"renderAxis",value:function(D,G,W,Y){var ee=this.props,de=ee.width,xe=ee.height;return Ze.createElement(mg,qf({},D,{className:"recharts-".concat(D.axisType," ").concat(D.axisType),key:G.key||"".concat(W,"-").concat(Y),viewBox:{x:0,y:0,width:de,height:xe},ticksGenerator:this.axesTicksGenerator}))}},{key:"renderClipPath",value:function(){var D=this.clipPathId,G=this.state.offset,W=G.left,Y=G.top,ee=G.height,de=G.width;return Ze.createElement("defs",null,Ze.createElement("clipPath",{id:D},Ze.createElement("rect",{x:W,y:Y,height:ee,width:de})))}},{key:"getXScales",value:function(){var D=this.state.xAxisMap;return D?Object.entries(D).reduce(function(G,W){var Y=LL(W,2),ee=Y[0],de=Y[1];return mt(mt({},G),{},cr({},ee,de.scale))},{}):null}},{key:"getYScales",value:function(){var D=this.state.yAxisMap;return D?Object.entries(D).reduce(function(G,W){var Y=LL(W,2),ee=Y[0],de=Y[1];return mt(mt({},G),{},cr({},ee,de.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(D){var G,W;return(G=this.state.xAxisMap)===null||G===void 0||(W=G[D])===null||W===void 0?void 0:W.scale}},{key:"getYScaleByAxisId",value:function(D){var G,W;return(G=this.state.yAxisMap)===null||G===void 0||(W=G[D])===null||W===void 0?void 0:W.scale}},{key:"getItemByXY",value:function(D){var G=this.state.formattedGraphicalItems;if(G&&G.length)for(var W=0,Y=G.length;W<Y;W++){var ee=G[W],de=ee.props,xe=ee.item,Me=Lc(xe.type);if(Me==="Bar"){var Ce=(de.data||[]).find(function(Ue){return Bde(D,Ue)});if(Ce)return{graphicalItem:ee,payload:Ce}}else if(Me==="RadialBar"){var qe=(de.data||[]).find(function(Ue){return KR(D,Ue)});if(qe)return{graphicalItem:ee,payload:qe}}}return null}},{key:"render",value:function(){var D=this;if(!CO(this))return null;var G=this.props,W=G.children,Y=G.className,ee=G.width,de=G.height,xe=G.style,Me=G.compact,Ce=G.title,qe=G.desc,Ue=zL(G,tye),ut=en(Ue),Be={CartesianGrid:{handler:this.renderGrid,once:!0},ReferenceArea:{handler:this.renderReferenceElement},ReferenceLine:{handler:this.renderReferenceElement},ReferenceDot:{handler:this.renderReferenceElement},XAxis:{handler:this.renderXAxis},YAxis:{handler:this.renderYAxis},Brush:{handler:this.renderBrush,once:!0},Bar:{handler:this.renderGraphicChild},Line:{handler:this.renderGraphicChild},Area:{handler:this.renderGraphicChild},Radar:{handler:this.renderGraphicChild},RadialBar:{handler:this.renderGraphicChild},Scatter:{handler:this.renderGraphicChild},Pie:{handler:this.renderGraphicChild},Funnel:{handler:this.renderGraphicChild},Tooltip:{handler:this.renderCursor,once:!0},PolarGrid:{handler:this.renderPolarGrid,once:!0},PolarAngleAxis:{handler:this.renderPolarAxis},PolarRadiusAxis:{handler:this.renderPolarAxis},Customized:{handler:this.renderCustomized}};if(Me)return Ze.createElement(qS,qf({},ut,{width:ee,height:de,title:Ce,desc:qe}),this.renderClipPath(),IO(W,Be));if(this.props.accessibilityLayer){var bt,kt;ut.tabIndex=(bt=0)!==null&&bt!==void 0?bt:this.props.tabIndex,ut.role=(kt="img")!==null&&kt!==void 0?kt:this.props.role,ut.onKeyDown=function(nt){D.accessibilityManager.keyboardEvent(nt)},ut.onFocus=function(){D.accessibilityManager.focus()}}var He=this.parseEventsOfWrapper();return Ze.createElement("div",qf({className:Mn("recharts-wrapper",Y),style:mt({position:"relative",cursor:"default",width:ee,height:de},xe)},He,{ref:function(gt){D.container=gt},role:"region"}),Ze.createElement(qS,qf({},ut,{width:ee,height:de,title:Ce,desc:qe}),this.renderClipPath(),IO(W,Be)),this.renderLegend(),this.renderTooltip())}}]),R}(Ke.Component),cr(r,"displayName",i),cr(r,"defaultProps",mt({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},P)),cr(r,"getDerivedStateFromProps",function(k,N){var R=k.data,j=k.children,D=k.width,G=k.height,W=k.layout,Y=k.stackOffset,ee=k.margin;if(ur(N.updateId)){var de=UL(k);return mt(mt(mt({},de),{},{updateId:0},L(mt(mt({props:k},de),{},{updateId:0}),N)),{},{prevData:R,prevWidth:D,prevHeight:G,prevLayout:W,prevStackOffset:Y,prevMargin:ee,prevChildren:j})}if(R!==N.prevData||D!==N.prevWidth||G!==N.prevHeight||W!==N.prevLayout||Y!==N.prevStackOffset||!td(ee,N.prevMargin)){var xe=UL(k),Me={chartX:N.chartX,chartY:N.chartY,isTooltipActive:N.isTooltipActive},Ce=mt(mt({},jL(N,R,W)),{},{updateId:N.updateId+1}),qe=mt(mt(mt({},xe),Me),Ce);return mt(mt(mt({},qe),L(mt({props:k},qe),N)),{},{prevData:R,prevWidth:D,prevHeight:G,prevLayout:W,prevStackOffset:Y,prevMargin:ee,prevChildren:j})}if(!AB(j,N.prevChildren)){var Ue=!ur(R),ut=Ue?N.updateId:N.updateId+1;return mt(mt({updateId:ut},L(mt(mt({props:k},N),{},{updateId:ut}),N)),{},{prevChildren:j})}return null}),cr(r,"renderActiveDot",function(k,N){var R;return Ke.isValidElement(k)?R=Ke.cloneElement(k,N):gr(k)?R=k(N):R=Ze.createElement(AM,N),Ze.createElement(ui,{className:"recharts-active-dot",key:N.key},R)}),r},Cye=Mye({chartName:"LineChart",GraphicalChild:$y,axisComponents:[{axisType:"xAxis",AxisComp:nb},{axisType:"yAxis",AxisComp:ib}],formatAxisMap:ume});function Pye({weatherData:e}){const[t,r]=Ke.useState([]);return Ke.useEffect(()=>{console.log(e);const i=e==null?void 0:e.list.map(c=>{const p=new Date(c.dt_txt).toLocaleString("en-US",{weekday:"short"});return{cm:c.rain?c.rain["3h"]:0,time:p}});r(i)},[e]),ze.jsxs("div",{children:[ze.jsx("div",{className:"header",children:ze.jsx("span",{className:"title",children:"Chance of rain"})}),ze.jsx("div",{className:"chart",children:ze.jsxs(Cye,{width:400,height:300,data:t,margin:{top:5,right:30,left:20,bottom:5},children:[ze.jsx(kM,{strokeDasharray:"3"}),ze.jsx(nb,{dataKey:"time"}),ze.jsx(ib,{}),ze.jsx(bd,{}),ze.jsx($y,{type:"monotone",dataKey:"cm",stroke:"#82ca9d",dot:null})]})})]})}const Iye="6f2dc78206339e3acb507b37ab1006e8",kye=`https://api.openweathermap.org/data/2.5/weather?lat=_lat_&lon=_lon_&appid=${Iye}`;function Oye({savedCities:e,setCity:t,setSavedCities:r}){const[i,c]=Ke.useState(!1),[u,p]=Ke.useState([]),o=Ke.useRef(null);function v(T,P){const $=[...P],L=$.findIndex(k=>k.city===T.city&&k.country===T.country);L===-1?$.push(T):$.splice(L,1),p($)}function w(T){T?(o.current.style.width="0",o.current.style.height="0"):(o.current.style.width="120px",o.current.style.height="auto"),c(!T)}function A(T,P){let $=[...P];$=$.filter(L=>T.findIndex(k=>k.city!==L.city||k.country!==L.country)!==-1),r($)}return ze.jsxs("div",{children:[ze.jsxs("div",{className:"saved-header",children:[ze.jsx("span",{children:"Saved Cities"}),ze.jsxs("div",{className:`delete-btn ${i?"active-delete-btn":""}`,onClick:()=>w(i),children:[ze.jsx("div",{className:"final-delete",ref:o,onClick:()=>A(u,e),children:"Delete Selected"}),ze.jsx(B7,{})]})]}),ze.jsx("div",{className:"cards-container",children:e.map(T=>ze.jsx(Dye,{city:T,setCity:t,activateDelete:i,addToDeleteList:v,deleteList:u}))})]})}function Dye({city:e,setCity:t,activateDelete:r,addToDeleteList:i,deleteList:c}){const[u,p]=Ke.useState(null);return Ke.useEffect(()=>{try{hg.get(kye.replace("_lat_",e.latitude).replace("_lon_",e.longitude)).then(o=>{console.log(o.data),p(o.data)})}catch(o){console.error(o)}},[]),ze.jsxs("div",{className:`city-card ${r?"active-border":""} ${c.find(o=>o.city===e.city&&o.country===e.country)?"red-border":""}`,onClick:r?()=>i(e,c):()=>t(e),children:[ze.jsxs("div",{className:"left-card card-content",children:[ze.jsx("span",{children:e.country}),ze.jsx("span",{children:e.city}),ze.jsx("span",{children:u==null?void 0:u.weather[0].description})]}),ze.jsxs("div",{className:"right-card card-content",children:[ze.jsx("div",{className:"img-cntr",children:ze.jsx("img",{src:W0[u==null?void 0:u.weather[0].icon]})}),ze.jsxs("span",{children:[u?Math.round(u.main.temp-273.15):"..."," ",ze.jsx("sup",{children:"°c"})," "]})]})]})}const Rye="6f2dc78206339e3acb507b37ab1006e8",Lye=`https://api.openweathermap.org/data/2.5/forecast?lat=_lat_&lon=_lon_&appid=${Rye}`,GL="https://wft-geo-db.p.rapidapi.com/v1/geo/cities";function zye(){const[e,t]=Ke.useState(null),[r,i]=Ke.useState(!1),[c,u]=Ke.useState(null),[p,o]=Ke.useState([]),[v,w]=Ke.useState("dark");function A(P){if(P.trim()==="")return!1;console.log("handleCitySearch"),hg.get(GL+`?namePrefix=${P}&sort=population`,{headers:{"x-rapidapi-key":"853c2f7e4cmshba1862047d27a1cp1a7f7fjsnb7acc43563a0","x-rapidapi-host":"wft-geo-db.p.rapidapi.com"}}).then($=>{console.log($.data),$.data.data.length>0?i($.data.data.slice(0,5)):i([])})}Ke.useEffect(()=>{i(!1);try{hg.get(Lye.replace("_lat_",e.latitude).replace("_lon_",e.longitude)).then(P=>{u(P.data),console.log(P.data)})}catch(P){console.error(P)}},[e]),Ke.useEffect(()=>{if(localStorage.getItem("location")){let $=localStorage.getItem("location");$=JSON.parse($),t($)}else navigator.geolocation&&!e?navigator.geolocation.getCurrentPosition(function($){let L=$.coords.latitude>0?`+${$.coords.latitude}`:`-${$.coords.latitude}`,k=$.coords.longitude>0?`+${$.coords.longitude}`:`-${$.coords.longitude}`;console.log("Latitude:",L),console.log("Longitude:",k),hg.get(GL,{params:{location:L+k,sort:"population"},headers:{"x-rapidapi-key":"853c2f7e4cmshba1862047d27a1cp1a7f7fjsnb7acc43563a0","x-rapidapi-host":"wft-geo-db.p.rapidapi.com"}}).then(N=>{t(N.data.data[0]),localStorage.setItem("location",JSON.stringify(N.data.data[0]))})},function($){console.error("Error retrieving location:",$)}):console.log("Geolocation is not supported by this browser.");let P=localStorage.getItem("saved-cities");P&&(P=JSON.parse(P),o(P))},[]);function T(P,$){console.log("clicked");const L=[...$],k=L.findIndex(N=>P.city===N.city&&N.country===P.country);k===-1?L.push(P):L.splice(k,1),o(L),localStorage.setItem("saved-cities",JSON.stringify(L))}return ze.jsxs("div",{children:[ze.jsx(W7,{handleCitySearch:A,citiesOptions:r,setCitiesOptions:i,setCity:t,city:e,saveCity:T,savedCities:p,theme:v,setTheme:w}),ze.jsxs("div",{className:"ele-grid",children:[ze.jsx("div",{className:"card-1",children:ze.jsx(H7,{weatherData:c})}),ze.jsx("div",{className:"card-2",children:ze.jsx(Pye,{weatherData:c})}),ze.jsx("div",{className:"card-3",children:ze.jsx(mW,{city:e,savedCities:p,theme:v})}),ze.jsx("div",{className:"card-4",children:ze.jsx(Oye,{savedCities:p,setCity:t,setSavedCities:o})})]})]})}const Bye=pV([{path:"/react-weather/",element:ze.jsx(zye,{})}]);function $ye(){return ze.jsx("div",{className:"app",children:ze.jsx(uV,{router:Bye})})}F2.createRoot(document.getElementById("root")).render(ze.jsx(Ze.StrictMode,{children:ze.jsx($ye,{})}));
